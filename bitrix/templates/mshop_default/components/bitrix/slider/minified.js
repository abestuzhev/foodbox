(function (a) {
    var b, c = 0, d = ["webkit", "moz"], e = window.requestAnimationFrame, f = window.cancelAnimationFrame;
    for (; c < d.length && !e; c++) {
        e = window[d[c] + "RequestAnimationFrame"];
        f = f || window[d[c] + "CancelAnimationFrame"] || window[d[c] + "CancelRequestAnimationFrame"]
    }
    function g() {
        if (b) {
            e(g);
            jQuery.fx.tick()
        }
    }

    if (e) {
        window.requestAnimationFrame = e;
        window.cancelAnimationFrame = f;
        jQuery.fx.timer = function (a) {
            if (a() && jQuery.timers.push(a) && !b) {
                b = true;
                g()
            }
        };
        jQuery.fx.stop = function () {
            b = false
        }
    } else {
        window.requestAnimationFrame = function (a, b) {
            var d = (new Date).getTime(), e = Math.max(0, 16 - (d - c)), f = window.setTimeout(function () {
                a(d + e)
            }, e);
            c = d + e;
            return f
        };
        window.cancelAnimationFrame = function (a) {
            clearTimeout(a)
        }
    }
})(jQuery);
(function (a) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], a)
    } else {
        a(jQuery)
    }
})(function (a, b) {
    var c = 0, d = Array.prototype.slice, e = a.cleanData;
    a.cleanData = function (b) {
        for (var c = 0, d; (d = b[c]) != null; c++) {
            try {
                a(d).triggerHandler("remove")
            } catch (a) {
            }
        }
        e(b)
    };
    a.widget = function (b, c, d) {
        var e, f, g, h, i = {}, j = b.split(".")[0];
        b = b.split(".")[1];
        e = j + "-" + b;
        if (!d) {
            d = c;
            c = a.Widget
        }
        a.expr[":"][e.toLowerCase()] = function (b) {
            return !!a.data(b, e)
        };
        a[j] = a[j] || {};
        f = a[j][b];
        g = a[j][b] = function (a, b) {
            if (!this._createWidget) {
                return new g(a, b)
            }
            if (arguments.length) {
                this._createWidget(a, b)
            }
        };
        a.extend(g, f, {version: d.version, _proto: a.extend({}, d), _childConstructors: []});
        h = new c;
        h.options = a.widget.extend({}, h.options);
        a.each(d, function (b, d) {
            if (!a.isFunction(d)) {
                i[b] = d;
                return
            }
            i[b] = function () {
                var a = function () {
                    return c.prototype[b].apply(this, arguments)
                }, e = function (a) {
                    return c.prototype[b].apply(this, a)
                };
                return function () {
                    var b = this._super, c = this._superApply, f;
                    this._super = a;
                    this._superApply = e;
                    f = d.apply(this, arguments);
                    this._super = b;
                    this._superApply = c;
                    return f
                }
            }()
        });
        g.prototype = a.widget.extend(h, {widgetEventPrefix: f ? h.widgetEventPrefix : b}, i, {
            constructor: g,
            namespace: j,
            widgetName: b,
            widgetFullName: e
        });
        if (f) {
            a.each(f._childConstructors, function (b, c) {
                var d = c.prototype;
                a.widget(d.namespace + "." + d.widgetName, g, c._proto)
            });
            delete f._childConstructors
        } else {
            c._childConstructors.push(g)
        }
        a.widget.bridge(b, g)
    };
    a.widget.extend = function (c) {
        var e = d.call(arguments, 1), f = 0, g = e.length, h, i;
        for (; f < g; f++) {
            for (h in e[f]) {
                i = e[f][h];
                if (e[f].hasOwnProperty(h) && i !== b) {
                    if (a.isPlainObject(i)) {
                        c[h] = a.isPlainObject(c[h]) ? a.widget.extend({}, c[h], i) : a.widget.extend({}, i)
                    } else {
                        c[h] = i
                    }
                }
            }
        }
        return c
    };
    a.widget.bridge = function (c, e) {
        var f = e.prototype.widgetFullName || c;
        a.fn[c] = function (g) {
            var h = typeof g === "string", i = d.call(arguments, 1), j = this;
            g = !h && i.length ? a.widget.extend.apply(null, [g].concat(i)) : g;
            if (h) {
                this.each(function () {
                    var d, e = a.data(this, f);
                    if (!e) {
                        return a.error("cannot call methods on " + c + " prior to initialization; " + "attempted to call method '" + g + "'")
                    }
                    if (!a.isFunction(e[g]) || g.charAt(0) === "_") {
                        return a.error("no such method '" + g + "' for " + c + " widget instance")
                    }
                    d = e[g].apply(e, i);
                    if (d !== e && d !== b) {
                        j = d && d.jquery ? j.pushStack(d.get()) : d;
                        return false
                    }
                })
            } else {
                this.each(function () {
                    var b = a.data(this, f);
                    if (b) {
                        b.option(g || {})._init()
                    } else {
                        a.data(this, f, new e(g, this))
                    }
                })
            }
            return j
        }
    };
    a.Widget = function () {
    };
    a.Widget._childConstructors = [];
    a.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {disabled: false, create: null},
        _createWidget: function (b, d) {
            d = a(d || this.defaultElement || this)[0];
            this.element = a(d);
            this.uuid = c++;
            this.eventNamespace = "." + this.widgetName + this.uuid;
            this.options = a.widget.extend({}, this.options, this._getCreateOptions(), b);
            this.bindings = a();
            this.hoverable = a();
            this.focusable = a();
            if (d !== this) {
                a.data(d, this.widgetFullName, this);
                this._on(true, this.element, {
                    remove: function (a) {
                        if (a.target === d) {
                            this.destroy()
                        }
                    }
                });
                this.document = a(d.style ? d.ownerDocument : d.document || d);
                this.window = a(this.document[0].defaultView || this.document[0].parentWindow)
            }
            this._create();
            this._trigger("create", null, this._getCreateEventData());
            this._init()
        },
        _getCreateOptions: a.noop,
        _getCreateEventData: a.noop,
        _create: a.noop,
        _init: a.noop,
        destroy: function () {
            this._destroy();
            this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled");
            this.bindings.unbind(this.eventNamespace);
            this.hoverable.removeClass("ui-state-hover");
            this.focusable.removeClass("ui-state-focus")
        },
        _destroy: a.noop,
        widget: function () {
            return this.element
        },
        option: function (c, d) {
            var e = c, f, g, h;
            if (arguments.length === 0) {
                return a.widget.extend({}, this.options)
            }
            if (typeof c === "string") {
                e = {};
                f = c.split(".");
                c = f.shift();
                if (f.length) {
                    g = e[c] = a.widget.extend({}, this.options[c]);
                    for (h = 0; h < f.length - 1; h++) {
                        g[f[h]] = g[f[h]] || {};
                        g = g[f[h]]
                    }
                    c = f.pop();
                    if (d === b) {
                        return g[c] === b ? null : g[c]
                    }
                    g[c] = d
                } else {
                    if (d === b) {
                        return this.options[c] === b ? null : this.options[c]
                    }
                    e[c] = d
                }
            }
            this._setOptions(e);
            return this
        },
        _setOptions: function (a) {
            var b;
            for (b in a) {
                this._setOption(b, a[b])
            }
            return this
        },
        _setOption: function (a, b) {
            this.options[a] = b;
            if (a === "disabled") {
                this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!b).attr("aria-disabled", b);
                this.hoverable.removeClass("ui-state-hover");
                this.focusable.removeClass("ui-state-focus")
            }
            return this
        },
        enable: function () {
            return this._setOption("disabled", false)
        },
        disable: function () {
            return this._setOption("disabled", true)
        },
        _on: function (b, c, d) {
            var e, f = this;
            if (typeof b !== "boolean") {
                d = c;
                c = b;
                b = false
            }
            if (!d) {
                d = c;
                c = this.element;
                e = this.widget()
            } else {
                c = e = a(c);
                this.bindings = this.bindings.add(c)
            }
            a.each(d, function (d, g) {
                function h() {
                    if (!b && (f.options.disabled === true || a(this).hasClass("ui-state-disabled"))) {
                        return
                    }
                    return (typeof g === "string" ? f[g] : g).apply(f, arguments)
                }

                if (typeof g !== "string") {
                    h.guid = g.guid = g.guid || h.guid || a.guid++
                }
                var i = d.match(/^(\w+)\s*(.*)$/), j = i[1] + f.eventNamespace, k = i[2];
                if (k) {
                    e.delegate(k, j, h)
                } else {
                    c.bind(j, h)
                }
            })
        },
        _off: function (a, b) {
            b = (b || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace;
            a.unbind(b).undelegate(b)
        },
        _delay: function (a, b) {
            function c() {
                return (typeof a === "string" ? d[a] : a).apply(d, arguments)
            }

            var d = this;
            return setTimeout(c, b || 0)
        },
        _hoverable: function (b) {
            this.hoverable = this.hoverable.add(b);
            this._on(b, {
                mouseenter: function (b) {
                    a(b.currentTarget).addClass("ui-state-hover")
                }, mouseleave: function (b) {
                    a(b.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function (b) {
            this.focusable = this.focusable.add(b);
            this._on(b, {
                focusin: function (b) {
                    a(b.currentTarget).addClass("ui-state-focus")
                }, focusout: function (b) {
                    a(b.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function (b, c, d) {
            var e, f, g = this.options[b];
            d = d || {};
            c = a.Event(c);
            c.type = (b === this.widgetEventPrefix ? b : this.widgetEventPrefix + b).toLowerCase();
            c.target = this.element[0];
            f = c.originalEvent;
            if (f) {
                for (e in f) {
                    if (!(e in c)) {
                        c[e] = f[e]
                    }
                }
            }
            this.element.trigger(c, d);
            return !(a.isFunction(g) && g.apply(this.element[0], [c].concat(d)) === false || c.isDefaultPrevented())
        }
    };
    a.each({show: "fadeIn", hide: "fadeOut"}, function (b, c) {
        a.Widget.prototype["_" + b] = function (d, e, f) {
            if (typeof e === "string") {
                e = {effect: e}
            }
            var g, h = !e ? b : e === true || typeof e === "number" ? c : e.effect || c;
            e = e || {};
            if (typeof e === "number") {
                e = {duration: e}
            }
            g = !a.isEmptyObject(e);
            e.complete = f;
            if (e.delay) {
                d.delay(e.delay)
            }
            if (g && a.effects && a.effects.effect[h]) {
                d[b](e)
            } else if (h !== b && d[h]) {
                d[h](e.duration, e.easing, f)
            } else {
                d.queue(function (c) {
                    a(this)[b]();
                    if (f) {
                        f.call(d[0])
                    }
                    c()
                })
            }
        }
    })
});
(function (a) {
    "use strict";
    if (typeof define === "function" && define.amd) {
        define(["jquery"], a)
    } else {
        a(window.jQuery)
    }
})(function (a) {
    "use strict";
    var b = 0;
    a.ajaxTransport("iframe", function (c) {
        if (c.async) {
            var d, e, f;
            return {
                send: function (g, h) {
                    d = a('<form style="display:none;"></form>');
                    d.attr("accept-charset", c.formAcceptCharset);
                    f = /\?/.test(c.url) ? "&" : "?";
                    if (c.type === "DELETE") {
                        c.url = c.url + f + "_method=DELETE";
                        c.type = "POST"
                    } else if (c.type === "PUT") {
                        c.url = c.url + f + "_method=PUT";
                        c.type = "POST"
                    } else if (c.type === "PATCH") {
                        c.url = c.url + f + "_method=PATCH";
                        c.type = "POST"
                    }
                    e = a('<iframe src="javascript:false;" name="iframe-transport-' + (b += 1) + '"></iframe>').bind("load", function () {
                        var b, f = a.isArray(c.paramName) ? c.paramName : [c.paramName];
                        e.unbind("load").bind("load", function () {
                            var b;
                            try {
                                b = e.contents();
                                if (!b.length || !b[0].firstChild) {
                                    throw new Error
                                }
                            } catch (a) {
                                b = undefined
                            }
                            h(200, "success", {iframe: b});
                            a('<iframe src="javascript:false;"></iframe>').appendTo(d);
                            d.remove()
                        });
                        d.prop("target", e.prop("name")).prop("action", c.url).prop("method", c.type);
                        if (c.formData) {
                            a.each(c.formData, function (b, c) {
                                a('<input type="hidden"/>').prop("name", c.name).val(c.value).appendTo(d)
                            })
                        }
                        if (c.fileInput && c.fileInput.length && c.type === "POST") {
                            b = c.fileInput.clone();
                            c.fileInput.after(function (a) {
                                return b[a]
                            });
                            if (c.paramName) {
                                c.fileInput.each(function (b) {
                                    a(this).prop("name", f[b] || c.paramName)
                                })
                            }
                            d.append(c.fileInput).prop("enctype", "multipart/form-data").prop("encoding", "multipart/form-data")
                        }
                        d.submit();
                        if (b && b.length) {
                            c.fileInput.each(function (c, d) {
                                var e = a(b[c]);
                                a(d).prop("name", e.prop("name"));
                                e.replaceWith(d)
                            })
                        }
                    });
                    d.append(e).appendTo(document.body)
                }, abort: function () {
                    if (e) {
                        e.unbind("load").prop("src", "javascript".concat(":false;"))
                    }
                    if (d) {
                        d.remove()
                    }
                }
            }
        }
    });
    a.ajaxSetup({
        converters: {
            "iframe text": function (b) {
                return b && a(b[0].body).text()
            }, "iframe json": function (b) {
                return b && a.parseJSON(a(b[0].body).text())
            }, "iframe html": function (b) {
                return b && a(b[0].body).html()
            }, "iframe script": function (b) {
                return b && a.globalEval(a(b[0].body).text())
            }
        }
    })
});
(function (a) {
    "use strict";
    if (typeof define === "function" && define.amd) {
        define(["jquery", "jquery.ui.widget"], a)
    } else {
        a(window.jQuery)
    }
})(function (a) {
    "use strict";
    a.support.xhrFileUpload = !!(window.XMLHttpRequestUpload && window.FileReader);
    a.support.xhrFormDataFileUpload = !!window.FormData;
    a.widget("blueimp.fileupload", {
        options: {
            dropZone: a(document),
            pasteZone: a(document),
            fileInput: undefined,
            replaceFileInput: true,
            paramName: undefined,
            singleFileUploads: true,
            limitMultiFileUploads: undefined,
            sequentialUploads: false,
            limitConcurrentUploads: undefined,
            forceIframeTransport: false,
            redirect: undefined,
            redirectParamName: undefined,
            postMessage: undefined,
            multipart: true,
            maxChunkSize: undefined,
            uploadedBytes: undefined,
            recalculateProgress: true,
            progressInterval: 100,
            bitrateInterval: 500,
            autoUpload: true,
            formData: function (a) {
                return a.serializeArray()
            },
            add: function (b, c) {
                if (c.autoUpload || c.autoUpload !== false && (a(this).data("blueimp-fileupload") || a(this).data("fileupload")).options.autoUpload) {
                    c.submit()
                }
            },
            processData: false,
            contentType: false,
            cache: false
        },
        _refreshOptionsList: ["fileInput", "dropZone", "pasteZone", "multipart", "forceIframeTransport"],
        _BitrateTimer: function () {
            this.timestamp = (new Date).getTime();
            this.loaded = 0;
            this.bitrate = 0;
            this.getBitrate = function (a, b, c) {
                var d = a - this.timestamp;
                if (!this.bitrate || !c || d > c) {
                    this.bitrate = (b - this.loaded) * (1e3 / d) * 8;
                    this.loaded = b;
                    this.timestamp = a
                }
                return this.bitrate
            }
        },
        _isXHRUpload: function (b) {
            return !b.forceIframeTransport && (!b.multipart && a.support.xhrFileUpload || a.support.xhrFormDataFileUpload)
        },
        _getFormData: function (b) {
            var c;
            if (typeof b.formData === "function") {
                return b.formData(b.form)
            }
            if (a.isArray(b.formData)) {
                return b.formData
            }
            if (a.type(b.formData) === "object") {
                c = [];
                a.each(b.formData, function (a, b) {
                    c.push({name: a, value: b})
                });
                return c
            }
            return []
        },
        _getTotal: function (b) {
            var c = 0;
            a.each(b, function (a, b) {
                c += b.size || 1
            });
            return c
        },
        _initProgressObject: function (b) {
            var c = {loaded: 0, total: 0, bitrate: 0};
            if (b._progress) {
                a.extend(b._progress, c)
            } else {
                b._progress = c
            }
        },
        _initResponseObject: function (a) {
            var b;
            if (a._response) {
                for (b in a._response) {
                    if (a._response.hasOwnProperty(b)) {
                        delete a._response[b]
                    }
                }
            } else {
                a._response = {}
            }
        },
        _onProgress: function (a, b) {
            if (a.lengthComputable) {
                var c = (new Date).getTime(), d;
                if (b._time && b.progressInterval && c - b._time < b.progressInterval && a.loaded !== a.total) {
                    return
                }
                b._time = c;
                d = Math.floor(a.loaded / a.total * (b.chunkSize || b._progress.total)) + (b.uploadedBytes || 0);
                this._progress.loaded += d - b._progress.loaded;
                this._progress.bitrate = this._bitrateTimer.getBitrate(c, this._progress.loaded, b.bitrateInterval);
                b._progress.loaded = b.loaded = d;
                b._progress.bitrate = b.bitrate = b._bitrateTimer.getBitrate(c, d, b.bitrateInterval);
                this._trigger("progress", a, b);
                this._trigger("progressall", a, this._progress)
            }
        },
        _initProgressListener: function (b) {
            var c = this, d = b.xhr ? b.xhr() : a.ajaxSettings.xhr();
            if (d.upload) {
                a(d.upload).bind("progress", function (a) {
                    var d = a.originalEvent;
                    a.lengthComputable = d.lengthComputable;
                    a.loaded = d.loaded;
                    a.total = d.total;
                    c._onProgress(a, b)
                });
                b.xhr = function () {
                    return d
                }
            }
        },
        _initXHRData: function (b) {
            var c, d = b.files[0], e = b.multipart || !a.support.xhrFileUpload, f = b.paramName[0];
            b.headers = b.headers || {};
            if (b.contentRange) {
                b.headers["Content-Range"] = b.contentRange
            }
            if (!e) {
                b.headers["Content-Disposition"] = 'attachment; filename="' + encodeURI(d.name) + '"';
                b.contentType = d.type;
                b.data = b.blob || d
            } else if (a.support.xhrFormDataFileUpload) {
                if (b.postMessage) {
                    c = this._getFormData(b);
                    if (b.blob) {
                        c.push({name: f, value: b.blob})
                    } else {
                        a.each(b.files, function (a, d) {
                            c.push({name: b.paramName[a] || f, value: d})
                        })
                    }
                } else {
                    if (b.formData instanceof FormData) {
                        c = b.formData
                    } else {
                        c = new FormData;
                        a.each(this._getFormData(b), function (a, b) {
                            c.append(b.name, b.value)
                        })
                    }
                    if (b.blob) {
                        b.headers["Content-Disposition"] = 'attachment; filename="' + encodeURI(d.name) + '"';
                        c.append(f, b.blob, d.name)
                    } else {
                        a.each(b.files, function (a, d) {
                            if (window.Blob && d instanceof Blob || window.File && d instanceof File) {
                                c.append(b.paramName[a] || f, d, d.name)
                            }
                        })
                    }
                }
                b.data = c
            }
            b.blob = null
        },
        _initIframeSettings: function (b) {
            b.dataType = "iframe " + (b.dataType || "");
            b.formData = this._getFormData(b);
            if (b.redirect && a("<a></a>").prop("href", b.url).prop("host") !== location.host) {
                b.formData.push({name: b.redirectParamName || "redirect", value: b.redirect})
            }
        },
        _initDataSettings: function (a) {
            if (this._isXHRUpload(a)) {
                if (!this._chunkedUpload(a, true)) {
                    if (!a.data) {
                        this._initXHRData(a)
                    }
                    this._initProgressListener(a)
                }
                if (a.postMessage) {
                    a.dataType = "postmessage " + (a.dataType || "")
                }
            } else {
                this._initIframeSettings(a, "iframe")
            }
        },
        _getParamName: function (b) {
            var c = a(b.fileInput), d = b.paramName;
            if (!d) {
                d = [];
                c.each(function () {
                    var b = a(this), c = b.prop("name") || "files[]", e = (b.prop("files") || [1]).length;
                    while (e) {
                        d.push(c);
                        e -= 1
                    }
                });
                if (!d.length) {
                    d = [c.prop("name") || "files[]"]
                }
            } else if (!a.isArray(d)) {
                d = [d]
            }
            return d
        },
        _initFormSettings: function (b) {
            if (!b.form || !b.form.length) {
                b.form = a(b.fileInput.prop("form"));
                if (!b.form.length) {
                    b.form = a(this.options.fileInput.prop("form"))
                }
            }
            b.paramName = this._getParamName(b);
            if (!b.url) {
                b.url = b.form.prop("action") || location.href
            }
            b.type = (b.type || b.form.prop("method") || "").toUpperCase();
            if (b.type !== "POST" && b.type !== "PUT" && b.type !== "PATCH") {
                b.type = "POST"
            }
            if (!b.formAcceptCharset) {
                b.formAcceptCharset = b.form.attr("accept-charset")
            }
        },
        _getAJAXSettings: function (b) {
            var c = a.extend({}, this.options, b);
            this._initFormSettings(c);
            this._initDataSettings(c);
            return c
        },
        _getDeferredState: function (a) {
            if (a.state) {
                return a.state()
            }
            if (a.isResolved()) {
                return "resolved"
            }
            if (a.isRejected()) {
                return "rejected"
            }
            return "pending"
        },
        _enhancePromise: function (a) {
            a.success = a.done;
            a.error = a.fail;
            a.complete = a.always;
            return a
        },
        _getXHRPromise: function (b, c, d) {
            var e = a.Deferred(), f = e.promise();
            c = c || this.options.context || f;
            if (b === true) {
                e.resolveWith(c, d)
            } else if (b === false) {
                e.rejectWith(c, d)
            }
            f.abort = e.promise;
            return this._enhancePromise(f)
        },
        _addConvenienceMethods: function (a, b) {
            var c = this;
            b.submit = function () {
                if (this.state() !== "pending") {
                    b.jqXHR = this.jqXHR = c._trigger("submit", a, this) !== false && c._onSend(a, this)
                }
                return this.jqXHR || c._getXHRPromise()
            };
            b.abort = function () {
                if (this.jqXHR) {
                    return this.jqXHR.abort()
                }
                return c._getXHRPromise()
            };
            b.state = function () {
                if (this.jqXHR) {
                    return c._getDeferredState(this.jqXHR)
                }
            };
            b.progress = function () {
                return this._progress
            };
            b.response = function () {
                return this._response
            }
        },
        _getUploadedBytes: function (a) {
            var b = a.getResponseHeader("Range"), c = b && b.split("-"), d = c && c.length > 1 && parseInt(c[1], 10);
            return d && d + 1
        },
        _chunkedUpload: function (b, c) {
            var d = this, e = b.files[0], f = e.size, g = b.uploadedBytes = b.uploadedBytes || 0, h = b.maxChunkSize || f, i = e.slice || e.webkitSlice || e.mozSlice, j = a.Deferred(), k = j.promise(), l, m;
            if (!(this._isXHRUpload(b) && i && (g || h < f)) || b.data) {
                return false
            }
            if (c) {
                return true
            }
            if (g >= f) {
                e.error = "Uploaded bytes exceed file size";
                return this._getXHRPromise(false, b.context, [null, "error", e.error])
            }
            m = function () {
                var c = a.extend({}, b), k = c._progress.loaded;
                c.blob = i.call(e, g, g + h, e.type);
                c.chunkSize = c.blob.size;
                c.contentRange = "bytes " + g + "-" + (g + c.chunkSize - 1) + "/" + f;
                d._initXHRData(c);
                d._initProgressListener(c);
                l = (d._trigger("chunksend", null, c) !== false && a.ajax(c) || d._getXHRPromise(false, c.context)).done(function (e, h, i) {
                    g = d._getUploadedBytes(i) || g + c.chunkSize;
                    if (c._progress.loaded === k) {
                        d._onProgress(a.Event("progress", {
                            lengthComputable: true,
                            loaded: g - c.uploadedBytes,
                            total: g - c.uploadedBytes
                        }), c)
                    }
                    b.uploadedBytes = c.uploadedBytes = g;
                    c.result = e;
                    c.textStatus = h;
                    c.jqXHR = i;
                    d._trigger("chunkdone", null, c);
                    d._trigger("chunkalways", null, c);
                    if (g < f) {
                        m()
                    } else {
                        j.resolveWith(c.context, [e, h, i])
                    }
                }).fail(function (a, b, e) {
                    c.jqXHR = a;
                    c.textStatus = b;
                    c.errorThrown = e;
                    d._trigger("chunkfail", null, c);
                    d._trigger("chunkalways", null, c);
                    j.rejectWith(c.context, [a, b, e])
                })
            };
            this._enhancePromise(k);
            k.abort = function () {
                return l.abort()
            };
            m();
            return k
        },
        _beforeSend: function (a, b) {
            if (this._active === 0) {
                this._trigger("start");
                this._bitrateTimer = new this._BitrateTimer;
                this._progress.loaded = this._progress.total = 0;
                this._progress.bitrate = 0
            }
            this._initResponseObject(b);
            this._initProgressObject(b);
            b._progress.loaded = b.loaded = b.uploadedBytes || 0;
            b._progress.total = b.total = this._getTotal(b.files) || 1;
            b._progress.bitrate = b.bitrate = 0;
            this._active += 1;
            this._progress.loaded += b.loaded;
            this._progress.total += b.total
        },
        _onDone: function (b, c, d, e) {
            var f = e._progress.total, g = e._response;
            if (e._progress.loaded < f) {
                this._onProgress(a.Event("progress", {lengthComputable: true, loaded: f, total: f}), e)
            }
            g.result = e.result = b;
            g.textStatus = e.textStatus = c;
            g.jqXHR = e.jqXHR = d;
            this._trigger("done", null, e)
        },
        _onFail: function (a, b, c, d) {
            var e = d._response;
            if (d.recalculateProgress) {
                this._progress.loaded -= d._progress.loaded;
                this._progress.total -= d._progress.total
            }
            e.jqXHR = d.jqXHR = a;
            e.textStatus = d.textStatus = b;
            e.errorThrown = d.errorThrown = c;
            this._trigger("fail", null, d)
        },
        _onAlways: function (a, b, c, d) {
            this._trigger("always", null, d)
        },
        _onSend: function (b, c) {
            if (!c.submit) {
                this._addConvenienceMethods(b, c)
            }
            var d = this, e, f, g, h, i = d._getAJAXSettings(c), j = function () {
                d._sending += 1;
                i._bitrateTimer = new d._BitrateTimer;
                e = e || ((f || d._trigger("send", b, i) === false) && d._getXHRPromise(false, i.context, f) || d._chunkedUpload(i) || a.ajax(i)).done(function (a, b, c) {
                        d._onDone(a, b, c, i)
                    }).fail(function (a, b, c) {
                        d._onFail(a, b, c, i)
                    }).always(function (a, b, c) {
                        d._onAlways(a, b, c, i);
                        d._sending -= 1;
                        d._active -= 1;
                        if (i.limitConcurrentUploads && i.limitConcurrentUploads > d._sending) {
                            var e = d._slots.shift();
                            while (e) {
                                if (d._getDeferredState(e) === "pending") {
                                    e.resolve();
                                    break
                                }
                                e = d._slots.shift()
                            }
                        }
                        if (d._active === 0) {
                            d._trigger("stop")
                        }
                    });
                return e
            };
            this._beforeSend(b, i);
            if (this.options.sequentialUploads || this.options.limitConcurrentUploads && this.options.limitConcurrentUploads <= this._sending) {
                if (this.options.limitConcurrentUploads > 1) {
                    g = a.Deferred();
                    this._slots.push(g);
                    h = g.pipe(j)
                } else {
                    h = this._sequence = this._sequence.pipe(j, j)
                }
                h.abort = function () {
                    f = [undefined, "abort", "abort"];
                    if (!e) {
                        if (g) {
                            g.rejectWith(i.context, f)
                        }
                        return j()
                    }
                    return e.abort()
                };
                return this._enhancePromise(h)
            }
            return j()
        },
        _onAdd: function (b, c) {
            var d = this, e = true, f = a.extend({}, this.options, c), g = f.limitMultiFileUploads, h = this._getParamName(f), i, j, k, l;
            if (!(f.singleFileUploads || g) || !this._isXHRUpload(f)) {
                k = [c.files];
                i = [h]
            } else if (!f.singleFileUploads && g) {
                k = [];
                i = [];
                for (l = 0; l < c.files.length; l += g) {
                    k.push(c.files.slice(l, l + g));
                    j = h.slice(l, l + g);
                    if (!j.length) {
                        j = h
                    }
                    i.push(j)
                }
            } else {
                i = h
            }
            c.originalFiles = c.files;
            a.each(k || c.files, function (f, g) {
                var h = a.extend({}, c);
                h.files = k ? g : [g];
                h.paramName = i[f];
                d._initResponseObject(h);
                d._initProgressObject(h);
                d._addConvenienceMethods(b, h);
                e = d._trigger("add", b, h);
                return e
            });
            return e
        },
        _replaceFileInput: function (b) {
            var c = b.clone(true);
            a("<form></form>").append(c)[0].reset();
            b.after(c).detach();
            a.cleanData(b.unbind("remove"));
            this.options.fileInput = this.options.fileInput.map(function (a, d) {
                if (d === b[0]) {
                    return c[0]
                }
                return d
            });
            if (b[0] === this.element[0]) {
                this.element = c
            }
        },
        _handleFileTreeEntry: function (b, c) {
            var d = this, e = a.Deferred(), f = function (a) {
                if (a && !a.entry) {
                    a.entry = b
                }
                e.resolve([a])
            }, g;
            c = c || "";
            if (b.isFile) {
                if (b._file) {
                    b._file.relativePath = c;
                    e.resolve(b._file)
                } else {
                    b.file(function (a) {
                        a.relativePath = c;
                        e.resolve(a)
                    }, f)
                }
            } else if (b.isDirectory) {
                g = b.createReader();
                g.readEntries(function (a) {
                    d._handleFileTreeEntries(a, c + b.name + "/").done(function (a) {
                        e.resolve(a)
                    }).fail(f)
                }, f)
            } else {
                e.resolve([])
            }
            return e.promise()
        },
        _handleFileTreeEntries: function (b, c) {
            var d = this;
            return a.when.apply(a, a.map(b, function (a) {
                return d._handleFileTreeEntry(a, c)
            })).pipe(function () {
                return Array.prototype.concat.apply([], arguments)
            })
        },
        _getDroppedFiles: function (b) {
            b = b || {};
            var c = b.items;
            if (c && c.length && (c[0].webkitGetAsEntry || c[0].getAsEntry)) {
                return this._handleFileTreeEntries(a.map(c, function (a) {
                    var b;
                    if (a.webkitGetAsEntry) {
                        b = a.webkitGetAsEntry();
                        if (b) {
                            b._file = a.getAsFile()
                        }
                        return b
                    }
                    return a.getAsEntry()
                }))
            }
            return a.Deferred().resolve(a.makeArray(b.files)).promise()
        },
        _getSingleFileInputFiles: function (b) {
            b = a(b);
            var c = b.prop("webkitEntries") || b.prop("entries"), d, e;
            if (c && c.length) {
                return this._handleFileTreeEntries(c)
            }
            d = a.makeArray(b.prop("files"));
            if (!d.length) {
                e = b.prop("value");
                if (!e) {
                    return a.Deferred().resolve([]).promise()
                }
                d = [{name: e.replace(/^.*\\/, "")}]
            } else if (d[0].name === undefined && d[0].fileName) {
                a.each(d, function (a, b) {
                    b.name = b.fileName;
                    b.size = b.fileSize
                })
            }
            return a.Deferred().resolve(d).promise()
        },
        _getFileInputFiles: function (b) {
            if (!(b instanceof a) || b.length === 1) {
                return this._getSingleFileInputFiles(b)
            }
            return a.when.apply(a, a.map(b, this._getSingleFileInputFiles)).pipe(function () {
                return Array.prototype.concat.apply([], arguments)
            })
        },
        _onChange: function (b) {
            var c = this, d = {fileInput: a(b.target), form: a(b.target.form)};
            this._getFileInputFiles(d.fileInput).always(function (a) {
                d.files = a;
                if (c.options.replaceFileInput) {
                    c._replaceFileInput(d.fileInput)
                }
                if (c._trigger("change", b, d) !== false) {
                    c._onAdd(b, d)
                }
            })
        },
        _onPaste: function (b) {
            var c = b.originalEvent.clipboardData, d = c && c.items || [], e = {files: []};
            a.each(d, function (a, b) {
                var c = b.getAsFile && b.getAsFile();
                if (c) {
                    e.files.push(c)
                }
            });
            if (this._trigger("paste", b, e) === false || this._onAdd(b, e) === false) {
                return false
            }
        },
        _onDrop: function (a) {
            var b = this, c = a.dataTransfer = a.originalEvent.dataTransfer, d = {};
            if (c && c.files && c.files.length) {
                a.preventDefault()
            }
            this._getDroppedFiles(c).always(function (c) {
                d.files = c;
                if (b._trigger("drop", a, d) !== false) {
                    b._onAdd(a, d)
                }
            })
        },
        _onDragOver: function (b) {
            var c = b.dataTransfer = b.originalEvent.dataTransfer;
            if (this._trigger("dragover", b) === false) {
                return false
            }
            if (c && a.inArray("Files", c.types) !== -1) {
                c.dropEffect = "copy";
                b.preventDefault()
            }
        },
        _initEventHandlers: function () {
            if (this._isXHRUpload(this.options)) {
                this._on(this.options.dropZone, {dragover: this._onDragOver, drop: this._onDrop});
                this._on(this.options.pasteZone, {paste: this._onPaste})
            }
            this._on(this.options.fileInput, {change: this._onChange})
        },
        _destroyEventHandlers: function () {
            this._off(this.options.dropZone, "dragover drop");
            this._off(this.options.pasteZone, "paste");
            this._off(this.options.fileInput, "change")
        },
        _setOption: function (b, c) {
            var d = a.inArray(b, this._refreshOptionsList) !== -1;
            if (d) {
                this._destroyEventHandlers()
            }
            this._super(b, c);
            if (d) {
                this._initSpecialOptions();
                this._initEventHandlers()
            }
        },
        _initSpecialOptions: function () {
            var b = this.options;
            if (b.fileInput === undefined) {
                b.fileInput = this.element.is('input[type="file"]') ? this.element : this.element.find('input[type="file"]')
            } else if (!(b.fileInput instanceof a)) {
                b.fileInput = a(b.fileInput)
            }
            if (!(b.dropZone instanceof a)) {
                b.dropZone = a(b.dropZone)
            }
            if (!(b.pasteZone instanceof a)) {
                b.pasteZone = a(b.pasteZone)
            }
        },
        _create: function () {
            var b = this.options;
            a.extend(b, a(this.element[0].cloneNode(false)).data());
            this._initSpecialOptions();
            this._slots = [];
            this._sequence = this._getXHRPromise(true);
            this._sending = this._active = 0;
            this._initProgressObject(this);
            this._initEventHandlers()
        },
        active: function () {
            return this._active
        },
        progress: function () {
            return this._progress
        },
        add: function (b) {
            var c = this;
            if (!b || this.options.disabled) {
                return
            }
            if (b.fileInput && !b.files) {
                this._getFileInputFiles(b.fileInput).always(function (a) {
                    b.files = a;
                    c._onAdd(null, b)
                })
            } else {
                b.files = a.makeArray(b.files);
                this._onAdd(null, b)
            }
        },
        send: function (b) {
            if (b && !this.options.disabled) {
                if (b.fileInput && !b.files) {
                    var c = this, d = a.Deferred(), e = d.promise(), f, g;
                    e.abort = function () {
                        g = true;
                        if (f) {
                            return f.abort()
                        }
                        d.reject(null, "abort", "abort");
                        return e
                    };
                    this._getFileInputFiles(b.fileInput).always(function (a) {
                        if (g) {
                            return
                        }
                        b.files = a;
                        f = c._onSend(null, b).then(function (a, b, c) {
                            d.resolve(a, b, c)
                        }, function (a, b, c) {
                            d.reject(a, b, c)
                        })
                    });
                    return this._enhancePromise(e)
                }
                b.files = a.makeArray(b.files);
                if (b.files.length) {
                    return this._onSend(null, b)
                }
            }
            return this._getXHRPromise(false, b && b.context)
        }
    })
});
var autosaver = {
    init: function (a) {
        this.loadData();
        var b;
        if (a) {
            b = $(a).find(".autosave")
        } else {
            b = $(".autosave")
        }
        b.on("change.autosave", function () {
            autosaver.saveData(a)
        })
    }, saveData: function (a) {
        var b = [], c;
        var d = $.cookie("autosaveData");
        if (d) {
            d = d.split("&");
            for (c in d) {
                d[c] = d[c].split("=");
                b[d[c][0]] = d[c][1]
            }
        }
        var e;
        if (a) {
            e = $(a).find(".autosave")
        } else {
            e = $(".autosave")
        }
        e.each(function () {
            if (this.id) {
                b[this.id] = this.value
            }
        });
        d = [];
        for (c in b) {
            d.push(c + "=" + b[c])
        }
        d = d.join("&");
        $.cookie("autosaveData", d, {expires: 1})
    }, loadData: function () {
        var a = $.cookie("autosaveData");
        if (a) {
            a = a.split("&");
            for (var b in a) {
                a[b] = a[b].split("=");
                if (a[b][1] && $("#" + a[b][0]).hasClass("autosave")) {
                    $("#" + a[b][0]).val(a[b][1]);
                    $("#" + a[b][0]).val(a[b][1]).trigger("autosave.insert")
                }
            }
        }
    }, getData: function () {
        var a = $.cookie("autosaveData");
        var b = {};
        if (a) {
            a = a.split("&");
            for (var c in a) {
                var d = a[c].split("=");
                b[d[0]] = d[1]
            }
            return b
        } else {
            return {}
        }
    }
};
(function () {
    function a(a) {
        this._n = a
    }

    function b(a, b, c) {
        var d, e, f = Math.pow(10, b);
        return e = (Math.round(a * f) / f).toFixed(b), c && (d = new RegExp("0{1," + c + "}$"), e = e.replace(d, "")), e
    }

    function c(a, b) {
        var c;
        return c = b.indexOf("$") > -1 ? e(a, b) : b.indexOf("%") > -1 ? f(a, b) : b.indexOf(":") > -1 ? g(a, b) : i(a, b)
    }

    function d(a, b) {
        var c, d, e, f, g, i = b, j = ["KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"], k = !1;
        if (b.indexOf(":") > -1)a._n = h(b); else if (b === o)a._n = 0; else {
            for ("." !== m[n].delimiters.decimal && (b = b.replace(/\./g, "").replace(m[n].delimiters.decimal, ".")), c = new RegExp("[^a-zA-Z]" + m[n].abbreviations.thousand + "(?:\\)|(\\" + m[n].currency.symbol + ")?(?:\\))?)?$"), d = new RegExp("[^a-zA-Z]" + m[n].abbreviations.million + "(?:\\)|(\\" + m[n].currency.symbol + ")?(?:\\))?)?$"), e = new RegExp("[^a-zA-Z]" + m[n].abbreviations.billion + "(?:\\)|(\\" + m[n].currency.symbol + ")?(?:\\))?)?$"), f = new RegExp("[^a-zA-Z]" + m[n].abbreviations.trillion + "(?:\\)|(\\" + m[n].currency.symbol + ")?(?:\\))?)?$"), g = 0; g <= j.length && !(k = b.indexOf(j[g]) > -1 ? Math.pow(1024, g + 1) : !1); g++);
            a._n = (k ? k : 1) * (i.match(c) ? Math.pow(10, 3) : 1) * (i.match(d) ? Math.pow(10, 6) : 1) * (i.match(e) ? Math.pow(10, 9) : 1) * (i.match(f) ? Math.pow(10, 12) : 1) * (b.indexOf("%") > -1 ? .01 : 1) * ((b.split("-").length + Math.min(b.split("(").length - 1, b.split(")").length - 1)) % 2 ? 1 : -1) * Number(b.replace(/[^0-9\.]+/g, "")), a._n = k ? Math.ceil(a._n) : a._n
        }
        return a._n
    }

    function e(a, b) {
        var d, e = b.indexOf("$") <= 1 ? !0 : !1, f = "";
        return b.indexOf(" $") > -1 ? (f = " ", b = b.replace(" $", "")) : b.indexOf("$ ") > -1 ? (f = " ", b = b.replace("$ ", "")) : b = b.replace("$", ""), d = c(a, b), e ? d.indexOf("(") > -1 || d.indexOf("-") > -1 ? (d = d.split(""), d.splice(1, 0, m[n].currency.symbol + f), d = d.join("")) : d = m[n].currency.symbol + f + d : d.indexOf(")") > -1 ? (d = d.split(""), d.splice(-1, 0, f + m[n].currency.symbol), d = d.join("")) : d = d + f + m[n].currency.symbol, d
    }

    function f(a, b) {
        var d, e = "";
        return b.indexOf(" %") > -1 ? (e = " ", b = b.replace(" %", "")) : b = b.replace("%", ""), a._n = 100 * a._n, d = c(a, b), d.indexOf(")") > -1 ? (d = d.split(""), d.splice(-1, 0, e + "%"), d = d.join("")) : d = d + e + "%", d
    }

    function g(a) {
        var b = Math.floor(a._n / 60 / 60), c = Math.floor((a._n - 60 * 60 * b) / 60), d = Math.round(a._n - 60 * 60 * b - 60 * c);
        return b + ":" + (10 > c ? "0" + c : c) + ":" + (10 > d ? "0" + d : d)
    }

    function h(a) {
        var b = a.split(":"), c = 0;
        return 3 === b.length ? (c += 60 * 60 * Number(b[0]), c += 60 * Number(b[1]), c += Number(b[2])) : 2 === b.length && (c += 60 * Number(b[0]), c += Number(b[1])), Number(c)
    }

    function i(a, c) {
        var d, e, f, g, h, i, j = !1, k = !1, l = !1, p = "", q = "", r = "", s = Math.abs(a._n), t = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"], u = "", v = !1;
        if (0 === a._n && null !== o)return o;
        if (c.indexOf("(") > -1 ? (j = !0, c = c.slice(1, -1)) : c.indexOf("+") > -1 && (k = !0, c = c.replace(/\+/g, "")), c.indexOf("a") > -1 && (c.indexOf(" a") > -1 ? (p = " ", c = c.replace(" a", "")) : c = c.replace("a", ""), s >= Math.pow(10, 12) ? (p += m[n].abbreviations.trillion, a._n = a._n / Math.pow(10, 12)) : s < Math.pow(10, 12) && s >= Math.pow(10, 9) ? (p += m[n].abbreviations.billion, a._n = a._n / Math.pow(10, 9)) : s < Math.pow(10, 9) && s >= Math.pow(10, 6) ? (p += m[n].abbreviations.million, a._n = a._n / Math.pow(10, 6)) : s < Math.pow(10, 6) && s >= Math.pow(10, 3) && (p += m[n].abbreviations.thousand, a._n = a._n / Math.pow(10, 3))), c.indexOf("b") > -1)for (c.indexOf(" b") > -1 ? (q = " ", c = c.replace(" b", "")) : c = c.replace("b", ""), f = 0; f <= t.length; f++)if (d = Math.pow(1024, f), e = Math.pow(1024, f + 1), a._n >= d && a._n < e) {
            q += t[f], d > 0 && (a._n = a._n / d);
            break
        }
        return c.indexOf("o") > -1 && (c.indexOf(" o") > -1 ? (r = " ", c = c.replace(" o", "")) : c = c.replace("o", ""), r += m[n].ordinal(a._n)), c.indexOf("[.]") > -1 && (l = !0, c = c.replace("[.]", ".")), g = a._n.toString().split(".")[0], h = c.split(".")[1], i = c.indexOf(","), h ? (h.indexOf("[") > -1 ? (h = h.replace("]", ""), h = h.split("["), u = b(a._n, h[0].length + h[1].length, h[1].length)) : u = b(a._n, h.length), g = u.split(".")[0], u = u.split(".")[1].length ? m[n].delimiters.decimal + u.split(".")[1] : "", l && 0 === Number(u.slice(1)) && (u = "")) : g = b(a._n, null), g.indexOf("-") > -1 && (g = g.slice(1), v = !0), i > -1 && (g = g.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1" + m[n].delimiters.thousands)), 0 === c.indexOf(".") && (g = ""), (j && v ? "(" : "") + (!j && v ? "-" : "") + (!v && k ? "+" : "") + g + u + (r ? r : "") + (p ? p : "") + (q ? q : "") + (j && v ? ")" : "")
    }

    function j(a, b) {
        m[a] = b
    }

    var k, l = "1.5.0", m = {}, n = "en", o = null, p = "0,0", q = "undefined" != typeof module && module.exports;
    k = function (b) {
        return k.isNumeral(b) ? b = b.value() : 0 === b || "undefined" == typeof b ? b = 0 : Number(b) || (b = k.fn.unformat(b)), new a(Number(b))
    }, k.version = l, k.isNumeral = function (b) {
        return b instanceof a
    }, k.language = function (a, b) {
        if (!a)return n;
        if (a && !b) {
            if (!m[a])throw new Error("Unknown language : " + a);
            n = a
        }
        return (b || !m[a]) && j(a, b), k
    }, k.language("en", {
        delimiters: {thousands: ",", decimal: "."},
        abbreviations: {thousand: "k", million: "m", billion: "b", trillion: "t"},
        ordinal: function (a) {
            var b = a % 10;
            return 1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th"
        },
        currency: {symbol: "$"}
    }), k.zeroFormat = function (a) {
        o = "string" == typeof a ? a : null
    }, k.defaultFormat = function (a) {
        p = "string" == typeof a ? a : "0.0"
    }, k.fn = a.prototype = {
        clone: function () {
            return k(this)
        }, format: function (a) {
            return c(this, a ? a : p)
        }, unformat: function (a) {
            return d(this, a ? a : p)
        }, value: function () {
            return this._n
        }, valueOf: function () {
            return this._n
        }, set: function (a) {
            return this._n = Number(a), this
        }, add: function (a) {
            return this._n = this._n + Number(a), this
        }, subtract: function (a) {
            return this._n = this._n - Number(a), this
        }, multiply: function (a) {
            return this._n = this._n * Number(a), this
        }, divide: function (a) {
            return this._n = this._n / Number(a), this
        }, difference: function (a) {
            var b = this._n - Number(a);
            return 0 > b && (b = -b), b
        }
    }, q && (module.exports = k), "undefined" == typeof ender && (this.numeral = k), "function" == typeof define && define.amd && define([], function () {
        return k
    })
}).call(this);
!function () {
    var a = {
        delimiters: {thousands: " ", decimal: ","},
        abbreviations: {thousand: ".", million: "", billion: "b", trillion: "t"},
        ordinal: function () {
            return "."
        },
        currency: {symbol: "."}
    };
    "undefined" != typeof module && module.exports && (module.exports = a), "undefined" != typeof window && this.numeral && this.numeral.language && this.numeral.language("ru", a)
}();
var $jscomp = {
    scope: {}, findInternal: function (a, b, c) {
        a instanceof String && (a = String(a));
        for (var d = a.length, e = 0; e < d; e++) {
            var f = a[e];
            if (b.call(c, f, e, a))return {i: e, v: f}
        }
        return {i: -1, v: void 0}
    }
};
$jscomp.defineProperty = "function" == typeof Object.defineProperties ? Object.defineProperty : function (a, b, c) {
    if (c.get || c.set)throw new TypeError("ES3 does not support getters and setters.");
    a != Array.prototype && a != Object.prototype && (a[b] = c.value)
};
$jscomp.getGlobal = function (a) {
    return "undefined" != typeof window && window === a ? a : "undefined" != typeof global && null != global ? global : a
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.polyfill = function (a, b, c, d) {
    if (b) {
        c = $jscomp.global;
        a = a.split(".");
        for (d = 0; d < a.length - 1; d++) {
            var e = a[d];
            e in c || (c[e] = {});
            c = c[e]
        }
        a = a[a.length - 1];
        d = c[a];
        b = b(d);
        b != d && null != b && $jscomp.defineProperty(c, a, {configurable: !0, writable: !0, value: b})
    }
};
$jscomp.polyfill("Array.prototype.find", function (a) {
    return a ? a : function (a, b) {
        return $jscomp.findInternal(this, a, b).v
    }
}, "es6-impl", "es3");
(function (a, b, c) {
    "function" === typeof define && define.amd ? define(["jquery"], a) : "object" === typeof exports ? module.exports = a(require("jquery")) : a(b || c)
})(function (a) {
    var b = function (b, c, d) {
        var e = {
            invalid: [], getCaret: function () {
                try {
                    var a, c = 0, d = b.get(0), f = document.selection, g = d.selectionStart;
                    if (f && -1 === navigator.appVersion.indexOf("MSIE 10"))a = f.createRange(), a.moveStart("character", -e.val().length), c = a.text.length; else if (g || "0" === g)c = g;
                    return c
                } catch (a) {
                }
            }, setCaret: function (a) {
                try {
                    if (b.is(":focus")) {
                        var c, d = b.get(0);
                        d.setSelectionRange ? d.setSelectionRange(a, a) : (c = d.createTextRange(), c.collapse(!0), c.moveEnd("character", a), c.moveStart("character", a), c.select())
                    }
                } catch (a) {
                }
            }, events: function () {
                b.on("keydown.mask", function (a) {
                    b.data("mask-keycode", a.keyCode || a.which);
                    b.data("mask-previus-value", b.val())
                }).on(a.jMaskGlobals.useInput ? "input.mask" : "keyup.mask", e.behaviour).on("paste.mask drop.mask", function () {
                    setTimeout(function () {
                        b.keydown().keyup()
                    }, 100)
                }).on("change.mask", function () {
                    b.data("changed", !0)
                }).on("blur.mask", function () {
                    g === e.val() || b.data("changed") || b.trigger("change");
                    b.data("changed", !1)
                }).on("blur.mask", function () {
                    g = e.val()
                }).on("focus.mask", function (b) {
                    !0 === d.selectOnFocus && a(b.target).select()
                }).on("focusout.mask", function () {
                    d.clearIfNotMatch && !h.test(e.val()) && e.val("")
                })
            }, getRegexMask: function () {
                for (var a = [], b, d, e, g, h = 0; h < c.length; h++)(b = f.translation[c.charAt(h)]) ? (d = b.pattern.toString().replace(/.{1}$|^.{1}/g, ""), e = b.optional, (b = b.recursive) ? (a.push(c.charAt(h)), g = {
                    digit: c.charAt(h),
                    pattern: d
                }) : a.push(e || b ? d + "?" : d)) : a.push(c.charAt(h).replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"));
                a = a.join("");
                g && (a = a.replace(new RegExp("(" + g.digit + "(.*" + g.digit + ")?)"), "($1)?").replace(new RegExp(g.digit, "g"), g.pattern));
                return new RegExp(a)
            }, destroyEvents: function () {
                b.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))
            }, val: function (a) {
                var c = b.is("input") ? "val" : "text";
                if (0 < arguments.length) {
                    if (b[c]() !== a)b[c](a);
                    c = b
                } else c = b[c]();
                return c
            }, calculateCaretPosition: function (a, c) {
                var d = c.length, e = b.data("mask-previus-value"), f = e.length;
                8 === b.data("mask-keycode") && e !== c ? a -= c.slice(0, a).length - e.slice(0, a).length : e !== c && (a = a >= f ? d : a + (c.slice(0, a).length - e.slice(0, a).length));
                return a
            }, behaviour: function (c) {
                c = c || window.event;
                e.invalid = [];
                var d = b.data("mask-keycode");
                if (-1 === a.inArray(d, f.byPassKeys)) {
                    var d = e.getMasked(), g = e.getCaret();
                    setTimeout(function (a, b) {
                        e.setCaret(e.calculateCaretPosition(a, b))
                    }, 10, g, d);
                    e.val(d);
                    e.setCaret(g);
                    return e.callbacks(c)
                }
            }, getMasked: function (a, b) {
                var g = [], h = void 0 === b ? e.val() : b + "", i = 0, j = c.length, k = 0, l = h.length, m = 1, n = "push", o = -1, p, q;
                d.reverse ? (n = "unshift", m = -1, p = 0, i = j - 1, k = l - 1, q = function () {
                    return -1 < i && -1 < k
                }) : (p = j - 1, q = function () {
                    return i < j && k < l
                });
                for (var r; q();) {
                    var s = c.charAt(i), t = h.charAt(k), u = f.translation[s];
                    if (u)t.match(u.pattern) ? (g[n](t), u.recursive && (-1 === o ? o = i : i === p && (i = o - m), p === o && (i -= m)), i += m) : t === r ? r = void 0 : u.optional ? (i += m, k -= m) : u.fallback ? (g[n](u.fallback), i += m, k -= m) : e.invalid.push({
                        p: k,
                        v: t,
                        e: u.pattern
                    }), k += m; else {
                        if (!a)g[n](s);
                        t === s ? k += m : r = s;
                        i += m
                    }
                }
                h = c.charAt(p);
                j !== l + 1 || f.translation[h] || g.push(h);
                return g.join("")
            }, callbacks: function (a) {
                var f = e.val(), h = f !== g, i = [f, a, b, d], j = function (a, b, c) {
                    "function" === typeof d[a] && b && d[a].apply(this, c)
                };
                j("onChange", !0 === h, i);
                j("onKeyPress", !0 === h, i);
                j("onComplete", f.length === c.length, i);
                j("onInvalid", 0 < e.invalid.length, [f, a, b, e.invalid, d])
            }
        };
        b = a(b);
        var f = this, g = e.val(), h;
        c = "function" === typeof c ? c(e.val(), void 0, b, d) : c;
        f.mask = c;
        f.options = d;
        f.remove = function () {
            var a = e.getCaret();
            e.destroyEvents();
            e.val(f.getCleanVal());
            e.setCaret(a);
            return b
        };
        f.getCleanVal = function () {
            return e.getMasked(!0)
        };
        f.getMaskedVal = function (a) {
            return e.getMasked(!1, a)
        };
        f.init = function (g) {
            g = g || !1;
            d = d || {};
            f.clearIfNotMatch = a.jMaskGlobals.clearIfNotMatch;
            f.byPassKeys = a.jMaskGlobals.byPassKeys;
            f.translation = a.extend({}, a.jMaskGlobals.translation, d.translation);
            f = a.extend(!0, {}, f, d);
            h = e.getRegexMask();
            if (g)e.events(), e.val(e.getMasked()); else {
                d.placeholder && b.attr("placeholder", d.placeholder);
                b.data("mask") && b.attr("autocomplete", "off");
                g = 0;
                for (var i = !0; g < c.length; g++) {
                    var j = f.translation[c.charAt(g)];
                    if (j && j.recursive) {
                        i = !1;
                        break
                    }
                }
                i && b.attr("maxlength", c.length);
                e.destroyEvents();
                e.events();
                g = e.getCaret();
                e.val(e.getMasked());
                e.setCaret(g)
            }
        };
        f.init(!b.is("input"))
    };
    a.maskWatchers = {};
    var c = function () {
        var c = a(this), e = {}, f = c.attr("data-mask");
        c.attr("data-mask-reverse") && (e.reverse = !0);
        c.attr("data-mask-clearifnotmatch") && (e.clearIfNotMatch = !0);
        "true" === c.attr("data-mask-selectonfocus") && (e.selectOnFocus = !0);
        if (d(c, f, e))return c.data("mask", new b(this, f, e))
    }, d = function (b, c, d) {
        d = d || {};
        var e = a(b).data("mask"), f = JSON.stringify;
        b = a(b).val() || a(b).text();
        try {
            return "function" === typeof c && (c = c(b)), "object" !== typeof e || f(e.options) !== f(d) || e.mask !== c
        } catch (a) {
        }
    }, e = function (a) {
        var b = document.createElement("div"), c;
        a = "on" + a;
        c = a in b;
        c || (b.setAttribute(a, "return;"), c = "function" === typeof b[a]);
        return c
    };
    a.fn.mask = function (c, e) {
        e = e || {};
        var f = this.selector, g = a.jMaskGlobals, h = g.watchInterval, g = e.watchInputs || g.watchInputs, i = function () {
            if (d(this, c, e))return a(this).data("mask", new b(this, c, e))
        };
        a(this).each(i);
        f && "" !== f && g && (clearInterval(a.maskWatchers[f]), a.maskWatchers[f] = setInterval(function () {
            a(document).find(f).each(i)
        }, h));
        return this
    };
    a.fn.masked = function (a) {
        return this.data("mask").getMaskedVal(a)
    };
    a.fn.unmask = function () {
        clearInterval(a.maskWatchers[this.selector]);
        delete a.maskWatchers[this.selector];
        return this.each(function () {
            var b = a(this).data("mask");
            b && b.remove().removeData("mask")
        })
    };
    a.fn.cleanVal = function () {
        return this.data("mask").getCleanVal()
    };
    a.applyDataMask = function (b) {
        b = b || a.jMaskGlobals.maskElements;
        (b instanceof a ? b : a(b)).filter(a.jMaskGlobals.dataMaskAttr).each(c)
    };
    e = {
        maskElements: "input,td,span,div",
        dataMaskAttr: "*[data-mask]",
        dataMask: !0,
        watchInterval: 300,
        watchInputs: !0,
        useInput: !/Chrome\/28/.test(window.navigator.userAgent) && e("input"),
        watchDataMask: !1,
        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],
        translation: {
            0: {pattern: /\d/},
            9: {pattern: /\d/, optional: !0},
            "#": {pattern: /\d/, recursive: !0},
            A: {pattern: /[a-zA-Z0-9]/},
            S: {pattern: /[a-zA-Z]/}
        }
    };
    a.jMaskGlobals = a.jMaskGlobals || {};
    e = a.jMaskGlobals = a.extend(!0, {}, e, a.jMaskGlobals);
    e.dataMask && a.applyDataMask();
    setInterval(function () {
        a.jMaskGlobals.watchDataMask && a.applyDataMask()
    }, e.watchInterval)
}, window.jQuery, window.Zepto);
!function (a) {
    var b = {
        mode: "horizontal",
        slideSelector: "",
        infiniteLoop: !0,
        hideControlOnEnd: !1,
        speed: 500,
        easing: null,
        slideMargin: 0,
        startSlide: 0,
        randomStart: !1,
        captions: !1,
        ticker: !1,
        tickerHover: !1,
        adaptiveHeight: !1,
        adaptiveHeightSpeed: 500,
        video: !1,
        useCSS: !0,
        preloadImages: "visible",
        responsive: !0,
        slideZIndex: 50,
        wrapperClass: "bx-wrapper",
        touchEnabled: !0,
        swipeThreshold: 50,
        oneToOneTouch: !0,
        preventDefaultSwipeX: !0,
        preventDefaultSwipeY: !1,
        ariaLive: !0,
        ariaHidden: !0,
        keyboardEnabled: !1,
        pager: !0,
        pagerType: "full",
        pagerShortSeparator: " / ",
        pagerSelector: null,
        buildPager: null,
        pagerCustom: null,
        controls: !0,
        nextText: "Next",
        prevText: "Prev",
        nextSelector: null,
        prevSelector: null,
        autoControls: !1,
        startText: "Start",
        stopText: "Stop",
        autoControlsCombine: !1,
        autoControlsSelector: null,
        auto: !1,
        pause: 4e3,
        autoStart: !0,
        autoDirection: "next",
        stopAutoOnClick: !1,
        autoHover: !1,
        autoDelay: 0,
        autoSlideForOnePage: !1,
        minSlides: 1,
        maxSlides: 1,
        moveSlides: 0,
        slideWidth: 0,
        shrinkItems: !1,
        onSliderLoad: function () {
            return !0
        },
        onSlideBefore: function () {
            return !0
        },
        onSlideAfter: function () {
            return !0
        },
        onSlideNext: function () {
            return !0
        },
        onSlidePrev: function () {
            return !0
        },
        onSliderResize: function () {
            return !0
        }
    };
    a.fn.bxSlider = function (c) {
        if (0 === this.length)return this;
        if (this.length > 1)return this.each(function () {
            a(this).bxSlider(c)
        }), this;
        var d = {}, e = this, f = a(window).width(), g = a(window).height();
        if (!a(e).data("bxSlider")) {
            var h = function () {
                a(e).data("bxSlider") || (d.settings = a.extend({}, b, c), d.settings.slideWidth = parseInt(d.settings.slideWidth), d.children = e.children(d.settings.slideSelector), d.children.length < d.settings.minSlides && (d.settings.minSlides = d.children.length), d.children.length < d.settings.maxSlides && (d.settings.maxSlides = d.children.length), d.settings.randomStart && (d.settings.startSlide = Math.floor(Math.random() * d.children.length)), d.active = {index: d.settings.startSlide}, d.carousel = d.settings.minSlides > 1 || d.settings.maxSlides > 1 ? !0 : !1, d.carousel && (d.settings.preloadImages = "all"), d.minThreshold = d.settings.minSlides * d.settings.slideWidth + (d.settings.minSlides - 1) * d.settings.slideMargin, d.maxThreshold = d.settings.maxSlides * d.settings.slideWidth + (d.settings.maxSlides - 1) * d.settings.slideMargin, d.working = !1, d.controls = {}, d.interval = null, d.animProp = "vertical" === d.settings.mode ? "top" : "left", d.usingCSS = d.settings.useCSS && "fade" !== d.settings.mode && function () {
                        for (var a = document.createElement("div"), b = ["WebkitPerspective", "MozPerspective", "OPerspective", "msPerspective"], c = 0; c < b.length; c++)if (void 0 !== a.style[b[c]])return d.cssPrefix = b[c].replace("Perspective", "").toLowerCase(), d.animProp = "-" + d.cssPrefix + "-transform", !0;
                        return !1
                    }(), "vertical" === d.settings.mode && (d.settings.maxSlides = d.settings.minSlides), e.data("origStyle", e.attr("style")), e.children(d.settings.slideSelector).each(function () {
                    a(this).data("origStyle", a(this).attr("style"))
                }), j())
            }, j = function () {
                var b = d.children.eq(d.settings.startSlide);
                e.wrap('<div class="' + d.settings.wrapperClass + '"><div class="bx-viewport"></div></div>'), d.viewport = e.parent(), d.settings.ariaLive && !d.settings.ticker && d.viewport.attr("aria-live", "polite"), d.loader = a('<div class="bx-loading" />'), d.viewport.prepend(d.loader), e.css({
                    width: "horizontal" === d.settings.mode ? 1e3 * d.children.length + 215 + "%" : "auto",
                    position: "relative"
                }), d.usingCSS && d.settings.easing ? e.css("-" + d.cssPrefix + "-transition-timing-function", d.settings.easing) : d.settings.easing || (d.settings.easing = "swing"), d.viewport.css({
                    width: "100%",
                    overflow: "hidden",
                    position: "relative"
                }), d.viewport.parent().css({maxWidth: n()}), d.settings.pager || d.settings.controls || d.viewport.parent().css({margin: "0 auto 0px"}), d.children.css({
                    float: "horizontal" === d.settings.mode ? "left" : "none",
                    listStyle: "none",
                    position: "relative"
                }), d.children.css("width", o()), "horizontal" === d.settings.mode && d.settings.slideMargin > 0 && d.children.css("marginRight", d.settings.slideMargin), "vertical" === d.settings.mode && d.settings.slideMargin > 0 && d.children.css("marginBottom", d.settings.slideMargin), "fade" === d.settings.mode && (d.children.css({
                    position: "absolute",
                    zIndex: 0,
                    display: "none"
                }), d.children.eq(d.settings.startSlide).css({
                    zIndex: d.settings.slideZIndex,
                    display: "block"
                })), d.controls.el = a('<div class="bx-controls" />'), d.settings.captions && y(), d.active.last = d.settings.startSlide === q() - 1, d.settings.video && e.fitVids(), ("all" === d.settings.preloadImages || d.settings.ticker) && (b = d.children), d.settings.ticker ? d.settings.pager = !1 : (d.settings.controls && w(), d.settings.auto && d.settings.autoControls && x(), d.settings.pager && v(), (d.settings.controls || d.settings.autoControls || d.settings.pager) && d.viewport.after(d.controls.el)), k(b, l)
            }, k = function (b, c) {
                var d = b.find('img:not([src=""]), iframe').length, e = 0;
                return 0 === d ? void c() : void b.find('img:not([src=""]), iframe').each(function () {
                    a(this).one("load error", function () {
                        ++e === d && c()
                    }).each(function () {
                        this.complete && a(this).load()
                    })
                })
            }, l = function () {
                if (d.settings.infiniteLoop && "fade" !== d.settings.mode && !d.settings.ticker) {
                    var b = "vertical" === d.settings.mode ? d.settings.minSlides : d.settings.maxSlides, c = d.children.slice(0, b).clone(!0).addClass("bx-clone"), f = d.children.slice(-b).clone(!0).addClass("bx-clone");
                    d.settings.ariaHidden && (c.attr("aria-hidden", !0), f.attr("aria-hidden", !0)), e.append(c).prepend(f)
                }
                d.loader.remove(), s(), "vertical" === d.settings.mode && (d.settings.adaptiveHeight = !0), d.viewport.height(m()), e.redrawSlider(), d.settings.onSliderLoad.call(e, d.active.index), d.initialized = !0, d.settings.responsive && a(window).bind("resize", S), d.settings.auto && d.settings.autoStart && (q() > 1 || d.settings.autoSlideForOnePage) && I(), d.settings.ticker && J(), d.settings.pager && E(d.settings.startSlide), d.settings.controls && H(), d.settings.touchEnabled && !d.settings.ticker && N(), d.settings.keyboardEnabled && !d.settings.ticker && a(document).keydown(M)
            }, m = function () {
                var b = 0, c = a();
                if ("vertical" === d.settings.mode || d.settings.adaptiveHeight)if (d.carousel) {
                    var e = 1 === d.settings.moveSlides ? d.active.index : d.active.index * r();
                    for (c = d.children.eq(e), i = 1; i <= d.settings.maxSlides - 1; i++)c = e + i >= d.children.length ? c.add(d.children.eq(i - 1)) : c.add(d.children.eq(e + i))
                } else c = d.children.eq(d.active.index); else c = d.children;
                return "vertical" === d.settings.mode ? (c.each(function (c) {
                    b += a(this).outerHeight()
                }), d.settings.slideMargin > 0 && (b += d.settings.slideMargin * (d.settings.minSlides - 1))) : b = Math.max.apply(Math, c.map(function () {
                    return a(this).outerHeight(!1)
                }).get()), "border-box" === d.viewport.css("box-sizing") ? b += parseFloat(d.viewport.css("padding-top")) + parseFloat(d.viewport.css("padding-bottom")) + parseFloat(d.viewport.css("border-top-width")) + parseFloat(d.viewport.css("border-bottom-width")) : "padding-box" === d.viewport.css("box-sizing") && (b += parseFloat(d.viewport.css("padding-top")) + parseFloat(d.viewport.css("padding-bottom"))), b
            }, n = function () {
                var a = "100%";
                return d.settings.slideWidth > 0 && (a = "horizontal" === d.settings.mode ? d.settings.maxSlides * d.settings.slideWidth + (d.settings.maxSlides - 1) * d.settings.slideMargin : d.settings.slideWidth), a
            }, o = function () {
                var a = d.settings.slideWidth, b = d.viewport.width();
                if (0 === d.settings.slideWidth || d.settings.slideWidth > b && !d.carousel || "vertical" === d.settings.mode)a = b; else if (d.settings.maxSlides > 1 && "horizontal" === d.settings.mode) {
                    if (b > d.maxThreshold)return a;
                    b < d.minThreshold ? a = (b - d.settings.slideMargin * (d.settings.minSlides - 1)) / d.settings.minSlides : d.settings.shrinkItems && (a = Math.floor((b + d.settings.slideMargin) / Math.ceil((b + d.settings.slideMargin) / (a + d.settings.slideMargin)) - d.settings.slideMargin))
                }
                return a
            }, p = function () {
                var a = 1, b = null;
                return "horizontal" === d.settings.mode && d.settings.slideWidth > 0 ? d.viewport.width() < d.minThreshold ? a = d.settings.minSlides : d.viewport.width() > d.maxThreshold ? a = d.settings.maxSlides : (b = d.children.first().width() + d.settings.slideMargin, a = Math.floor((d.viewport.width() + d.settings.slideMargin) / b)) : "vertical" === d.settings.mode && (a = d.settings.minSlides), a
            }, q = function () {
                var a = 0, b = 0, c = 0;
                if (d.settings.moveSlides > 0)if (d.settings.infiniteLoop)a = Math.ceil(d.children.length / r()); else for (; b < d.children.length;)++a, b = c + p(), c += d.settings.moveSlides <= p() ? d.settings.moveSlides : p(); else a = Math.ceil(d.children.length / p());
                return a
            }, r = function () {
                return d.settings.moveSlides > 0 && d.settings.moveSlides <= p() ? d.settings.moveSlides : p()
            }, s = function () {
                var a, b, c;
                d.children.length > d.settings.maxSlides && d.active.last && !d.settings.infiniteLoop ? "horizontal" === d.settings.mode ? (b = d.children.last(), a = b.position(), t(-(a.left - (d.viewport.width() - b.outerWidth())), "reset", 0)) : "vertical" === d.settings.mode && (c = d.children.length - d.settings.minSlides, a = d.children.eq(c).position(), t(-a.top, "reset", 0)) : (a = d.children.eq(d.active.index * r()).position(), d.active.index === q() - 1 && (d.active.last = !0), void 0 !== a && ("horizontal" === d.settings.mode ? t(-a.left, "reset", 0) : "vertical" === d.settings.mode && t(-a.top, "reset", 0)))
            }, t = function (b, c, f, g) {
                var h, i;
                d.usingCSS ? (i = "vertical" === d.settings.mode ? "translate3d(0, " + b + "px, 0)" : "translate3d(" + b + "px, 0, 0)", e.css("-" + d.cssPrefix + "-transition-duration", f / 1e3 + "s"), "slide" === c ? (e.css(d.animProp, i), 0 !== f ? e.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function (b) {
                    a(b.target).is(e) && (e.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"), F())
                }) : F()) : "reset" === c ? e.css(d.animProp, i) : "ticker" === c && (e.css("-" + d.cssPrefix + "-transition-timing-function", "linear"), e.css(d.animProp, i), 0 !== f ? e.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function (b) {
                    a(b.target).is(e) && (e.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"), t(g.resetValue, "reset", 0), K())
                }) : (t(g.resetValue, "reset", 0), K()))) : (h = {}, h[d.animProp] = b, "slide" === c ? e.animate(h, f, d.settings.easing, function () {
                    F()
                }) : "reset" === c ? e.css(d.animProp, b) : "ticker" === c && e.animate(h, f, "linear", function () {
                    t(g.resetValue, "reset", 0), K()
                }))
            }, u = function () {
                for (var b = "", c = "", e = q(), f = 0; e > f; f++)c = "", d.settings.buildPager && a.isFunction(d.settings.buildPager) || d.settings.pagerCustom ? (c = d.settings.buildPager(f), d.pagerEl.addClass("bx-custom-pager")) : (c = f + 1, d.pagerEl.addClass("bx-default-pager")), b += '<div class="bx-pager-item"><a href="" data-slide-index="' + f + '" class="bx-pager-link">' + c + "</a></div>";
                d.pagerEl.html(b)
            }, v = function () {
                d.settings.pagerCustom ? d.pagerEl = a(d.settings.pagerCustom) : (d.pagerEl = a('<div class="bx-pager" />'), d.settings.pagerSelector ? a(d.settings.pagerSelector).html(d.pagerEl) : d.controls.el.addClass("bx-has-pager").append(d.pagerEl), u()), d.pagerEl.on("click touchend", "a", D)
            }, w = function () {
                d.controls.next = a('<a class="bx-next" href="">' + d.settings.nextText + "</a>"), d.controls.prev = a('<a class="bx-prev" href="">' + d.settings.prevText + "</a>"), d.controls.next.bind("click touchend", z), d.controls.prev.bind("click touchend", A), d.settings.nextSelector && a(d.settings.nextSelector).append(d.controls.next), d.settings.prevSelector && a(d.settings.prevSelector).append(d.controls.prev), d.settings.nextSelector || d.settings.prevSelector || (d.controls.directionEl = a('<div class="bx-controls-direction" />'), d.controls.directionEl.append(d.controls.prev).append(d.controls.next), d.controls.el.addClass("bx-has-controls-direction").append(d.controls.directionEl))
            }, x = function () {
                d.controls.start = a('<div class="bx-controls-auto-item"><a class="bx-start" href="">' + d.settings.startText + "</a></div>"), d.controls.stop = a('<div class="bx-controls-auto-item"><a class="bx-stop" href="">' + d.settings.stopText + "</a></div>"), d.controls.autoEl = a('<div class="bx-controls-auto" />'), d.controls.autoEl.on("click", ".bx-start", B), d.controls.autoEl.on("click", ".bx-stop", C), d.settings.autoControlsCombine ? d.controls.autoEl.append(d.controls.start) : d.controls.autoEl.append(d.controls.start).append(d.controls.stop), d.settings.autoControlsSelector ? a(d.settings.autoControlsSelector).html(d.controls.autoEl) : d.controls.el.addClass("bx-has-controls-auto").append(d.controls.autoEl), G(d.settings.autoStart ? "stop" : "start")
            }, y = function () {
                d.children.each(function (b) {
                    var c = a(this).find("img:first").attr("title");
                    void 0 !== c && ("" + c).length && a(this).append('<div class="bx-caption"><span>' + c + "</span></div>")
                })
            }, z = function (a) {
                a.preventDefault(), d.controls.el.hasClass("disabled") || (d.settings.auto && d.settings.stopAutoOnClick && e.stopAuto(), e.goToNextSlide())
            }, A = function (a) {
                a.preventDefault(), d.controls.el.hasClass("disabled") || (d.settings.auto && d.settings.stopAutoOnClick && e.stopAuto(), e.goToPrevSlide())
            }, B = function (a) {
                e.startAuto(), a.preventDefault()
            }, C = function (a) {
                e.stopAuto(), a.preventDefault()
            }, D = function (b) {
                var c, f;
                b.preventDefault(), d.controls.el.hasClass("disabled") || (d.settings.auto && d.settings.stopAutoOnClick && e.stopAuto(), c = a(b.currentTarget), void 0 !== c.attr("data-slide-index") && (f = parseInt(c.attr("data-slide-index")), f !== d.active.index && e.goToSlide(f)))
            }, E = function (b) {
                var c = d.children.length;
                return "short" === d.settings.pagerType ? (d.settings.maxSlides > 1 && (c = Math.ceil(d.children.length / d.settings.maxSlides)), void d.pagerEl.html(b + 1 + d.settings.pagerShortSeparator + c)) : (d.pagerEl.find("a").removeClass("active"), void d.pagerEl.each(function (c, d) {
                    a(d).find("a").eq(b).addClass("active")
                }))
            }, F = function () {
                if (d.settings.infiniteLoop) {
                    var a = "";
                    0 === d.active.index ? a = d.children.eq(0).position() : d.active.index === q() - 1 && d.carousel ? a = d.children.eq((q() - 1) * r()).position() : d.active.index === d.children.length - 1 && (a = d.children.eq(d.children.length - 1).position()), a && ("horizontal" === d.settings.mode ? t(-a.left, "reset", 0) : "vertical" === d.settings.mode && t(-a.top, "reset", 0))
                }
                d.working = !1, d.settings.onSlideAfter.call(e, d.children.eq(d.active.index), d.oldIndex, d.active.index)
            }, G = function (a) {
                d.settings.autoControlsCombine ? d.controls.autoEl.html(d.controls[a]) : (d.controls.autoEl.find("a").removeClass("active"), d.controls.autoEl.find("a:not(.bx-" + a + ")").addClass("active"))
            }, H = function () {
                1 === q() ? (d.controls.prev.addClass("disabled"), d.controls.next.addClass("disabled")) : !d.settings.infiniteLoop && d.settings.hideControlOnEnd && (0 === d.active.index ? (d.controls.prev.addClass("disabled"), d.controls.next.removeClass("disabled")) : d.active.index === q() - 1 ? (d.controls.next.addClass("disabled"), d.controls.prev.removeClass("disabled")) : (d.controls.prev.removeClass("disabled"), d.controls.next.removeClass("disabled")))
            }, I = function () {
                if (d.settings.autoDelay > 0) {
                    setTimeout(e.startAuto, d.settings.autoDelay)
                } else e.startAuto(), a(window).focus(function () {
                    e.startAuto()
                }).blur(function () {
                    e.stopAuto()
                });
                d.settings.autoHover && e.hover(function () {
                    d.interval && (e.stopAuto(!0), d.autoPaused = !0)
                }, function () {
                    d.autoPaused && (e.startAuto(!0), d.autoPaused = null)
                })
            }, J = function () {
                var b, c, f, g, h, i, j, k, l = 0;
                "next" === d.settings.autoDirection ? e.append(d.children.clone().addClass("bx-clone")) : (e.prepend(d.children.clone().addClass("bx-clone")), b = d.children.first().position(), l = "horizontal" === d.settings.mode ? -b.left : -b.top), t(l, "reset", 0), d.settings.pager = !1, d.settings.controls = !1, d.settings.autoControls = !1, d.settings.tickerHover && (d.usingCSS ? (g = "horizontal" === d.settings.mode ? 4 : 5, d.viewport.hover(function () {
                    c = e.css("-" + d.cssPrefix + "-transform"), f = parseFloat(c.split(",")[g]), t(f, "reset", 0)
                }, function () {
                    k = 0, d.children.each(function (b) {
                        k += "horizontal" === d.settings.mode ? a(this).outerWidth(!0) : a(this).outerHeight(!0)
                    }), h = d.settings.speed / k, i = "horizontal" === d.settings.mode ? "left" : "top", j = h * (k - Math.abs(parseInt(f))), K(j)
                })) : d.viewport.hover(function () {
                    e.stop()
                }, function () {
                    k = 0, d.children.each(function (b) {
                        k += "horizontal" === d.settings.mode ? a(this).outerWidth(!0) : a(this).outerHeight(!0)
                    }), h = d.settings.speed / k, i = "horizontal" === d.settings.mode ? "left" : "top", j = h * (k - Math.abs(parseInt(e.css(i)))), K(j)
                })), K()
            }, K = function (a) {
                var b, c, f, g = a ? a : d.settings.speed, h = {left: 0, top: 0}, i = {left: 0, top: 0};
                "next" === d.settings.autoDirection ? h = e.find(".bx-clone").first().position() : i = d.children.first().position(), b = "horizontal" === d.settings.mode ? -h.left : -h.top, c = "horizontal" === d.settings.mode ? -i.left : -i.top, f = {resetValue: c}, t(b, "ticker", g, f)
            }, L = function (b) {
                var c = a(window), d = {top: c.scrollTop(), left: c.scrollLeft()}, e = b.offset();
                return d.right = d.left + c.width(), d.bottom = d.top + c.height(), e.right = e.left + b.outerWidth(), e.bottom = e.top + b.outerHeight(), !(d.right < e.left || d.left > e.right || d.bottom < e.top || d.top > e.bottom)
            }, M = function (a) {
                var b = document.activeElement.tagName.toLowerCase(), c = "input|textarea", d = new RegExp(b, ["i"]), f = d.exec(c);
                if (null == f && L(e)) {
                    if (39 === a.keyCode)return z(a), !1;
                    if (37 === a.keyCode)return A(a), !1
                }
            }, N = function () {
                d.touch = {
                    start: {x: 0, y: 0},
                    end: {x: 0, y: 0}
                }, d.viewport.bind("touchstart MSPointerDown pointerdown", O), d.viewport.on("click", ".bxslider a", function (a) {
                    d.viewport.hasClass("click-disabled") && (a.preventDefault(), d.viewport.removeClass("click-disabled"))
                })
            }, O = function (a) {
                if (d.controls.el.addClass("disabled"), d.working)a.preventDefault(), d.controls.el.removeClass("disabled"); else {
                    d.touch.originalPos = e.position();
                    var b = a.originalEvent, c = "undefined" != typeof b.changedTouches ? b.changedTouches : [b];
                    d.touch.start.x = c[0].pageX, d.touch.start.y = c[0].pageY, d.viewport.get(0).setPointerCapture && (d.pointerId = b.pointerId, d.viewport.get(0).setPointerCapture(d.pointerId)), d.viewport.bind("touchmove MSPointerMove pointermove", Q), d.viewport.bind("touchend MSPointerUp pointerup", R), d.viewport.bind("MSPointerCancel pointercancel", P)
                }
            }, P = function (a) {
                t(d.touch.originalPos.left, "reset", 0), d.controls.el.removeClass("disabled"), d.viewport.unbind("MSPointerCancel pointercancel", P), d.viewport.unbind("touchmove MSPointerMove pointermove", Q), d.viewport.unbind("touchend MSPointerUp pointerup", R), d.viewport.get(0).releasePointerCapture && d.viewport.get(0).releasePointerCapture(d.pointerId)
            }, Q = function (a) {
                var b = a.originalEvent, c = "undefined" != typeof b.changedTouches ? b.changedTouches : [b], e = Math.abs(c[0].pageX - d.touch.start.x), f = Math.abs(c[0].pageY - d.touch.start.y), g = 0, h = 0;
                3 * e > f && d.settings.preventDefaultSwipeX ? a.preventDefault() : 3 * f > e && d.settings.preventDefaultSwipeY && a.preventDefault(), "fade" !== d.settings.mode && d.settings.oneToOneTouch && ("horizontal" === d.settings.mode ? (h = c[0].pageX - d.touch.start.x, g = d.touch.originalPos.left + h) : (h = c[0].pageY - d.touch.start.y, g = d.touch.originalPos.top + h), t(g, "reset", 0))
            }, R = function (a) {
                d.viewport.unbind("touchmove MSPointerMove pointermove", Q), d.controls.el.removeClass("disabled");
                var b = a.originalEvent, c = "undefined" != typeof b.changedTouches ? b.changedTouches : [b], f = 0, g = 0;
                d.touch.end.x = c[0].pageX, d.touch.end.y = c[0].pageY, "fade" === d.settings.mode ? (g = Math.abs(d.touch.start.x - d.touch.end.x), g >= d.settings.swipeThreshold && (d.touch.start.x > d.touch.end.x ? e.goToNextSlide() : e.goToPrevSlide(), e.stopAuto())) : ("horizontal" === d.settings.mode ? (g = d.touch.end.x - d.touch.start.x, f = d.touch.originalPos.left) : (g = d.touch.end.y - d.touch.start.y, f = d.touch.originalPos.top), !d.settings.infiniteLoop && (0 === d.active.index && g > 0 || d.active.last && 0 > g) ? t(f, "reset", 200) : Math.abs(g) >= d.settings.swipeThreshold ? (0 > g ? e.goToNextSlide() : e.goToPrevSlide(), e.stopAuto()) : t(f, "reset", 200)), d.viewport.unbind("touchend MSPointerUp pointerup", R), d.viewport.get(0).releasePointerCapture && d.viewport.get(0).releasePointerCapture(d.pointerId)
            }, S = function (b) {
                if (d.initialized)if (d.working)window.setTimeout(S, 10); else {
                    var c = a(window).width(), h = a(window).height();
                    (f !== c || g !== h) && (f = c, g = h, e.redrawSlider(), d.settings.onSliderResize.call(e, d.active.index))
                }
            }, T = function (a) {
                var b = p();
                d.settings.ariaHidden && !d.settings.ticker && (d.children.attr("aria-hidden", "true"), d.children.slice(a, a + b).attr("aria-hidden", "false"))
            }, U = function (a) {
                return 0 > a ? d.settings.infiniteLoop ? q() - 1 : d.active.index : a >= q() ? d.settings.infiniteLoop ? 0 : d.active.index : a
            };
            return e.goToSlide = function (b, c) {
                var f, g, h, i, j = !0, k = 0, l = {left: 0, top: 0}, n = null;
                if (d.oldIndex = d.active.index, d.active.index = U(b), !d.working && d.active.index !== d.oldIndex) {
                    if (d.working = !0, j = d.settings.onSlideBefore.call(e, d.children.eq(d.active.index), d.oldIndex, d.active.index), "undefined" != typeof j && !j)return d.active.index = d.oldIndex, void(d.working = !1);
                    "next" === c ? d.settings.onSlideNext.call(e, d.children.eq(d.active.index), d.oldIndex, d.active.index) || (j = !1) : "prev" === c && (d.settings.onSlidePrev.call(e, d.children.eq(d.active.index), d.oldIndex, d.active.index) || (j = !1)), d.active.last = d.active.index >= q() - 1, (d.settings.pager || d.settings.pagerCustom) && E(d.active.index), d.settings.controls && H(), "fade" === d.settings.mode ? (d.settings.adaptiveHeight && d.viewport.height() !== m() && d.viewport.animate({height: m()}, d.settings.adaptiveHeightSpeed), d.children.filter(":visible").fadeOut(d.settings.speed).css({zIndex: 0}), d.children.eq(d.active.index).css("zIndex", d.settings.slideZIndex + 1).fadeIn(d.settings.speed, function () {
                        a(this).css("zIndex", d.settings.slideZIndex), F()
                    })) : (d.settings.adaptiveHeight && d.viewport.height() !== m() && d.viewport.animate({height: m()}, d.settings.adaptiveHeightSpeed), !d.settings.infiniteLoop && d.carousel && d.active.last ? "horizontal" === d.settings.mode ? (n = d.children.eq(d.children.length - 1), l = n.position(), k = d.viewport.width() - n.outerWidth()) : (f = d.children.length - d.settings.minSlides, l = d.children.eq(f).position()) : d.carousel && d.active.last && "prev" === c ? (g = 1 === d.settings.moveSlides ? d.settings.maxSlides - r() : (q() - 1) * r() - (d.children.length - d.settings.maxSlides), n = e.children(".bx-clone").eq(g), l = n.position()) : "next" === c && 0 === d.active.index ? (l = e.find("> .bx-clone").eq(d.settings.maxSlides).position(), d.active.last = !1) : b >= 0 && (i = b * parseInt(r()), l = d.children.eq(i).position()), "undefined" != typeof l ? (h = "horizontal" === d.settings.mode ? -(l.left - k) : -l.top, t(h, "slide", d.settings.speed)) : d.working = !1), d.settings.ariaHidden && T(d.active.index * r())
                }
            }, e.goToNextSlide = function () {
                if (d.settings.infiniteLoop || !d.active.last) {
                    var a = parseInt(d.active.index) + 1;
                    e.goToSlide(a, "next")
                }
            }, e.goToPrevSlide = function () {
                if (d.settings.infiniteLoop || 0 !== d.active.index) {
                    var a = parseInt(d.active.index) - 1;
                    e.goToSlide(a, "prev")
                }
            }, e.startAuto = function (a) {
                d.interval || (d.interval = setInterval(function () {
                    "next" === d.settings.autoDirection ? e.goToNextSlide() : e.goToPrevSlide()
                }, d.settings.pause), d.settings.autoControls && a !== !0 && G("stop"))
            }, e.stopAuto = function (a) {
                d.interval && (clearInterval(d.interval), d.interval = null, d.settings.autoControls && a !== !0 && G("start"))
            }, e.getCurrentSlide = function () {
                return d.active.index
            }, e.getCurrentSlideElement = function () {
                return d.children.eq(d.active.index)
            }, e.getSlideElement = function (a) {
                return d.children.eq(a)
            }, e.getSlideCount = function () {
                return d.children.length
            }, e.isWorking = function () {
                return d.working
            }, e.redrawSlider = function () {
                d.children.add(e.find(".bx-clone")).outerWidth(o()), d.viewport.css("height", m()), d.settings.ticker || s(), d.active.last && (d.active.index = q() - 1), d.active.index >= q() && (d.active.last = !0), d.settings.pager && !d.settings.pagerCustom && (u(), E(d.active.index)), d.settings.ariaHidden && T(d.active.index * r())
            }, e.destroySlider = function () {
                d.initialized && (d.initialized = !1, a(".bx-clone", this).remove(), d.children.each(function () {
                    void 0 !== a(this).data("origStyle") ? a(this).attr("style", a(this).data("origStyle")) : a(this).removeAttr("style")
                }), void 0 !== a(this).data("origStyle") ? this.attr("style", a(this).data("origStyle")) : a(this).removeAttr("style"), a(this).unwrap().unwrap(), d.controls.el && d.controls.el.remove(), d.controls.next && d.controls.next.remove(), d.controls.prev && d.controls.prev.remove(), d.pagerEl && d.settings.controls && !d.settings.pagerCustom && d.pagerEl.remove(), a(".bx-caption", this).remove(), d.controls.autoEl && d.controls.autoEl.remove(), clearInterval(d.interval), d.settings.responsive && a(window).unbind("resize", S), d.settings.keyboardEnabled && a(document).unbind("keydown", M), a(this).removeData("bxSlider"))
            }, e.reloadSlider = function (b) {
                void 0 !== b && (c = b), e.destroySlider(), h(), a(e).data("bxSlider", this)
            }, h(), a(e).data("bxSlider", this), this
        }
    }
}(jQuery);
(function (a) {
    var b, c, d, e, f, g, h, i = "Close", j = "BeforeClose", k = "AfterClose", l = "BeforeAppend", m = "MarkupParse", n = "Open", o = "Change", p = "mfp", q = "." + p, r = "mfp-ready", s = "mfp-removing", t = "mfp-prevent-close", u = function () {
    }, v = !!window.jQuery, w = a(window), x = function (a, c) {
        b.ev.on(p + a + q, c)
    }, y = function (b, c, d, e) {
        var f = document.createElement("div");
        return f.className = "mfp-" + b, d && (f.innerHTML = d), e ? c && c.appendChild(f) : (f = a(f), c && f.appendTo(c)), f
    }, z = function (c, d) {
        b.ev.triggerHandler(p + c, d), b.st.callbacks && (c = c.charAt(0).toLowerCase() + c.slice(1), b.st.callbacks[c] && b.st.callbacks[c].apply(b, a.isArray(d) ? d : [d]))
    }, A = function () {
        (b.st.focus ? b.content.find(b.st.focus).eq(0) : b.wrap).focus()
    }, B = function (c) {
        return c === h && b.currTemplate.closeBtn || (b.currTemplate.closeBtn = a(b.st.closeMarkup.replace("%title%", b.st.tClose)), h = c), b.currTemplate.closeBtn
    }, C = function () {
        a.magnificPopup.instance || (b = new u, b.init(), a.magnificPopup.instance = b)
    }, D = function (c) {
        if (!a(c).hasClass(t)) {
            var d = b.st.closeOnContentClick, e = b.st.closeOnBgClick;
            if (d && e)return !0;
            if (!b.content || a(c).hasClass("mfp-close") || b.preloader && c === b.preloader[0])return !0;
            if (c === b.content[0] || a.contains(b.content[0], c)) {
                if (d)return !0
            } else if (e && a.contains(document, c))return !0;
            return !1
        }
    }, E = function () {
        var a = document.createElement("p").style, b = ["ms", "O", "Moz", "Webkit"];
        if (void 0 !== a.transition)return !0;
        for (; b.length;)if (b.pop() + "Transition" in a)return !0;
        return !1
    };
    u.prototype = {
        constructor: u, init: function () {
            var c = navigator.appVersion;
            b.isIE7 = -1 !== c.indexOf("MSIE 7."), b.isIE8 = -1 !== c.indexOf("MSIE 8."), b.isLowIE = b.isIE7 || b.isIE8, b.isAndroid = /android/gi.test(c), b.isIOS = /iphone|ipad|ipod/gi.test(c), b.supportsTransition = E(), b.probablyMobile = b.isAndroid || b.isIOS || /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent), d = a(document.body), e = a(document), b.popupsCache = {}
        }, open: function (c) {
            var d;
            if (c.isObj === !1) {
                b.items = c.items.toArray(), b.index = 0;
                var f, h = c.items;
                for (d = 0; h.length > d; d++)if (f = h[d], f.parsed && (f = f.el[0]), f === c.el[0]) {
                    b.index = d;
                    break
                }
            } else b.items = a.isArray(c.items) ? c.items : [c.items], b.index = c.index || 0;
            if (b.isOpen)return b.updateItemHTML(), void 0;
            b.types = [], g = "", b.ev = c.mainEl && c.mainEl.length ? c.mainEl.eq(0) : e, c.key ? (b.popupsCache[c.key] || (b.popupsCache[c.key] = {}), b.currTemplate = b.popupsCache[c.key]) : b.currTemplate = {}, b.st = a.extend(!0, {}, a.magnificPopup.defaults, c), b.fixedContentPos = "auto" === b.st.fixedContentPos ? !b.probablyMobile : b.st.fixedContentPos, b.st.modal && (b.st.closeOnContentClick = !1, b.st.closeOnBgClick = !1, b.st.showCloseBtn = !1, b.st.enableEscapeKey = !1), b.bgOverlay || (b.bgOverlay = y("bg").on("click" + q, function () {
                b.close()
            }), b.wrap = y("wrap").attr("tabindex", -1).on("click" + q, function (a) {
                D(a.target) && b.close()
            }), b.container = y("container", b.wrap)), b.contentContainer = y("content"), b.st.preloader && (b.preloader = y("preloader", b.container, b.st.tLoading));
            var i = a.magnificPopup.modules;
            for (d = 0; i.length > d; d++) {
                var j = i[d];
                j = j.charAt(0).toUpperCase() + j.slice(1), b["init" + j].call(b)
            }
            z("BeforeOpen"), b.st.showCloseBtn && (b.st.closeBtnInside ? (x(m, function (a, b, c, d) {
                c.close_replaceWith = B(d.type)
            }), g += " mfp-close-btn-in") : b.wrap.append(B())), b.st.alignTop && (g += " mfp-align-top"), b.fixedContentPos ? b.wrap.css({
                overflow: b.st.overflowY,
                overflowX: "hidden",
                overflowY: b.st.overflowY
            }) : b.wrap.css({
                top: w.scrollTop(),
                position: "absolute"
            }), (b.st.fixedBgPos === !1 || "auto" === b.st.fixedBgPos && !b.fixedContentPos) && b.bgOverlay.css({
                height: e.height(),
                position: "absolute"
            }), b.st.enableEscapeKey && e.on("keyup" + q, function (a) {
                27 === a.keyCode && b.close()
            }), w.on("resize" + q, function () {
                b.updateSize()
            }), b.st.closeOnContentClick || (g += " mfp-auto-cursor"), g && b.wrap.addClass(g);
            var k = b.wH = w.height(), l = {};
            if (b.fixedContentPos && b._hasScrollBar(k)) {
                var o = b._getScrollbarSize();
                o && (l.paddingRight = o)
            }
            b.fixedContentPos && (b.isIE7 ? a("body, html").css("overflow", "hidden") : l.overflow = "hidden");
            var p = b.st.mainClass;
            return b.isIE7 && (p += " mfp-ie7"), p && b._addClassToMFP(p), b.updateItemHTML(), z("BuildControls"), a("html").css(l), b.bgOverlay.add(b.wrap).prependTo(document.body), b._lastFocusedEl = document.activeElement, setTimeout(function () {
                b.content ? (b._addClassToMFP(r), A()) : b.bgOverlay.addClass(r), e.on("focusin" + q, function (c) {
                    return c.target === b.wrap[0] || a.contains(b.wrap[0], c.target) ? void 0 : (A(), !1)
                })
            }, 16), b.isOpen = !0, b.updateSize(k), z(n), c
        }, close: function () {
            b.isOpen && (z(j), b.isOpen = !1, b.st.removalDelay && !b.isLowIE && b.supportsTransition ? (b._addClassToMFP(s), setTimeout(function () {
                b._close()
            }, b.st.removalDelay)) : b._close())
        }, _close: function () {
            z(i);
            var c = s + " " + r + " ";
            if (b.bgOverlay.detach(), b.wrap.detach(), b.container.empty(), b.st.mainClass && (c += b.st.mainClass + " "), b._removeClassFromMFP(c), b.fixedContentPos) {
                var d = {paddingRight: ""};
                b.isIE7 ? a("body, html").css("overflow", "") : d.overflow = "", a("html").css(d)
            }
            e.off("keyup" + q + " focusin" + q), b.ev.off(q), b.wrap.attr("class", "mfp-wrap").removeAttr("style"), b.bgOverlay.attr("class", "mfp-bg"), b.container.attr("class", "mfp-container"), !b.st.showCloseBtn || b.st.closeBtnInside && b.currTemplate[b.currItem.type] !== !0 || b.currTemplate.closeBtn && b.currTemplate.closeBtn.detach(), b._lastFocusedEl && a(b._lastFocusedEl).focus(), b.currItem = null, b.content = null, b.currTemplate = null, b.prevHeight = 0, z(k)
        }, updateSize: function (a) {
            if (b.isIOS) {
                var c = document.documentElement.clientWidth / window.innerWidth, d = window.innerHeight * c;
                b.wrap.css("height", d), b.wH = d
            } else b.wH = a || w.height();
            b.fixedContentPos || b.wrap.css("height", b.wH), z("Resize")
        }, updateItemHTML: function () {
            var c = b.items[b.index];
            b.contentContainer.detach(), b.content && b.content.detach(), c.parsed || (c = b.parseEl(b.index));
            var d = c.type;
            if (z("BeforeChange", [b.currItem ? b.currItem.type : "", d]), b.currItem = c, !b.currTemplate[d]) {
                var e = b.st[d] ? b.st[d].markup : !1;
                z("FirstMarkupParse", e), b.currTemplate[d] = e ? a(e) : !0
            }
            f && f !== c.type && b.container.removeClass("mfp-" + f + "-holder");
            var g = b["get" + d.charAt(0).toUpperCase() + d.slice(1)](c, b.currTemplate[d]);
            b.appendContent(g, d), c.preloaded = !0, z(o, c), f = c.type, b.container.prepend(b.contentContainer), z("AfterChange")
        }, appendContent: function (a, c) {
            b.content = a, a ? b.st.showCloseBtn && b.st.closeBtnInside && b.currTemplate[c] === !0 ? b.content.find(".mfp-close").length || b.content.append(B()) : b.content = a : b.content = "", z(l), b.container.addClass("mfp-" + c + "-holder"), b.contentContainer.append(b.content)
        }, parseEl: function (c) {
            var d = b.items[c], e = d.type;
            if (d = d.tagName ? {el: a(d)} : {data: d, src: d.src}, d.el) {
                for (var f = b.types, g = 0; f.length > g; g++)if (d.el.hasClass("mfp-" + f[g])) {
                    e = f[g];
                    break
                }
                d.src = d.el.attr("data-mfp-src"), d.src || (d.src = d.el.attr("href"))
            }
            return d.type = e || b.st.type || "inline", d.index = c, d.parsed = !0, b.items[c] = d, z("ElementParse", d), b.items[c]
        }, addGroup: function (a, c) {
            var d = function (d) {
                d.mfpEl = this, b._openClick(d, a, c)
            };
            c || (c = {});
            var e = "click.magnificPopup";
            c.mainEl = a, c.items ? (c.isObj = !0, a.off(e).on(e, d)) : (c.isObj = !1, c.delegate ? a.off(e).on(e, c.delegate, d) : (c.items = a, a.off(e).on(e, d)))
        }, _openClick: function (c, d, e) {
            var f = void 0 !== e.midClick ? e.midClick : a.magnificPopup.defaults.midClick;
            if (f || 2 !== c.which && !c.ctrlKey && !c.metaKey) {
                var g = void 0 !== e.disableOn ? e.disableOn : a.magnificPopup.defaults.disableOn;
                if (g)if (a.isFunction(g)) {
                    if (!g.call(b))return !0
                } else if (g > w.width())return !0;
                c.type && (c.preventDefault(), b.isOpen && c.stopPropagation()), e.el = a(c.mfpEl), e.delegate && (e.items = d.find(e.delegate)), b.open(e)
            }
        }, updateStatus: function (a, d) {
            if (b.preloader) {
                c !== a && b.container.removeClass("mfp-s-" + c), d || "loading" !== a || (d = b.st.tLoading);
                var e = {status: a, text: d};
                z("UpdateStatus", e), a = e.status, d = e.text, b.preloader.html(d), b.preloader.find("a").on("click", function (a) {
                    a.stopImmediatePropagation()
                }), b.container.addClass("mfp-s-" + a), c = a
            }
        }, _addClassToMFP: function (a) {
            b.bgOverlay.addClass(a), b.wrap.addClass(a)
        }, _removeClassFromMFP: function (a) {
            this.bgOverlay.removeClass(a), b.wrap.removeClass(a)
        }, _hasScrollBar: function (a) {
            return (b.isIE7 ? e.height() : document.body.scrollHeight) > (a || w.height())
        }, _parseMarkup: function (b, c, d) {
            var e;
            d.data && (c = a.extend(d.data, c)), z(m, [b, c, d]), a.each(c, function (a, c) {
                if (void 0 === c || c === !1)return !0;
                if (e = a.split("_"), e.length > 1) {
                    var d = b.find(q + "-" + e[0]);
                    if (d.length > 0) {
                        var f = e[1];
                        "replaceWith" === f ? d[0] !== c[0] && d.replaceWith(c) : "img" === f ? d.is("img") ? d.attr("src", c) : d.replaceWith('<img src="' + c + '" class="' + d.attr("class") + '" />') : d.attr(e[1], c)
                    }
                } else b.find(q + "-" + a).html(c)
            })
        }, _getScrollbarSize: function () {
            if (void 0 === b.scrollbarSize) {
                var a = document.createElement("div");
                a.id = "mfp-sbm", a.style.cssText = "width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;", document.body.appendChild(a), b.scrollbarSize = a.offsetWidth - a.clientWidth, document.body.removeChild(a)
            }
            return b.scrollbarSize
        }
    }, a.magnificPopup = {
        instance: null,
        proto: u.prototype,
        modules: [],
        open: function (b, c) {
            return C(), b = b ? a.extend(!0, {}, b) : {}, b.isObj = !0, b.index = c || 0, this.instance.open(b)
        },
        close: function () {
            return a.magnificPopup.instance && a.magnificPopup.instance.close()
        },
        registerModule: function (b, c) {
            c.options && (a.magnificPopup.defaults[b] = c.options), a.extend(this.proto, c.proto), this.modules.push(b)
        },
        defaults: {
            disableOn: 0,
            key: null,
            midClick: !1,
            mainClass: "",
            preloader: !0,
            focus: "",
            closeOnContentClick: !1,
            closeOnBgClick: !0,
            closeBtnInside: !0,
            showCloseBtn: !0,
            enableEscapeKey: !0,
            modal: !1,
            alignTop: !1,
            removalDelay: 0,
            fixedContentPos: "auto",
            fixedBgPos: "auto",
            overflowY: "auto",
            closeMarkup: '<button title="%title%" type="button" class="mfp-close">&times;</button>',
            tClose: "Close (Esc)",
            tLoading: "Loading..."
        }
    }, a.fn.magnificPopup = function (c) {
        C();
        var d = a(this);
        if ("string" == typeof c)if ("open" === c) {
            var e, f = v ? d.data("magnificPopup") : d[0].magnificPopup, g = parseInt(arguments[1], 10) || 0;
            f.items ? e = f.items[g] : (e = d, f.delegate && (e = e.find(f.delegate)), e = e.eq(g)), b._openClick({mfpEl: e}, d, f)
        } else b.isOpen && b[c].apply(b, Array.prototype.slice.call(arguments, 1)); else c = a.extend(!0, {}, c), v ? d.data("magnificPopup", c) : d[0].magnificPopup = c, b.addGroup(d, c);
        return d
    };
    var F, G, H, I = "inline", J = function () {
        H && (G.after(H.addClass(F)).detach(), H = null)
    };
    a.magnificPopup.registerModule(I, {
        options: {hiddenClass: "hide", markup: "", tNotFound: "Content not found"},
        proto: {
            initInline: function () {
                b.types.push(I), x(i + "." + I, function () {
                    J()
                })
            }, getInline: function (c, d) {
                if (J(), c.src) {
                    var e = b.st.inline, f = a(c.src);
                    if (f.length) {
                        var g = f[0].parentNode;
                        g && g.tagName && (G || (F = e.hiddenClass, G = y(F), F = "mfp-" + F), H = f.after(G).detach().removeClass(F)), b.updateStatus("ready")
                    } else b.updateStatus("error", e.tNotFound), f = a("<div>");
                    return c.inlineElement = f, f
                }
                return b.updateStatus("ready"), b._parseMarkup(d, {}, c), d
            }
        }
    });
    var K, L = "ajax", M = function () {
        K && d.removeClass(K)
    }, N = function () {
        M(), b.req && b.req.abort()
    };
    a.magnificPopup.registerModule(L, {
        options: {
            settings: null,
            cursor: "mfp-ajax-cur",
            tError: '<a href="%url%">The content</a> could not be loaded.'
        }, proto: {
            initAjax: function () {
                b.types.push(L), K = b.st.ajax.cursor, x(i + "." + L, N), x("BeforeChange." + L, N)
            }, getAjax: function (c) {
                K && d.addClass(K), b.updateStatus("loading");
                var e = a.extend({
                    url: c.src, success: function (d, e, f) {
                        var g = {data: d, xhr: f};
                        z("ParseAjax", g), b.appendContent(a(g.data), L), c.finished = !0, M(), A(), setTimeout(function () {
                            b.wrap.addClass(r)
                        }, 16), b.updateStatus("ready"), z("AjaxContentAdded")
                    }, error: function () {
                        M(), c.finished = c.loadError = !0, b.updateStatus("error", b.st.ajax.tError.replace("%url%", c.src))
                    }
                }, b.st.ajax.settings);
                return b.req = a.ajax(e), ""
            }
        }
    });
    var O, P = function (c) {
        if (c.data && void 0 !== c.data.title)return c.data.title;
        var d = b.st.image.titleSrc;
        if (d) {
            if (a.isFunction(d))return d.call(b, c);
            if (c.el)return c.el.attr(d) || ""
        }
        return ""
    };
    a.magnificPopup.registerModule("image", {
        options: {
            markup: '<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-img"></div><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></div>',
            cursor: "mfp-zoom-out-cur",
            titleSrc: "title",
            verticalFit: !0,
            tError: '<a href="%url%">The image</a> could not be loaded.'
        }, proto: {
            initImage: function () {
                var a = b.st.image, c = ".image";
                b.types.push("image"), x(n + c, function () {
                    "image" === b.currItem.type && a.cursor && d.addClass(a.cursor)
                }), x(i + c, function () {
                    a.cursor && d.removeClass(a.cursor), w.off("resize" + q)
                }), x("Resize" + c, b.resizeImage), b.isLowIE && x("AfterChange", b.resizeImage)
            }, resizeImage: function () {
                var a = b.currItem;
                if (a && a.img && b.st.image.verticalFit) {
                    var c = 0;
                    b.isLowIE && (c = parseInt(a.img.css("padding-top"), 10) + parseInt(a.img.css("padding-bottom"), 10)), a.img.css("max-height", b.wH - c)
                }
            }, _onImageHasSize: function (a) {
                a.img && (a.hasSize = !0, O && clearInterval(O), a.isCheckingImgSize = !1, z("ImageHasSize", a), a.imgHidden && (b.content && b.content.removeClass("mfp-loading"), a.imgHidden = !1))
            }, findImageSize: function (a) {
                var c = 0, d = a.img[0], e = function (f) {
                    O && clearInterval(O), O = setInterval(function () {
                        return d.naturalWidth > 0 ? (b._onImageHasSize(a), void 0) : (c > 200 && clearInterval(O), c++, 3 === c ? e(10) : 40 === c ? e(50) : 100 === c && e(500), void 0)
                    }, f)
                };
                e(1)
            }, getImage: function (c, d) {
                var e = 0, f = function () {
                    c && (c.img[0].complete ? (c.img.off(".mfploader"), c === b.currItem && (b._onImageHasSize(c), b.updateStatus("ready")), c.hasSize = !0, c.loaded = !0, z("ImageLoadComplete")) : (e++, 200 > e ? setTimeout(f, 100) : g()))
                }, g = function () {
                    c && (c.img.off(".mfploader"), c === b.currItem && (b._onImageHasSize(c), b.updateStatus("error", h.tError.replace("%url%", c.src))), c.hasSize = !0, c.loaded = !0, c.loadError = !0)
                }, h = b.st.image, i = d.find(".mfp-img");
                if (i.length) {
                    var j = document.createElement("img");
                    j.className = "mfp-img", c.img = a(j).on("load.mfploader", f).on("error.mfploader", g), j.src = c.src, i.is("img") && (c.img = c.img.clone()), c.img[0].naturalWidth > 0 && (c.hasSize = !0)
                }
                return b._parseMarkup(d, {
                    title: P(c),
                    img_replaceWith: c.img
                }, c), b.resizeImage(), c.hasSize ? (O && clearInterval(O), c.loadError ? (d.addClass("mfp-loading"), b.updateStatus("error", h.tError.replace("%url%", c.src))) : (d.removeClass("mfp-loading"), b.updateStatus("ready")), d) : (b.updateStatus("loading"), c.loading = !0, c.hasSize || (c.imgHidden = !0, d.addClass("mfp-loading"), b.findImageSize(c)), d)
            }
        }
    });
    var Q, R = function () {
        return void 0 === Q && (Q = void 0 !== document.createElement("p").style.MozTransform), Q
    };
    a.magnificPopup.registerModule("zoom", {
        options: {
            enabled: !1,
            easing: "ease-in-out",
            duration: 300,
            opener: function (a) {
                return a.is("img") ? a : a.find("img")
            }
        }, proto: {
            initZoom: function () {
                var a, c = b.st.zoom, d = ".zoom";
                if (c.enabled && b.supportsTransition) {
                    var e, f, g = c.duration, h = function (a) {
                        var b = a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"), d = "all " + c.duration / 1e3 + "s " + c.easing, e = {
                            position: "fixed",
                            zIndex: 9999,
                            left: 0,
                            top: 0,
                            "-webkit-backface-visibility": "hidden"
                        }, f = "transition";
                        return e["-webkit-" + f] = e["-moz-" + f] = e["-o-" + f] = e[f] = d, b.css(e), b
                    }, k = function () {
                        b.content.css("visibility", "visible")
                    };
                    x("BuildControls" + d, function () {
                        if (b._allowZoom()) {
                            if (clearTimeout(e), b.content.css("visibility", "hidden"), a = b._getItemToZoom(), !a)return k(), void 0;
                            f = h(a), f.css(b._getOffset()), b.wrap.append(f), e = setTimeout(function () {
                                f.css(b._getOffset(!0)), e = setTimeout(function () {
                                    k(), setTimeout(function () {
                                        f.remove(), a = f = null, z("ZoomAnimationEnded")
                                    }, 16)
                                }, g)
                            }, 16)
                        }
                    }), x(j + d, function () {
                        if (b._allowZoom()) {
                            if (clearTimeout(e), b.st.removalDelay = g, !a) {
                                if (a = b._getItemToZoom(), !a)return;
                                f = h(a)
                            }
                            f.css(b._getOffset(!0)), b.wrap.append(f), b.content.css("visibility", "hidden"), setTimeout(function () {
                                f.css(b._getOffset())
                            }, 16)
                        }
                    }), x(i + d, function () {
                        b._allowZoom() && (k(), f && f.remove(), a = null)
                    })
                }
            }, _allowZoom: function () {
                return "image" === b.currItem.type
            }, _getItemToZoom: function () {
                return b.currItem.hasSize ? b.currItem.img : !1
            }, _getOffset: function (c) {
                var d;
                d = c ? b.currItem.img : b.st.zoom.opener(b.currItem.el || b.currItem);
                var e = d.offset(), f = parseInt(d.css("padding-top"), 10), g = parseInt(d.css("padding-bottom"), 10);
                e.top -= a(window).scrollTop() - f;
                var h = {width: d.width(), height: (v ? d.innerHeight() : d[0].offsetHeight) - g - f};
                return R() ? h["-moz-transform"] = h.transform = "translate(" + e.left + "px," + e.top + "px)" : (h.left = e.left, h.top = e.top), h
            }
        }
    });
    var S = "iframe", T = "//about:blank", U = function (a) {
        if (b.currTemplate[S]) {
            var c = b.currTemplate[S].find("iframe");
            c.length && (a || (c[0].src = T), b.isIE8 && c.css("display", a ? "block" : "none"))
        }
    };
    a.magnificPopup.registerModule(S, {
        options: {
            markup: '<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',
            srcAction: "iframe_src",
            patterns: {
                youtube: {index: "youtube.com", id: "v=", src: "//www.youtube.com/embed/%id%?autoplay=1"},
                vimeo: {index: "vimeo.com/", id: "/", src: "//player.vimeo.com/video/%id%?autoplay=1"},
                gmaps: {index: "//maps.google.", src: "%id%&output=embed"}
            }
        }, proto: {
            initIframe: function () {
                b.types.push(S), x("BeforeChange", function (a, b, c) {
                    b !== c && (b === S ? U() : c === S && U(!0))
                }), x(i + "." + S, function () {
                    U()
                })
            }, getIframe: function (c, d) {
                var e = c.src, f = b.st.iframe;
                a.each(f.patterns, function () {
                    return e.indexOf(this.index) > -1 ? (this.id && (e = "string" == typeof this.id ? e.substr(e.lastIndexOf(this.id) + this.id.length, e.length) : this.id.call(this, e)), e = this.src.replace("%id%", e), !1) : void 0
                });
                var g = {};
                return f.srcAction && (g[f.srcAction] = e), b._parseMarkup(d, g, c), b.updateStatus("ready"), d
            }
        }
    });
    var V = function (a) {
        var c = b.items.length;
        return a > c - 1 ? a - c : 0 > a ? c + a : a
    }, W = function (a, b, c) {
        return a.replace(/%curr%/gi, b + 1).replace(/%total%/gi, c)
    };
    a.magnificPopup.registerModule("gallery", {
        options: {
            enabled: !1,
            arrowMarkup: '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',
            preload: [0, 2],
            navigateByImgClick: !0,
            arrows: !0,
            tPrev: "Previous (Left arrow key)",
            tNext: "Next (Right arrow key)",
            tCounter: "%curr% of %total%"
        }, proto: {
            initGallery: function () {
                var c = b.st.gallery, d = ".mfp-gallery", f = Boolean(a.fn.mfpFastClick);
                return b.direction = !0, c && c.enabled ? (g += " mfp-gallery", x(n + d, function () {
                    c.navigateByImgClick && b.wrap.on("click" + d, ".mfp-img", function () {
                        return b.items.length > 1 ? (b.next(), !1) : void 0
                    }), e.on("keydown" + d, function (a) {
                        37 === a.keyCode ? b.prev() : 39 === a.keyCode && b.next()
                    })
                }), x("UpdateStatus" + d, function (a, c) {
                    c.text && (c.text = W(c.text, b.currItem.index, b.items.length))
                }), x(m + d, function (a, d, e, f) {
                    var g = b.items.length;
                    e.counter = g > 1 ? W(c.tCounter, f.index, g) : ""
                }), x("BuildControls" + d, function () {
                    if (b.items.length > 1 && c.arrows && !b.arrowLeft) {
                        var d = c.arrowMarkup, e = b.arrowLeft = a(d.replace(/%title%/gi, c.tPrev).replace(/%dir%/gi, "left")).addClass(t), g = b.arrowRight = a(d.replace(/%title%/gi, c.tNext).replace(/%dir%/gi, "right")).addClass(t), h = f ? "mfpFastClick" : "click";
                        e[h](function () {
                            b.prev()
                        }), g[h](function () {
                            b.next()
                        }), b.isIE7 && (y("b", e[0], !1, !0), y("a", e[0], !1, !0), y("b", g[0], !1, !0), y("a", g[0], !1, !0)), b.container.append(e.add(g))
                    }
                }), x(o + d, function () {
                    b._preloadTimeout && clearTimeout(b._preloadTimeout), b._preloadTimeout = setTimeout(function () {
                        b.preloadNearbyImages(), b._preloadTimeout = null
                    }, 16)
                }), x(i + d, function () {
                    e.off(d), b.wrap.off("click" + d), b.arrowLeft && f && b.arrowLeft.add(b.arrowRight).destroyMfpFastClick(), b.arrowRight = b.arrowLeft = null
                }), void 0) : !1
            }, next: function () {
                b.direction = !0, b.index = V(b.index + 1), b.updateItemHTML()
            }, prev: function () {
                b.direction = !1, b.index = V(b.index - 1), b.updateItemHTML()
            }, goTo: function (a) {
                b.direction = a >= b.index, b.index = a, b.updateItemHTML()
            }, preloadNearbyImages: function () {
                var a, c = b.st.gallery.preload, d = Math.min(c[0], b.items.length), e = Math.min(c[1], b.items.length);
                for (a = 1; (b.direction ? e : d) >= a; a++)b._preloadItem(b.index + a);
                for (a = 1; (b.direction ? d : e) >= a; a++)b._preloadItem(b.index - a)
            }, _preloadItem: function (c) {
                if (c = V(c), !b.items[c].preloaded) {
                    var d = b.items[c];
                    d.parsed || (d = b.parseEl(c)), z("LazyLoad", d), "image" === d.type && (d.img = a('<img class="mfp-img" />').on("load.mfploader", function () {
                        d.hasSize = !0
                    }).on("error.mfploader", function () {
                        d.hasSize = !0, d.loadError = !0, z("LazyLoadError", d)
                    }).attr("src", d.src)), d.preloaded = !0
                }
            }
        }
    });
    var X = "retina";
    a.magnificPopup.registerModule(X, {
        options: {
            replaceSrc: function (a) {
                return a.src.replace(/\.\w+$/, function (a) {
                    return "@2x" + a
                })
            }, ratio: 1
        }, proto: {
            initRetina: function () {
                if (window.devicePixelRatio > 1) {
                    var a = b.st.retina, c = a.ratio;
                    c = isNaN(c) ? c() : c, c > 1 && (x("ImageHasSize." + X, function (a, b) {
                        b.img.css({"max-width": b.img[0].naturalWidth / c, width: "100%"})
                    }), x("ElementParse." + X, function (b, d) {
                        d.src = a.replaceSrc(d, c)
                    }))
                }
            }
        }
    }), function () {
        var b = 1e3, c = "ontouchstart" in window, d = function () {
            w.off("touchmove" + f + " touchend" + f)
        }, e = "mfpFastClick", f = "." + e;
        a.fn.mfpFastClick = function (e) {
            return a(this).each(function () {
                var g, h = a(this);
                if (c) {
                    var i, j, k, l, m, n;
                    h.on("touchstart" + f, function (a) {
                        l = !1, n = 1, m = a.originalEvent ? a.originalEvent.touches[0] : a.touches[0], j = m.clientX, k = m.clientY, w.on("touchmove" + f, function (a) {
                            m = a.originalEvent ? a.originalEvent.touches : a.touches, n = m.length, m = m[0], (Math.abs(m.clientX - j) > 10 || Math.abs(m.clientY - k) > 10) && (l = !0, d())
                        }).on("touchend" + f, function (a) {
                            d(), l || n > 1 || (g = !0, a.preventDefault(), clearTimeout(i), i = setTimeout(function () {
                                g = !1
                            }, b), e())
                        })
                    })
                }
                h.on("click" + f, function () {
                    g || e()
                })
            })
        }, a.fn.destroyMfpFastClick = function () {
            a(this).off("touchstart" + f + " click" + f), c && w.off("touchmove" + f + " touchend" + f)
        }
    }()
})(window.jQuery || window.Zepto);
(function (a) {
    a.fn.zclip = function (b) {
        if (typeof b == "object" && !b.length) {
            var c = a.extend({
                path: "ZeroClipboard.swf",
                copy: null,
                beforeCopy: null,
                afterCopy: null,
                clickAfter: true,
                setHandCursor: true,
                setCSSEffects: true
            }, b);
            return this.each(function () {
                var b = a(this);
                if (b.is(":visible") && (typeof c.copy == "string" || a.isFunction(c.copy))) {
                    ZeroClipboard.setMoviePath(c.path);
                    var d = new ZeroClipboard.Client;
                    if (a.isFunction(c.copy)) {
                        b.bind("zClip_copy", c.copy)
                    }
                    if (a.isFunction(c.beforeCopy)) {
                        b.bind("zClip_beforeCopy", c.beforeCopy)
                    }
                    if (a.isFunction(c.afterCopy)) {
                        b.bind("zClip_afterCopy", c.afterCopy)
                    }
                    d.setHandCursor(c.setHandCursor);
                    d.setCSSEffects(c.setCSSEffects);
                    d.addEventListener("mouseOver", function (a) {
                        b.trigger("mouseenter")
                    });
                    d.addEventListener("mouseOut", function (a) {
                        b.trigger("mouseleave")
                    });
                    d.addEventListener("mouseDown", function (e) {
                        b.trigger("mousedown");
                        if (!a.isFunction(c.copy)) {
                            d.setText(c.copy)
                        } else {
                            d.setText(b.triggerHandler("zClip_copy"))
                        }
                        if (a.isFunction(c.beforeCopy)) {
                            b.trigger("zClip_beforeCopy")
                        }
                    });
                    d.addEventListener("complete", function (d, e) {
                        if (a.isFunction(c.afterCopy)) {
                            b.trigger("zClip_afterCopy")
                        } else {
                            if (e.length > 500) {
                                e = e.substr(0, 500) + "...\n\n(" + (e.length - 500) + " characters not shown)"
                            }
                            b.removeClass("hover");
                            alert("Copied text to clipboard:\n\n " + e)
                        }
                        if (c.clickAfter) {
                            b.trigger("click")
                        }
                    });
                    d.glue(b[0], b.parent()[0]);
                    a(window).bind("load resize", function () {
                        d.reposition()
                    })
                }
            })
        } else if (typeof b == "string") {
            return this.each(function () {
                var c = a(this);
                b = b.toLowerCase();
                var d = c.data("zclipId");
                var e = a("#" + d + ".zclip");
                if (b == "remove") {
                    e.remove();
                    c.removeClass("active hover")
                } else if (b == "hide") {
                    e.hide();
                    c.removeClass("active hover")
                } else if (b == "show") {
                    e.show()
                }
            })
        }
    }
})(jQuery);
var ZeroClipboard = {
    version: "1.0.7", clients: {}, moviePath: "ZeroClipboard.swf", nextId: 1, $: function (a) {
        if (typeof a == "string")a = document.getElementById(a);
        if (!a.addClass) {
            a.hide = function () {
                this.style.display = "none"
            };
            a.show = function () {
                this.style.display = ""
            };
            a.addClass = function (a) {
                this.removeClass(a);
                this.className += " " + a
            };
            a.removeClass = function (a) {
                var b = this.className.split(/\s+/);
                var c = -1;
                for (var d = 0; d < b.length; d++) {
                    if (b[d] == a) {
                        c = d;
                        d = b.length
                    }
                }
                if (c > -1) {
                    b.splice(c, 1);
                    this.className = b.join(" ")
                }
                return this
            };
            a.hasClass = function (a) {
                return !!this.className.match(new RegExp("\\s*" + a + "\\s*"))
            }
        }
        return a
    }, setMoviePath: function (a) {
        this.moviePath = a
    }, dispatch: function (a, b, c) {
        var d = this.clients[a];
        if (d) {
            d.receiveEvent(b, c)
        }
    }, register: function (a, b) {
        this.clients[a] = b
    }, getDOMObjectPosition: function (a, b) {
        var c = {
            left: 0,
            top: 0,
            width: a.width ? a.width : a.offsetWidth,
            height: a.height ? a.height : a.offsetHeight
        };
        if (a && a != b) {
            c.left += a.offsetLeft;
            c.top += a.offsetTop
        }
        return c
    }, Client: function (a) {
        this.handlers = {};
        this.id = ZeroClipboard.nextId++;
        this.movieId = "ZeroClipboardMovie_" + this.id;
        ZeroClipboard.register(this.id, this);
        if (a)this.glue(a)
    }
};
ZeroClipboard.Client.prototype = {
    id: 0,
    ready: false,
    movie: null,
    clipText: "",
    handCursorEnabled: true,
    cssEffects: true,
    handlers: null,
    glue: function (a, b, c) {
        this.domElement = ZeroClipboard.$(a);
        var d = 99;
        if (this.domElement.style.zIndex) {
            d = parseInt(this.domElement.style.zIndex, 10) + 1
        }
        if (typeof b == "string") {
            b = ZeroClipboard.$(b)
        } else if (typeof b == "undefined") {
            b = document.getElementsByTagName("body")[0]
        }
        var e = ZeroClipboard.getDOMObjectPosition(this.domElement, b);
        this.div = document.createElement("div");
        this.div.className = "zclip";
        this.div.id = "zclip-" + this.movieId;
        $(this.domElement).data("zclipId", "zclip-" + this.movieId);
        var f = this.div.style;
        f.position = "absolute";
        f.left = "" + e.left + "px";
        f.top = "" + e.top + "px";
        f.width = "" + e.width + "px";
        f.height = "" + e.height + "px";
        f.zIndex = d;
        if (typeof c == "object") {
            for (addedStyle in c) {
                f[addedStyle] = c[addedStyle]
            }
        }
        b.appendChild(this.div);
        this.div.innerHTML = this.getHTML(e.width, e.height)
    },
    getHTML: function (a, b) {
        var c = "";
        var d = "id=" + this.id + "&width=" + a + "&height=" + b;
        if (navigator.userAgent.match(/MSIE/)) {
            var e = location.href.match(/^https/i) ? "https://" : "http://";
            c += '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="' + e + 'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="' + a + '" height="' + b + '" id="' + this.movieId + '" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="' + ZeroClipboard.moviePath + '" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="' + d + '"/><param name="wmode" value="transparent"/></object>'
        } else {
            c += '<embed id="' + this.movieId + '" src="' + ZeroClipboard.moviePath + '" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="' + a + '" height="' + b + '" name="' + this.movieId + '" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="' + d + '" wmode="transparent" />'
        }
        return c
    },
    hide: function () {
        if (this.div) {
            this.div.style.left = "-2000px"
        }
    },
    show: function () {
        this.reposition()
    },
    destroy: function () {
        if (this.domElement && this.div) {
            this.hide();
            this.div.innerHTML = "";
            var a = document.getElementsByTagName("body")[0];
            try {
                a.removeChild(this.div)
            } catch (a) {
            }
            this.domElement = null;
            this.div = null
        }
    },
    reposition: function (a) {
        if (a) {
            this.domElement = ZeroClipboard.$(a);
            if (!this.domElement)this.hide()
        }
        if (this.domElement && this.div) {
            var b = ZeroClipboard.getDOMObjectPosition(this.domElement);
            var c = this.div.style;
            c.left = "" + b.left + "px";
            c.top = "" + b.top + "px"
        }
    },
    setText: function (a) {
        this.clipText = a;
        if (this.ready) {
            this.movie.setText(a)
        }
    },
    addEventListener: function (a, b) {
        a = a.toString().toLowerCase().replace(/^on/, "");
        if (!this.handlers[a]) {
            this.handlers[a] = []
        }
        this.handlers[a].push(b)
    },
    setHandCursor: function (a) {
        this.handCursorEnabled = a;
        if (this.ready) {
            this.movie.setHandCursor(a)
        }
    },
    setCSSEffects: function (a) {
        this.cssEffects = !!a
    },
    receiveEvent: function (a, b) {
        a = a.toString().toLowerCase().replace(/^on/, "");
        switch (a) {
            case"load":
                this.movie = document.getElementById(this.movieId);
                if (!this.movie) {
                    var c = this;
                    setTimeout(function () {
                        c.receiveEvent("load", null)
                    }, 1);
                    return
                }
                if (!this.ready && navigator.userAgent.match(/Firefox/) && navigator.userAgent.match(/Windows/)) {
                    var c = this;
                    setTimeout(function () {
                        c.receiveEvent("load", null)
                    }, 100);
                    this.ready = true;
                    return
                }
                this.ready = true;
                try {
                    this.movie.setText(this.clipText)
                } catch (a) {
                }
                try {
                    this.movie.setHandCursor(this.handCursorEnabled)
                } catch (a) {
                }
                break;
            case"mouseover":
                if (this.domElement && this.cssEffects) {
                    this.domElement.addClass("hover");
                    if (this.recoverActive) {
                        this.domElement.addClass("active")
                    }
                }
                break;
            case"mouseout":
                if (this.domElement && this.cssEffects) {
                    this.recoverActive = false;
                    if (this.domElement.hasClass("active")) {
                        this.domElement.removeClass("active");
                        this.recoverActive = true
                    }
                    this.domElement.removeClass("hover")
                }
                break;
            case"mousedown":
                if (this.domElement && this.cssEffects) {
                    this.domElement.addClass("active")
                }
                break;
            case"mouseup":
                if (this.domElement && this.cssEffects) {
                    this.domElement.removeClass("active");
                    this.recoverActive = false
                }
                break
        }
        if (this.handlers[a]) {
            for (var d = 0, e = this.handlers[a].length; d < e; d++) {
                var f = this.handlers[a][d];
                if (typeof f == "function") {
                    f(this, b)
                } else if (typeof f == "object" && f.length == 2) {
                    f[0][f[1]](this, b)
                } else if (typeof f == "string") {
                    window[f](this, b)
                }
            }
        }
    }
};
(function (a, b) {
    typeof exports === "object" && typeof module !== "undefined" ? module.exports = b() : typeof define === "function" && define.amd ? define(b) : a.Ractive = b()
})(this, function () {
    "use strict";
    var a = 3;
    var b = {
        el: void 0,
        append: false,
        template: {v: a, t: []},
        preserveWhitespace: false,
        sanitize: false,
        stripComments: true,
        delimiters: ["{{", "}}"],
        tripleDelimiters: ["{{{", "}}}"],
        interpolate: false,
        data: {},
        computed: {},
        magic: false,
        modifyArrays: true,
        adapt: [],
        isolated: false,
        twoway: true,
        lazy: false,
        noIntro: false,
        transitionsEnabled: true,
        complete: void 0,
        css: null,
        noCssTransform: false
    };
    var c = b;
    var d = {
        linear: function (a) {
            return a
        }, easeIn: function (a) {
            return Math.pow(a, 3)
        }, easeOut: function (a) {
            return Math.pow(a - 1, 3) + 1
        }, easeInOut: function (a) {
            if ((a /= .5) < 1) {
                return .5 * Math.pow(a, 3)
            }
            return .5 * (Math.pow(a - 2, 3) + 2)
        }
    };
    var e, f, g, h, i, j, k;
    e = typeof document === "object";
    f = typeof navigator !== "undefined" && /jsDom/.test(navigator.appName);
    g = typeof console !== "undefined" && typeof console.warn === "function" && typeof console.warn.apply === "function";
    try {
        Object.defineProperty({}, "test", {value: 0});
        h = true
    } catch (a) {
        h = false
    }
    i = {
        html: "http://www.w3.org/1999/xhtml",
        mathml: "http://www.w3.org/1998/Math/MathML",
        svg: "http://www.w3.org/2000/svg",
        xlink: "http://www.w3.org/1999/xlink",
        xml: "http://www.w3.org/XML/1998/namespace",
        xmlns: "http://www.w3.org/2000/xmlns/"
    };
    if (typeof document === "undefined") {
        j = false
    } else {
        j = document && document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1")
    }
    k = ["o", "ms", "moz", "webkit"];
    var l, m, n, o, p, q, r, s, t;
    if (!j) {
        l = function (a, b) {
            if (b && b !== i.html) {
                throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information"
            }
            return document.createElement(a)
        }
    } else {
        l = function (a, b) {
            if (!b || b === i.html) {
                return document.createElement(a)
            }
            return document.createElementNS(b, a)
        }
    }
    function u(a) {
        var b;
        if (!a || typeof a === "boolean") {
            return
        }
        if (typeof window === "undefined" || !document || !a) {
            return null
        }
        if (a.nodeType) {
            return a
        }
        if (typeof a === "string") {
            b = document.getElementById(a);
            if (!b && document.querySelector) {
                b = document.querySelector(a)
            }
            if (b && b.nodeType) {
                return b
            }
        }
        if (a[0] && a[0].nodeType) {
            return a[0]
        }
        return null
    }

    if (!e) {
        m = null
    } else {
        n = l("div");
        o = ["matches", "matchesSelector"];
        t = function (a) {
            return function (b, c) {
                return b[a](c)
            }
        };
        r = o.length;
        while (r-- && !m) {
            p = o[r];
            if (n[p]) {
                m = t(p)
            } else {
                s = k.length;
                while (s--) {
                    q = k[r] + p.substr(0, 1).toUpperCase() + p.substring(1);
                    if (n[q]) {
                        m = t(q);
                        break
                    }
                }
            }
        }
        if (!m) {
            m = function (a, b) {
                var c, d, e;
                d = a.parentNode;
                if (!d) {
                    n.innerHTML = "";
                    d = n;
                    a = a.cloneNode();
                    n.appendChild(a)
                }
                c = d.querySelectorAll(b);
                e = c.length;
                while (e--) {
                    if (c[e] === a) {
                        return true
                    }
                }
                return false
            }
        }
    }
    function v(a) {
        if (a && typeof a.parentNode !== "unknown" && a.parentNode) {
            a.parentNode.removeChild(a)
        }
        return a
    }

    function w(a) {
        return a == null || !a.toString ? "" : a
    }

    var x = function () {
    };
    var y, z, A;
    if (typeof window === "undefined") {
        A = null
    } else {
        y = window;
        z = y.document;
        A = {};
        if (!z) {
            A = null
        }
        if (!Date.now) {
            Date.now = function () {
                return +new Date
            }
        }
        if (!String.prototype.trim) {
            String.prototype.trim = function () {
                return this.replace(/^\s+/, "").replace(/\s+$/, "")
            }
        }
        if (!Object.keys) {
            Object.keys = function () {
                var a = Object.prototype.hasOwnProperty, b = !{toString: null}.propertyIsEnumerable("toString"), c = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"], d = c.length;
                return function (e) {
                    if (typeof e !== "object" && typeof e !== "function" || e === null) {
                        throw new TypeError("Object.keys called on non-object")
                    }
                    var f = [];
                    for (var g in e) {
                        if (a.call(e, g)) {
                            f.push(g)
                        }
                    }
                    if (b) {
                        for (var h = 0; h < d; h++) {
                            if (a.call(e, c[h])) {
                                f.push(c[h])
                            }
                        }
                    }
                    return f
                }
            }()
        }
        if (!Array.prototype.indexOf) {
            Array.prototype.indexOf = function (a, b) {
                var c;
                if (b === undefined) {
                    b = 0
                }
                if (b < 0) {
                    b += this.length
                }
                if (b < 0) {
                    b = 0
                }
                for (c = this.length; b < c; b++) {
                    if (this.hasOwnProperty(b) && this[b] === a) {
                        return b
                    }
                }
                return -1
            }
        }
        if (!Array.prototype.forEach) {
            Array.prototype.forEach = function (a, b) {
                var c, d;
                for (c = 0, d = this.length; c < d; c += 1) {
                    if (this.hasOwnProperty(c)) {
                        a.call(b, this[c], c, this)
                    }
                }
            }
        }
        if (!Array.prototype.map) {
            Array.prototype.map = function (a, b) {
                var c = this, d, e, f = [], g;
                if (c instanceof String) {
                    c = c.toString();
                    g = true
                }
                for (d = 0, e = c.length; d < e; d += 1) {
                    if (c.hasOwnProperty(d) || g) {
                        f[d] = a.call(b, c[d], d, c)
                    }
                }
                return f
            }
        }
        if (typeof Array.prototype.reduce !== "function") {
            Array.prototype.reduce = function (a, b) {
                var c, d, e, f;
                if ("function" !== typeof a) {
                    throw new TypeError(a + " is not a function")
                }
                e = this.length;
                f = false;
                if (arguments.length > 1) {
                    d = b;
                    f = true
                }
                for (c = 0; c < e; c += 1) {
                    if (this.hasOwnProperty(c)) {
                        if (f) {
                            d = a(d, this[c], c, this)
                        }
                    } else {
                        d = this[c];
                        f = true
                    }
                }
                if (!f) {
                    throw new TypeError("Reduce of empty array with no initial value")
                }
                return d
            }
        }
        if (!Array.prototype.filter) {
            Array.prototype.filter = function (a, b) {
                var c, d, e = [];
                for (c = 0, d = this.length; c < d; c += 1) {
                    if (this.hasOwnProperty(c) && a.call(b, this[c], c, this)) {
                        e[e.length] = this[c]
                    }
                }
                return e
            }
        }
        if (!Array.prototype.every) {
            Array.prototype.every = function (a, b) {
                var c, d, e;
                if (this == null) {
                    throw new TypeError
                }
                c = Object(this);
                d = c.length >>> 0;
                if (typeof a !== "function") {
                    throw new TypeError
                }
                for (e = 0; e < d; e += 1) {
                    if (e in c && !a.call(b, c[e], e, c)) {
                        return false
                    }
                }
                return true
            }
        }
        if (typeof Function.prototype.bind !== "function") {
            Function.prototype.bind = function (a) {
                var b, c, d, e, f = [].slice;
                if (typeof this !== "function") {
                    throw new TypeError("Function.prototype.bind called on non-function")
                }
                b = f.call(arguments, 1);
                c = this;
                d = function () {
                };
                e = function () {
                    var e = this instanceof d && a ? this : a;
                    return c.apply(e, b.concat(f.call(arguments)))
                };
                d.prototype = this.prototype;
                e.prototype = new d;
                return e
            }
        }
        if (!y.addEventListener) {
            (function (a, b) {
                var c, d, e, f, g, h;
                a.appearsToBeIELessEqual8 = true;
                c = function (a, b) {
                    var c, d = this;
                    for (c in a) {
                        d[c] = a[c]
                    }
                    d.currentTarget = b;
                    d.target = a.srcElement || b;
                    d.timeStamp = +new Date;
                    d.preventDefault = function () {
                        a.returnValue = false
                    };
                    d.stopPropagation = function () {
                        a.cancelBubble = true
                    }
                };
                d = function (a, b) {
                    var d = this, e, f;
                    e = d.listeners || (d.listeners = []);
                    f = e.length;
                    e[f] = [b, function (a) {
                        b.call(d, new c(a, d))
                    }];
                    d.attachEvent("on" + a, e[f][1])
                };
                e = function (a, b) {
                    var c = this, d, e;
                    if (!c.listeners) {
                        return
                    }
                    d = c.listeners;
                    e = d.length;
                    while (e--) {
                        if (d[e][0] === b) {
                            c.detachEvent("on" + a, d[e][1])
                        }
                    }
                };
                a.addEventListener = b.addEventListener = d;
                a.removeEventListener = b.removeEventListener = e;
                if ("Element" in a) {
                    a.Element.prototype.addEventListener = d;
                    a.Element.prototype.removeEventListener = e
                } else {
                    h = b.createElement;
                    b.createElement = function (a) {
                        var b = h(a);
                        b.addEventListener = d;
                        b.removeEventListener = e;
                        return b
                    };
                    f = b.getElementsByTagName("head")[0];
                    g = b.createElement("style");
                    f.insertBefore(g, f.firstChild)
                }
            })(y, z)
        }
        if (!y.getComputedStyle) {
            A.getComputedStyle = function () {
                var a = {};

                function b(a, d, e, f) {
                    var g = d[e], h = parseFloat(g), i = g.split(/\d/)[0], j;
                    if (isNaN(h)) {
                        if (/^thin|medium|thick$/.test(g)) {
                            h = c(g);
                            i = ""
                        } else {
                        }
                    }
                    f = f != null ? f : /%|em/.test(i) && a.parentElement ? b(a.parentElement, a.parentElement.currentStyle, "fontSize", null) : 16;
                    j = e == "fontSize" ? f : /width/i.test(e) ? a.clientWidth : a.clientHeight;
                    return i == "em" ? h * f : i == "in" ? h * 96 : i == "pt" ? h * 96 / 72 : i == "%" ? h / 100 * j : h
                }

                function c(b) {
                    var c, d;
                    if (!a[b]) {
                        c = document.createElement("div");
                        c.style.display = "block";
                        c.style.position = "fixed";
                        c.style.width = c.style.height = "0";
                        c.style.borderRight = b + " solid black";
                        document.getElementsByTagName("body")[0].appendChild(c);
                        d = c.getBoundingClientRect();
                        a[b] = d.right - d.left
                    }
                    return a[b]
                }

                function d(a, b) {
                    var c = b == "border" ? "Width" : "", d = b + "Top" + c, e = b + "Right" + c, f = b + "Bottom" + c, g = b + "Left" + c;
                    a[b] = (a[d] == a[e] == a[f] == a[g] ? [a[d]] : a[d] == a[f] && a[g] == a[e] ? [a[d], a[e]] : a[g] == a[e] ? [a[d], a[e], a[f]] : [a[d], a[e], a[f], a[g]]).join(" ")
                }

                var e = {fontWeight: 400, lineHeight: 1.2, letterSpacing: 0};

                function f(a) {
                    var c, f, g, h;
                    c = a.currentStyle;
                    f = this;
                    g = b(a, c, "fontSize", null);
                    for (h in c) {
                        if (c[h] === "normal" && e.hasOwnProperty(h)) {
                            f[h] = e[h]
                        } else if (/width|height|margin.|padding.|border.+W/.test(h)) {
                            if (c[h] === "auto") {
                                if (/^width|height/.test(h)) {
                                    f[h] = (h === "width" ? a.clientWidth : a.clientHeight) + "px"
                                } else if (/(?:padding)?Top|Bottom$/.test(h)) {
                                    f[h] = "0px"
                                }
                            } else {
                                f[h] = b(a, c, h, g) + "px"
                            }
                        } else if (h === "styleFloat") {
                            f.float = c[h]
                        } else {
                            f[h] = c[h]
                        }
                    }
                    d(f, "margin");
                    d(f, "padding");
                    d(f, "border");
                    f.fontSize = g + "px";
                    return f
                }

                f.prototype = {
                    constructor: f, getPropertyPriority: x, getPropertyValue: function (a) {
                        return this[a] || ""
                    }, item: x, removeProperty: x, setProperty: x, getPropertyCSSValue: x
                };
                function g(a) {
                    return new f(a)
                }

                return g
            }()
        }
    }
    var B = A;
    var C, D, E;
    try {
        Object.defineProperty({}, "test", {value: 0});
        if (e) {
            Object.defineProperty(document.createElement("div"), "test", {value: 0})
        }
        D = Object.defineProperty
    } catch (a) {
        D = function (a, b, c) {
            a[b] = c.value
        }
    }
    try {
        try {
            Object.defineProperties({}, {test: {value: 0}})
        } catch (a) {
            throw a
        }
        if (e) {
            Object.defineProperties(l("div"), {test: {value: 0}})
        }
        E = Object.defineProperties
    } catch (a) {
        E = function (a, b) {
            var c;
            for (c in b) {
                if (b.hasOwnProperty(c)) {
                    D(a, c, b[c])
                }
            }
        }
    }
    try {
        Object.create(null);
        C = Object.create
    } catch (a) {
        C = function () {
            var a = function () {
            };
            return function (b, c) {
                var d;
                if (b === null) {
                    return {}
                }
                a.prototype = b;
                d = new a;
                if (c) {
                    Object.defineProperties(d, c)
                }
                return d
            }
        }()
    }
    function F(a) {
        for (var b = arguments.length, c = Array(b > 1 ? b - 1 : 0), d = 1; d < b; d++) {
            c[d - 1] = arguments[d]
        }
        var e, f;
        while (f = c.shift()) {
            for (e in f) {
                if (H.call(f, e)) {
                    a[e] = f[e]
                }
            }
        }
        return a
    }

    function G(a) {
        for (var b = arguments.length, c = Array(b > 1 ? b - 1 : 0), d = 1; d < b; d++) {
            c[d - 1] = arguments[d]
        }
        c.forEach(function (b) {
            for (var c in b) {
                if (b.hasOwnProperty(c) && !(c in a)) {
                    a[c] = b[c]
                }
            }
        });
        return a
    }

    var H = Object.prototype.hasOwnProperty;
    var I = Object.prototype.toString, J = /^\[object (?:Array|FileList)\]$/;

    function K(a) {
        return I.call(a) === "[object Array]"
    }

    function L(a) {
        return J.test(I.call(a))
    }

    function M(a, b) {
        if (a === null && b === null) {
            return true
        }
        if (typeof a === "object" || typeof b === "object") {
            return false
        }
        return a === b
    }

    function N(a) {
        return !isNaN(parseFloat(a)) && isFinite(a)
    }

    function O(a) {
        return a && I.call(a) === "[object Object]"
    }

    var P = {}, Q, R, S;
    if (g) {
        (function () {
            var a = ["%cRactive.js %c0.7.3 %cin debug mode, %cmore...", "color: rgb(114, 157, 52); font-weight: normal;", "color: rgb(85, 85, 85); font-weight: normal;", "color: rgb(85, 85, 85); font-weight: normal;", "color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];
            var b = "You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";
            S = function () {
                var c = !!console.groupCollapsed;
                console[c ? "groupCollapsed" : "log"].apply(console, a);
                console.log(b);
                if (c) {
                    console.groupEnd(a)
                }
                S = x
            };
            R = function (a, b) {
                S();
                if (typeof b[b.length - 1] === "object") {
                    var c = b.pop();
                    var d = c ? c.ractive : null;
                    if (d) {
                        var e = undefined;
                        if (d.component && (e = d.component.name)) {
                            a = "<" + e + "> " + a
                        }
                        var f = undefined;
                        if (f = c.node || d.fragment && d.fragment.rendered && d.find("*")) {
                            b.push(f)
                        }
                    }
                }
                console.warn.apply(console, ["%cRactive.js: %c" + a, "color: rgb(114, 157, 52);", "color: rgb(85, 85, 85);"].concat(b))
            };
            Q = function () {
                console.log.apply(console, arguments)
            }
        })()
    } else {
        R = Q = S = x
    }
    function T(a, b) {
        return a.replace(/%s/g, function () {
            return b.shift()
        })
    }

    function U(a) {
        for (var b = arguments.length, c = Array(b > 1 ? b - 1 : 0), d = 1; d < b; d++) {
            c[d - 1] = arguments[d]
        }
        a = T(a, c);
        throw new Error(a)
    }

    function V() {
        if (Vt.DEBUG) {
            Q.apply(null, arguments)
        }
    }

    function W(a) {
        for (var b = arguments.length, c = Array(b > 1 ? b - 1 : 0), d = 1; d < b; d++) {
            c[d - 1] = arguments[d]
        }
        a = T(a, c);
        R(a, c)
    }

    function X(a) {
        for (var b = arguments.length, c = Array(b > 1 ? b - 1 : 0), d = 1; d < b; d++) {
            c[d - 1] = arguments[d]
        }
        a = T(a, c);
        if (P[a]) {
            return
        }
        P[a] = true;
        R(a, c)
    }

    function Y() {
        if (Vt.DEBUG) {
            W.apply(null, arguments)
        }
    }

    function Z() {
        if (Vt.DEBUG) {
            X.apply(null, arguments)
        }
    }

    var $ = "Bad arguments";
    var _ = 'A function was specified for "%s" %s, but no %s was returned';
    var aa = function (a, b) {
        return 'Missing "' + a + '" ' + b + " plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#" + b + "s"
    };

    function ba(a, b, c) {
        var d = ca(a, b, c);
        return d ? d[a][c] : null
    }

    function ca(a, b, c) {
        while (b) {
            if (c in b[a]) {
                return b
            }
            if (b.isolated) {
                return null
            }
            b = b.parent
        }
    }

    var da = function (a, b, c, d) {
        if (a === b) {
            return fa(b)
        }
        if (d) {
            var e = ba("interpolators", c, d);
            if (e) {
                return e(a, b) || fa(b)
            }
            U(aa(d, "interpolator"))
        }
        return ha.number(a, b) || ha.array(a, b) || ha.object(a, b) || fa(b)
    };
    var ea = da;

    function fa(a) {
        return function () {
            return a
        }
    }

    var ga = {
        number: function (a, b) {
            var c;
            if (!N(a) || !N(b)) {
                return null
            }
            a = +a;
            b = +b;
            c = b - a;
            if (!c) {
                return function () {
                    return a
                }
            }
            return function (b) {
                return a + b * c
            }
        }, array: function (a, b) {
            var c, d, e, f;
            if (!K(a) || !K(b)) {
                return null
            }
            c = [];
            d = [];
            f = e = Math.min(a.length, b.length);
            while (f--) {
                d[f] = ea(a[f], b[f])
            }
            for (f = e; f < a.length; f += 1) {
                c[f] = a[f]
            }
            for (f = e; f < b.length; f += 1) {
                c[f] = b[f]
            }
            return function (a) {
                var b = e;
                while (b--) {
                    c[b] = d[b](a)
                }
                return c
            }
        }, object: function (a, b) {
            var c, d, e, f, g;
            if (!O(a) || !O(b)) {
                return null
            }
            c = [];
            f = {};
            e = {};
            for (g in a) {
                if (H.call(a, g)) {
                    if (H.call(b, g)) {
                        c.push(g);
                        e[g] = ea(a[g], b[g])
                    } else {
                        f[g] = a[g]
                    }
                }
            }
            for (g in b) {
                if (H.call(b, g) && !H.call(a, g)) {
                    f[g] = b[g]
                }
            }
            d = c.length;
            return function (a) {
                var b = d, g;
                while (b--) {
                    g = c[b];
                    f[g] = e[g](a)
                }
                return f
            }
        }
    };
    var ha = ga;
    var ia = ka;
    var ja = {};

    function ka(a) {
        var b, c, d, e, f, g;
        b = a.split(".");
        if (!(c = ja[b.length])) {
            c = la(b.length)
        }
        f = [];
        d = function (a, c) {
            return a ? "*" : b[c]
        };
        e = c.length;
        while (e--) {
            g = c[e].map(d).join(".");
            if (!f.hasOwnProperty(g)) {
                f.push(g);
                f[g] = true
            }
        }
        return f
    }

    function la(a) {
        var b = "", c, d, e, f, g, h, i, j;
        if (!ja[a]) {
            e = [];
            while (b.length < a) {
                b += 1
            }
            c = parseInt(b, 2);
            f = function (a) {
                return a === "1"
            };
            for (g = 0; g <= c; g += 1) {
                d = g.toString(2);
                while (d.length < a) {
                    d = "0" + d
                }
                j = [];
                i = d.length;
                for (h = 0; h < i; h++) {
                    j.push(f(d[h]))
                }
                e[g] = j
            }
            ja[a] = e
        }
        return ja[a]
    }

    var ma = /\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;
    var na = /\*/;
    var oa = {};
    var pa = function (a) {
        var b = a.split(".");
        this.str = a;
        if (a[0] === "@") {
            this.isSpecial = true;
            this.value = ra(a)
        }
        this.firstKey = b[0];
        this.lastKey = b.pop();
        this.isPattern = na.test(a);
        this.parent = a === "" ? null : sa(b.join("."));
        this.isRoot = !a
    };
    pa.prototype = {
        equalsOrStartsWith: function (a) {
            return a === this || this.startsWith(a)
        }, join: function (a) {
            return sa(this.isRoot ? String(a) : this.str + "." + a)
        }, replace: function (a, b) {
            if (this === a) {
                return b
            }
            if (this.startsWith(a)) {
                return b === null ? b : sa(this.str.replace(a.str + ".", b.str + "."))
            }
        }, startsWith: function (a) {
            if (!a) {
                return false
            }
            return a && this.str.substr(0, a.str.length + 1) === a.str + "."
        }, toString: function () {
            throw new Error("Bad coercion")
        }, valueOf: function () {
            throw new Error("Bad coercion")
        }, wildcardMatches: function () {
            return this._wildcardMatches || (this._wildcardMatches = ia(this.str))
        }
    };
    function qa(a, b, c, d) {
        var e = a[b];
        if (e && (e.equalsOrStartsWith(d) || !e.equalsOrStartsWith(c))) {
            return
        }
        a[b] = e ? e.replace(c, d) : d;
        return true
    }

    function ra(a) {
        var b = a.slice(2);
        if (a[1] === "i") {
            return N(b) ? +b : b
        } else {
            return b
        }
    }

    function sa(a) {
        if (a == null) {
            return a
        }
        if (!oa.hasOwnProperty(a)) {
            oa[a] = new pa(a)
        }
        return oa[a]
    }

    function ta(a, b) {
        var c, d, e;
        c = b.str.split(".");
        e = [wa];
        while (d = c.shift()) {
            if (d === "*") {
                e = e.reduce(f, [])
            } else {
                if (e[0] === wa) {
                    e[0] = sa(d)
                } else {
                    e = e.map(ua(d))
                }
            }
        }
        return e;
        function f(b, c) {
            var d, e, f;
            if (c.isRoot) {
                f = [].concat(Object.keys(a.viewmodel.data), Object.keys(a.viewmodel.mappings), Object.keys(a.viewmodel.computations))
            } else {
                d = a.viewmodel.wrapped[c.str];
                e = d ? d.get() : a.viewmodel.get(c);
                f = e ? Object.keys(e) : null
            }
            if (f) {
                f.forEach(function (a) {
                    if (a !== "_ractive" || !K(e)) {
                        b.push(c.join(a))
                    }
                })
            }
            return b
        }
    }

    function ua(a) {
        return function (b) {
            return b.join(a)
        }
    }

    function va(a) {
        return a ? a.replace(ma, ".$1") : ""
    }

    var wa = sa("");
    var xa = za;
    var ya = "Cannot add to a non-numeric value";

    function za(a, b, c) {
        if (typeof b !== "string" || !N(c)) {
            throw new Error("Bad arguments")
        }
        var d = undefined, e = undefined;
        if (/\*/.test(b)) {
            e = {};
            ta(a, sa(va(b))).forEach(function (b) {
                var d = a.viewmodel.get(b);
                if (!N(d)) {
                    throw new Error(ya)
                }
                e[b.str] = d + c
            });
            return a.set(e)
        }
        d = a.get(b);
        if (!N(d)) {
            throw new Error(ya)
        }
        return a.set(b, +d + c)
    }

    var Aa = Ba;

    function Ba(a, b) {
        return xa(this, a, b === undefined ? 1 : +b)
    }

    var Ca;
    if (typeof window === "undefined") {
        Ca = null
    } else {
        (function (a, b, c) {
            var d, e;
            if (c.requestAnimationFrame) {
                return
            }
            for (d = 0; d < a.length && !c.requestAnimationFrame; ++d) {
                c.requestAnimationFrame = c[a[d] + "RequestAnimationFrame"]
            }
            if (!c.requestAnimationFrame) {
                e = c.setTimeout;
                c.requestAnimationFrame = function (a) {
                    var c, d, f;
                    c = Date.now();
                    d = Math.max(0, 16 - (c - b));
                    f = e(function () {
                        a(c + d)
                    }, d);
                    b = c + d;
                    return f
                }
            }
        })(k, 0, window);
        Ca = window.requestAnimationFrame
    }
    var Da = Ca;
    var Ea;
    if (typeof window !== "undefined" && window.performance && typeof window.performance.now === "function") {
        Ea = function () {
            return window.performance.now()
        }
    } else {
        Ea = function () {
            return Date.now()
        }
    }
    var Fa = Ea;
    var Ga = {
        construct: {deprecated: "beforeInit", replacement: "onconstruct"},
        render: {
            deprecated: "init",
            message: 'The "init" method has been deprecated ' + "and will likely be removed in a future release. " + 'You can either use the "oninit" method which will fire ' + "only once prior to, and regardless of, any eventual ractive " + "instance being rendered, or if you need to access the " + 'rendered DOM, use "onrender" instead. ' + "See http://docs.ractivejs.org/latest/migrating for more information."
        },
        complete: {deprecated: "complete", replacement: "oncomplete"}
    };

    function Ha(a) {
        this.event = a;
        this.method = "on" + a;
        this.deprecate = Ga[a]
    }

    Ha.prototype.fire = function (a, b) {
        function c(c) {
            if (a[c]) {
                b ? a[c](b) : a[c]();
                return true
            }
        }

        c(this.method);
        if (!a[this.method] && this.deprecate && c(this.deprecate.deprecated)) {
            if (this.deprecate.message) {
                Y(this.deprecate.message)
            } else {
                Y('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.', this.deprecate.deprecated, this.deprecate.replacement)
            }
        }
        b ? a.fire(this.event, b) : a.fire(this.event)
    };
    var Ia = Ha;

    function Ja(a, b) {
        var c = a.indexOf(b);
        if (c === -1) {
            a.push(b)
        }
    }

    function Ka(a, b) {
        for (var c = 0, d = a.length; c < d; c++) {
            if (a[c] == b) {
                return true
            }
        }
        return false
    }

    function La(a, b) {
        var c;
        if (!K(a) || !K(b)) {
            return false
        }
        if (a.length !== b.length) {
            return false
        }
        c = a.length;
        while (c--) {
            if (a[c] !== b[c]) {
                return false
            }
        }
        return true
    }

    function Ma(a) {
        if (typeof a === "string") {
            return [a]
        }
        if (a === undefined) {
            return []
        }
        return a
    }

    function Na(a) {
        return a[a.length - 1]
    }

    function Oa(a, b) {
        var c = a.indexOf(b);
        if (c !== -1) {
            a.splice(c, 1)
        }
    }

    function Pa(a) {
        var b = [], c = a.length;
        while (c--) {
            b[c] = a[c]
        }
        return b
    }

    var Qa, Ra = {}, Sa = {}, Ta = {};
    if (typeof Promise === "function") {
        Qa = Promise
    } else {
        Qa = function (a) {
            var b = [], c = [], d = Ra, e, f, g, h, i, j;
            g = function (a) {
                return function (g) {
                    if (d !== Ra) {
                        return
                    }
                    e = g;
                    d = a;
                    f = Wa(d === Sa ? b : c, e);
                    Va(f)
                }
            };
            h = g(Sa);
            i = g(Ta);
            try {
                a(h, i)
            } catch (a) {
                i(a)
            }
            j = {
                then: function (a, e) {
                    var g = new Qa(function (h, i) {
                        var j = function (a, b, c) {
                            if (typeof a === "function") {
                                b.push(function (b) {
                                    var c;
                                    try {
                                        c = a(b);
                                        Xa(g, c, h, i)
                                    } catch (a) {
                                        i(a)
                                    }
                                })
                            } else {
                                b.push(c)
                            }
                        };
                        j(a, b, h);
                        j(e, c, i);
                        if (d !== Ra) {
                            Va(f)
                        }
                    });
                    return g
                }
            };
            j["catch"] = function (a) {
                return this.then(null, a)
            };
            return j
        };
        Qa.all = function (a) {
            return new Qa(function (b, c) {
                var d = [], e, f, g;
                if (!a.length) {
                    b(d);
                    return
                }
                g = function (a, f) {
                    if (a && typeof a.then === "function") {
                        a.then(function (a) {
                            d[f] = a;
                            --e || b(d)
                        }, c)
                    } else {
                        d[f] = a;
                        --e || b(d)
                    }
                };
                e = f = a.length;
                while (f--) {
                    g(a[f], f)
                }
            })
        };
        Qa.resolve = function (a) {
            return new Qa(function (b) {
                b(a)
            })
        };
        Qa.reject = function (a) {
            return new Qa(function (b, c) {
                c(a)
            })
        }
    }
    var Ua = Qa;

    function Va(a) {
        setTimeout(a, 0)
    }

    function Wa(a, b) {
        return function () {
            var c;
            while (c = a.shift()) {
                c(b)
            }
        }
    }

    function Xa(a, b, c, d) {
        var e;
        if (b === a) {
            throw new TypeError("A promise's fulfillment handler cannot return the same promise")
        }
        if (b instanceof Qa) {
            b.then(c, d)
        } else if (b && (typeof b === "object" || typeof b === "function")) {
            try {
                e = b.then
            } catch (a) {
                d(a);
                return
            }
            if (typeof e === "function") {
                var f, g, h;
                g = function (b) {
                    if (f) {
                        return
                    }
                    f = true;
                    Xa(a, b, c, d)
                };
                h = function (a) {
                    if (f) {
                        return
                    }
                    f = true;
                    d(a)
                };
                try {
                    e.call(b, g, h)
                } catch (a) {
                    if (!f) {
                        d(a);
                        f = true;
                        return
                    }
                }
            } else {
                c(b)
            }
        } else {
            c(b)
        }
    }

    var Ya = function (a) {
        do {
            if (a.context !== undefined) {
                return a.context
            }
        } while (a = a.parent);
        return wa
    };
    var Za = $a;

    function $a(a, b, c) {
        var d;
        b = va(b);
        if (b.substr(0, 2) === "~/") {
            d = sa(b.substring(2));
            bb(a, d.firstKey, c)
        } else if (b[0] === ".") {
            d = _a(Ya(c), b);
            if (d) {
                bb(a, d.firstKey, c)
            }
        } else {
            d = ab(a, sa(b), c)
        }
        return d
    }

    function _a(a, b) {
        var c;
        if (a != undefined && typeof a !== "string") {
            a = a.str
        }
        if (b === ".")return sa(a);
        c = a ? a.split(".") : [];
        if (b.substr(0, 3) === "../") {
            while (b.substr(0, 3) === "../") {
                if (!c.length) {
                    throw new Error('Could not resolve reference - too many "../" prefixes')
                }
                c.pop();
                b = b.substring(3)
            }
            c.push(b);
            return sa(c.join("."))
        }
        if (!a) {
            return sa(b.replace(/^\.\/?/, ""))
        }
        return sa(a + b.replace(/^\.\//, "."))
    }

    function ab(a, b, c, d) {
        var e, f, g, h, i;
        if (b.isRoot) {
            return b
        }
        f = b.firstKey;
        while (c) {
            e = c.context;
            c = c.parent;
            if (!e) {
                continue
            }
            h = true;
            g = a.viewmodel.get(e);
            if (g && (typeof g === "object" || typeof g === "function") && f in g) {
                return e.join(b.str)
            }
        }
        if (cb(a.viewmodel, f)) {
            return b
        }
        if (a.parent && !a.isolated) {
            h = true;
            c = a.component.parentFragment;
            f = sa(f);
            if (i = ab(a.parent, f, c, true)) {
                a.viewmodel.map(f, {origin: a.parent.viewmodel, keypath: i});
                return b
            }
        }
        if (!d && !h) {
            a.viewmodel.set(b, undefined);
            return b
        }
    }

    function bb(a, b) {
        var c;
        if (!a.parent || a.isolated || cb(a.viewmodel, b)) {
            return
        }
        b = sa(b);
        if (c = ab(a.parent, b, a.component.parentFragment, true)) {
            a.viewmodel.map(b, {origin: a.parent.viewmodel, keypath: c})
        }
    }

    function cb(a, b) {
        return b === "" || b in a.data || b in a.computations || b in a.mappings
    }

    function db(a) {
        a.teardown()
    }

    function eb(a) {
        a.unbind()
    }

    function fb(a) {
        a.unrender()
    }

    function gb(a) {
        a.cancel()
    }

    var hb = function (a, b) {
        this.callback = a;
        this.parent = b;
        this.intros = [];
        this.outros = [];
        this.children = [];
        this.totalChildren = this.outroChildren = 0;
        this.detachQueue = [];
        this.decoratorQueue = [];
        this.outrosComplete = false;
        if (b) {
            b.addChild(this)
        }
    };
    hb.prototype = {
        addChild: function (a) {
            this.children.push(a);
            this.totalChildren += 1;
            this.outroChildren += 1
        }, decrementOutros: function () {
            this.outroChildren -= 1;
            kb(this)
        }, decrementTotal: function () {
            this.totalChildren -= 1;
            kb(this)
        }, add: function (a) {
            var b = a.isIntro ? this.intros : this.outros;
            b.push(a)
        }, addDecorator: function (a) {
            this.decoratorQueue.push(a)
        }, remove: function (a) {
            var b = a.isIntro ? this.intros : this.outros;
            Oa(b, a);
            kb(this)
        }, init: function () {
            this.ready = true;
            kb(this)
        }, detachNodes: function () {
            this.decoratorQueue.forEach(db);
            this.detachQueue.forEach(ib);
            this.children.forEach(jb)
        }
    };
    function ib(a) {
        a.detach()
    }

    function jb(a) {
        a.detachNodes()
    }

    function kb(a) {
        if (!a.ready || a.outros.length || a.outroChildren)return;
        if (!a.outrosComplete) {
            if (a.parent) {
                a.parent.decrementOutros(a)
            } else {
                a.detachNodes()
            }
            a.outrosComplete = true
        }
        if (!a.intros.length && !a.totalChildren) {
            if (typeof a.callback === "function") {
                a.callback()
            }
            if (a.parent) {
                a.parent.decrementTotal()
            }
        }
    }

    var lb = hb;
    var mb, nb, ob = [], pb = new Ia("change");
    nb = {
        start: function (a, b) {
            var c, d;
            if (b) {
                c = new Ua(function (a) {
                    return d = a
                })
            }
            mb = {
                previousBatch: mb,
                transitionManager: new lb(d, mb && mb.transitionManager),
                views: [],
                tasks: [],
                ractives: [],
                instance: a
            };
            if (a) {
                mb.ractives.push(a)
            }
            return c
        }, end: function () {
            rb();
            mb.transitionManager.init();
            if (!mb.previousBatch && !!mb.instance)mb.instance.viewmodel.changes = [];
            mb = mb.previousBatch
        }, addRactive: function (a) {
            if (mb) {
                Ja(mb.ractives, a)
            }
        }, registerTransition: function (a) {
            a._manager = mb.transitionManager;
            mb.transitionManager.add(a)
        }, registerDecorator: function (a) {
            mb.transitionManager.addDecorator(a)
        }, addView: function (a) {
            mb.views.push(a)
        }, addUnresolved: function (a) {
            ob.push(a)
        }, removeUnresolved: function (a) {
            Oa(ob, a)
        }, detachWhenReady: function (a) {
            mb.transitionManager.detachQueue.push(a)
        }, scheduleTask: function (a, b) {
            var c;
            if (!mb) {
                a()
            } else {
                c = mb;
                while (b && c.previousBatch) {
                    c = c.previousBatch
                }
                c.tasks.push(a)
            }
        }
    };
    var qb = nb;

    function rb() {
        var a, b, c;
        while (mb.ractives.length) {
            b = mb.ractives.pop();
            c = b.viewmodel.applyChanges();
            if (c) {
                pb.fire(b, c)
            }
        }
        sb();
        for (a = 0; a < mb.views.length; a += 1) {
            mb.views[a].update()
        }
        mb.views.length = 0;
        for (a = 0; a < mb.tasks.length; a += 1) {
            mb.tasks[a]()
        }
        mb.tasks.length = 0;
        if (mb.ractives.length)return rb()
    }

    function sb() {
        var a, b, c, d;
        a = ob.length;
        while (a--) {
            b = ob[a];
            if (b.keypath) {
                ob.splice(a, 1);
                continue
            }
            if (c = Za(b.root, b.ref, b.parentFragment)) {
                (d || (d = [])).push({item: b, keypath: c});
                ob.splice(a, 1)
            }
        }
        if (d) {
            d.forEach(tb)
        }
    }

    function tb(a) {
        a.item.resolve(a.keypath)
    }

    var ub = [];
    var vb = {
        tick: function () {
            var a, b, c;
            c = Fa();
            qb.start();
            for (a = 0; a < ub.length; a += 1) {
                b = ub[a];
                if (!b.tick(c)) {
                    ub.splice(a--, 1)
                }
            }
            qb.end();
            if (ub.length) {
                Da(vb.tick)
            } else {
                vb.running = false
            }
        }, add: function (a) {
            ub.push(a);
            if (!vb.running) {
                vb.running = true;
                Da(vb.tick)
            }
        }, abort: function (a, b) {
            var c = ub.length, d;
            while (c--) {
                d = ub[c];
                if (d.root === b && d.keypath === a) {
                    d.stop()
                }
            }
        }
    };
    var wb = vb;
    var xb = function (a) {
        var b;
        this.startTime = Date.now();
        for (b in a) {
            if (a.hasOwnProperty(b)) {
                this[b] = a[b]
            }
        }
        this.interpolator = ea(this.from, this.to, this.root, this.interpolator);
        this.running = true;
        this.tick()
    };
    xb.prototype = {
        tick: function () {
            var a, b, c, d, e, f;
            f = this.keypath;
            if (this.running) {
                d = Date.now();
                a = d - this.startTime;
                if (a >= this.duration) {
                    if (f !== null) {
                        qb.start(this.root);
                        this.root.viewmodel.set(f, this.to);
                        qb.end()
                    }
                    if (this.step) {
                        this.step(1, this.to)
                    }
                    this.complete(this.to);
                    e = this.root._animations.indexOf(this);
                    if (e === -1) {
                        Y("Animation was not found")
                    }
                    this.root._animations.splice(e, 1);
                    this.running = false;
                    return false
                }
                b = this.easing ? this.easing(a / this.duration) : a / this.duration;
                if (f !== null) {
                    c = this.interpolator(b);
                    qb.start(this.root);
                    this.root.viewmodel.set(f, c);
                    qb.end()
                }
                if (this.step) {
                    this.step(b, c)
                }
                return true
            }
            return false
        }, stop: function () {
            var a;
            this.running = false;
            a = this.root._animations.indexOf(this);
            if (a === -1) {
                Y("Animation was not found")
            }
            this.root._animations.splice(a, 1)
        }
    };
    var yb = xb;
    var zb = Bb;
    var Ab = {stop: x};

    function Bb(a, b, c) {
        var d, e, f, g, h, i, j, k, l, m, n, o, p, q;
        d = new Ua(function (a) {
            return e = a
        });
        if (typeof a === "object") {
            c = b || {};
            i = c.easing;
            j = c.duration;
            h = [];
            k = c.step;
            l = c.complete;
            if (k || l) {
                n = {};
                c.step = null;
                c.complete = null;
                m = function (a) {
                    return function (b, c) {
                        n[a] = c
                    }
                }
            }
            for (f in a) {
                if (a.hasOwnProperty(f)) {
                    if (k || l) {
                        o = m(f);
                        c = {easing: i, duration: j};
                        if (k) {
                            c.step = o
                        }
                    }
                    c.complete = l ? o : x;
                    h.push(Cb(this, f, a[f], c))
                }
            }
            q = {easing: i, duration: j};
            if (k) {
                q.step = function (a) {
                    return k(a, n)
                }
            }
            if (l) {
                d.then(function (a) {
                    return l(a, n)
                })
            }
            q.complete = e;
            p = Cb(this, null, null, q);
            h.push(p);
            d.stop = function () {
                var a;
                while (a = h.pop()) {
                    a.stop()
                }
                if (p) {
                    p.stop()
                }
            };
            return d
        }
        c = c || {};
        if (c.complete) {
            d.then(c.complete)
        }
        c.complete = e;
        g = Cb(this, a, b, c);
        d.stop = function () {
            return g.stop()
        };
        return d
    }

    function Cb(a, b, c, d) {
        var e, f, g, h;
        if (b) {
            b = sa(va(b))
        }
        if (b !== null) {
            h = a.viewmodel.get(b)
        }
        wb.abort(b, a);
        if (M(h, c)) {
            if (d.complete) {
                d.complete(d.to)
            }
            return Ab
        }
        if (d.easing) {
            if (typeof d.easing === "function") {
                e = d.easing
            } else {
                e = a.easing[d.easing]
            }
            if (typeof e !== "function") {
                e = null
            }
        }
        f = d.duration === undefined ? 400 : d.duration;
        g = new yb({
            keypath: b,
            from: h,
            to: c,
            root: a,
            duration: f,
            easing: e,
            interpolator: d.interpolator,
            step: d.step,
            complete: d.complete
        });
        wb.add(g);
        a._animations.push(g);
        return g
    }

    var Db = Fb;
    var Eb = new Ia("detach");

    function Fb() {
        if (this.detached) {
            return this.detached
        }
        if (this.el) {
            Oa(this.el.__ractive_instances__, this)
        }
        this.detached = this.fragment.detach();
        Eb.fire(this);
        return this.detached
    }

    var Gb = Hb;

    function Hb(a) {
        if (!this.el) {
            return null
        }
        return this.fragment.find(a)
    }

    var Ib = Jb;

    function Jb(a, b) {
        var c;
        if (this._isComponentQuery) {
            c = !this.selector || a.name === this.selector
        } else {
            c = a.node ? m(a.node, this.selector) : null
        }
        if (c) {
            this.push(a.node || a.instance);
            if (!b) {
                this._makeDirty()
            }
            return true
        }
    }

    var Kb = function () {
        var a, b, c;
        a = this._root[this._isComponentQuery ? "liveComponentQueries" : "liveQueries"];
        b = this.selector;
        c = a.indexOf(b);
        if (c !== -1) {
            a.splice(c, 1);
            a[b] = null
        }
    };
    var Lb = function (a, b) {
        var c, d, e, f, g, h, i, j, k, l;
        c = Nb(a.component || a._ractive.proxy);
        d = Nb(b.component || b._ractive.proxy);
        e = Na(c);
        f = Na(d);
        while (e && e === f) {
            c.pop();
            d.pop();
            g = e;
            e = Na(c);
            f = Na(d)
        }
        e = e.component || e;
        f = f.component || f;
        k = e.parentFragment;
        l = f.parentFragment;
        if (k === l) {
            h = k.items.indexOf(e);
            i = l.items.indexOf(f);
            return h - i || c.length - d.length
        }
        if (j = g.fragments) {
            h = j.indexOf(k);
            i = j.indexOf(l);
            return h - i || c.length - d.length
        }
        throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")
    };

    function Mb(a) {
        var b;
        if (b = a.parentFragment) {
            return b.owner
        }
        if (a.component && (b = a.component.parentFragment)) {
            return b.owner
        }
    }

    function Nb(a) {
        var b, c;
        b = [a];
        c = Mb(a);
        while (c) {
            b.push(c);
            c = Mb(c)
        }
        return b
    }

    var Ob = function (a, b) {
        var c;
        if (a.compareDocumentPosition) {
            c = a.compareDocumentPosition(b);
            return c & 2 ? 1 : -1
        }
        return Lb(a, b)
    };
    var Pb = function () {
        this.sort(this._isComponentQuery ? Lb : Ob);
        this._dirty = false
    };
    var Qb = function () {
        var a = this;
        if (!this._dirty) {
            this._dirty = true;
            qb.scheduleTask(function () {
                a._sort()
            })
        }
    };
    var Rb = function (a) {
        var b = this.indexOf(this._isComponentQuery ? a.instance : a);
        if (b !== -1) {
            this.splice(b, 1)
        }
    };
    var Sb = Tb;

    function Tb(a, b, c, d) {
        var e = [];
        E(e, {selector: {value: b}, live: {value: c}, _isComponentQuery: {value: d}, _test: {value: Ib}});
        if (!c) {
            return e
        }
        E(e, {
            cancel: {value: Kb},
            _root: {value: a},
            _sort: {value: Pb},
            _makeDirty: {value: Qb},
            _remove: {value: Rb},
            _dirty: {value: false, writable: true}
        });
        return e
    }

    var Ub = Vb;

    function Vb(a, b) {
        var c, d;
        if (!this.el) {
            return []
        }
        b = b || {};
        c = this._liveQueries;
        if (d = c[a]) {
            return b && b.live ? d : d.slice()
        }
        d = Sb(this, a, !!b.live, false);
        if (d.live) {
            c.push(a);
            c["_" + a] = d
        }
        this.fragment.findAll(a, d);
        return d
    }

    var Wb = Xb;

    function Xb(a, b) {
        var c, d;
        b = b || {};
        c = this._liveComponentQueries;
        if (d = c[a]) {
            return b && b.live ? d : d.slice()
        }
        d = Sb(this, a, !!b.live, true);
        if (d.live) {
            c.push(a);
            c["_" + a] = d
        }
        this.fragment.findAllComponents(a, d);
        return d
    }

    var Yb = Zb;

    function Zb(a) {
        return this.fragment.findComponent(a)
    }

    var $b = _b;

    function _b(a) {
        if (this.container) {
            if (this.container.component && this.container.component.name === a) {
                return this.container
            } else {
                return this.container.findContainer(a)
            }
        }
        return null
    }

    var ac = bc;

    function bc(a) {
        if (this.parent) {
            if (this.parent.component && this.parent.component.name === a) {
                return this.parent
            } else {
                return this.parent.findParent(a)
            }
        }
        return null
    }

    var cc = {
        enqueue: function (a, b) {
            if (a.event) {
                a._eventQueue = a._eventQueue || [];
                a._eventQueue.push(a.event)
            }
            a.event = b
        }, dequeue: function (a) {
            if (a._eventQueue && a._eventQueue.length) {
                a.event = a._eventQueue.pop()
            } else {
                delete a.event
            }
        }
    };
    var dc = cc;
    var ec = fc;

    function fc(a, b) {
        var c = arguments[2] === undefined ? {} : arguments[2];
        if (!b) {
            return
        }
        if (!c.event) {
            c.event = {name: b, _noArg: true}
        } else {
            c.event.name = b
        }
        var d = sa(b).wildcardMatches();
        gc(a, d, c.event, c.args, true)
    }

    function gc(a, b, c, d) {
        var e = arguments[4] === undefined ? false : arguments[4];
        var f, g, h = true;
        dc.enqueue(a, c);
        for (g = b.length; g >= 0; g--) {
            f = a._subs[b[g]];
            if (f) {
                h = hc(a, f, c, d) && h
            }
        }
        dc.dequeue(a);
        if (a.parent && h) {
            if (e && a.component) {
                var i = a.component.name + "." + b[b.length - 1];
                b = sa(i).wildcardMatches();
                if (c) {
                    c.component = a
                }
            }
            gc(a.parent, b, c, d)
        }
    }

    function hc(a, b, c, d) {
        var e = null, f = false;
        if (c && !c._noArg) {
            d = [c].concat(d)
        }
        b = b.slice();
        for (var g = 0, h = b.length; g < h; g += 1) {
            if (b[g].apply(a, d) === false) {
                f = true
            }
        }
        if (c && !c._noArg && f && (e = c.original)) {
            e.preventDefault && e.preventDefault();
            e.stopPropagation && e.stopPropagation()
        }
        return !f
    }

    var ic = jc;

    function jc(a) {
        var b = {args: Array.prototype.slice.call(arguments, 1)};
        ec(this, a, b)
    }

    var kc = mc;
    var lc = {capture: true, noUnwrap: true, fullRootGet: true};

    function mc(a) {
        var b;
        a = sa(va(a));
        b = this.viewmodel.get(a, lc);
        if (b === undefined && this.parent && !this.isolated) {
            if (Za(this, a.str, this.component.parentFragment)) {
                b = this.viewmodel.get(a)
            }
        }
        return b
    }

    var nc = pc;
    var oc = new Ia("insert");

    function pc(a, b) {
        if (!this.fragment.rendered) {
            throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.")
        }
        a = u(a);
        b = u(b) || null;
        if (!a) {
            throw new Error("You must specify a valid target to insert into")
        }
        a.insertBefore(this.detach(), b);
        this.el = a;
        (a.__ractive_instances__ || (a.__ractive_instances__ = [])).push(this);
        this.detached = null;
        qc(this)
    }

    function qc(a) {
        oc.fire(a);
        a.findAllComponents("*").forEach(function (a) {
            qc(a.instance)
        })
    }

    var rc = sc;

    function sc(a, b, c) {
        var d, e;
        a = sa(va(a));
        d = this.viewmodel.get(a);
        if (!K(d) || !K(b)) {
            return this.set(a, b, c && c.complete)
        }
        e = qb.start(this, true);
        this.viewmodel.merge(a, d, b, c);
        qb.end();
        return e
    }

    var tc = function (a, b, c, d) {
        this.root = a;
        this.keypath = b;
        this.callback = c;
        this.defer = d.defer;
        this.context = d && d.context ? d.context : a
    };
    tc.prototype = {
        init: function (a) {
            this.value = this.root.get(this.keypath.str);
            if (a !== false) {
                this.update()
            } else {
                this.oldValue = this.value
            }
        }, setValue: function (a) {
            var b = this;
            if (!M(a, this.value)) {
                this.value = a;
                if (this.defer && this.ready) {
                    qb.scheduleTask(function () {
                        return b.update()
                    })
                } else {
                    this.update()
                }
            }
        }, update: function () {
            if (this.updating) {
                return
            }
            this.updating = true;
            this.callback.call(this.context, this.value, this.oldValue, this.keypath.str);
            this.oldValue = this.value;
            this.updating = false
        }
    };
    var uc = tc;
    var vc = wc;

    function wc(a, b) {
        var c, d;
        c = ta(a, b);
        d = {};
        c.forEach(function (b) {
            d[b.str] = a.get(b.str)
        });
        return d
    }

    var xc, yc = Array.prototype.slice;
    xc = function (a, b, c, d) {
        this.root = a;
        this.callback = c;
        this.defer = d.defer;
        this.keypath = b;
        this.regex = new RegExp("^" + b.str.replace(/\./g, "\\.").replace(/\*/g, "([^\\.]+)") + "$");
        this.values = {};
        if (this.defer) {
            this.proxies = []
        }
        this.context = d && d.context ? d.context : a
    };
    xc.prototype = {
        init: function (a) {
            var b, c;
            b = vc(this.root, this.keypath);
            if (a !== false) {
                for (c in b) {
                    if (b.hasOwnProperty(c)) {
                        this.update(sa(c))
                    }
                }
            } else {
                this.values = b
            }
        }, update: function (a) {
            var b = this;
            var c;
            if (a.isPattern) {
                c = vc(this.root, a);
                for (a in c) {
                    if (c.hasOwnProperty(a)) {
                        this.update(sa(a))
                    }
                }
                return
            }
            if (this.root.viewmodel.implicitChanges[a.str]) {
                return
            }
            if (this.defer && this.ready) {
                qb.scheduleTask(function () {
                    return b.getProxy(a).update()
                });
                return
            }
            this.reallyUpdate(a)
        }, reallyUpdate: function (a) {
            var b, c, d, e;
            b = a.str;
            c = this.root.viewmodel.get(a);
            if (this.updating) {
                this.values[b] = c;
                return
            }
            this.updating = true;
            if (!M(c, this.values[b]) || !this.ready) {
                d = yc.call(this.regex.exec(b), 1);
                e = [c, this.values[b], b].concat(d);
                this.values[b] = c;
                this.callback.apply(this.context, e)
            }
            this.updating = false
        }, getProxy: function (a) {
            var b = this;
            if (!this.proxies[a.str]) {
                this.proxies[a.str] = {
                    update: function () {
                        return b.reallyUpdate(a)
                    }
                }
            }
            return this.proxies[a.str]
        }
    };
    var zc = xc;
    var Ac = Cc;
    var Bc = {};

    function Cc(a, b, c, d) {
        var e, f, g;
        b = sa(va(b));
        d = d || Bc;
        if (b.isPattern) {
            e = new zc(a, b, c, d);
            a.viewmodel.patternObservers.push(e);
            f = true
        } else {
            e = new uc(a, b, c, d)
        }
        e.init(d.init);
        a.viewmodel.register(b, e, f ? "patternObservers" : "observers");
        e.ready = true;
        var h = {
            cancel: function () {
                var c;
                if (g) {
                    return
                }
                if (f) {
                    c = a.viewmodel.patternObservers.indexOf(e);
                    a.viewmodel.patternObservers.splice(c, 1);
                    a.viewmodel.unregister(b, e, "patternObservers")
                } else {
                    a.viewmodel.unregister(b, e, "observers")
                }
                g = true
            }
        };
        a._observers.push(h);
        return h
    }

    var Dc = Ec;

    function Ec(a, b, c) {
        var d, e, f, g;
        if (O(a)) {
            c = b;
            e = a;
            d = [];
            for (a in e) {
                if (e.hasOwnProperty(a)) {
                    b = e[a];
                    d.push(this.observe(a, b, c))
                }
            }
            return {
                cancel: function () {
                    while (d.length) {
                        d.pop().cancel()
                    }
                }
            }
        }
        if (typeof a === "function") {
            c = b;
            b = a;
            a = "";
            return Ac(this, a, b, c)
        }
        f = a.split(" ");
        if (f.length === 1) {
            return Ac(this, a, b, c)
        }
        d = [];
        g = f.length;
        while (g--) {
            a = f[g];
            if (a) {
                d.push(Ac(this, a, b, c))
            }
        }
        return {
            cancel: function () {
                while (d.length) {
                    d.pop().cancel()
                }
            }
        }
    }

    var Fc = Gc;

    function Gc(a, b, c) {
        var d = this.observe(a, function () {
            b.apply(this, arguments);
            d.cancel()
        }, {init: false, defer: c && c.defer});
        return d
    }

    var Hc = function (a) {
        return a.trim()
    };
    var Ic = function (a) {
        return a !== ""
    };
    var Jc = Kc;

    function Kc(a, b) {
        var c = this;
        var d;
        if (!a) {
            for (a in this._subs) {
                delete this._subs[a]
            }
        } else {
            d = a.split(" ").map(Hc).filter(Ic);
            d.forEach(function (a) {
                var d, e;
                if (d = c._subs[a]) {
                    if (b) {
                        e = d.indexOf(b);
                        if (e !== -1) {
                            d.splice(e, 1)
                        }
                    } else {
                        c._subs[a] = []
                    }
                }
            })
        }
        return this
    }

    var Lc = Mc;

    function Mc(a, b) {
        var c = this;
        var d, e, f;
        if (typeof a === "object") {
            d = [];
            for (e in a) {
                if (a.hasOwnProperty(e)) {
                    d.push(this.on(e, a[e]))
                }
            }
            return {
                cancel: function () {
                    var a;
                    while (a = d.pop()) {
                        a.cancel()
                    }
                }
            }
        }
        f = a.split(" ").map(Hc).filter(Ic);
        f.forEach(function (a) {
            (c._subs[a] || (c._subs[a] = [])).push(b)
        });
        return {
            cancel: function () {
                return c.off(a, b)
            }
        }
    }

    var Nc = Oc;

    function Oc(a, b) {
        var c = this.on(a, function () {
            b.apply(this, arguments);
            c.cancel()
        });
        return c
    }

    var Pc = Qc;

    function Qc(a, b, c) {
        var d, e, f = [], g, h, i, j;
        d = Rc(a, b, c);
        if (!d) {
            return null
        }
        e = a.length;
        i = d.length - 2 - d[1];
        g = Math.min(e, d[0]);
        h = g + d[1];
        for (j = 0; j < g; j += 1) {
            f.push(j)
        }
        for (; j < h; j += 1) {
            f.push(-1)
        }
        for (; j < e; j += 1) {
            f.push(j + i)
        }
        if (i !== 0) {
            f.touchedFrom = d[0]
        } else {
            f.touchedFrom = a.length
        }
        return f
    }

    function Rc(a, b, c) {
        switch (b) {
            case"splice":
                if (c[0] !== undefined && c[0] < 0) {
                    c[0] = a.length + Math.max(c[0], -a.length)
                }
                while (c.length < 2) {
                    c.push(0)
                }
                c[1] = Math.min(c[1], a.length - c[0]);
                return c;
            case"sort":
            case"reverse":
                return null;
            case"pop":
                if (a.length) {
                    return [a.length - 1, 1]
                }
                return [0, 0];
            case"push":
                return [a.length, 0].concat(c);
            case"shift":
                return [0, a.length ? 1 : 0];
            case"unshift":
                return [0, 0].concat(c)
        }
    }

    var Sc = Array.prototype;
    var Tc = function (a) {
        return function (b) {
            for (var c = arguments.length, d = Array(c > 1 ? c - 1 : 0), e = 1; e < c; e++) {
                d[e - 1] = arguments[e]
            }
            var f, g = [], h, i, j;
            b = sa(va(b));
            f = this.viewmodel.get(b);
            h = f.length;
            if (!K(f)) {
                throw new Error("Called ractive." + a + "('" + b.str + "'), but '" + b.str + "' does not refer to an array")
            }
            g = Pc(f, a, d);
            j = Sc[a].apply(f, d);
            i = qb.start(this, true).then(function () {
                return j
            });
            if (!!g) {
                this.viewmodel.smartUpdate(b, f, g)
            } else {
                this.viewmodel.mark(b)
            }
            qb.end();
            return i
        }
    };
    var Uc = Tc("pop");
    var Vc = Tc("push");
    var Wc, Xc, Yc, Zc, $c, _c, ad = "/* Ractive.js component styles */\n", bd = [], cd = false;
    if (!e) {
        Wc = {add: x, apply: x}
    } else {
        Yc = document.createElement("style");
        Yc.type = "text/css";
        Zc = document.getElementsByTagName("head")[0];
        _c = false;
        $c = Yc.styleSheet;
        Xc = function () {
            var a = ad + bd.map(function (a) {
                    return "\n/* {" + a.id + "} */\n" + a.styles
                }).join("\n");
            if ($c) {
                $c.cssText = a
            } else {
                Yc.innerHTML = a
            }
            if (!_c) {
                Zc.appendChild(Yc);
                _c = true
            }
        };
        Wc = {
            add: function (a) {
                bd.push(a);
                cd = true
            }, apply: function () {
                if (cd) {
                    Xc();
                    cd = false
                }
            }
        }
    }
    var dd = Wc;
    var ed = hd;
    var fd = new Ia("render"), gd = new Ia("complete");

    function hd(a, b) {
        var c = this;
        var d, e, f;
        f = this.transitionsEnabled;
        if (this.noIntro) {
            this.transitionsEnabled = false
        }
        d = qb.start(this, true);
        qb.scheduleTask(function () {
            return fd.fire(c)
        }, true);
        if (this.fragment.rendered) {
            throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first")
        }
        a = u(a) || this.el;
        b = u(b) || this.anchor;
        this.el = a;
        this.anchor = b;
        if (!this.append && a) {
            var g = a.__ractive_instances__;
            if (g && g.length) {
                id(g)
            }
            a.innerHTML = ""
        }
        if (this.cssId) {
            dd.apply()
        }
        if (a) {
            if (!(e = a.__ractive_instances__)) {
                a.__ractive_instances__ = [this]
            } else {
                e.push(this)
            }
            if (b) {
                a.insertBefore(this.fragment.render(), b)
            } else {
                a.appendChild(this.fragment.render())
            }
        }
        qb.end();
        this.transitionsEnabled = f;
        return d.then(function () {
            return gd.fire(c)
        })
    }

    function id(a) {
        a.splice(0, a.length).forEach(db)
    }

    var jd = {
        extend: function (a, b, c) {
            b.adapt = ld(b.adapt, Ma(c.adapt))
        }, init: function () {
        }
    };
    var kd = jd;

    function ld(a, b) {
        var c = a.slice(), d = b.length;
        while (d--) {
            if (!~c.indexOf(b[d])) {
                c.push(b[d])
            }
        }
        return c
    }

    var md = sd;
    var nd = /(?:^|\})?\s*([^\{\}]+)\s*\{/g, od = /\/\*.*?\*\//g, pd = /((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g, qd = /^@media/, rd = /\[data-ractive-css~="\{[a-z0-9-]+\}"]/g;

    function sd(a, b) {
        var c, d, e;
        d = '[data-ractive-css~="{' + b + '}"]';
        e = function (a) {
            var b, c, e, f, g, h, i, j = [];
            b = [];
            while (c = pd.exec(a)) {
                b.push({str: c[0], base: c[1], modifiers: c[2]})
            }
            f = b.map(ud);
            i = b.length;
            while (i--) {
                h = f.slice();
                e = b[i];
                h[i] = e.base + d + e.modifiers || "";
                g = f.slice();
                g[i] = d + " " + g[i];
                j.push(h.join(" "), g.join(" "))
            }
            return j.join(", ")
        };
        if (rd.test(a)) {
            c = a.replace(rd, d)
        } else {
            c = a.replace(od, "").replace(nd, function (a, b) {
                var c, d;
                if (qd.test(b))return a;
                c = b.split(",").map(td);
                d = c.map(e).join(", ") + " ";
                return a.replace(b, d)
            })
        }
        return c
    }

    function td(a) {
        if (a.trim) {
            return a.trim()
        }
        return a.replace(/^\s+/, "").replace(/\s+$/, "")
    }

    function ud(a) {
        return a.str
    }

    var vd = 1;
    var wd = {
        name: "css", extend: function (a, b, c) {
            if (c.css) {
                var d = vd++;
                var e = c.noCssTransform ? c.css : md(c.css, d);
                b.cssId = d;
                dd.add({id: d, styles: e})
            }
        }, init: function () {
        }
    };
    var xd = wd;

    function yd(a) {
        if (a && a.constructor !== Object) {
            if (typeof a === "function") {
            } else if (typeof a !== "object") {
                U("data option must be an object or a function, `" + a + "` is not valid")
            } else {
                Y("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")
            }
        }
    }

    var zd = {
        name: "data", extend: function (a, b, c) {
            var d = undefined, e = undefined;
            if (c.data && O(c.data)) {
                for (d in c.data) {
                    e = c.data[d];
                    if (e && typeof e === "object") {
                        if (O(e) || K(e)) {
                            Y("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }")
                        }
                    }
                }
            }
            b.data = Bd(b.data, c.data)
        }, init: function (a, b, c) {
            var d = Bd(a.prototype.data, c.data);
            if (typeof d === "function") {
                d = d.call(b)
            }
            return d || {}
        }, reset: function (a) {
            var b = this.init(a.constructor, a, a.viewmodel);
            a.viewmodel.reset(b);
            return true
        }
    };
    var Ad = zd;

    function Bd(a, b) {
        yd(b);
        var c = typeof a === "function";
        var d = typeof b === "function";
        if (!b && !c) {
            b = {}
        }
        if (!c && !d) {
            return Dd(b, a)
        }
        return function () {
            var e = d ? Cd(b, this) : b;
            var f = c ? Cd(a, this) : a;
            return Dd(e, f)
        }
    }

    function Cd(a, b) {
        var c = a.call(b);
        if (!c)return;
        if (typeof c !== "object") {
            U("Data function must return an object")
        }
        if (c.constructor !== Object) {
            Z("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged")
        }
        return c
    }

    function Dd(a, b) {
        if (a && b) {
            for (var c in b) {
                if (!(c in a)) {
                    a[c] = b[c]
                }
            }
            return a
        }
        return a || b
    }

    var Ed, Fd, Gd = /^\s+/;
    Fd = function (a) {
        this.name = "ParseError";
        this.message = a;
        try {
            throw new Error(a)
        } catch (a) {
            this.stack = a.stack
        }
    };
    Fd.prototype = Error.prototype;
    Ed = function (a, b) {
        var c, d, e = 0;
        this.str = a;
        this.options = b || {};
        this.pos = 0;
        this.lines = this.str.split("\n");
        this.lineEnds = this.lines.map(function (a) {
            var b = e + a.length + 1;
            e = b;
            return b
        }, 0);
        if (this.init)this.init(a, b);
        c = [];
        while (this.pos < this.str.length && (d = this.read())) {
            c.push(d)
        }
        this.leftover = this.remaining();
        this.result = this.postProcess ? this.postProcess(c, b) : c
    };
    Ed.prototype = {
        read: function (a) {
            var b, c, d, e;
            if (!a)a = this.converters;
            b = this.pos;
            d = a.length;
            for (c = 0; c < d; c += 1) {
                this.pos = b;
                if (e = a[c](this)) {
                    return e
                }
            }
            return null
        }, getLinePos: function (a) {
            var b = 0, c = 0, d;
            while (a >= this.lineEnds[b]) {
                c = this.lineEnds[b];
                b += 1
            }
            d = a - c;
            return [b + 1, d + 1, a]
        }, error: function (a) {
            var b = this.getLinePos(this.pos);
            var c = b[0];
            var d = b[1];
            var e = this.lines[b[0] - 1];
            var f = 0;
            var g = e.replace(/\t/g, function (a, c) {
                    if (c < b[1]) {
                        f += 1
                    }
                    return "  "
                }) + "\n" + new Array(b[1] + f).join(" ") + "^----";
            var h = new Fd("" + a + " at line " + c + " character " + d + ":\n" + g);
            h.line = b[0];
            h.character = b[1];
            h.shortMessage = a;
            throw h
        }, matchString: function (a) {
            if (this.str.substr(this.pos, a.length) === a) {
                this.pos += a.length;
                return a
            }
        }, matchPattern: function (a) {
            var b;
            if (b = a.exec(this.remaining())) {
                this.pos += b[0].length;
                return b[1] || b[0]
            }
        }, allowWhitespace: function () {
            this.matchPattern(Gd)
        }, remaining: function () {
            return this.str.substring(this.pos)
        }, nextChar: function () {
            return this.str.charAt(this.pos)
        }
    };
    Ed.extend = function (a) {
        var b = this, c, d;
        c = function (a, b) {
            Ed.call(this, a, b)
        };
        c.prototype = C(b.prototype);
        for (d in a) {
            if (H.call(a, d)) {
                c.prototype[d] = a[d]
            }
        }
        c.extend = Ed.extend;
        return c
    };
    var Hd = Ed;
    var Id = 1;
    var Jd = 2;
    var Kd = 3;
    var Ld = 4;
    var Md = 5;
    var Nd = 6;
    var Od = 7;
    var Pd = 8;
    var Qd = 9;
    var Rd = 10;
    var Sd = 13;
    var Td = 14;
    var Ud = 15;
    var Vd = 16;
    var Wd = 17;
    var Xd = 18;
    var Yd = 20;
    var Zd = 21;
    var $d = 22;
    var _d = 23;
    var ae = 24;
    var be = 25;
    var ce = 26;
    var de = 27;
    var ee = 30;
    var fe = 31;
    var ge = 32;
    var he = 33;
    var ie = 34;
    var je = 35;
    var ke = 36;
    var le = 40;
    var me = 50;
    var ne = 51;
    var oe = 52;
    var pe = 53;
    var qe = 54;
    var re = 60;
    var se = 61;
    var te = we;
    var ue = /^[^\s=]+/, ve = /^\s+/;

    function we(a) {
        var b, c, d;
        if (!a.matchString("=")) {
            return null
        }
        b = a.pos;
        a.allowWhitespace();
        c = a.matchPattern(ue);
        if (!c) {
            a.pos = b;
            return null
        }
        if (!a.matchPattern(ve)) {
            return null
        }
        d = a.matchPattern(ue);
        if (!d) {
            a.pos = b;
            return null
        }
        a.allowWhitespace();
        if (!a.matchString("=")) {
            a.pos = b;
            return null
        }
        return [c, d]
    }

    var xe = ze;
    var ye = /^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;

    function ze(a) {
        var b;
        if (b = a.matchPattern(ye)) {
            return {t: be, v: b}
        }
        return null
    }

    var Ae = Ce;
    var Be = {t: Rd, exclude: true};

    function Ce(a) {
        var b, c;
        if (a.interpolate[a.inside] === false) {
            return null
        }
        for (c = 0; c < a.tags.length; c += 1) {
            if (b = De(a, a.tags[c])) {
                return b
            }
        }
    }

    function De(a, b) {
        var c, d, e, f;
        c = a.pos;
        if (a.matchString("\\" + b.open)) {
            if (c === 0 || a.str[c - 1] !== "\\") {
                return b.open
            }
        } else if (!a.matchString(b.open)) {
            return null
        }
        if (d = te(a)) {
            if (!a.matchString(b.close)) {
                return null
            }
            b.open = d[0];
            b.close = d[1];
            a.sortMustacheTags();
            return Be
        }
        a.allowWhitespace();
        if (a.matchString("/")) {
            a.pos -= 1;
            var g = a.pos;
            if (!xe(a)) {
                a.pos = g - b.close.length;
                a.error("Attempted to close a section that wasn't open")
            } else {
                a.pos = g
            }
        }
        for (f = 0; f < b.readers.length; f += 1) {
            e = b.readers[f];
            if (d = e(a, b)) {
                if (b.isStatic) {
                    d.s = true
                }
                if (a.includeLinePositions) {
                    d.p = a.getLinePos(c)
                }
                return d
            }
        }
        a.pos = c;
        return null
    }

    var Ee = "Expected a JavaScript expression";
    var Fe = "Expected closing paren";
    var Ge = Ie;
    var He = /^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;

    function Ie(a) {
        var b;
        if (b = a.matchPattern(He)) {
            return {t: Yd, v: b}
        }
        return null
    }

    var Je = Ke;

    function Ke(a) {
        var b = a.remaining();
        if (b.substr(0, 4) === "true") {
            a.pos += 4;
            return {t: ae, v: "true"}
        }
        if (b.substr(0, 5) === "false") {
            a.pos += 5;
            return {t: ae, v: "false"}
        }
        return null
    }

    var Le, Me, Ne;
    Le = /^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;
    Me = /^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;
    Ne = /^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;
    var Oe = function (a) {
        return function (b) {
            var c, d, e, f;
            c = b.pos;
            d = '"';
            e = false;
            while (!e) {
                f = b.matchPattern(Le) || b.matchPattern(Me) || b.matchString(a);
                if (f) {
                    if (f === '"') {
                        d += '\\"'
                    } else if (f === "\\'") {
                        d += "'"
                    } else {
                        d += f
                    }
                } else {
                    f = b.matchPattern(Ne);
                    if (f) {
                        d += "\\u" + ("000" + f.charCodeAt(1).toString(16)).slice(-4)
                    } else {
                        e = true
                    }
                }
            }
            d += '"';
            return JSON.parse(d)
        }
    };
    var Pe = Oe('"');
    var Qe = Oe("'");
    var Re = function (a) {
        var b, c;
        b = a.pos;
        if (a.matchString('"')) {
            c = Qe(a);
            if (!a.matchString('"')) {
                a.pos = b;
                return null
            }
            return {t: Zd, v: c}
        }
        if (a.matchString("'")) {
            c = Pe(a);
            if (!a.matchString("'")) {
                a.pos = b;
                return null
            }
            return {t: Zd, v: c}
        }
        return null
    };
    var Se = /^[a-zA-Z_$][a-zA-Z_$0-9]*/;
    var Te = Ve;
    var Ue = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;

    function Ve(a) {
        var b;
        if (b = Re(a)) {
            return Ue.test(b.v) ? b.v : '"' + b.v.replace(/"/g, '\\"') + '"'
        }
        if (b = Ge(a)) {
            return b.v
        }
        if (b = a.matchPattern(Se)) {
            return b
        }
    }

    var We = Xe;

    function Xe(a) {
        var b, c, d;
        b = a.pos;
        a.allowWhitespace();
        c = Te(a);
        if (c === null) {
            a.pos = b;
            return null
        }
        a.allowWhitespace();
        if (!a.matchString(":")) {
            a.pos = b;
            return null
        }
        a.allowWhitespace();
        d = Af(a);
        if (d === null) {
            a.pos = b;
            return null
        }
        return {t: de, k: c, v: d}
    }

    var Ye = Ze;

    function Ze(a) {
        var b, c, d, e;
        b = a.pos;
        d = We(a);
        if (d === null) {
            return null
        }
        c = [d];
        if (a.matchString(",")) {
            e = Ze(a);
            if (!e) {
                a.pos = b;
                return null
            }
            return c.concat(e)
        }
        return c
    }

    var $e = function (a) {
        var b, c;
        b = a.pos;
        a.allowWhitespace();
        if (!a.matchString("{")) {
            a.pos = b;
            return null
        }
        c = Ye(a);
        a.allowWhitespace();
        if (!a.matchString("}")) {
            a.pos = b;
            return null
        }
        return {t: _d, m: c}
    };
    var _e = af;

    function af(a) {
        var b, c, d, e;
        b = a.pos;
        a.allowWhitespace();
        d = Af(a);
        if (d === null) {
            return null
        }
        c = [d];
        a.allowWhitespace();
        if (a.matchString(",")) {
            e = af(a);
            if (e === null) {
                a.error(Ee)
            }
            e.forEach(f)
        }
        function f(a) {
            c.push(a)
        }

        return c
    }

    var bf = function (a) {
        var b, c;
        b = a.pos;
        a.allowWhitespace();
        if (!a.matchString("[")) {
            a.pos = b;
            return null
        }
        c = _e(a);
        if (!a.matchString("]")) {
            a.pos = b;
            return null
        }
        return {t: $d, m: c}
    };
    var cf = df;

    function df(a) {
        return Ge(a) || Je(a) || Re(a) || $e(a) || bf(a) || xe(a)
    }

    var ef = lf;
    var ff = /^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/, gf, hf;
    gf = /^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/;
    hf = /^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;
    var jf = /^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/;
    var kf = /^[a-zA-Z_$][-a-zA-Z_$0-9]*/;

    function lf(a) {
        var b, c, d, e, f, g;
        b = a.pos;
        d = a.matchPattern(/^@(?:keypath|index|key)/);
        if (!d) {
            c = a.matchPattern(ff) || "";
            d = !c && a.relaxedNames && a.matchPattern(kf) || a.matchPattern(jf);
            if (!d && c === ".") {
                c = "";
                d = "."
            }
        }
        if (!d) {
            return null
        }
        if (!c && !a.relaxedNames && hf.test(d)) {
            a.pos = b;
            return null
        }
        if (!c && gf.test(d)) {
            e = gf.exec(d)[0];
            a.pos = b + e.length;
            return {t: ce, v: e}
        }
        f = (c || "") + va(d);
        if (a.matchString("(")) {
            g = f.lastIndexOf(".");
            if (g !== -1) {
                f = f.substr(0, g);
                a.pos = b + f.length
            } else {
                a.pos -= 1
            }
        }
        return {t: ee, n: f.replace(/^this\./, "./").replace(/^this$/, ".")}
    }

    var mf = nf;

    function nf(a) {
        var b, c;
        b = a.pos;
        if (!a.matchString("(")) {
            return null
        }
        a.allowWhitespace();
        c = Af(a);
        if (!c) {
            a.error(Ee)
        }
        a.allowWhitespace();
        if (!a.matchString(")")) {
            a.error(Fe)
        }
        return {t: ie, x: c}
    }

    var of = function (a) {
        return cf(a) || ef(a) || mf(a)
    };
    var pf = qf;

    function qf(a) {
        var b, c, d;
        b = a.pos;
        a.allowWhitespace();
        if (a.matchString(".")) {
            a.allowWhitespace();
            if (c = a.matchPattern(Se)) {
                return {t: fe, n: c}
            }
            a.error("Expected a property name")
        }
        if (a.matchString("[")) {
            a.allowWhitespace();
            d = Af(a);
            if (!d) {
                a.error(Ee)
            }
            a.allowWhitespace();
            if (!a.matchString("]")) {
                a.error("Expected ']'")
            }
            return {t: fe, x: d}
        }
        return null
    }

    var rf = function (a) {
        var b, c, d, e;
        c = of(a);
        if (!c) {
            return null
        }
        while (c) {
            b = a.pos;
            if (d = pf(a)) {
                c = {t: ge, x: c, r: d}
            } else if (a.matchString("(")) {
                a.allowWhitespace();
                e = _e(a);
                a.allowWhitespace();
                if (!a.matchString(")")) {
                    a.error(Fe)
                }
                c = {t: le, x: c};
                if (e) {
                    c.o = e
                }
            } else {
                break
            }
        }
        return c
    };
    var sf, tf;
    tf = function (a, b) {
        return function (c) {
            var d;
            if (d = b(c)) {
                return d
            }
            if (!c.matchString(a)) {
                return null
            }
            c.allowWhitespace();
            d = Af(c);
            if (!d) {
                c.error(Ee)
            }
            return {s: a, o: d, t: he}
        }
    };
    (function () {
        var a, b, c, d, e;
        d = "! ~ + - typeof".split(" ");
        e = rf;
        for (a = 0, b = d.length; a < b; a += 1) {
            c = tf(d[a], e);
            e = c
        }
        sf = e
    })();
    var uf = sf;
    var vf, wf;
    wf = function (a, b) {
        return function (c) {
            var d, e, f;
            e = b(c);
            if (!e) {
                return null
            }
            while (true) {
                d = c.pos;
                c.allowWhitespace();
                if (!c.matchString(a)) {
                    c.pos = d;
                    return e
                }
                if (a === "in" && /[a-zA-Z_$0-9]/.test(c.remaining().charAt(0))) {
                    c.pos = d;
                    return e
                }
                c.allowWhitespace();
                f = b(c);
                if (!f) {
                    c.pos = d;
                    return e
                }
                e = {t: ke, s: a, o: [e, f]}
            }
        }
    };
    (function () {
        var a, b, c, d, e;
        d = "* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");
        e = uf;
        for (a = 0, b = d.length; a < b; a += 1) {
            c = wf(d[a], e);
            e = c
        }
        vf = e
    })();
    var xf = vf;
    var yf = zf;

    function zf(a) {
        var b, c, d, e;
        c = xf(a);
        if (!c) {
            return null
        }
        b = a.pos;
        a.allowWhitespace();
        if (!a.matchString("?")) {
            a.pos = b;
            return c
        }
        a.allowWhitespace();
        d = Af(a);
        if (!d) {
            a.error(Ee)
        }
        a.allowWhitespace();
        if (!a.matchString(":")) {
            a.error('Expected ":"')
        }
        a.allowWhitespace();
        e = Af(a);
        if (!e) {
            a.error(Ee)
        }
        return {t: je, o: [c, d, e]}
    }

    var Af = Bf;

    function Bf(a) {
        return yf(a)
    }

    var Cf = Df;

    function Df(a) {
        var b;
        Ef(a, b = []);
        return {r: b, s: c(a)};
        function c(a) {
            switch (a.t) {
                case ae:
                case ce:
                case Yd:
                case be:
                    return a.v;
                case Zd:
                    return JSON.stringify(String(a.v));
                case $d:
                    return "[" + (a.m ? a.m.map(c).join(",") : "") + "]";
                case _d:
                    return "{" + (a.m ? a.m.map(c).join(",") : "") + "}";
                case de:
                    return a.k + ":" + c(a.v);
                case he:
                    return (a.s === "typeof" ? "typeof " : a.s) + c(a.o);
                case ke:
                    return c(a.o[0]) + (a.s.substr(0, 2) === "in" ? " " + a.s + " " : a.s) + c(a.o[1]);
                case le:
                    return c(a.x) + "(" + (a.o ? a.o.map(c).join(",") : "") + ")";
                case ie:
                    return "(" + c(a.x) + ")";
                case ge:
                    return c(a.x) + c(a.r);
                case fe:
                    return a.n ? "." + a.n : "[" + c(a.x) + "]";
                case je:
                    return c(a.o[0]) + "?" + c(a.o[1]) + ":" + c(a.o[2]);
                case ee:
                    return "_" + b.indexOf(a.n);
                default:
                    throw new Error("Expected legal JavaScript")
            }
        }
    }

    function Ef(a, b) {
        var c, d;
        if (a.t === ee) {
            if (b.indexOf(a.n) === -1) {
                b.unshift(a.n)
            }
        }
        d = a.o || a.m;
        if (d) {
            if (O(d)) {
                Ef(d, b)
            } else {
                c = d.length;
                while (c--) {
                    Ef(d[c], b)
                }
            }
        }
        if (a.x) {
            Ef(a.x, b)
        }
        if (a.r) {
            Ef(a.r, b)
        }
        if (a.v) {
            Ef(a.v, b)
        }
    }

    var Ff = Hf;
    var Gf = /^[0-9][1-9]*$/;

    function Hf(a, b) {
        var c;
        if (a) {
            while (a.t === ie && a.x) {
                a = a.x
            }
            if (a.t === ee) {
                b.r = a.n
            } else {
                if (a.t === Yd && Gf.test(a.v)) {
                    b.r = a.v
                } else if (c = If(a)) {
                    b.rx = c
                } else {
                    b.x = Cf(a)
                }
            }
            return b
        }
    }

    function If(a) {
        var b = [], c;
        while (a.t === ge && a.r.t === fe) {
            c = a.r;
            if (c.x) {
                if (c.x.t === ee) {
                    b.unshift(c.x)
                } else {
                    b.unshift(Cf(c.x))
                }
            } else {
                b.unshift(c.n)
            }
            a = a.x
        }
        if (a.t !== ee) {
            return null
        }
        return {r: a.n, m: b}
    }

    var Jf = Kf;

    function Kf(a, b) {
        var c = Af(a), d;
        if (!c) {
            return null
        }
        if (!a.matchString(b.close)) {
            a.error("Expected closing delimiter '" + b.close + "'")
        }
        d = {t: Kd};
        Ff(c, d);
        return d
    }

    var Lf = Mf;

    function Mf(a, b) {
        var c, d;
        if (!a.matchString("&")) {
            return null
        }
        a.allowWhitespace();
        c = Af(a);
        if (!c) {
            return null
        }
        if (!a.matchString(b.close)) {
            a.error("Expected closing delimiter '" + b.close + "'")
        }
        d = {t: Kd};
        Ff(c, d);
        return d
    }

    var Nf = Of;

    function Of(a, b) {
        var c, d, e, f, g;
        c = a.pos;
        if (!a.matchString(">")) {
            return null
        }
        a.allowWhitespace();
        d = a.pos;
        a.relaxedNames = true;
        e = Af(a);
        a.relaxedNames = false;
        a.allowWhitespace();
        f = Af(a);
        a.allowWhitespace();
        if (!e) {
            return null
        }
        g = {t: Pd};
        Ff(e, g);
        a.allowWhitespace();
        if (f) {
            g = {t: Ld, n: pe, f: [g]};
            Ff(f, g)
        }
        if (!a.matchString(b.close)) {
            a.error("Expected closing delimiter '" + b.close + "'")
        }
        return g
    }

    var Pf = Qf;

    function Qf(a, b) {
        var c;
        if (!a.matchString("!")) {
            return null
        }
        c = a.remaining().indexOf(b.close);
        if (c !== -1) {
            a.pos += c + b.close.length;
            return {t: Qd}
        }
    }

    var Rf = Sf;

    function Sf(a, b) {
        var c, d, e;
        c = a.pos;
        d = Af(a);
        if (!d) {
            return null
        }
        for (e = 0; e < b.length; e += 1) {
            if (a.remaining().substr(0, b[e].length) === b[e]) {
                return d
            }
        }
        a.pos = c;
        return ef(a)
    }

    var Tf = Uf;

    function Uf(a, b) {
        var c, d, e, f;
        c = a.pos;
        try {
            d = Rf(a, [b.close])
        } catch (a) {
            f = a
        }
        if (!d) {
            if (a.str.charAt(c) === "!") {
                a.pos = c;
                return null
            }
            if (f) {
                throw f
            }
        }
        if (!a.matchString(b.close)) {
            a.error("Expected closing delimiter '" + b.close + "' after reference");
            if (!d) {
                if (a.nextChar() === "!") {
                    return null
                }
                a.error("Expected expression or legal reference")
            }
        }
        e = {t: Jd};
        Ff(d, e);
        return e
    }

    var Vf = Xf;
    var Wf = /^yield\s*/;

    function Xf(a, b) {
        var c, d, e;
        if (!a.matchPattern(Wf)) {
            return null
        }
        c = a.pos;
        d = a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);
        a.allowWhitespace();
        if (!a.matchString(b.close)) {
            a.error("expected legal partial name")
        }
        e = {t: Vd};
        if (d) {
            e.n = d
        }
        return e
    }

    var Yf = Zf;

    function Zf(a, b) {
        var c, d, e, f;
        c = a.pos;
        if (!a.matchString(b.open)) {
            return null
        }
        a.allowWhitespace();
        if (!a.matchString("/")) {
            a.pos = c;
            return null
        }
        a.allowWhitespace();
        d = a.remaining();
        e = d.indexOf(b.close);
        if (e !== -1) {
            f = {t: Nd, r: d.substr(0, e).split(" ")[0]};
            a.pos += e;
            if (!a.matchString(b.close)) {
                a.error("Expected closing delimiter '" + b.close + "'")
            }
            return f
        }
        a.pos = c;
        return null
    }

    var $f = ag;
    var _f = /^\s*else\s*/;

    function ag(a, b) {
        var c = a.pos;
        if (!a.matchString(b.open)) {
            return null
        }
        if (!a.matchPattern(_f)) {
            a.pos = c;
            return null
        }
        if (!a.matchString(b.close)) {
            a.error("Expected closing delimiter '" + b.close + "'")
        }
        return {t: re}
    }

    var bg = dg;
    var cg = /^\s*elseif\s+/;

    function dg(a, b) {
        var c = a.pos, d;
        if (!a.matchString(b.open)) {
            return null
        }
        if (!a.matchPattern(cg)) {
            a.pos = c;
            return null
        }
        d = Af(a);
        if (!a.matchString(b.close)) {
            a.error("Expected closing delimiter '" + b.close + "'")
        }
        return {t: se, x: d}
    }

    var eg = {each: oe, if: me, "if-with": qe, with: pe, unless: ne};
    var fg = jg;
    var gg = /^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/, hg = /^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/, ig = new RegExp("^(" + Object.keys(eg).join("|") + ")\\b");

    function jg(a, b) {
        var c, d, e, f, g, h, i, j, k, l, m, n;
        c = a.pos;
        if (a.matchString("^")) {
            e = {t: Ld, f: [], n: ne}
        } else if (a.matchString("#")) {
            e = {t: Ld, f: []};
            if (a.matchString("partial")) {
                a.pos = c - a.standardDelimiters[0].length;
                a.error("Partial definitions can only be at the top level of the template, or immediately inside components")
            }
            if (i = a.matchPattern(ig)) {
                n = i;
                e.n = eg[i]
            }
        } else {
            return null
        }
        a.allowWhitespace();
        d = Af(a);
        if (!d) {
            a.error("Expected expression")
        }
        if (m = a.matchPattern(gg)) {
            var o = undefined;
            if (o = a.matchPattern(hg)) {
                e.i = m + "," + o
            } else {
                e.i = m
            }
        }
        a.allowWhitespace();
        if (!a.matchString(b.close)) {
            a.error("Expected closing delimiter '" + b.close + "'")
        }
        a.sectionDepth += 1;
        g = e.f;
        k = [];
        do {
            if (f = Yf(a, b)) {
                if (n && f.r !== n) {
                    a.error("Expected " + b.open + "/" + n + "" + b.close)
                }
                a.sectionDepth -= 1;
                l = true
            } else if (f = bg(a, b)) {
                if (e.n === ne) {
                    a.error("{{else}} not allowed in {{#unless}}")
                }
                if (h) {
                    a.error("illegal {{elseif...}} after {{else}}")
                }
                if (!j) {
                    j = kg(d, e.n)
                }
                j.f.push({t: Ld, n: me, x: Cf(mg(k.concat(f.x))), f: g = []});
                k.push(lg(f.x))
            } else if (f = $f(a, b)) {
                if (e.n === ne) {
                    a.error("{{else}} not allowed in {{#unless}}")
                }
                if (h) {
                    a.error("there can only be one {{else}} block, at the end of a section")
                }
                h = true;
                if (!j) {
                    j = kg(d, e.n);
                    g = j.f
                } else {
                    j.f.push({t: Ld, n: me, x: Cf(mg(k)), f: g = []})
                }
            } else {
                f = a.read(Yh);
                if (!f) {
                    break
                }
                g.push(f)
            }
        } while (!l);
        if (j) {
            if (e.n === pe) {
                e.n = qe
            }
            e.l = j
        }
        Ff(d, e);
        if (!e.f.length) {
            delete e.f
        }
        return e
    }

    function kg(a, b) {
        var c;
        if (b === pe) {
            c = {t: Ld, n: me, f: []};
            Ff(lg(a), c)
        } else {
            c = {t: Ld, n: ne, f: []};
            Ff(a, c)
        }
        return c
    }

    function lg(a) {
        if (a.t === he && a.s === "!") {
            return a.o
        }
        return {t: he, s: "!", o: ng(a)}
    }

    function mg(a) {
        if (a.length === 1) {
            return a[0]
        }
        return {t: ke, s: "&&", o: [ng(a[0]), ng(mg(a.slice(1)))]}
    }

    function ng(a) {
        return {t: ie, x: a}
    }

    var og = rg;
    var pg = "<!--", qg = "-->";

    function rg(a) {
        var b, c, d, e, f;
        b = a.pos;
        if (!a.matchString(pg)) {
            return null
        }
        d = a.remaining();
        e = d.indexOf(qg);
        if (e === -1) {
            a.error("Illegal HTML - expected closing comment sequence ('-->')")
        }
        c = d.substr(0, e);
        a.pos += e + 3;
        f = {t: Qd, c: c};
        if (a.includeLinePositions) {
            f.p = a.getLinePos(b)
        }
        return f
    }

    var sg, tg, ug, vg, wg, xg, yg, zg;
    sg = /^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;
    tg = /^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;
    ug = {
        quot: 34,
        amp: 38,
        apos: 39,
        lt: 60,
        gt: 62,
        nbsp: 160,
        iexcl: 161,
        cent: 162,
        pound: 163,
        curren: 164,
        yen: 165,
        brvbar: 166,
        sect: 167,
        uml: 168,
        copy: 169,
        ordf: 170,
        laquo: 171,
        not: 172,
        shy: 173,
        reg: 174,
        macr: 175,
        deg: 176,
        plusmn: 177,
        sup2: 178,
        sup3: 179,
        acute: 180,
        micro: 181,
        para: 182,
        middot: 183,
        cedil: 184,
        sup1: 185,
        ordm: 186,
        raquo: 187,
        frac14: 188,
        frac12: 189,
        frac34: 190,
        iquest: 191,
        Agrave: 192,
        Aacute: 193,
        Acirc: 194,
        Atilde: 195,
        Auml: 196,
        Aring: 197,
        AElig: 198,
        Ccedil: 199,
        Egrave: 200,
        Eacute: 201,
        Ecirc: 202,
        Euml: 203,
        Igrave: 204,
        Iacute: 205,
        Icirc: 206,
        Iuml: 207,
        ETH: 208,
        Ntilde: 209,
        Ograve: 210,
        Oacute: 211,
        Ocirc: 212,
        Otilde: 213,
        Ouml: 214,
        times: 215,
        Oslash: 216,
        Ugrave: 217,
        Uacute: 218,
        Ucirc: 219,
        Uuml: 220,
        Yacute: 221,
        THORN: 222,
        szlig: 223,
        agrave: 224,
        aacute: 225,
        acirc: 226,
        atilde: 227,
        auml: 228,
        aring: 229,
        aelig: 230,
        ccedil: 231,
        egrave: 232,
        eacute: 233,
        ecirc: 234,
        euml: 235,
        igrave: 236,
        iacute: 237,
        icirc: 238,
        iuml: 239,
        eth: 240,
        ntilde: 241,
        ograve: 242,
        oacute: 243,
        ocirc: 244,
        otilde: 245,
        ouml: 246,
        divide: 247,
        oslash: 248,
        ugrave: 249,
        uacute: 250,
        ucirc: 251,
        uuml: 252,
        yacute: 253,
        thorn: 254,
        yuml: 255,
        OElig: 338,
        oelig: 339,
        Scaron: 352,
        scaron: 353,
        Yuml: 376,
        fnof: 402,
        circ: 710,
        tilde: 732,
        Alpha: 913,
        Beta: 914,
        Gamma: 915,
        Delta: 916,
        Epsilon: 917,
        Zeta: 918,
        Eta: 919,
        Theta: 920,
        Iota: 921,
        Kappa: 922,
        Lambda: 923,
        Mu: 924,
        Nu: 925,
        Xi: 926,
        Omicron: 927,
        Pi: 928,
        Rho: 929,
        Sigma: 931,
        Tau: 932,
        Upsilon: 933,
        Phi: 934,
        Chi: 935,
        Psi: 936,
        Omega: 937,
        alpha: 945,
        beta: 946,
        gamma: 947,
        delta: 948,
        epsilon: 949,
        zeta: 950,
        eta: 951,
        theta: 952,
        iota: 953,
        kappa: 954,
        lambda: 955,
        mu: 956,
        nu: 957,
        xi: 958,
        omicron: 959,
        pi: 960,
        rho: 961,
        sigmaf: 962,
        sigma: 963,
        tau: 964,
        upsilon: 965,
        phi: 966,
        chi: 967,
        psi: 968,
        omega: 969,
        thetasym: 977,
        upsih: 978,
        piv: 982,
        ensp: 8194,
        emsp: 8195,
        thinsp: 8201,
        zwnj: 8204,
        zwj: 8205,
        lrm: 8206,
        rlm: 8207,
        ndash: 8211,
        mdash: 8212,
        lsquo: 8216,
        rsquo: 8217,
        sbquo: 8218,
        ldquo: 8220,
        rdquo: 8221,
        bdquo: 8222,
        dagger: 8224,
        Dagger: 8225,
        bull: 8226,
        hellip: 8230,
        permil: 8240,
        prime: 8242,
        Prime: 8243,
        lsaquo: 8249,
        rsaquo: 8250,
        oline: 8254,
        frasl: 8260,
        euro: 8364,
        image: 8465,
        weierp: 8472,
        real: 8476,
        trade: 8482,
        alefsym: 8501,
        larr: 8592,
        uarr: 8593,
        rarr: 8594,
        darr: 8595,
        harr: 8596,
        crarr: 8629,
        lArr: 8656,
        uArr: 8657,
        rArr: 8658,
        dArr: 8659,
        hArr: 8660,
        forall: 8704,
        part: 8706,
        exist: 8707,
        empty: 8709,
        nabla: 8711,
        isin: 8712,
        notin: 8713,
        ni: 8715,
        prod: 8719,
        sum: 8721,
        minus: 8722,
        lowast: 8727,
        radic: 8730,
        prop: 8733,
        infin: 8734,
        ang: 8736,
        and: 8743,
        or: 8744,
        cap: 8745,
        cup: 8746,
        int: 8747,
        there4: 8756,
        sim: 8764,
        cong: 8773,
        asymp: 8776,
        ne: 8800,
        equiv: 8801,
        le: 8804,
        ge: 8805,
        sub: 8834,
        sup: 8835,
        nsub: 8836,
        sube: 8838,
        supe: 8839,
        oplus: 8853,
        otimes: 8855,
        perp: 8869,
        sdot: 8901,
        lceil: 8968,
        rceil: 8969,
        lfloor: 8970,
        rfloor: 8971,
        lang: 9001,
        rang: 9002,
        loz: 9674,
        spades: 9824,
        clubs: 9827,
        hearts: 9829,
        diams: 9830
    };
    vg = [8364, 129, 8218, 402, 8222, 8230, 8224, 8225, 710, 8240, 352, 8249, 338, 141, 381, 143, 144, 8216, 8217, 8220, 8221, 8226, 8211, 8212, 732, 8482, 353, 8250, 339, 157, 382, 376];
    wg = new RegExp("&(#?(?:x[\\w\\d]+|\\d+|" + Object.keys(ug).join("|") + "));?", "g");
    function Ag(a) {
        return a.replace(wg, function (a, b) {
            var c;
            if (b[0] !== "#") {
                c = ug[b]
            } else if (b[1] === "x") {
                c = parseInt(b.substring(2), 16)
            } else {
                c = parseInt(b.substring(1), 10)
            }
            if (!c) {
                return a
            }
            return String.fromCharCode(Bg(c))
        })
    }

    function Bg(a) {
        if (!a) {
            return 65533
        }
        if (a === 10) {
            return 32
        }
        if (a < 128) {
            return a
        }
        if (a <= 159) {
            return vg[a - 128]
        }
        if (a < 55296) {
            return a
        }
        if (a <= 57343) {
            return 65533
        }
        if (a <= 65535) {
            return a
        }
        return 65533
    }

    xg = /</g;
    yg = />/g;
    zg = /&/g;
    function Cg(a) {
        return a.replace(zg, "&amp;").replace(xg, "&lt;").replace(yg, "&gt;")
    }

    var Dg = /^\s*\r?\n/, Eg = /\r?\n\s*$/;
    var Fg = function (a) {
        var b, c, d, e, f;
        for (b = 1; b < a.length; b += 1) {
            c = a[b];
            d = a[b - 1];
            e = a[b - 2];
            if (Gg(c) && Hg(d) && Gg(e)) {
                if (Eg.test(e) && Dg.test(c)) {
                    a[b - 2] = e.replace(Eg, "\n");
                    a[b] = c.replace(Dg, "")
                }
            }
            if (Ig(c) && Gg(d)) {
                if (Eg.test(d) && Gg(c.f[0]) && Dg.test(c.f[0])) {
                    a[b - 1] = d.replace(Eg, "\n");
                    c.f[0] = c.f[0].replace(Dg, "")
                }
            }
            if (Gg(c) && Ig(d)) {
                f = Na(d.f);
                if (Gg(f) && Eg.test(f) && Dg.test(c)) {
                    d.f[d.f.length - 1] = f.replace(Eg, "\n");
                    a[b] = c.replace(Dg, "")
                }
            }
        }
        return a
    };

    function Gg(a) {
        return typeof a === "string"
    }

    function Hg(a) {
        return a.t === Qd || a.t === Rd
    }

    function Ig(a) {
        return (a.t === Ld || a.t === Md) && a.f
    }

    var Jg = function (a, b, c) {
        var d;
        if (b) {
            d = a[0];
            if (typeof d === "string") {
                d = d.replace(b, "");
                if (!d) {
                    a.shift()
                } else {
                    a[0] = d
                }
            }
        }
        if (c) {
            d = Na(a);
            if (typeof d === "string") {
                d = d.replace(c, "");
                if (!d) {
                    a.pop()
                } else {
                    a[a.length - 1] = d
                }
            }
        }
    };
    var Kg = Rg;
    var Lg = /[ \t\f\r\n]+/g;
    var Mg = /^(?:pre|script|style|textarea)$/i;
    var Ng = /^[ \t\f\r\n]+/;
    var Og = /[ \t\f\r\n]+$/;
    var Pg = /^(?:\r\n|\r|\n)/;
    var Qg = /(?:\r\n|\r|\n)$/;

    function Rg(a, b, c, d, e) {
        var f, g, h, i, j, k, l, m;
        Fg(a);
        f = a.length;
        while (f--) {
            g = a[f];
            if (g.exclude) {
                a.splice(f, 1)
            } else if (b && g.t === Qd) {
                a.splice(f, 1)
            }
        }
        Jg(a, d ? Ng : null, e ? Og : null);
        f = a.length;
        while (f--) {
            g = a[f];
            if (g.f) {
                var n = g.t === Od && Mg.test(g.e);
                j = c || n;
                if (!c && n) {
                    Jg(g.f, Pg, Qg)
                }
                if (!j) {
                    h = a[f - 1];
                    i = a[f + 1];
                    if (!h || typeof h === "string" && Og.test(h)) {
                        k = true
                    }
                    if (!i || typeof i === "string" && Ng.test(i)) {
                        l = true
                    }
                }
                Rg(g.f, b, j, k, l)
            }
            if (g.l) {
                Rg(g.l.f, b, c, k, l);
                a.splice(f + 1, 0, g.l);
                delete g.l
            }
            if (g.a) {
                for (m in g.a) {
                    if (g.a.hasOwnProperty(m) && typeof g.a[m] !== "string") {
                        Rg(g.a[m], b, c, k, l)
                    }
                }
            }
            if (g.m) {
                Rg(g.m, b, c, k, l)
            }
            if (g.v) {
                for (m in g.v) {
                    if (g.v.hasOwnProperty(m)) {
                        if (K(g.v[m].n)) {
                            Rg(g.v[m].n, b, c, k, l)
                        }
                        if (K(g.v[m].d)) {
                            Rg(g.v[m].d, b, c, k, l)
                        }
                    }
                }
            }
        }
        f = a.length;
        while (f--) {
            if (typeof a[f] === "string") {
                if (typeof a[f + 1] === "string") {
                    a[f] = a[f] + a[f + 1];
                    a.splice(f + 1, 1)
                }
                if (!c) {
                    a[f] = a[f].replace(Lg, " ")
                }
                if (a[f] === "") {
                    a.splice(f, 1)
                }
            }
        }
    }

    var Sg = Ug;
    var Tg = /^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;

    function Ug(a) {
        var b, c;
        b = a.pos;
        if (!a.matchString("</")) {
            return null
        }
        if (c = a.matchPattern(Tg)) {
            if (a.inside && c !== a.inside) {
                a.pos = b;
                return null
            }
            return {t: Td, e: c}
        }
        a.pos -= 2;
        a.error("Illegal closing tag")
    }

    var Vg = function (a, b) {
        var c, d, e;
        c = b.length;
        while (c--) {
            d = a.indexOf(b[c]);
            if (!d) {
                return 0
            }
            if (d === -1) {
                continue
            }
            if (!e || d < e) {
                e = d
            }
        }
        return e || -1
    };
    var Wg = Zg;
    var Xg = /^[^\s"'>\/=]+/, Yg = /^[^\s"'=<>`]+/;

    function Zg(a) {
        var b, c, d;
        a.allowWhitespace();
        c = a.matchPattern(Xg);
        if (!c) {
            return null
        }
        b = {name: c};
        d = $g(a);
        if (d != null) {
            b.value = d
        }
        return b
    }

    function $g(a) {
        var b, c, d, e;
        b = a.pos;
        if (!/[=\/>\s]/.test(a.nextChar())) {
            a.error("Expected `=`, `/`, `>` or whitespace")
        }
        a.allowWhitespace();
        if (!a.matchString("=")) {
            a.pos = b;
            return null
        }
        a.allowWhitespace();
        c = a.pos;
        d = a.sectionDepth;
        e = bh(a, "'") || bh(a, '"') || ah(a);
        if (e === null) {
            a.error("Expected valid attribute value")
        }
        if (a.sectionDepth !== d) {
            a.pos = c;
            a.error("An attribute value must contain as many opening section tags as closing section tags")
        }
        if (!e.length) {
            return ""
        }
        if (e.length === 1 && typeof e[0] === "string") {
            return Ag(e[0])
        }
        return e
    }

    function _g(a) {
        var b, c, d, e, f;
        b = a.pos;
        c = a.matchPattern(Yg);
        if (!c) {
            return null
        }
        d = c;
        e = a.tags.map(function (a) {
            return a.open
        });
        if ((f = Vg(d, e)) !== -1) {
            c = c.substr(0, f);
            a.pos = b + c.length
        }
        return c
    }

    function ah(a) {
        var b, c;
        a.inAttribute = true;
        b = [];
        c = Ae(a) || _g(a);
        while (c !== null) {
            b.push(c);
            c = Ae(a) || _g(a)
        }
        if (!b.length) {
            return null
        }
        a.inAttribute = false;
        return b
    }

    function bh(a, b) {
        var c, d, e;
        c = a.pos;
        if (!a.matchString(b)) {
            return null
        }
        a.inAttribute = b;
        d = [];
        e = Ae(a) || ch(a, b);
        while (e !== null) {
            d.push(e);
            e = Ae(a) || ch(a, b)
        }
        if (!a.matchString(b)) {
            a.pos = c;
            return null
        }
        a.inAttribute = false;
        return d
    }

    function ch(a, b) {
        var c, d, e, f;
        c = a.pos;
        e = a.remaining();
        f = a.tags.map(function (a) {
            return a.open
        });
        f.push(b);
        d = Vg(e, f);
        if (d === -1) {
            a.error("Quoted attribute value must have a closing quote")
        }
        if (!d) {
            return null
        }
        a.pos += d;
        return e.substr(0, d)
    }

    var dh, eh, fh, gh, hh, ih, jh;
    eh = {true: true, false: false, undefined: undefined, null: null};
    fh = new RegExp("^(?:" + Object.keys(eh).join("|") + ")");
    gh = /^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;
    hh = /\$\{([^\}]+)\}/g;
    ih = /^\$\{([^\}]+)\}/;
    jh = /^\s*$/;
    dh = Hd.extend({
        init: function (a, b) {
            this.values = b.values;
            this.allowWhitespace()
        }, postProcess: function (a) {
            if (a.length !== 1 || !jh.test(this.leftover)) {
                return null
            }
            return {value: a[0].v}
        }, converters: [function a(b) {
            var c;
            if (!b.values) {
                return null
            }
            c = b.matchPattern(ih);
            if (c && b.values.hasOwnProperty(c)) {
                return {v: b.values[c]}
            }
        }, function a(b) {
            var c;
            if (c = b.matchPattern(fh)) {
                return {v: eh[c]}
            }
        }, function a(b) {
            var c;
            if (c = b.matchPattern(gh)) {
                return {v: +c}
            }
        }, function a(b) {
            var c = Re(b), d;
            if (c && (d = b.values)) {
                return {
                    v: c.v.replace(hh, function (a, b) {
                        return b in d ? d[b] : b
                    })
                }
            }
            return c
        }, function a(b) {
            var c, d;
            if (!b.matchString("{")) {
                return null
            }
            c = {};
            b.allowWhitespace();
            if (b.matchString("}")) {
                return {v: c}
            }
            while (d = kh(b)) {
                c[d.key] = d.value;
                b.allowWhitespace();
                if (b.matchString("}")) {
                    return {v: c}
                }
                if (!b.matchString(",")) {
                    return null
                }
            }
            return null
        }, function a(b) {
            var c, d;
            if (!b.matchString("[")) {
                return null
            }
            c = [];
            b.allowWhitespace();
            if (b.matchString("]")) {
                return {v: c}
            }
            while (d = b.read()) {
                c.push(d.v);
                b.allowWhitespace();
                if (b.matchString("]")) {
                    return {v: c}
                }
                if (!b.matchString(",")) {
                    return null
                }
                b.allowWhitespace()
            }
            return null
        }]
    });
    function kh(a) {
        var b, c, d;
        a.allowWhitespace();
        b = Te(a);
        if (!b) {
            return null
        }
        d = {key: b};
        a.allowWhitespace();
        if (!a.matchString(":")) {
            return null
        }
        a.allowWhitespace();
        c = a.read();
        if (!c) {
            return null
        }
        d.value = c.v;
        return d
    }

    var lh = function (a, b) {
        var c = new dh(a, {values: b});
        return c.result
    };
    var mh = qh;
    var nh = /^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/, oh = /\)\s*$/, ph;
    ph = Hd.extend({converters: [Af]});
    function qh(a, b) {
        var c, d, e, f, g, h, i, j, k;
        if (typeof a === "string") {
            if (d = nh.exec(a)) {
                var l = a.lastIndexOf(")");
                if (!oh.test(a)) {
                    b.error("Invalid input after method call expression '" + a.slice(l + 1) + "'")
                }
                c = {m: d[1]};
                f = "[" + a.slice(c.m.length + 1, l) + "]";
                e = new ph(f);
                c.a = Cf(e.result[0]);
                return c
            }
            if (a.indexOf(":") === -1) {
                return a.trim()
            }
            a = [a]
        }
        c = {};
        i = [];
        j = [];
        if (a) {
            while (a.length) {
                g = a.shift();
                if (typeof g === "string") {
                    h = g.indexOf(":");
                    if (h === -1) {
                        i.push(g)
                    } else {
                        if (h) {
                            i.push(g.substr(0, h))
                        }
                        if (g.length > h + 1) {
                            j[0] = g.substring(h + 1)
                        }
                        break
                    }
                } else {
                    i.push(g)
                }
            }
            j = j.concat(a)
        }
        if (!i.length) {
            c = ""
        } else if (j.length || typeof i !== "string") {
            c = {n: i.length === 1 && typeof i[0] === "string" ? i[0] : i};
            if (j.length === 1 && typeof j[0] === "string") {
                k = lh("[" + j[0] + "]");
                c.a = k ? k.value : j[0].trim()
            } else {
                c.d = j
            }
        } else {
            c = i
        }
        return c
    }

    var rh = /^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/, sh = /^[\s\n\/>]/, th = /^on/, uh = /^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/, vh = /^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/, wh = {
        "intro-outro": "t0",
        intro: "t1",
        outro: "t2",
        decorator: "o"
    }, xh = {exclude: true}, yh;
    yh = {
        li: ["li"],
        dt: ["dt", "dd"],
        dd: ["dt", "dd"],
        p: "address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),
        rt: ["rt", "rp"],
        rp: ["rt", "rp"],
        optgroup: ["optgroup"],
        option: ["option", "optgroup"],
        thead: ["tbody", "tfoot"],
        tbody: ["tbody", "tfoot"],
        tfoot: ["tbody"],
        tr: ["tr", "tbody"],
        td: ["td", "th", "tr"],
        th: ["td", "th", "tr"]
    };
    var zh = Ah;

    function Ah(a) {
        var b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q;
        b = a.pos;
        if (a.inside || a.inAttribute) {
            return null
        }
        if (!a.matchString("<")) {
            return null
        }
        if (a.nextChar() === "/") {
            return null
        }
        c = {};
        if (a.includeLinePositions) {
            c.p = a.getLinePos(b)
        }
        if (a.matchString("!")) {
            c.t = Xd;
            if (!a.matchPattern(/^doctype/i)) {
                a.error("Expected DOCTYPE declaration")
            }
            c.a = a.matchPattern(/^(.+?)>/);
            return c
        }
        c.t = Od;
        c.e = a.matchPattern(rh);
        if (!c.e) {
            return null
        }
        if (!sh.test(a.nextChar())) {
            a.error("Illegal tag name")
        }
        f = function (b, d) {
            var e = d.n || d;
            if (vh.test(e)) {
                a.pos -= e.length;
                a.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")
            }
            c.v[b] = d
        };
        a.allowWhitespace();
        while (g = Ae(a) || Wg(a)) {
            if (g.name) {
                if (d = wh[g.name]) {
                    c[d] = mh(g.value, a)
                } else if (e = uh.exec(g.name)) {
                    if (!c.v)c.v = {};
                    h = mh(g.value, a);
                    f(e[1], h)
                } else {
                    if (!a.sanitizeEventAttributes || !th.test(g.name)) {
                        if (!c.a)c.a = {};
                        c.a[g.name] = g.value || (g.value === "" ? "" : 0)
                    }
                }
            } else {
                if (!c.m)c.m = [];
                c.m.push(g)
            }
            a.allowWhitespace()
        }
        a.allowWhitespace();
        if (a.matchString("/")) {
            i = true
        }
        if (!a.matchString(">")) {
            return null
        }
        var r = c.e.toLowerCase();
        var s = a.preserveWhitespace;
        if (!i && !tg.test(c.e)) {
            a.elementStack.push(r);
            if (r === "script" || r === "style") {
                a.inside = r
            }
            j = [];
            k = C(null);
            do {
                o = a.pos;
                p = a.remaining();
                if (!Bh(r, p)) {
                    n = true
                } else if (q = Sg(a)) {
                    n = true;
                    var t = q.e.toLowerCase();
                    if (t !== r) {
                        a.pos = o;
                        if (!~a.elementStack.indexOf(t)) {
                            var u = "Unexpected closing tag";
                            if (tg.test(t)) {
                                u += " (<" + t + "> is a void element - it cannot contain children)"
                            }
                            a.error(u)
                        }
                    }
                } else if (m = Yf(a, {open: a.standardDelimiters[0], close: a.standardDelimiters[1]})) {
                    n = true;
                    a.pos = o
                } else {
                    if (m = a.read(Zh)) {
                        if (k[m.n]) {
                            a.pos = o;
                            a.error("Duplicate partial definition")
                        }
                        Kg(m.f, a.stripComments, s, !s, !s);
                        k[m.n] = m.f;
                        l = true
                    } else {
                        if (m = a.read(Yh)) {
                            j.push(m)
                        } else {
                            n = true
                        }
                    }
                }
            } while (!n);
            if (j.length) {
                c.f = j
            }
            if (l) {
                c.p = k
            }
            a.elementStack.pop()
        }
        a.inside = null;
        if (a.sanitizeElements && a.sanitizeElements.indexOf(r) !== -1) {
            return xh
        }
        return c
    }

    function Bh(a, b) {
        var c, d;
        c = /^<([a-zA-Z][a-zA-Z0-9]*)/.exec(b);
        d = yh[a];
        if (!c || !d) {
            return true
        }
        return !~d.indexOf(c[1].toLowerCase())
    }

    var Ch = Dh;

    function Dh(a) {
        var b, c, d, e;
        c = a.remaining();
        e = a.inside ? "</" + a.inside : "<";
        if (a.inside && !a.interpolate[a.inside]) {
            b = c.indexOf(e)
        } else {
            d = a.tags.map(function (a) {
                return a.open
            });
            d = d.concat(a.tags.map(function (a) {
                return "\\" + a.open
            }));
            if (a.inAttribute === true) {
                d.push('"', "'", "=", "<", ">", "`")
            } else if (a.inAttribute) {
                d.push(a.inAttribute)
            } else {
                d.push(e)
            }
            b = Vg(c, d)
        }
        if (!b) {
            return null
        }
        if (b === -1) {
            b = c.length
        }
        a.pos += b;
        return a.inside ? c.substr(0, b) : Ag(c.substr(0, b))
    }

    var Eh = Gh;
    var Fh = /[-\/\\^$*+?.()|[\]{}]/g;

    function Gh(a) {
        return a.replace(Fh, "\\$&")
    }

    var Hh = Mh;
    var Ih = /^<!--\s*/, Jh = /s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/, Kh = /\s*-->/, Lh;

    function Mh(a) {
        var b = a.pos, c = a.standardDelimiters[0], d = a.standardDelimiters[1], e = undefined, f = undefined;
        if (!a.matchPattern(Ih) || !a.matchString(c)) {
            a.pos = b;
            return null
        }
        var g = a.matchPattern(Jh);
        Z("Inline partial comments are deprecated.\nUse this...\n  {{#partial " + g + "}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>" + g + "}} --> ... <!-- {{/" + g + "}} -->'");
        if (!a.matchString(d) || !a.matchPattern(Kh)) {
            a.pos = b;
            return null
        }
        e = [];
        var h = new RegExp("^<!--\\s*" + Eh(c) + "\\s*\\/\\s*" + g + "\\s*" + Eh(d) + "\\s*-->");
        do {
            if (a.matchPattern(h)) {
                f = true
            } else {
                Lh = a.read(Yh);
                if (!Lh) {
                    a.error("expected closing comment ('<!-- " + c + "/" + g + "" + d + " -->')")
                }
                e.push(Lh)
            }
        } while (!f);
        return {t: Wd, f: e, n: g}
    }

    var Nh = Ph;
    var Oh = /^#\s*partial\s+/;

    function Ph(a) {
        var b, c, d, e, f;
        b = a.pos;
        var g = a.standardDelimiters;
        if (!a.matchString(g[0])) {
            return null
        }
        if (!a.matchPattern(Oh)) {
            a.pos = b;
            return null
        }
        c = a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);
        if (!c) {
            a.error("expected legal partial name")
        }
        if (!a.matchString(g[1])) {
            a.error("Expected closing delimiter '" + g[1] + "'")
        }
        d = [];
        do {
            if (e = Yf(a, {open: a.standardDelimiters[0], close: a.standardDelimiters[1]})) {
                if (!e.r === "partial") {
                    a.error("Expected " + g[0] + "/partial" + g[1])
                }
                f = true
            } else {
                e = a.read(Yh);
                if (!e) {
                    a.error("Expected " + g[0] + "/partial" + g[1])
                }
                d.push(e)
            }
        } while (!f);
        return {t: Wd, n: c, f: d}
    }

    var Qh = Rh;

    function Rh(b) {
        var c = [];
        var d = C(null);
        var e = false;
        var f = b.preserveWhitespace;
        while (b.pos < b.str.length) {
            var g = b.pos, h = undefined, i = undefined;
            if (i = b.read(Zh)) {
                if (d[i.n]) {
                    b.pos = g;
                    b.error("Duplicated partial definition")
                }
                Kg(i.f, b.stripComments, f, !f, !f);
                d[i.n] = i.f;
                e = true
            } else if (h = b.read(Yh)) {
                c.push(h)
            } else {
                b.error("Unexpected template content")
            }
        }
        var j = {v: a, t: c};
        if (e) {
            j.p = d
        }
        return j
    }

    var Sh = Xh;
    var Th = [Nf, Lf, fg, Vf, Tf, Pf];
    var Uh = [Jf];
    var Vh = [Lf, fg, Tf];
    var Wh = undefined;

    function Xh(a, b) {
        return new Wh(a, b || {}).result
    }

    var Yh = [Ae, og, zh, Ch];
    var Zh = [Hh, Nh];
    Wh = Hd.extend({
        init: function (a, b) {
            var c = b.tripleDelimiters || ["{{{", "}}}"], d = b.staticDelimiters || ["[[", "]]"], e = b.staticTripleDelimiters || ["[[[", "]]]"];
            this.standardDelimiters = b.delimiters || ["{{", "}}"];
            this.tags = [{
                isStatic: false,
                isTriple: false,
                open: this.standardDelimiters[0],
                close: this.standardDelimiters[1],
                readers: Th
            }, {isStatic: false, isTriple: true, open: c[0], close: c[1], readers: Uh}, {
                isStatic: true,
                isTriple: false,
                open: d[0],
                close: d[1],
                readers: Vh
            }, {isStatic: true, isTriple: true, open: e[0], close: e[1], readers: Uh}];
            this.sortMustacheTags();
            this.sectionDepth = 0;
            this.elementStack = [];
            this.interpolate = {
                script: !b.interpolate || b.interpolate.script !== false,
                style: !b.interpolate || b.interpolate.style !== false
            };
            if (b.sanitize === true) {
                b.sanitize = {
                    elements: "applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),
                    eventAttributes: true
                }
            }
            this.stripComments = b.stripComments !== false;
            this.preserveWhitespace = b.preserveWhitespace;
            this.sanitizeElements = b.sanitize && b.sanitize.elements;
            this.sanitizeEventAttributes = b.sanitize && b.sanitize.eventAttributes;
            this.includeLinePositions = b.includeLinePositions
        }, postProcess: function (b) {
            if (!b.length) {
                return {t: [], v: a}
            }
            if (this.sectionDepth > 0) {
                this.error("A section was left open")
            }
            Kg(b[0].t, this.stripComments, this.preserveWhitespace, !this.preserveWhitespace, !this.preserveWhitespace);
            return b[0]
        }, converters: [Qh], sortMustacheTags: function () {
            this.tags.sort(function (a, b) {
                return b.open.length - a.open.length
            })
        }
    });
    var $h = ["preserveWhitespace", "sanitize", "stripComments", "delimiters", "tripleDelimiters", "interpolate"];
    var _h = {fromId: ci, isHashedId: di, isParsed: ei, getParseOptions: fi, createHelper: ai, parse: bi};

    function ai(a) {
        var b = C(_h);
        b.parse = function (b, c) {
            return bi(b, c || a)
        };
        return b
    }

    function bi(a, b) {
        if (!Sh) {
            throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser")
        }
        return Sh(a, b || this.options)
    }

    function ci(a, b) {
        var c;
        if (!e) {
            if (b && b.noThrow) {
                return
            }
            throw new Error("Cannot retrieve template #" + a + " as Ractive is not running in a browser.")
        }
        if (di(a)) {
            a = a.substring(1)
        }
        if (!(c = document.getElementById(a))) {
            if (b && b.noThrow) {
                return
            }
            throw new Error("Could not find template element with id #" + a)
        }
        if (c.tagName.toUpperCase() !== "SCRIPT") {
            if (b && b.noThrow) {
                return
            }
            throw new Error("Template element with id #" + a + ", must be a <script> element")
        }
        return "textContent" in c ? c.textContent : c.innerHTML
    }

    function di(a) {
        return a && a[0] === "#"
    }

    function ei(a) {
        return !(typeof a === "string")
    }

    function fi(a) {
        if (a.defaults) {
            a = a.defaults
        }
        return $h.reduce(function (b, c) {
            b[c] = a[c];
            return b
        }, {})
    }

    var gi = _h;
    var hi = {
        name: "template", extend: function a(b, c, d) {
            var e;
            if ("template" in d) {
                e = d.template;
                if (typeof e === "function") {
                    c.template = e
                } else {
                    c.template = li(e, c)
                }
            }
        }, init: function a(b, c, d) {
            var e, f;
            e = "template" in d ? d.template : b.prototype.template;
            if (typeof e === "function") {
                f = e;
                e = ji(c, f);
                c._config.template = {fn: f, result: e}
            }
            e = li(e, c);
            c.template = e.t;
            if (e.p) {
                mi(c.partials, e.p)
            }
        }, reset: function (a) {
            var b = ii(a), c;
            if (b) {
                c = li(b, a);
                a.template = c.t;
                mi(a.partials, c.p, true);
                return true
            }
        }
    };

    function ii(a) {
        var b = a._config.template, c;
        if (!b || !b.fn) {
            return
        }
        c = ji(a, b.fn);
        if (c !== b.result) {
            b.result = c;
            c = li(c, a);
            return c
        }
    }

    function ji(a, b) {
        var c = ki(gi.getParseOptions(a));
        return b.call(a, c)
    }

    function ki(a) {
        var b = C(gi);
        b.parse = function (b, c) {
            return gi.parse(b, c || a)
        };
        return b
    }

    function li(b, c) {
        if (typeof b === "string") {
            if (b[0] === "#") {
                b = gi.fromId(b)
            }
            b = Sh(b, gi.getParseOptions(c))
        } else if (b == undefined) {
            throw new Error("The template cannot be " + b + ".")
        } else if (typeof b.v !== "number") {
            throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.")
        } else if (b.v !== a) {
            throw new Error("Mismatched template version (expected " + a + ", got " + b.v + ") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")
        }
        return b
    }

    function mi(a, b, c) {
        if (!b)return;
        for (var d in b) {
            if (c || !a.hasOwnProperty(d)) {
                a[d] = b[d]
            }
        }
    }

    var ni = hi;
    var oi, pi, qi;
    oi = ["adaptors", "components", "computed", "decorators", "easing", "events", "interpolators", "partials", "transitions"];
    pi = function (a, b) {
        this.name = a;
        this.useDefaults = b
    };
    pi.prototype = {
        constructor: pi, extend: function (a, b, c) {
            this.configure(this.useDefaults ? a.defaults : a, this.useDefaults ? b : b.constructor, c)
        }, init: function () {
        }, configure: function (a, b, c) {
            var d = this.name, e = c[d], f;
            f = C(a[d]);
            for (var g in e) {
                f[g] = e[g]
            }
            b[d] = f
        }, reset: function (a) {
            var b = a[this.name];
            var c = false;
            Object.keys(b).forEach(function (a) {
                var d = b[a];
                if (d._fn) {
                    if (d._fn.isOwner) {
                        b[a] = d._fn
                    } else {
                        delete b[a]
                    }
                    c = true
                }
            });
            return c
        }
    };
    qi = oi.map(function (a) {
        return new pi(a, a === "computed")
    });
    var ri = qi;
    var si = ti;

    function ti(a, b, c) {
        if (!/_super/.test(c)) {
            return c
        }
        var d = function a() {
            var e = ui(d._parent, b), f = "_super" in this, g = this._super, h;
            this._super = e;
            h = c.apply(this, arguments);
            if (f) {
                this._super = g
            } else {
                delete this._super
            }
            return h
        };
        d._parent = a;
        d._method = c;
        return d
    }

    function ui(a, b) {
        var c, d;
        if (b in a) {
            c = a[b];
            if (typeof c === "function") {
                d = c
            } else {
                d = function a() {
                    return c
                }
            }
        } else {
            d = x
        }
        return d
    }

    var vi = yi;

    function wi(a, b, c) {
        return "options." + a + " has been deprecated in favour of options." + b + "." + (c ? " You cannot specify both options, please use options." + b + "." : "")
    }

    function xi(a, b, c) {
        if (b in a) {
            if (!(c in a)) {
                Y(wi(b, c));
                a[c] = a[b]
            } else {
                throw new Error(wi(b, c, true))
            }
        }
    }

    function yi(a) {
        xi(a, "beforeInit", "onconstruct");
        xi(a, "init", "onrender");
        xi(a, "complete", "oncomplete");
        xi(a, "eventDefinitions", "events");
        if (K(a.adaptors)) {
            xi(a, "adaptors", "adapt")
        }
    }

    var zi, Ai, Bi, Ci, Di, Ei;
    Ci = {adapt: kd, css: xd, data: Ad, template: ni};
    Bi = Object.keys(c);
    Ei = Hi(Bi.filter(function (a) {
        return !Ci[a]
    }));
    Di = Hi(Bi.concat(ri.map(function (a) {
        return a.name
    })));
    Ai = [].concat(Bi.filter(function (a) {
        return !ri[a] && !Ci[a]
    }), ri, Ci.data, Ci.template, Ci.css);
    zi = {
        extend: function (a, b, c) {
            return Fi("extend", a, b, c)
        }, init: function (a, b, c) {
            return Fi("init", a, b, c)
        }, reset: function (a) {
            return Ai.filter(function (b) {
                return b.reset && b.reset(a)
            }).map(function (a) {
                return a.name
            })
        }, order: Ai
    };
    function Fi(a, b, c, d) {
        vi(d);
        for (var e in d) {
            if (Ei.hasOwnProperty(e)) {
                var f = d[e];
                if (e !== "el" && typeof f === "function") {
                    Y("" + e + " is a Ractive option that does not expect a function and will be ignored", a === "init" ? c : null)
                } else {
                    c[e] = f
                }
            }
        }
        ri.forEach(function (e) {
            e[a](b, c, d)
        });
        kd[a](b, c, d);
        ni[a](b, c, d);
        xd[a](b, c, d);
        Gi(b.prototype, c, d)
    }

    function Gi(a, b, c) {
        for (var d in c) {
            if (!Di[d] && c.hasOwnProperty(d)) {
                var e = c[d];
                if (typeof e === "function") {
                    e = si(a, d, e)
                }
                b[d] = e
            }
        }
    }

    function Hi(a) {
        var b = {};
        a.forEach(function (a) {
            return b[a] = true
        });
        return b
    }

    var Ii = zi;
    var Ji = Ki;

    function Ki() {
        this.dirtyValue = this.dirtyArgs = true;
        if (this.bound && typeof this.owner.bubble === "function") {
            this.owner.bubble()
        }
    }

    var Li = Mi;

    function Mi() {
        var a;
        if (this.items.length === 1) {
            return this.items[0].detach()
        }
        a = document.createDocumentFragment();
        this.items.forEach(function (b) {
            var c = b.detach();
            if (c) {
                a.appendChild(c)
            }
        });
        return a
    }

    var Ni = Oi;

    function Oi(a) {
        var b, c, d, e;
        if (this.items) {
            c = this.items.length;
            for (b = 0; b < c; b += 1) {
                d = this.items[b];
                if (d.find && (e = d.find(a))) {
                    return e
                }
            }
            return null
        }
    }

    var Pi = Qi;

    function Qi(a, b) {
        var c, d, e;
        if (this.items) {
            d = this.items.length;
            for (c = 0; c < d; c += 1) {
                e = this.items[c];
                if (e.findAll) {
                    e.findAll(a, b)
                }
            }
        }
        return b
    }

    var Ri = Si;

    function Si(a, b) {
        var c, d, e;
        if (this.items) {
            d = this.items.length;
            for (c = 0; c < d; c += 1) {
                e = this.items[c];
                if (e.findAllComponents) {
                    e.findAllComponents(a, b)
                }
            }
        }
        return b
    }

    var Ti = Ui;

    function Ui(a) {
        var b, c, d, e;
        if (this.items) {
            b = this.items.length;
            for (c = 0; c < b; c += 1) {
                d = this.items[c];
                if (d.findComponent && (e = d.findComponent(a))) {
                    return e
                }
            }
            return null
        }
    }

    var Vi = Wi;

    function Wi(a) {
        var b = a.index, c;
        if (this.items[b + 1]) {
            c = this.items[b + 1].firstNode()
        } else if (this.owner === this.root) {
            if (!this.owner.component) {
                c = null
            } else {
                c = this.owner.component.findNextNode()
            }
        } else {
            c = this.owner.findNextNode(this)
        }
        return c
    }

    var Xi = Yi;

    function Yi() {
        if (this.items && this.items[0]) {
            return this.items[0].firstNode()
        }
        return null
    }

    var Zi = $i;

    function $i(a, b, c, d) {
        d = d || 0;
        return a.map(function (a) {
            var e, f, g;
            if (a.text) {
                return a.text
            }
            if (a.fragments) {
                return a.fragments.map(function (a) {
                    return $i(a.items, b, c, d)
                }).join("")
            }
            e = c + "-" + d++;
            if (a.keypath && (f = a.root.viewmodel.wrapped[a.keypath.str])) {
                g = f.value
            } else {
                g = a.getValue()
            }
            b[e] = g;
            return "${" + e + "}"
        }).join("")
    }

    var _i = aj;

    function aj() {
        var a, b, c, d;
        if (this.dirtyArgs) {
            b = Zi(this.items, a = {}, this.root._guid);
            c = lh("[" + b + "]", a);
            if (!c) {
                d = [this.toString()]
            } else {
                d = c.value
            }
            this.argsList = d;
            this.dirtyArgs = false
        }
        return this.argsList
    }

    var bj = cj;

    function cj() {
        var a = this;
        do {
            if (a.pElement) {
                return a.pElement.node
            }
        } while (a = a.parent);
        return this.root.detached || this.root.el
    }

    var dj = ej;

    function ej() {
        var a, b, c, d;
        if (this.dirtyValue) {
            b = Zi(this.items, a = {}, this.root._guid);
            c = lh(b, a);
            if (!c) {
                d = this.toString()
            } else {
                d = c.value
            }
            this.value = d;
            this.dirtyValue = false
        }
        return this.value
    }

    var fj = function () {
        return v(this.node)
    };
    var gj = function (a) {
        this.type = Id;
        this.text = a.template
    };
    gj.prototype = {
        detach: fj, firstNode: function () {
            return this.node
        }, render: function () {
            if (!this.node) {
                this.node = document.createTextNode(this.text)
            }
            return this.node
        }, toString: function (a) {
            return a ? Cg(this.text) : this.text
        }, unrender: function (a) {
            if (a) {
                return this.detach()
            }
        }
    };
    var hj = gj;
    var ij = jj;

    function jj() {
        if (this.registered) {
            this.root.viewmodel.unregister(this.keypath, this)
        }
        if (this.resolver) {
            this.resolver.unbind()
        }
    }

    var kj = lj;

    function lj() {
        return this.value
    }

    var mj = function (a, b, c) {
        var d;
        this.ref = b;
        this.resolved = false;
        this.root = a.root;
        this.parentFragment = a.parentFragment;
        this.callback = c;
        d = Za(a.root, b, a.parentFragment);
        if (d != undefined) {
            this.resolve(d)
        } else {
            qb.addUnresolved(this)
        }
    };
    mj.prototype = {
        resolve: function (a) {
            if (this.keypath && !a) {
                qb.addUnresolved(this)
            }
            this.resolved = true;
            this.keypath = a;
            this.callback(a)
        }, forceResolution: function () {
            this.resolve(sa(this.ref))
        }, rebind: function (a, b) {
            var c;
            if (this.keypath != undefined) {
                c = this.keypath.replace(a, b);
                if (c !== undefined) {
                    this.resolve(c)
                }
            }
        }, unbind: function () {
            if (!this.resolved) {
                qb.removeUnresolved(this)
            }
        }
    };
    var nj = mj;
    var oj = function (a, b, c) {
        this.parentFragment = a.parentFragment;
        this.ref = b;
        this.callback = c;
        this.rebind()
    };
    var pj = {
        "@keypath": {prefix: "c", prop: ["context"]},
        "@index": {prefix: "i", prop: ["index"]},
        "@key": {prefix: "k", prop: ["key", "index"]}
    };

    function qj(a, b) {
        var c;
        for (var d = 0; d < b.prop.length; d++) {
            if ((c = a[b.prop[d]]) !== undefined) {
                return c
            }
        }
    }

    oj.prototype = {
        rebind: function () {
            var a = this.ref, b = this.parentFragment, c = pj[a], d;
            if (!c) {
                throw new Error('Unknown special reference "' + a + '" - valid references are @index, @key and @keypath')
            }
            if (this.cached) {
                return this.callback(sa("@" + c.prefix + qj(this.cached, c)))
            }
            if (c.prop.indexOf("index") !== -1 || c.prop.indexOf("key") !== -1) {
                while (b) {
                    if (b.owner.currentSubtype === oe && (d = qj(b, c)) !== undefined) {
                        this.cached = b;
                        b.registerIndexRef(this);
                        return this.callback(sa("@" + c.prefix + d))
                    }
                    if (!b.parent && b.owner && b.owner.component && b.owner.component.parentFragment && !b.owner.component.instance.isolated) {
                        b = b.owner.component.parentFragment
                    } else {
                        b = b.parent
                    }
                }
            } else {
                while (b) {
                    if ((d = qj(b, c)) !== undefined) {
                        return this.callback(sa("@" + c.prefix + d.str))
                    }
                    b = b.parent
                }
            }
        }, unbind: function () {
            if (this.cached) {
                this.cached.unregisterIndexRef(this)
            }
        }
    };
    var rj = oj;
    var sj = function (a, b, c) {
        this.parentFragment = a.parentFragment;
        this.ref = b;
        this.callback = c;
        b.ref.fragment.registerIndexRef(this);
        this.rebind()
    };
    sj.prototype = {
        rebind: function () {
            var a, b = this.ref.ref;
            if (b.ref.t === "k") {
                a = "k" + b.fragment.key
            } else {
                a = "i" + b.fragment.index
            }
            if (a !== undefined) {
                this.callback(sa("@" + a))
            }
        }, unbind: function () {
            this.ref.ref.fragment.unregisterIndexRef(this)
        }
    };
    var tj = sj;
    var uj = vj;

    function vj(a, b) {
        var c = {}, d, e, f, g, h, i = false;
        if (!b) {
            c.refs = d = {}
        }
        while (a) {
            if ((h = a.owner) && (e = h.indexRefs)) {
                if (b && (f = h.getIndexRef(b))) {
                    c.ref = {fragment: a, ref: f};
                    return c
                } else if (!b) {
                    for (g in e) {
                        f = e[g];
                        if (!d[f.n]) {
                            i = true;
                            d[f.n] = {fragment: a, ref: f}
                        }
                    }
                }
            }
            if (!a.parent && a.owner && a.owner.component && a.owner.component.parentFragment && !a.owner.component.instance.isolated) {
                c.componentBoundary = true;
                a = a.owner.component.parentFragment
            } else {
                a = a.parent
            }
        }
        if (!i) {
            return undefined
        } else {
            return c
        }
    }

    vj.resolve = function a(b) {
        var c = {}, d, e;
        for (d in b.refs) {
            e = b.refs[d];
            c[e.ref.n] = e.ref.t === "k" ? e.fragment.key : e.fragment.index
        }
        return c
    };
    var wj = xj;

    function xj(a, b, c) {
        var d;
        if (b.charAt(0) === "@") {
            return new rj(a, b, c)
        }
        if (d = uj(a.parentFragment, b)) {
            return new tj(a, d, c)
        }
        return new nj(a, b, c)
    }

    var yj = Aj;
    var zj = {};

    function Aj(a, b) {
        var c, d;
        if (zj[a]) {
            return zj[a]
        }
        d = [];
        while (b--) {
            d[b] = "_" + b
        }
        c = new Function(d.join(","), "return(" + a + ")");
        zj[a] = c;
        return c
    }

    var Bj, Cj = Function.prototype.bind;
    Bj = function (a, b, c, d) {
        var e = this;
        var f;
        f = a.root;
        this.root = f;
        this.parentFragment = b;
        this.callback = d;
        this.owner = a;
        this.str = c.s;
        this.keypaths = [];
        this.pending = c.r.length;
        this.refResolvers = c.r.map(function (a, b) {
            return wj(e, a, function (a) {
                e.resolve(b, a)
            })
        });
        this.ready = true;
        this.bubble()
    };
    Bj.prototype = {
        bubble: function () {
            if (!this.ready) {
                return
            }
            this.uniqueString = Fj(this.str, this.keypaths);
            this.keypath = Gj(this.uniqueString);
            this.createEvaluator();
            this.callback(this.keypath)
        }, unbind: function () {
            var a;
            while (a = this.refResolvers.pop()) {
                a.unbind()
            }
        }, resolve: function (a, b) {
            this.keypaths[a] = b;
            this.bubble()
        }, createEvaluator: function () {
            var a = this;
            var b, c, d, e, f;
            e = this.keypath;
            b = this.root.viewmodel.computations[e.str];
            if (!b) {
                f = yj(this.str, this.refResolvers.length);
                c = this.keypaths.map(function (b) {
                    var c;
                    if (b === "undefined") {
                        return function () {
                            return undefined
                        }
                    }
                    if (b.isSpecial) {
                        c = b.value;
                        return function () {
                            return c
                        }
                    }
                    return function () {
                        var c = a.root.viewmodel.get(b, {noUnwrap: true, fullRootGet: true});
                        if (typeof c === "function") {
                            c = Ij(c, a.root)
                        }
                        return c
                    }
                });
                d = {
                    deps: this.keypaths.filter(Hj), getter: function () {
                        var a = c.map(Ej);
                        return f.apply(null, a)
                    }
                };
                b = this.root.viewmodel.compute(e, d)
            } else {
                this.root.viewmodel.mark(e)
            }
        }, rebind: function (a, b) {
            this.refResolvers.forEach(function (c) {
                return c.rebind(a, b)
            })
        }
    };
    var Dj = Bj;

    function Ej(a) {
        return a.call()
    }

    function Fj(a, b) {
        return a.replace(/_([0-9]+)/g, function (a, c) {
            var d, e;
            if (+c >= b.length) {
                return "_" + c
            }
            d = b[c];
            if (d === undefined) {
                return "undefined"
            }
            if (d.isSpecial) {
                e = d.value;
                return typeof e === "number" ? e : '"' + e + '"'
            }
            return d.str
        })
    }

    function Gj(a) {
        return sa("${" + a.replace(/[\.\[\]]/g, "-").replace(/\*/, "#MUL#") + "}")
    }

    function Hj(a) {
        return a !== undefined && a[0] !== "@"
    }

    function Ij(a, b) {
        var c, d, e;
        if (a.__ractive_nowrap) {
            return a
        }
        d = "__ractive_" + b._guid;
        c = a[d];
        if (c) {
            return c
        } else if (/this/.test(a.toString())) {
            D(a, d, {value: Cj.call(a, b), configurable: true});
            for (e in a) {
                if (a.hasOwnProperty(e)) {
                    a[d][e] = a[e]
                }
            }
            b._boundFunctions.push({fn: a, prop: d});
            return a[d]
        }
        D(a, "__ractive_nowrap", {value: a});
        return a.__ractive_nowrap
    }

    var Jj = function (a, b, c) {
        var d = this;
        this.resolver = b;
        this.root = b.root;
        this.parentFragment = c;
        this.viewmodel = b.root.viewmodel;
        if (typeof a === "string") {
            this.value = a
        } else if (a.t === ee) {
            this.refResolver = wj(this, a.n, function (a) {
                d.resolve(a)
            })
        } else {
            new Dj(b, c, a, function (a) {
                d.resolve(a)
            })
        }
    };
    Jj.prototype = {
        resolve: function (a) {
            if (this.keypath) {
                this.viewmodel.unregister(this.keypath, this)
            }
            this.keypath = a;
            this.value = this.viewmodel.get(a);
            this.bind();
            this.resolver.bubble()
        }, bind: function () {
            this.viewmodel.register(this.keypath, this)
        }, rebind: function (a, b) {
            if (this.refResolver) {
                this.refResolver.rebind(a, b)
            }
        }, setValue: function (a) {
            this.value = a;
            this.resolver.bubble()
        }, unbind: function () {
            if (this.keypath) {
                this.viewmodel.unregister(this.keypath, this)
            }
            if (this.refResolver) {
                this.refResolver.unbind()
            }
        }, forceResolution: function () {
            if (this.refResolver) {
                this.refResolver.forceResolution()
            }
        }
    };
    var Kj = Jj;
    var Lj = function (a, b, c) {
        var d = this;
        var e, f, g, h;
        this.parentFragment = h = a.parentFragment;
        this.root = e = a.root;
        this.mustache = a;
        this.ref = f = b.r;
        this.callback = c;
        this.unresolved = [];
        if (g = Za(e, f, h)) {
            this.base = g
        } else {
            this.baseResolver = new nj(this, f, function (a) {
                d.base = a;
                d.baseResolver = null;
                d.bubble()
            })
        }
        this.members = b.m.map(function (a) {
            return new Kj(a, d, h)
        });
        this.ready = true;
        this.bubble()
    };
    Lj.prototype = {
        getKeypath: function () {
            var a = this.members.map(Mj);
            if (!a.every(Nj) || this.baseResolver) {
                return null
            }
            return this.base.join(a.join("."))
        }, bubble: function () {
            if (!this.ready || this.baseResolver) {
                return
            }
            this.callback(this.getKeypath())
        }, unbind: function () {
            this.members.forEach(eb)
        }, rebind: function (a, b) {
            var c;
            if (this.base) {
                var d = this.base.replace(a, b);
                if (d && d !== this.base) {
                    this.base = d;
                    c = true
                }
            }
            this.members.forEach(function (d) {
                if (d.rebind(a, b)) {
                    c = true
                }
            });
            if (c) {
                this.bubble()
            }
        }, forceResolution: function () {
            if (this.baseResolver) {
                this.base = sa(this.ref);
                this.baseResolver.unbind();
                this.baseResolver = null
            }
            this.members.forEach(Oj);
            this.bubble()
        }
    };
    function Mj(a) {
        return a.value
    }

    function Nj(a) {
        return a != undefined
    }

    function Oj(a) {
        a.forceResolution()
    }

    var Pj = Lj;
    var Qj = Rj;

    function Rj(a, b) {
        var c, d, e;
        d = b.parentFragment;
        e = b.template;
        a.root = d.root;
        a.parentFragment = d;
        a.pElement = d.pElement;
        a.template = b.template;
        a.index = b.index || 0;
        a.isStatic = b.template.s;
        a.type = b.template.t;
        a.registered = false;
        if (c = e.r) {
            a.resolver = wj(a, c, f)
        }
        if (b.template.x) {
            a.resolver = new Dj(a, d, b.template.x, g)
        }
        if (b.template.rx) {
            a.resolver = new Pj(a, b.template.rx, g)
        }
        if (a.template.n === ne && !a.hasOwnProperty("value")) {
            a.setValue(undefined)
        }
        function f(b) {
            a.resolve(b)
        }

        function g(b) {
            var c = a.keypath;
            if (b != c) {
                a.resolve(b);
                if (c !== undefined) {
                    a.fragments && a.fragments.forEach(function (a) {
                        a.rebind(c, b)
                    })
                }
            }
        }
    }

    var Sj = Tj;

    function Tj(a) {
        var b, c, d;
        if (a && a.isSpecial) {
            this.keypath = a;
            this.setValue(a.value);
            return
        }
        if (this.registered) {
            this.root.viewmodel.unregister(this.keypath, this);
            this.registered = false;
            b = true
        }
        this.keypath = a;
        if (a != undefined) {
            c = this.root.viewmodel.get(a);
            this.root.viewmodel.register(a, this);
            this.registered = true
        }
        this.setValue(c);
        if (b && (d = this.twowayBinding)) {
            d.rebound()
        }
    }

    var Uj = Vj;

    function Vj(a, b) {
        if (this.fragments) {
            this.fragments.forEach(function (c) {
                return c.rebind(a, b)
            })
        }
        if (this.resolver) {
            this.resolver.rebind(a, b)
        }
    }

    var Wj = {getValue: kj, init: Qj, resolve: Sj, rebind: Uj};
    var Xj = function (a) {
        this.type = Jd;
        Wj.init(this, a)
    };
    Xj.prototype = {
        update: function () {
            this.node.data = this.value == undefined ? "" : this.value
        }, resolve: Wj.resolve, rebind: Wj.rebind, detach: fj, unbind: ij, render: function () {
            if (!this.node) {
                this.node = document.createTextNode(w(this.value))
            }
            return this.node
        }, unrender: function (a) {
            if (a) {
                v(this.node)
            }
        }, getValue: Wj.getValue, setValue: function (a) {
            var b;
            if (this.keypath && (b = this.root.viewmodel.wrapped[this.keypath.str])) {
                a = b.get()
            }
            if (!M(a, this.value)) {
                this.value = a;
                this.parentFragment.bubble();
                if (this.node) {
                    qb.addView(this)
                }
            }
        }, firstNode: function () {
            return this.node
        }, toString: function (a) {
            var b = "" + w(this.value);
            return a ? Cg(b) : b
        }
    };
    var Yj = Xj;
    var Zj = $j;

    function $j() {
        this.parentFragment.bubble()
    }

    var _j = ak;

    function ak() {
        var a;
        if (this.fragments.length === 1) {
            return this.fragments[0].detach()
        }
        a = document.createDocumentFragment();
        this.fragments.forEach(function (b) {
            a.appendChild(b.detach())
        });
        return a
    }

    var bk = ck;

    function ck(a) {
        var b, c, d;
        c = this.fragments.length;
        for (b = 0; b < c; b += 1) {
            if (d = this.fragments[b].find(a)) {
                return d
            }
        }
        return null
    }

    var dk = ek;

    function ek(a, b) {
        var c, d;
        d = this.fragments.length;
        for (c = 0; c < d; c += 1) {
            this.fragments[c].findAll(a, b)
        }
    }

    var fk = gk;

    function gk(a, b) {
        var c, d;
        d = this.fragments.length;
        for (c = 0; c < d; c += 1) {
            this.fragments[c].findAllComponents(a, b)
        }
    }

    var hk = ik;

    function ik(a) {
        var b, c, d;
        c = this.fragments.length;
        for (b = 0; b < c; b += 1) {
            if (d = this.fragments[b].findComponent(a)) {
                return d
            }
        }
        return null
    }

    var jk = kk;

    function kk(a) {
        if (this.fragments[a.index + 1]) {
            return this.fragments[a.index + 1].firstNode()
        }
        return this.parentFragment.findNextNode(this)
    }

    var lk = mk;

    function mk() {
        var a, b, c;
        if (a = this.fragments.length) {
            for (b = 0; b < a; b += 1) {
                if (c = this.fragments[b].firstNode()) {
                    return c
                }
            }
        }
        return this.parentFragment.findNextNode(this)
    }

    var nk = ok;

    function ok(a) {
        var b = this;
        var c, d, e, f, g, h, i;
        if (this.shuffling || this.unbound || this.currentSubtype !== oe) {
            return
        }
        this.shuffling = true;
        qb.scheduleTask(function () {
            return b.shuffling = false
        });
        c = this.parentFragment;
        g = [];
        a.forEach(function (a, c) {
            var e, f, h, i, j;
            if (a === c) {
                g[a] = b.fragments[c];
                return
            }
            e = b.fragments[c];
            if (d === undefined) {
                d = c
            }
            if (a === -1) {
                b.fragmentsToUnrender.push(e);
                e.unbind();
                return
            }
            f = a - c;
            h = b.keypath.join(c);
            i = b.keypath.join(a);
            e.index = a;
            if (j = e.registeredIndexRefs) {
                j.forEach(pk)
            }
            e.rebind(h, i);
            g[a] = e
        });
        f = this.root.viewmodel.get(this.keypath).length;
        if (d === undefined) {
            if (this.length === f) {
                return
            }
            d = this.length
        }
        this.length = this.fragments.length = f;
        if (this.rendered) {
            qb.addView(this)
        }
        h = {template: this.template.f, root: this.root, owner: this};
        for (e = d; e < f; e += 1) {
            i = g[e];
            if (!i) {
                this.fragmentsToCreate.push(e)
            }
            this.fragments[e] = i
        }
    }

    function pk(a) {
        a.rebind("", "")
    }

    var qk = function (a, b) {
        Wj.rebind.call(this, a, b)
    };
    var rk = sk;

    function sk() {
        var a = this;
        this.docFrag = document.createDocumentFragment();
        this.fragments.forEach(function (b) {
            return a.docFrag.appendChild(b.render())
        });
        this.renderedFragments = this.fragments.slice();
        this.fragmentsToRender = [];
        this.rendered = true;
        return this.docFrag
    }

    var tk = uk;

    function uk(a) {
        var b = this;
        var c, d;
        if (this.updating) {
            return
        }
        this.updating = true;
        if (this.keypath && (c = this.root.viewmodel.wrapped[this.keypath.str])) {
            a = c.get()
        }
        if (this.fragmentsToCreate.length) {
            d = {template: this.template.f || [], root: this.root, pElement: this.pElement, owner: this};
            this.fragmentsToCreate.forEach(function (a) {
                var c;
                d.context = b.keypath.join(a);
                d.index = a;
                c = new Zs(d);
                b.fragmentsToRender.push(b.fragments[a] = c)
            });
            this.fragmentsToCreate.length = 0
        } else if (wk(this, a)) {
            this.bubble();
            if (this.rendered) {
                qb.addView(this)
            }
        }
        this.value = a;
        this.updating = false
    }

    function vk(a, b, c) {
        if (b === oe) {
            if (a.indexRefs && a.indexRefs[0]) {
                var d = a.indexRefs[0];
                if (c && d.t === "i" || !c && d.t === "k") {
                    if (!c) {
                        a.length = 0;
                        a.fragmentsToUnrender = a.fragments.slice(0);
                        a.fragmentsToUnrender.forEach(function (a) {
                            return a.unbind()
                        })
                    }
                }
                d.t = c ? "k" : "i"
            }
        }
        a.currentSubtype = b
    }

    function wk(a, b) {
        var c = {template: a.template.f || [], root: a.root, pElement: a.parentFragment.pElement, owner: a};
        a.hasContext = true;
        if (a.subtype) {
            switch (a.subtype) {
                case me:
                    a.hasContext = false;
                    return Bk(a, b, false, c);
                case ne:
                    a.hasContext = false;
                    return Bk(a, b, true, c);
                case pe:
                    return Ak(a, c);
                case qe:
                    return zk(a, b, c);
                case oe:
                    if (O(b)) {
                        vk(a, a.subtype, true);
                        return yk(a, b, c)
                    }
            }
        }
        a.ordered = !!L(b);
        if (a.ordered) {
            vk(a, oe, false);
            return xk(a, b, c)
        }
        if (O(b) || typeof b === "function") {
            if (a.template.i) {
                vk(a, oe, true);
                return yk(a, b, c)
            }
            vk(a, pe, false);
            return Ak(a, c)
        }
        vk(a, me, false);
        a.hasContext = false;
        return Bk(a, b, false, c)
    }

    function xk(a, b, c) {
        var d, e, f;
        e = b.length;
        if (e === a.length) {
            return false
        }
        if (e < a.length) {
            a.fragmentsToUnrender = a.fragments.splice(e, a.length - e);
            a.fragmentsToUnrender.forEach(eb)
        } else {
            if (e > a.length) {
                for (d = a.length; d < e; d += 1) {
                    c.context = a.keypath.join(d);
                    c.index = d;
                    f = new Zs(c);
                    a.fragmentsToRender.push(a.fragments[d] = f)
                }
            }
        }
        a.length = e;
        return true
    }

    function yk(a, b, c) {
        var d, e, f, g, h, i;
        f = a.hasKey || (a.hasKey = {});
        e = a.fragments.length;
        while (e--) {
            g = a.fragments[e];
            if (!(g.key in b)) {
                h = true;
                g.unbind();
                a.fragmentsToUnrender.push(g);
                a.fragments.splice(e, 1);
                f[g.key] = false
            }
        }
        e = a.fragments.length;
        while (e--) {
            g = a.fragments[e];
            if (g.index !== e) {
                g.index = e;
                if (i = g.registeredIndexRefs) {
                    i.forEach(Ek)
                }
            }
        }
        e = a.fragments.length;
        for (d in b) {
            if (!f[d]) {
                h = true;
                c.context = a.keypath.join(d);
                c.key = d;
                c.index = e++;
                g = new Zs(c);
                a.fragmentsToRender.push(g);
                a.fragments.push(g);
                f[d] = true
            }
        }
        a.length = a.fragments.length;
        return h
    }

    function zk(a, b, c) {
        if (b) {
            return Ak(a, c)
        } else {
            return Ck(a)
        }
    }

    function Ak(a, b) {
        var c;
        if (!a.length) {
            b.context = a.keypath;
            b.index = 0;
            c = new Zs(b);
            a.fragmentsToRender.push(a.fragments[0] = c);
            a.length = 1;
            return true
        }
    }

    function Bk(a, b, c, d) {
        var e, f, g, h, i;
        f = L(b) && b.length === 0;
        g = false;
        if (!L(b) && O(b)) {
            g = true;
            for (i in b) {
                g = false;
                break
            }
        }
        if (c) {
            e = f || g || !b
        } else {
            e = b && !f && !g
        }
        if (e) {
            if (!a.length) {
                d.index = 0;
                h = new Zs(d);
                a.fragmentsToRender.push(a.fragments[0] = h);
                a.length = 1;
                return true
            }
            if (a.length > 1) {
                a.fragmentsToUnrender = a.fragments.splice(1);
                a.fragmentsToUnrender.forEach(eb);
                return true
            }
        } else {
            return Ck(a)
        }
    }

    function Ck(a) {
        if (a.length) {
            a.fragmentsToUnrender = a.fragments.splice(0, a.fragments.length).filter(Dk);
            a.fragmentsToUnrender.forEach(eb);
            a.length = a.fragmentsToRender.length = 0;
            return true
        }
    }

    function Dk(a) {
        return a.rendered
    }

    function Ek(a) {
        a.rebind("", "")
    }

    var Fk = Gk;

    function Gk(a) {
        var b, c, d;
        b = "";
        c = 0;
        d = this.length;
        for (c = 0; c < d; c += 1) {
            b += this.fragments[c].toString(a)
        }
        return b
    }

    var Hk = Ik;

    function Ik() {
        var a = this;
        this.fragments.forEach(eb);
        this.fragmentsToRender.forEach(function (b) {
            return Oa(a.fragments, b)
        });
        this.fragmentsToRender = [];
        ij.call(this);
        this.length = 0;
        this.unbound = true
    }

    var Jk = Kk;

    function Kk(a) {
        this.fragments.forEach(a ? Lk : Mk);
        this.renderedFragments = [];
        this.rendered = false
    }

    function Lk(a) {
        a.unrender(true)
    }

    function Mk(a) {
        a.unrender(false)
    }

    var Nk = Ok;

    function Ok() {
        var a, b, c, d, e, f, g;
        c = this.renderedFragments;
        while (a = this.fragmentsToUnrender.pop()) {
            a.unrender(true);
            c.splice(c.indexOf(a), 1)
        }
        while (a = this.fragmentsToRender.shift()) {
            a.render()
        }
        if (this.rendered) {
            e = this.parentFragment.getNode()
        }
        g = this.fragments.length;
        for (f = 0; f < g; f += 1) {
            a = this.fragments[f];
            b = c.indexOf(a, f);
            if (b === f) {
                if (this.docFrag.childNodes.length) {
                    d = a.firstNode();
                    e.insertBefore(this.docFrag, d)
                }
                continue
            }
            this.docFrag.appendChild(a.detach());
            if (b !== -1) {
                c.splice(b, 1)
            }
            c.splice(f, 0, a)
        }
        if (this.rendered && this.docFrag.childNodes.length) {
            d = this.parentFragment.findNextNode(this);
            e.insertBefore(this.docFrag, d)
        }
        this.renderedFragments = this.fragments.slice()
    }

    var Pk = function (a) {
        this.type = Ld;
        this.subtype = this.currentSubtype = a.template.n;
        this.inverted = this.subtype === ne;
        this.pElement = a.pElement;
        this.fragments = [];
        this.fragmentsToCreate = [];
        this.fragmentsToRender = [];
        this.fragmentsToUnrender = [];
        if (a.template.i) {
            this.indexRefs = a.template.i.split(",").map(function (a, b) {
                return {n: a, t: b === 0 ? "k" : "i"}
            })
        }
        this.renderedFragments = [];
        this.length = 0;
        Wj.init(this, a)
    };
    Pk.prototype = {
        bubble: Zj,
        detach: _j,
        find: bk,
        findAll: dk,
        findAllComponents: fk,
        findComponent: hk,
        findNextNode: jk,
        firstNode: lk,
        getIndexRef: function (a) {
            if (this.indexRefs) {
                var b = this.indexRefs.length;
                while (b--) {
                    var c = this.indexRefs[b];
                    if (c.n === a) {
                        return c
                    }
                }
            }
        },
        getValue: Wj.getValue,
        shuffle: nk,
        rebind: qk,
        render: rk,
        resolve: Wj.resolve,
        setValue: tk,
        toString: Fk,
        unbind: Hk,
        unrender: Jk,
        update: Nk
    };
    var Qk = Pk;
    var Rk = Sk;

    function Sk() {
        var a, b;
        if (this.docFrag) {
            a = this.nodes.length;
            for (b = 0; b < a; b += 1) {
                this.docFrag.appendChild(this.nodes[b])
            }
            return this.docFrag
        }
    }

    var Tk = Uk;

    function Uk(a) {
        var b, c, d, e;
        c = this.nodes.length;
        for (b = 0; b < c; b += 1) {
            d = this.nodes[b];
            if (d.nodeType !== 1) {
                continue
            }
            if (m(d, a)) {
                return d
            }
            if (e = d.querySelector(a)) {
                return e
            }
        }
        return null
    }

    var Vk = Wk;

    function Wk(a, b) {
        var c, d, e, f, g, h;
        d = this.nodes.length;
        for (c = 0; c < d; c += 1) {
            e = this.nodes[c];
            if (e.nodeType !== 1) {
                continue
            }
            if (m(e, a)) {
                b.push(e)
            }
            if (f = e.querySelectorAll(a)) {
                g = f.length;
                for (h = 0; h < g; h += 1) {
                    b.push(f[h])
                }
            }
        }
    }

    var Xk = Yk;

    function Yk() {
        if (this.rendered && this.nodes[0]) {
            return this.nodes[0]
        }
        return this.parentFragment.findNextNode(this)
    }

    var Zk = {}, $k, _k;
    try {
        l("table").innerHTML = "foo"
    } catch (a) {
        $k = true;
        _k = {
            TABLE: ['<table class="x">', "</table>"],
            THEAD: ['<table><thead class="x">', "</thead></table>"],
            TBODY: ['<table><tbody class="x">', "</tbody></table>"],
            TR: ['<table><tr class="x">', "</tr></table>"],
            SELECT: ['<select class="x">', "</select>"]
        }
    }
    var al = function (a, b, c) {
        var d, e = [], f, g, h, j;
        if (a != null && a !== "") {
            if ($k && (f = _k[b.tagName])) {
                d = bl("DIV");
                d.innerHTML = f[0] + a + f[1];
                d = d.querySelector(".x");
                if (d.tagName === "SELECT") {
                    g = d.options[d.selectedIndex]
                }
            } else if (b.namespaceURI === i.svg) {
                d = bl("DIV");
                d.innerHTML = '<svg class="x">' + a + "</svg>";
                d = d.querySelector(".x")
            } else {
                d = bl(b.tagName);
                d.innerHTML = a;
                if (d.tagName === "SELECT") {
                    g = d.options[d.selectedIndex]
                }
            }
            while (h = d.firstChild) {
                e.push(h);
                c.appendChild(h)
            }
            if (b.tagName === "SELECT") {
                j = e.length;
                while (j--) {
                    if (e[j] !== g) {
                        e[j].selected = false
                    }
                }
            }
        }
        return e
    };

    function bl(a) {
        return Zk[a] || (Zk[a] = l(a))
    }

    var cl = dl;

    function dl(a) {
        var b, c, d;
        if (!a || a.name !== "select" || !a.binding) {
            return
        }
        b = Pa(a.node.options).filter(el);
        if (a.getAttribute("multiple")) {
            d = b.map(function (a) {
                return a.value
            })
        } else if (c = b[0]) {
            d = c.value
        }
        if (d !== undefined) {
            a.binding.setValue(d)
        }
        a.bubble()
    }

    function el(a) {
        return a.selected
    }

    var fl = gl;

    function gl() {
        if (this.rendered) {
            throw new Error("Attempted to render an item that was already rendered")
        }
        this.docFrag = document.createDocumentFragment();
        this.nodes = al(this.value, this.parentFragment.getNode(), this.docFrag);
        cl(this.pElement);
        this.rendered = true;
        return this.docFrag
    }

    var hl = il;

    function il(a) {
        var b;
        if (b = this.root.viewmodel.wrapped[this.keypath.str]) {
            a = b.get()
        }
        if (a !== this.value) {
            this.value = a;
            this.parentFragment.bubble();
            if (this.rendered) {
                qb.addView(this)
            }
        }
    }

    var jl = kl;

    function kl() {
        return this.value != undefined ? Ag("" + this.value) : ""
    }

    var ll = ml;

    function ml(a) {
        if (this.rendered && a) {
            this.nodes.forEach(v);
            this.rendered = false
        }
    }

    var nl = ol;

    function ol() {
        var a, b;
        if (!this.rendered) {
            return
        }
        while (this.nodes && this.nodes.length) {
            a = this.nodes.pop();
            a.parentNode.removeChild(a)
        }
        b = this.parentFragment.getNode();
        this.nodes = al(this.value, b, this.docFrag);
        b.insertBefore(this.docFrag, this.parentFragment.findNextNode(this));
        cl(this.pElement)
    }

    var pl = function (a) {
        this.type = Kd;
        Wj.init(this, a)
    };
    pl.prototype = {
        detach: Rk,
        find: Tk,
        findAll: Vk,
        firstNode: Xk,
        getValue: Wj.getValue,
        rebind: Wj.rebind,
        render: fl,
        resolve: Wj.resolve,
        setValue: hl,
        toString: jl,
        unbind: ij,
        unrender: ll,
        update: nl
    };
    var ql = pl;
    var rl = function () {
        this.parentFragment.bubble()
    };
    var sl = tl;

    function tl() {
        var a = this.node, b;
        if (a) {
            if (b = a.parentNode) {
                b.removeChild(a)
            }
            return a
        }
    }

    var ul = function (a) {
        if (!this.node) {
            return null
        }
        if (m(this.node, a)) {
            return this.node
        }
        if (this.fragment && this.fragment.find) {
            return this.fragment.find(a)
        }
    };
    var vl = function (a, b) {
        if (b._test(this, true) && b.live) {
            (this.liveQueries || (this.liveQueries = [])).push(b)
        }
        if (this.fragment) {
            this.fragment.findAll(a, b)
        }
    };
    var wl = function (a, b) {
        if (this.fragment) {
            this.fragment.findAllComponents(a, b)
        }
    };
    var xl = function (a) {
        if (this.fragment) {
            return this.fragment.findComponent(a)
        }
    };
    var yl = zl;

    function zl() {
        return null
    }

    var Al = Bl;

    function Bl() {
        return this.node
    }

    var Cl = Dl;

    function Dl(a) {
        if (!this.attributes || !this.attributes[a]) {
            return
        }
        return this.attributes[a].value
    }

    var El = /^true|on|yes|1$/i;
    var Fl = /^[0-9]+$/;
    var Gl = function (a, b) {
        var c, d, e;
        e = b.a || {};
        d = {};
        c = e.twoway;
        if (c !== undefined) {
            d.twoway = c === 0 || El.test(c)
        }
        c = e.lazy;
        if (c !== undefined) {
            if (c !== 0 && Fl.test(c)) {
                d.lazy = parseInt(c)
            } else {
                d.lazy = c === 0 || El.test(c)
            }
        }
        return d
    };
    var Hl = Il;

    function Il() {
        var a = this.useProperty || !this.rendered ? this.fragment.getValue() : this.fragment.toString();
        if (!M(a, this.value)) {
            if (this.name === "id" && this.value) {
                delete this.root.nodes[this.value]
            }
            this.value = a;
            if (this.name === "value" && this.node) {
                this.node._ractive.value = a
            }
            if (this.rendered) {
                qb.addView(this)
            }
        }
    }

    var Jl, Kl, Ll, Ml;
    Jl = "altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" ");
    Kl = "attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" ");
    Ll = function (a) {
        var b = {}, c = a.length;
        while (c--) {
            b[a[c].toLowerCase()] = a[c]
        }
        return b
    };
    Ml = Ll(Jl.concat(Kl));
    var Nl = function (a) {
        var b = a.toLowerCase();
        return Ml[b] || b
    };
    var Ol = function (a, b) {
        var c, d;
        c = b.indexOf(":");
        if (c !== -1) {
            d = b.substr(0, c);
            if (d !== "xmlns") {
                b = b.substring(c + 1);
                a.name = Nl(b);
                a.namespace = i[d.toLowerCase()];
                a.namespacePrefix = d;
                if (!a.namespace) {
                    throw'Unknown namespace ("' + d + '")'
                }
                return
            }
        }
        a.name = a.element.namespace !== i.html ? Nl(b) : b
    };
    var Pl = Ql;

    function Ql(a) {
        var b = a.fragment.items;
        if (b.length !== 1) {
            return
        }
        if (b[0].type === Jd) {
            return b[0]
        }
    }

    var Rl = Sl;

    function Sl(a) {
        this.type = Sd;
        this.element = a.element;
        this.root = a.root;
        Ol(this, a.name);
        this.isBoolean = sg.test(this.name);
        if (!a.value || typeof a.value === "string") {
            this.value = this.isBoolean ? true : a.value || "";
            return
        }
        this.parentFragment = this.element.parentFragment;
        this.fragment = new Zs({template: a.value, root: this.root, owner: this});
        this.value = this.fragment.getValue();
        this.interpolator = Pl(this);
        this.isBindable = !!this.interpolator && !this.interpolator.isStatic;
        this.ready = true
    }

    var Tl = Ul;

    function Ul(a, b) {
        if (this.fragment) {
            this.fragment.rebind(a, b)
        }
    }

    var Vl = Xl;
    var Wl = {
        "accept-charset": "acceptCharset",
        accesskey: "accessKey",
        bgcolor: "bgColor",
        class: "className",
        codebase: "codeBase",
        colspan: "colSpan",
        contenteditable: "contentEditable",
        datetime: "dateTime",
        dirname: "dirName",
        for: "htmlFor",
        "http-equiv": "httpEquiv",
        ismap: "isMap",
        maxlength: "maxLength",
        novalidate: "noValidate",
        pubdate: "pubDate",
        readonly: "readOnly",
        rowspan: "rowSpan",
        tabindex: "tabIndex",
        usemap: "useMap"
    };

    function Xl(a) {
        var b;
        this.node = a;
        if (!a.namespaceURI || a.namespaceURI === i.html) {
            b = Wl[this.name] || this.name;
            if (a[b] !== undefined) {
                this.propertyName = b
            }
            if (this.isBoolean || this.isTwoway) {
                this.useProperty = true
            }
            if (b === "value") {
                a._ractive.value = this.value
            }
        }
        this.rendered = true;
        this.update()
    }

    var Yl = Zl;

    function Zl() {
        var a = this;
        var b = a.name;
        var c = a.namespacePrefix;
        var d = a.value;
        var e = a.interpolator;
        var f = a.fragment;
        if (b === "value" && (this.element.name === "select" || this.element.name === "textarea")) {
            return
        }
        if (b === "value" && this.element.getAttribute("contenteditable") !== undefined) {
            return
        }
        if (b === "name" && this.element.name === "input" && e) {
            return "name={{" + (e.keypath.str || e.ref) + "}}"
        }
        if (this.isBoolean) {
            return d ? b : ""
        }
        if (f) {
            if (f.items.length === 1 && f.items[0].value == null) {
                return ""
            }
            d = f.toString()
        }
        if (c) {
            b = c + ":" + b
        }
        return d ? b + '="' + $l(d) + '"' : b
    }

    function $l(a) {
        return a.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;")
    }

    var _l = am;

    function am() {
        if (this.fragment) {
            this.fragment.unbind()
        }
        if (this.name === "id") {
            delete this.root.nodes[this.value]
        }
    }

    var bm = cm;

    function cm() {
        var a = this.value, b, c, d, e;
        if (!this.locked) {
            this.node._ractive.value = a;
            b = this.node.options;
            e = b.length;
            while (e--) {
                c = b[e];
                d = c._ractive ? c._ractive.value : c.value;
                if (d == a) {
                    c.selected = true;
                    break
                }
            }
        }
    }

    var dm = em;

    function em() {
        var a = this.value, b, c, d, e;
        if (!K(a)) {
            a = [a]
        }
        b = this.node.options;
        c = b.length;
        while (c--) {
            d = b[c];
            e = d._ractive ? d._ractive.value : d.value;
            d.selected = Ka(a, e)
        }
    }

    var fm = gm;

    function gm() {
        var a = this;
        var b = a.node;
        var c = a.value;
        b.checked = c == b._ractive.value
    }

    var hm = im;

    function im() {
        var a, b = this.node, c, d, e;
        a = b.checked;
        b.value = this.element.getAttribute("value");
        b.checked = this.element.getAttribute("value") === this.element.getAttribute("name");
        if (a && !b.checked && this.element.binding) {
            d = this.element.binding.siblings;
            if (e = d.length) {
                while (e--) {
                    c = d[e];
                    if (!c.element.node) {
                        return
                    }
                    if (c.element.node.checked) {
                        qb.addRactive(c.root);
                        return c.handleChange()
                    }
                }
                this.root.viewmodel.set(c.keypath, undefined)
            }
        }
    }

    var jm = km;

    function km() {
        var a = this;
        var b = a.element;
        var c = a.node;
        var d = a.value;
        var e = b.binding;
        var f;
        var g;
        f = b.getAttribute("value");
        if (!K(d)) {
            e.isChecked = c.checked = d == f
        } else {
            g = d.length;
            while (g--) {
                if (f == d[g]) {
                    e.isChecked = c.checked = true;
                    return
                }
            }
            e.isChecked = c.checked = false
        }
    }

    var lm = mm;

    function mm() {
        this.node.className = w(this.value)
    }

    var nm = om;

    function om() {
        var a = this;
        var b = a.node;
        var c = a.value;
        this.root.nodes[c] = b;
        b.id = c
    }

    var pm = qm;

    function qm() {
        var a, b;
        a = this.node;
        b = this.value;
        if (b === undefined) {
            b = ""
        }
        a.style.setAttribute("cssText", b)
    }

    var rm = sm;

    function sm() {
        var a = this.value;
        if (a === undefined) {
            a = ""
        }
        if (!this.locked) {
            this.node.innerHTML = a
        }
    }

    var tm = um;

    function um() {
        var a = this;
        var b = a.node;
        var c = a.value;
        b._ractive.value = c;
        if (!this.locked) {
            b.value = c == undefined ? "" : c
        }
    }

    var vm = wm;

    function wm() {
        if (!this.locked) {
            this.node[this.propertyName] = this.value
        }
    }

    var xm = ym;

    function ym() {
        var a = this;
        var b = a.node;
        var c = a.namespace;
        var d = a.name;
        var e = a.value;
        var f = a.fragment;
        if (c) {
            b.setAttributeNS(c, d, (f || e).toString())
        } else if (!this.isBoolean) {
            if (e == null) {
                b.removeAttribute(d)
            } else {
                b.setAttribute(d, (f || e).toString())
            }
        } else {
            if (e) {
                b.setAttribute(d, "")
            } else {
                b.removeAttribute(d)
            }
        }
    }

    var zm = Am;

    function Am() {
        var a = this;
        var b = a.name;
        var c = a.element;
        var d = a.node;
        var e;
        var f;
        if (b === "id") {
            f = nm
        } else if (b === "value") {
            if (c.name === "select" && b === "value") {
                f = c.getAttribute("multiple") ? dm : bm
            } else if (c.name === "textarea") {
                f = tm
            } else if (c.getAttribute("contenteditable") != null) {
                f = rm
            } else if (c.name === "input") {
                e = c.getAttribute("type");
                if (e === "file") {
                    f = x
                } else if (e === "radio" && c.binding && c.binding.name === "name") {
                    f = hm
                } else {
                    f = tm
                }
            }
        } else if (this.isTwoway && b === "name") {
            if (d.type === "radio") {
                f = fm
            } else if (d.type === "checkbox") {
                f = jm
            }
        } else if (b === "style" && d.style.setAttribute) {
            f = pm
        } else if (b === "class" && (!d.namespaceURI || d.namespaceURI === i.html)) {
            f = lm
        } else if (this.useProperty) {
            f = vm
        }
        if (!f) {
            f = xm
        }
        this.update = f;
        this.update()
    }

    var Bm = function (a) {
        this.init(a)
    };
    Bm.prototype = {bubble: Hl, init: Rl, rebind: Tl, render: Vl, toString: Yl, unbind: _l, update: zm};
    var Cm = Bm;
    var Dm = function (a, b) {
        var c, d, e = [];
        for (c in b) {
            if (c === "twoway" || c === "lazy") {
                continue
            }
            if (b.hasOwnProperty(c)) {
                d = new Cm({element: a, name: c, value: b[c], root: a.root});
                e[c] = d;
                if (c !== "value") {
                    e.push(d)
                }
            }
        }
        if (d = e.value) {
            e.push(d)
        }
        return e
    };
    var Em;
    if (typeof document !== "undefined") {
        Em = l("div")
    }
    var Fm = function (a, b) {
        this.element = a;
        this.root = a.root;
        this.parentFragment = a.parentFragment;
        this.attributes = [];
        this.fragment = new Zs({root: a.root, owner: this, template: [b]})
    };
    Fm.prototype = {
        bubble: function () {
            if (this.node) {
                this.update()
            }
            this.element.bubble()
        }, rebind: function (a, b) {
            this.fragment.rebind(a, b)
        }, render: function (a) {
            this.node = a;
            this.isSvg = a.namespaceURI === i.svg;
            this.update()
        }, unbind: function () {
            this.fragment.unbind()
        }, update: function () {
            var a = this;
            var b, c;
            b = this.fragment.toString();
            c = Hm(b, this.isSvg);
            this.attributes.filter(function (a) {
                return Im(c, a)
            }).forEach(function (b) {
                a.node.removeAttribute(b.name)
            });
            c.forEach(function (b) {
                a.node.setAttribute(b.name, b.value)
            });
            this.attributes = c
        }, toString: function () {
            return this.fragment.toString()
        }
    };
    var Gm = Fm;

    function Hm(a, b) {
        var c = b ? "svg" : "div";
        Em.innerHTML = "<" + c + " " + a + "></" + c + ">";
        return Pa(Em.childNodes[0].attributes)
    }

    function Im(a, b) {
        var c = a.length;
        while (c--) {
            if (a[c].name === b.name) {
                return false
            }
        }
        return true
    }

    var Jm = function (a, b) {
        if (!b) {
            return []
        }
        return b.map(function (b) {
            return new Gm(a, b)
        })
    };
    var Km = function (a) {
        var b, c, d, e;
        this.element = a;
        this.root = a.root;
        this.attribute = a.attributes[this.name || "value"];
        b = this.attribute.interpolator;
        b.twowayBinding = this;
        if (c = b.keypath) {
            if (c.str.slice(-1) === "}") {
                Z("Two-way binding does not work with expressions (`%s` on <%s>)", b.resolver.uniqueString, a.name, {ractive: this.root});
                return false
            }
            if (c.isSpecial) {
                Z("Two-way binding does not work with %s", b.resolver.ref, {ractive: this.root});
                return false
            }
        } else {
            var f = b.template.r ? "'" + b.template.r + "' reference" : "expression";
            Y("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity", f, {ractive: this.root});
            b.resolver.forceResolution();
            c = b.keypath
        }
        this.attribute.isTwoway = true;
        this.keypath = c;
        d = this.root.viewmodel.get(c);
        if (d === undefined && this.getInitialValue) {
            d = this.getInitialValue();
            if (d !== undefined) {
                this.root.viewmodel.set(c, d)
            }
        }
        if (e = Mm(a)) {
            this.resetValue = d;
            e.formBindings.push(this)
        }
    };
    Km.prototype = {
        handleChange: function () {
            var a = this;
            qb.start(this.root);
            this.attribute.locked = true;
            this.root.viewmodel.set(this.keypath, this.getValue());
            qb.scheduleTask(function () {
                return a.attribute.locked = false
            });
            qb.end()
        }, rebound: function () {
            var a, b, c;
            b = this.keypath;
            c = this.attribute.interpolator.keypath;
            if (b === c) {
                return
            }
            Oa(this.root._twowayBindings[b.str], this);
            this.keypath = c;
            a = this.root._twowayBindings[c.str] || (this.root._twowayBindings[c.str] = []);
            a.push(this)
        }, unbind: function () {
        }
    };
    Km.extend = function (a) {
        var b = this, c;
        c = function (a) {
            Km.call(this, a);
            if (this.init) {
                this.init()
            }
        };
        c.prototype = C(b.prototype);
        F(c.prototype, a);
        c.extend = Km.extend;
        return c
    };
    var Lm = Km;

    function Mm(a) {
        while (a = a.parent) {
            if (a.name === "form") {
                return a
            }
        }
    }

    var Nm = Om;

    function Om() {
        this._ractive.binding.handleChange()
    }

    var Pm;
    Pm = Lm.extend({
        getInitialValue: function () {
            return ""
        }, getValue: function () {
            return this.element.node.value
        }, render: function () {
            var a = this.element.node, b, c = false;
            this.rendered = true;
            b = this.root.lazy;
            if (this.element.lazy === true) {
                b = true
            } else if (this.element.lazy === false) {
                b = false
            } else if (N(this.element.lazy)) {
                b = false;
                c = +this.element.lazy
            } else if (N(b || "")) {
                c = +b;
                b = false;
                this.element.lazy = c
            }
            this.handler = c ? Sm : Nm;
            a.addEventListener("change", Nm, false);
            if (!b) {
                a.addEventListener("input", this.handler, false);
                if (a.attachEvent) {
                    a.addEventListener("keyup", this.handler, false)
                }
            }
            a.addEventListener("blur", Rm, false)
        }, unrender: function () {
            var a = this.element.node;
            this.rendered = false;
            a.removeEventListener("change", Nm, false);
            a.removeEventListener("input", this.handler, false);
            a.removeEventListener("keyup", this.handler, false);
            a.removeEventListener("blur", Rm, false)
        }
    });
    var Qm = Pm;

    function Rm() {
        var a;
        Nm.call(this);
        a = this._ractive.root.viewmodel.get(this._ractive.binding.keypath);
        this.value = a == undefined ? "" : a
    }

    function Sm() {
        var a = this._ractive.binding, b = this;
        if (!!a._timeout)clearTimeout(a._timeout);
        a._timeout = setTimeout(function () {
            if (a.rendered)Nm.call(b);
            a._timeout = undefined
        }, a.element.lazy)
    }

    var Tm = Qm.extend({
        getInitialValue: function () {
            return this.element.fragment ? this.element.fragment.toString() : ""
        }, getValue: function () {
            return this.element.node.innerHTML
        }
    });
    var Um = Tm;
    var Vm = Xm;
    var Wm = {};

    function Xm(a, b, c) {
        var d = a + b + c;
        return Wm[d] || (Wm[d] = [])
    }

    var Ym = Lm.extend({
        name: "checked", init: function () {
            this.siblings = Vm(this.root._guid, "radio", this.element.getAttribute("name"));
            this.siblings.push(this)
        }, render: function () {
            var a = this.element.node;
            a.addEventListener("change", Nm, false);
            if (a.attachEvent) {
                a.addEventListener("click", Nm, false)
            }
        }, unrender: function () {
            var a = this.element.node;
            a.removeEventListener("change", Nm, false);
            a.removeEventListener("click", Nm, false)
        }, handleChange: function () {
            qb.start(this.root);
            this.siblings.forEach(function (a) {
                a.root.viewmodel.set(a.keypath, a.getValue())
            });
            qb.end()
        }, getValue: function () {
            return this.element.node.checked
        }, unbind: function () {
            Oa(this.siblings, this)
        }
    });
    var Zm = Ym;
    var $m = Lm.extend({
        name: "name", init: function () {
            this.siblings = Vm(this.root._guid, "radioname", this.keypath.str);
            this.siblings.push(this);
            this.radioName = true
        }, getInitialValue: function () {
            if (this.element.getAttribute("checked")) {
                return this.element.getAttribute("value")
            }
        }, render: function () {
            var a = this.element.node;
            a.name = "{{" + this.keypath.str + "}}";
            a.checked = this.root.viewmodel.get(this.keypath) == this.element.getAttribute("value");
            a.addEventListener("change", Nm, false);
            if (a.attachEvent) {
                a.addEventListener("click", Nm, false)
            }
        }, unrender: function () {
            var a = this.element.node;
            a.removeEventListener("change", Nm, false);
            a.removeEventListener("click", Nm, false)
        }, getValue: function () {
            var a = this.element.node;
            return a._ractive ? a._ractive.value : a.value
        }, handleChange: function () {
            if (this.element.node.checked) {
                Lm.prototype.handleChange.call(this)
            }
        }, rebound: function (a, b) {
            var c;
            Lm.prototype.rebound.call(this, a, b);
            if (c = this.element.node) {
                c.name = "{{" + this.keypath.str + "}}"
            }
        }, unbind: function () {
            Oa(this.siblings, this)
        }
    });
    var _m = $m;
    var an = Lm.extend({
        name: "name", getInitialValue: function () {
            this.noInitialValue = true;
            return []
        }, init: function () {
            var a, b;
            this.checkboxName = true;
            this.siblings = Vm(this.root._guid, "checkboxes", this.keypath.str);
            this.siblings.push(this);
            if (this.noInitialValue) {
                this.siblings.noInitialValue = true
            }
            if (this.siblings.noInitialValue && this.element.getAttribute("checked")) {
                a = this.root.viewmodel.get(this.keypath);
                b = this.element.getAttribute("value");
                a.push(b)
            }
        }, unbind: function () {
            Oa(this.siblings, this)
        }, render: function () {
            var a = this.element.node, b, c;
            b = this.root.viewmodel.get(this.keypath);
            c = this.element.getAttribute("value");
            if (K(b)) {
                this.isChecked = Ka(b, c)
            } else {
                this.isChecked = b == c
            }
            a.name = "{{" + this.keypath.str + "}}";
            a.checked = this.isChecked;
            a.addEventListener("change", Nm, false);
            if (a.attachEvent) {
                a.addEventListener("click", Nm, false)
            }
        }, unrender: function () {
            var a = this.element.node;
            a.removeEventListener("change", Nm, false);
            a.removeEventListener("click", Nm, false)
        }, changed: function () {
            var a = !!this.isChecked;
            this.isChecked = this.element.node.checked;
            return this.isChecked === a
        }, handleChange: function () {
            this.isChecked = this.element.node.checked;
            Lm.prototype.handleChange.call(this)
        }, getValue: function () {
            return this.siblings.filter(bn).map(cn)
        }
    });

    function bn(a) {
        return a.isChecked
    }

    function cn(a) {
        return a.element.getAttribute("value")
    }

    var dn = an;
    var en = Lm.extend({
        name: "checked", render: function () {
            var a = this.element.node;
            a.addEventListener("change", Nm, false);
            if (a.attachEvent) {
                a.addEventListener("click", Nm, false)
            }
        }, unrender: function () {
            var a = this.element.node;
            a.removeEventListener("change", Nm, false);
            a.removeEventListener("click", Nm, false)
        }, getValue: function () {
            return this.element.node.checked
        }
    });
    var fn = en;
    var gn = Lm.extend({
        getInitialValue: function () {
            var a = this.element.options, b, c, d, e;
            if (this.element.getAttribute("value") !== undefined) {
                return
            }
            c = b = a.length;
            if (!b) {
                return
            }
            while (c--) {
                if (a[c].getAttribute("selected")) {
                    d = a[c].getAttribute("value");
                    e = true;
                    break
                }
            }
            if (!e) {
                while (++c < b) {
                    if (!a[c].getAttribute("disabled")) {
                        d = a[c].getAttribute("value");
                        break
                    }
                }
            }
            if (d !== undefined) {
                this.element.attributes.value.value = d
            }
            return d
        }, render: function () {
            this.element.node.addEventListener("change", Nm, false)
        }, unrender: function () {
            this.element.node.removeEventListener("change", Nm, false)
        }, setValue: function (a) {
            this.root.viewmodel.set(this.keypath, a)
        }, getValue: function () {
            var a, b, c, d, e;
            a = this.element.node.options;
            c = a.length;
            for (b = 0; b < c; b += 1) {
                d = a[b];
                if (a[b].selected) {
                    e = d._ractive ? d._ractive.value : d.value;
                    return e
                }
            }
        }, forceUpdate: function () {
            var a = this;
            var b = this.getValue();
            if (b !== undefined) {
                this.attribute.locked = true;
                qb.scheduleTask(function () {
                    return a.attribute.locked = false
                });
                this.root.viewmodel.set(this.keypath, b)
            }
        }
    });
    var hn = gn;
    var jn = hn.extend({
        getInitialValue: function () {
            return this.element.options.filter(function (a) {
                return a.getAttribute("selected")
            }).map(function (a) {
                return a.getAttribute("value")
            })
        }, render: function () {
            var a;
            this.element.node.addEventListener("change", Nm, false);
            a = this.root.viewmodel.get(this.keypath);
            if (a === undefined) {
                this.handleChange()
            }
        }, unrender: function () {
            this.element.node.removeEventListener("change", Nm, false)
        }, setValue: function () {
            throw new Error("TODO not implemented yet")
        }, getValue: function () {
            var a, b, c, d, e, f;
            a = [];
            b = this.element.node.options;
            d = b.length;
            for (c = 0; c < d; c += 1) {
                e = b[c];
                if (e.selected) {
                    f = e._ractive ? e._ractive.value : e.value;
                    a.push(f)
                }
            }
            return a
        }, handleChange: function () {
            var a, b, c;
            a = this.attribute;
            b = a.value;
            c = this.getValue();
            if (b === undefined || !La(c, b)) {
                hn.prototype.handleChange.call(this)
            }
            return this
        }, forceUpdate: function () {
            var a = this;
            var b = this.getValue();
            if (b !== undefined) {
                this.attribute.locked = true;
                qb.scheduleTask(function () {
                    return a.attribute.locked = false
                });
                this.root.viewmodel.set(this.keypath, b)
            }
        }, updateModel: function () {
            if (this.attribute.value === undefined || !this.attribute.value.length) {
                this.root.viewmodel.set(this.keypath, this.initialValue)
            }
        }
    });
    var kn = jn;
    var ln = Lm.extend({
        render: function () {
            this.element.node.addEventListener("change", Nm, false)
        }, unrender: function () {
            this.element.node.removeEventListener("change", Nm, false)
        }, getValue: function () {
            return this.element.node.files
        }
    });
    var mn = ln;
    var nn = Qm.extend({
        getInitialValue: function () {
            return undefined
        }, getValue: function () {
            var a = parseFloat(this.element.node.value);
            return isNaN(a) ? undefined : a
        }
    });
    var on = pn;

    function pn(a) {
        var b = a.attributes, c, d, e, f, g;
        if (a.binding) {
            a.binding.teardown();
            a.binding = null
        }
        if ((a.getAttribute("contenteditable") || !!b.contenteditable && qn(b.contenteditable)) && qn(b.value)) {
            d = Um
        } else if (a.name === "input") {
            c = a.getAttribute("type");
            if (c === "radio" || c === "checkbox") {
                e = qn(b.name);
                f = qn(b.checked);
                if (e && f) {
                    Y("A radio input can have two-way binding on its name attribute, or its checked attribute - not both", {ractive: a.root})
                }
                if (e) {
                    d = c === "radio" ? _m : dn
                } else if (f) {
                    d = c === "radio" ? Zm : fn
                }
            } else if (c === "file" && qn(b.value)) {
                d = mn
            } else if (qn(b.value)) {
                d = c === "number" || c === "range" ? nn : Qm
            }
        } else if (a.name === "select" && qn(b.value)) {
            d = a.getAttribute("multiple") ? kn : hn
        } else if (a.name === "textarea" && qn(b.value)) {
            d = Qm
        }
        if (d && (g = new d(a)) && g.keypath) {
            return g
        }
    }

    function qn(a) {
        return a && a.isBindable
    }

    var rn = sn;

    function sn() {
        var a = this.getAction();
        if (a && !this.hasListener) {
            this.listen()
        } else if (!a && this.hasListener) {
            this.unrender()
        }
    }

    var tn = un;

    function un(a) {
        ec(this.root, this.getAction(), {event: a})
    }

    var vn = wn;

    function wn() {
        return this.action.toString().trim()
    }

    var xn = zn;
    var yn = /^event(?:\.(.+))?/;

    function zn(a, b, c) {
        var d = this;
        var e, f, g;
        this.element = a;
        this.root = a.root;
        this.parentFragment = a.parentFragment;
        this.name = b;
        if (b.indexOf("*") !== -1) {
            U('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid', a.name, b);
            this.invalid = true
        }
        if (c.m) {
            f = c.a.r;
            this.method = c.m;
            this.keypaths = [];
            this.fn = yj(c.a.s, f.length);
            this.parentFragment = a.parentFragment;
            g = this.root;
            this.refResolvers = [];
            f.forEach(function (a, b) {
                var c = undefined;
                if (c = yn.exec(a)) {
                    d.keypaths[b] = {eventObject: true, refinements: c[1] ? c[1].split(".") : []}
                } else {
                    d.refResolvers.push(wj(d, a, function (a) {
                        return d.resolve(b, a)
                    }))
                }
            });
            this.fire = An
        } else {
            e = c.n || c;
            if (typeof e !== "string") {
                e = new Zs({template: e, root: this.root, owner: this})
            }
            this.action = e;
            if (c.d) {
                this.dynamicParams = new Zs({template: c.d, root: this.root, owner: this.element});
                this.fire = Cn
            } else if (c.a) {
                this.params = c.a;
                this.fire = Bn
            }
        }
    }

    function An(a) {
        var b, c, d;
        b = this.root;
        if (typeof b[this.method] !== "function") {
            throw new Error('Attempted to call a non-existent method ("' + this.method + '")')
        }
        c = this.keypaths.map(function (c) {
            var d, e, f;
            if (c === undefined) {
                return undefined
            }
            if (c.eventObject) {
                d = a;
                if (e = c.refinements.length) {
                    for (f = 0; f < e; f += 1) {
                        d = d[c.refinements[f]]
                    }
                }
            } else {
                d = b.viewmodel.get(c)
            }
            return d
        });
        dc.enqueue(b, a);
        d = this.fn.apply(null, c);
        b[this.method].apply(b, d);
        dc.dequeue(b)
    }

    function Bn(a) {
        ec(this.root, this.getAction(), {event: a, args: this.params})
    }

    function Cn(a) {
        var b = this.dynamicParams.getArgsList();
        if (typeof b === "string") {
            b = b.substr(1, b.length - 2)
        }
        ec(this.root, this.getAction(), {event: a, args: b})
    }

    var Dn = En;

    function En(a) {
        var b, c, d, e = {};
        b = this._ractive;
        c = b.events[a.type];
        if (d = uj(c.element.parentFragment)) {
            e = uj.resolve(d)
        }
        c.fire({node: this, original: a, index: e, keypath: b.keypath.str, context: b.root.viewmodel.get(b.keypath)})
    }

    var Fn = In;
    var Gn = {}, Hn = {touchstart: true, touchmove: true, touchend: true, touchcancel: true, touchleave: true};

    function In() {
        var a, b = this.name;
        if (this.invalid) {
            return
        }
        if (a = ba("events", this.root, b)) {
            this.custom = a(this.node, Jn(b))
        } else {
            if (!("on" + b in this.node) && !(window && "on" + b in window) && !f) {
                if (!Hn[b]) {
                    Z(aa(b, "event"), {node: this.node})
                }
                return
            }
            this.node.addEventListener(b, Dn, false)
        }
        this.hasListener = true
    }

    function Jn(a) {
        if (!Gn[a]) {
            Gn[a] = function (b) {
                var c = b.node._ractive;
                b.index = c.index;
                b.keypath = c.keypath.str;
                b.context = c.root.viewmodel.get(c.keypath);
                c.events[a].fire(b)
            }
        }
        return Gn[a]
    }

    var Kn = Ln;

    function Ln(a, b) {
        var c;
        if (this.method) {
            c = this.element.parentFragment;
            this.refResolvers.forEach(d);
            return
        }
        if (typeof this.action !== "string") {
            d(this.action)
        }
        if (this.dynamicParams) {
            d(this.dynamicParams)
        }
        function d(c) {
            c && c.rebind(a, b)
        }
    }

    var Mn = Nn;

    function Nn() {
        this.node = this.element.node;
        this.node._ractive.events[this.name] = this;
        if (this.method || this.getAction()) {
            this.listen()
        }
    }

    var On = Pn;

    function Pn(a, b) {
        this.keypaths[a] = b
    }

    var Qn = Rn;

    function Rn() {
        if (this.method) {
            this.refResolvers.forEach(eb);
            return
        }
        if (typeof this.action !== "string") {
            this.action.unbind()
        }
        if (this.dynamicParams) {
            this.dynamicParams.unbind()
        }
    }

    var Sn = Tn;

    function Tn() {
        if (this.custom) {
            this.custom.teardown()
        } else {
            this.node.removeEventListener(this.name, Dn, false)
        }
        this.hasListener = false
    }

    var Un = function (a, b, c) {
        this.init(a, b, c)
    };
    Un.prototype = {
        bubble: rn,
        fire: tn,
        getAction: vn,
        init: xn,
        listen: Fn,
        rebind: Kn,
        render: Mn,
        resolve: On,
        unbind: Qn,
        unrender: Sn
    };
    var Vn = Un;
    var Wn = function (a, b) {
        var c, d, e, f, g = [];
        for (d in b) {
            if (b.hasOwnProperty(d)) {
                e = d.split("-");
                c = e.length;
                while (c--) {
                    f = new Vn(a, e[c], b[d]);
                    g.push(f)
                }
            }
        }
        return g
    };
    var Xn = function (a, b) {
        var c = this, d, e, f;
        this.element = a;
        this.root = d = a.root;
        e = b.n || b;
        if (typeof e !== "string") {
            f = new Zs({template: e, root: d, owner: a});
            e = f.toString();
            f.unbind();
            if (e === "") {
                return
            }
        }
        if (b.a) {
            this.params = b.a
        } else if (b.d) {
            this.fragment = new Zs({template: b.d, root: d, owner: a});
            this.params = this.fragment.getArgsList();
            this.fragment.bubble = function () {
                this.dirtyArgs = this.dirtyValue = true;
                c.params = this.getArgsList();
                if (c.ready) {
                    c.update()
                }
            }
        }
        this.fn = ba("decorators", d, e);
        if (!this.fn) {
            U(aa(e, "decorator"))
        }
    };
    Xn.prototype = {
        init: function () {
            var a, b, c;
            a = this.element.node;
            if (this.params) {
                c = [a].concat(this.params);
                b = this.fn.apply(this.root, c)
            } else {
                b = this.fn.call(this.root, a)
            }
            if (!b || !b.teardown) {
                throw new Error("Decorator definition must return an object with a teardown method")
            }
            this.actual = b;
            this.ready = true
        }, update: function () {
            if (this.actual.update) {
                this.actual.update.apply(this.root, this.params)
            } else {
                this.actual.teardown(true);
                this.init()
            }
        }, rebind: function (a, b) {
            if (this.fragment) {
                this.fragment.rebind(a, b)
            }
        }, teardown: function (a) {
            this.torndown = true;
            if (this.ready) {
                this.actual.teardown()
            }
            if (!a && this.fragment) {
                this.fragment.unbind()
            }
        }
    };
    var Yn = Xn;

    function Zn() {
        var a = this;
        if (!this.dirty) {
            this.dirty = true;
            qb.scheduleTask(function () {
                $n(a);
                a.dirty = false
            })
        }
        this.parentFragment.bubble()
    }

    function $n(a) {
        var b, c, d, e, f;
        b = a.node;
        if (!b) {
            return
        }
        e = Pa(b.options);
        c = a.getAttribute("value");
        d = a.getAttribute("multiple");
        if (c !== undefined) {
            e.forEach(function (a) {
                var b, e;
                b = a._ractive ? a._ractive.value : a.value;
                e = d ? _n(c, b) : c == b;
                if (e) {
                    f = true
                }
                a.selected = e
            });
            if (!f) {
                if (e[0]) {
                    e[0].selected = true
                }
                if (a.binding) {
                    a.binding.forceUpdate()
                }
            }
        } else if (a.binding) {
            a.binding.forceUpdate()
        }
    }

    function _n(a, b) {
        var c = a.length;
        while (c--) {
            if (a[c] == b) {
                return true
            }
        }
    }

    function ao(a, b) {
        a.select = co(a.parent);
        if (!a.select) {
            return
        }
        a.select.options.push(a);
        if (!b.a) {
            b.a = {}
        }
        if (b.a.value === undefined && !b.a.hasOwnProperty("disabled")) {
            b.a.value = b.f
        }
        if ("selected" in b.a && a.select.getAttribute("value") !== undefined) {
            delete b.a.selected
        }
    }

    function bo(a) {
        if (a.select) {
            Oa(a.select.options, a)
        }
    }

    function co(a) {
        if (!a) {
            return
        }
        do {
            if (a.name === "select") {
                return a
            }
        } while (a = a.parent)
    }

    var eo = fo;

    function fo(a) {
        var b, c, d, e, f, g, h;
        this.type = Od;
        b = this.parentFragment = a.parentFragment;
        c = this.template = a.template;
        this.parent = a.pElement || b.pElement;
        this.root = d = b.root;
        this.index = a.index;
        this.key = a.key;
        this.name = Nl(c.e);
        if (this.name === "option") {
            ao(this, c)
        }
        if (this.name === "select") {
            this.options = [];
            this.bubble = Zn
        }
        if (this.name === "form") {
            this.formBindings = []
        }
        h = Gl(this, c);
        this.attributes = Dm(this, c.a);
        this.conditionalAttributes = Jm(this, c.m);
        if (c.f) {
            this.fragment = new Zs({template: c.f, root: d, owner: this, pElement: this, cssIds: null})
        }
        g = d.twoway;
        if (h.twoway === false)g = false; else if (h.twoway === true)g = true;
        this.twoway = g;
        this.lazy = h.lazy;
        if (g && (e = on(this, c.a))) {
            this.binding = e;
            f = this.root._twowayBindings[e.keypath.str] || (this.root._twowayBindings[e.keypath.str] = []);
            f.push(e)
        }
        if (c.v) {
            this.eventHandlers = Wn(this, c.v)
        }
        if (c.o) {
            this.decorator = new Yn(this, c.o)
        }
        this.intro = c.t0 || c.t1;
        this.outro = c.t0 || c.t2
    }

    var go = ho;

    function ho(a, b) {
        var c, d, e, f;
        if (this.attributes) {
            this.attributes.forEach(g)
        }
        if (this.conditionalAttributes) {
            this.conditionalAttributes.forEach(g)
        }
        if (this.eventHandlers) {
            this.eventHandlers.forEach(g)
        }
        if (this.decorator) {
            g(this.decorator)
        }
        if (this.fragment) {
            g(this.fragment)
        }
        if (e = this.liveQueries) {
            f = this.root;
            c = e.length;
            while (c--) {
                e[c]._makeDirty()
            }
        }
        if (this.node && (d = this.node._ractive)) {
            qa(d, "keypath", a, b)
        }
        function g(c) {
            c.rebind(a, b)
        }
    }

    function io(a) {
        var b;
        if (a.attributes.width || a.attributes.height) {
            a.node.addEventListener("load", b = function () {
                var c = a.getAttribute("width"), d = a.getAttribute("height");
                if (c !== undefined) {
                    a.node.setAttribute("width", c)
                }
                if (d !== undefined) {
                    a.node.setAttribute("height", d)
                }
                a.node.removeEventListener("load", b, false)
            }, false)
        }
    }

    function jo(a) {
        a.node.addEventListener("reset", lo, false)
    }

    function ko(a) {
        a.node.removeEventListener("reset", lo, false)
    }

    function lo() {
        var a = this._ractive.proxy;
        qb.start();
        a.formBindings.forEach(mo);
        qb.end()
    }

    function mo(a) {
        a.root.viewmodel.set(a.keypath, a.resetValue)
    }

    var no = oo;

    function oo(a, b, c) {
        var d, e, f;
        this.element = a;
        this.root = d = a.root;
        this.isIntro = c;
        e = b.n || b;
        if (typeof e !== "string") {
            f = new Zs({template: e, root: d, owner: a});
            e = f.toString();
            f.unbind();
            if (e === "") {
                return
            }
        }
        this.name = e;
        if (b.a) {
            this.params = b.a
        } else if (b.d) {
            f = new Zs({template: b.d, root: d, owner: a});
            this.params = f.getArgsList();
            f.unbind()
        }
        this._fn = ba("transitions", d, e);
        if (!this._fn) {
            Z(aa(e, "transition"), {ractive: this.root})
        }
    }

    var po = function (a) {
        return a.replace(/-([a-zA-Z])/g, function (a, b) {
            return b.toUpperCase()
        })
    };
    var qo, ro, so;
    if (!e) {
        qo = null
    } else {
        ro = {};
        so = l("div").style;
        qo = function (a) {
            var b, c, d;
            a = po(a);
            if (!ro[a]) {
                if (so[a] !== undefined) {
                    ro[a] = a
                } else {
                    d = a.charAt(0).toUpperCase() + a.substring(1);
                    b = k.length;
                    while (b--) {
                        c = k[b];
                        if (so[c + d] !== undefined) {
                            ro[a] = c + d;
                            break
                        }
                    }
                }
            }
            return ro[a]
        }
    }
    var to = qo;
    var uo, vo;
    if (!e) {
        uo = null
    } else {
        vo = window.getComputedStyle || B.getComputedStyle;
        uo = function (a) {
            var b, c, d, e, f;
            b = vo(this.node);
            if (typeof a === "string") {
                f = b[to(a)];
                if (f === "0px") {
                    f = 0
                }
                return f
            }
            if (!K(a)) {
                throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties")
            }
            c = {};
            d = a.length;
            while (d--) {
                e = a[d];
                f = b[to(e)];
                if (f === "0px") {
                    f = 0
                }
                c[e] = f
            }
            return c
        }
    }
    var wo = uo;
    var xo = function (a, b) {
        var c;
        if (typeof a === "string") {
            this.node.style[to(a)] = b
        } else {
            for (c in a) {
                if (a.hasOwnProperty(c)) {
                    this.node.style[to(c)] = a[c]
                }
            }
        }
        return this
    };
    var yo = function (a) {
        var b;
        this.duration = a.duration;
        this.step = a.step;
        this.complete = a.complete;
        if (typeof a.easing === "string") {
            b = a.root.easing[a.easing];
            if (!b) {
                Z(aa(a.easing, "easing"));
                b = Ao
            }
        } else if (typeof a.easing === "function") {
            b = a.easing
        } else {
            b = Ao
        }
        this.easing = b;
        this.start = Fa();
        this.end = this.start + this.duration;
        this.running = true;
        wb.add(this)
    };
    yo.prototype = {
        tick: function (a) {
            var b, c;
            if (!this.running) {
                return false
            }
            if (a > this.end) {
                if (this.step) {
                    this.step(1)
                }
                if (this.complete) {
                    this.complete(1)
                }
                return false
            }
            b = a - this.start;
            c = this.easing(b / this.duration);
            if (this.step) {
                this.step(c)
            }
            return true
        }, stop: function () {
            if (this.abort) {
                this.abort()
            }
            this.running = false
        }
    };
    var zo = yo;

    function Ao(a) {
        return a
    }

    var Bo = new RegExp("^-(?:" + k.join("|") + ")-");
    var Co = function (a) {
        return a.replace(Bo, "")
    };
    var Do = new RegExp("^(?:" + k.join("|") + ")([A-Z])");
    var Eo = function (a) {
        var b;
        if (!a) {
            return ""
        }
        if (Do.test(a)) {
            a = "-" + a
        }
        b = a.replace(/[A-Z]/g, function (a) {
            return "-" + a.toLowerCase()
        });
        return b
    };
    var Fo, Go, Ho, Io, Jo, Ko, Lo, Mo, No = {}, Oo = {};
    if (!e) {
        Fo = null
    } else {
        Go = l("div").style;
        (function () {
            if (Go.transition !== undefined) {
                Ho = "transition";
                Io = "transitionend";
                Jo = true
            } else if (Go.webkitTransition !== undefined) {
                Ho = "webkitTransition";
                Io = "webkitTransitionEnd";
                Jo = true
            } else {
                Jo = false
            }
        })();
        if (Ho) {
            Ko = Ho + "Duration";
            Lo = Ho + "Property";
            Mo = Ho + "TimingFunction"
        }
        Fo = function (a, b, c, d, e) {
            setTimeout(function () {
                var f, g, h, i, j;
                i = function () {
                    if (g && h) {
                        a.root.fire(a.name + ":end", a.node, a.isIntro);
                        e()
                    }
                };
                f = (a.node.namespaceURI || "") + a.node.tagName;
                a.node.style[Lo] = d.map(to).map(Eo).join(",");
                a.node.style[Mo] = Eo(c.easing || "linear");
                a.node.style[Ko] = c.duration / 1e3 + "s";
                j = function (b) {
                    var c;
                    c = d.indexOf(po(Co(b.propertyName)));
                    if (c !== -1) {
                        d.splice(c, 1)
                    }
                    if (d.length) {
                        return
                    }
                    a.node.removeEventListener(Io, j, false);
                    h = true;
                    i()
                };
                a.node.addEventListener(Io, j, false);
                setTimeout(function () {
                    var e = d.length, k, l, m, n = [], o, p;
                    while (e--) {
                        o = d[e];
                        k = f + o;
                        if (Jo && !Oo[k]) {
                            a.node.style[to(o)] = b[o];
                            if (!No[k]) {
                                l = a.getStyle(o);
                                No[k] = a.getStyle(o) != b[o];
                                Oo[k] = !No[k];
                                if (Oo[k]) {
                                    a.node.style[to(o)] = l
                                }
                            }
                        }
                        if (!Jo || Oo[k]) {
                            if (l === undefined) {
                                l = a.getStyle(o)
                            }
                            m = d.indexOf(o);
                            if (m === -1) {
                                Y("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!", {node: a.node})
                            } else {
                                d.splice(m, 1)
                            }
                            p = /[^\d]*$/.exec(b[o])[0];
                            n.push({name: to(o), interpolator: ea(parseFloat(l), parseFloat(b[o])), suffix: p})
                        }
                    }
                    if (n.length) {
                        new zo({
                            root: a.root, duration: c.duration, easing: po(c.easing || ""), step: function (b) {
                                var c, d;
                                d = n.length;
                                while (d--) {
                                    c = n[d];
                                    a.node.style[c.name] = c.interpolator(b) + c.suffix
                                }
                            }, complete: function () {
                                g = true;
                                i()
                            }
                        })
                    } else {
                        g = true
                    }
                    if (!d.length) {
                        a.node.removeEventListener(Io, j, false);
                        h = true;
                        i()
                    }
                }, 0)
            }, c.delay || 0)
        }
    }
    var Po = Fo;
    var Qo, Ro, So, To, Uo;
    if (typeof document !== "undefined") {
        Qo = "hidden";
        Uo = {};
        if (Qo in document) {
            So = ""
        } else {
            To = k.length;
            while (To--) {
                Ro = k[To];
                Qo = Ro + "Hidden";
                if (Qo in document) {
                    So = Ro
                }
            }
        }
        if (So !== undefined) {
            document.addEventListener(So + "visibilitychange", Vo);
            Vo()
        } else {
            if ("onfocusout" in document) {
                document.addEventListener("focusout", Wo);
                document.addEventListener("focusin", Xo)
            } else {
                window.addEventListener("pagehide", Wo);
                window.addEventListener("blur", Wo);
                window.addEventListener("pageshow", Xo);
                window.addEventListener("focus", Xo)
            }
            Uo.hidden = false
        }
    }
    function Vo() {
        Uo.hidden = document[Qo]
    }

    function Wo() {
        Uo.hidden = true
    }

    function Xo() {
        Uo.hidden = false
    }

    var Yo = Uo;
    var Zo, $o, _o;
    if (!e) {
        Zo = null
    } else {
        $o = window.getComputedStyle || B.getComputedStyle;
        Zo = function (a, b, c) {
            var d = this;
            var e;
            if (arguments.length === 4) {
                throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback")
            }
            if (Yo.hidden) {
                this.setStyle(a, b);
                return _o || (_o = Ua.resolve())
            }
            if (typeof a === "string") {
                e = {};
                e[a] = b
            } else {
                e = a;
                c = b
            }
            if (!c) {
                Z('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340', this.name);
                c = this
            }
            var f = new Ua(function (a) {
                var b, f, g, h, i, j, k;
                if (!c.duration) {
                    d.setStyle(e);
                    a();
                    return
                }
                b = Object.keys(e);
                f = [];
                g = $o(d.node);
                i = {};
                j = b.length;
                while (j--) {
                    k = b[j];
                    h = g[to(k)];
                    if (h === "0px") {
                        h = 0
                    }
                    if (h != e[k]) {
                        f.push(k);
                        d.node.style[to(k)] = h
                    }
                }
                if (!f.length) {
                    a();
                    return
                }
                Po(d, e, c, f, a)
            });
            return f
        }
    }
    var ap = Zo;
    var bp = function (a, b) {
        if (typeof a === "number") {
            a = {duration: a}
        } else if (typeof a === "string") {
            if (a === "slow") {
                a = {duration: 600}
            } else if (a === "fast") {
                a = {duration: 200}
            } else {
                a = {duration: 400}
            }
        } else if (!a) {
            a = {}
        }
        return G({}, a, b)
    };
    var cp = dp;

    function dp() {
        var a = this;
        var b, c, d;
        b = this.node = this.element.node;
        c = b.getAttribute("style");
        this.complete = function (e) {
            if (d) {
                return
            }
            if (!e && a.isIntro) {
                ep(b, c)
            }
            b._ractive.transition = null;
            a._manager.remove(a);
            d = true
        };
        if (!this._fn) {
            this.complete();
            return
        }
        this._fn.apply(this.root, [this].concat(this.params))
    }

    function ep(a, b) {
        if (b) {
            a.setAttribute("style", b)
        } else {
            a.getAttribute("style");
            a.removeAttribute("style")
        }
    }

    var fp = function (a, b, c) {
        this.init(a, b, c)
    };
    fp.prototype = {init: no, start: cp, getStyle: wo, setStyle: xo, animateStyle: ap, processParams: bp};
    var gp = fp;
    var hp = kp;
    var ip, jp;
    ip = function () {
        var a = this.node, b = this.fragment.toString(false);
        if (window && window.appearsToBeIELessEqual8) {
            a.type = "text/css"
        }
        if (a.styleSheet) {
            a.styleSheet.cssText = b
        } else {
            while (a.hasChildNodes()) {
                a.removeChild(a.firstChild)
            }
            a.appendChild(document.createTextNode(b))
        }
    };
    jp = function () {
        if (!this.node.type || this.node.type === "text/javascript") {
            Y("Script tag was updated. This does not cause the code to be re-evaluated!", {ractive: this.root})
        }
        this.node.text = this.fragment.toString(false)
    };
    function kp() {
        var a = this;
        var b = this.root, c, d, e;
        c = lp(this);
        d = this.node = l(this.name, c);
        if (this.parentFragment.cssIds) {
            this.node.setAttribute("data-ractive-css", this.parentFragment.cssIds.map(function (a) {
                return "{" + a + "}"
            }).join(" "))
        }
        D(this.node, "_ractive", {value: {proxy: this, keypath: Ya(this.parentFragment), events: C(null), root: b}});
        this.attributes.forEach(function (a) {
            return a.render(d)
        });
        this.conditionalAttributes.forEach(function (a) {
            return a.render(d)
        });
        if (this.fragment) {
            if (this.name === "script") {
                this.bubble = jp;
                this.node.text = this.fragment.toString(false);
                this.fragment.unrender = x
            } else if (this.name === "style") {
                this.bubble = ip;
                this.bubble();
                this.fragment.unrender = x
            } else if (this.binding && this.getAttribute("contenteditable")) {
                this.fragment.unrender = x
            } else {
                this.node.appendChild(this.fragment.render());
            }
        }
        if (this.binding) {
            this.binding.render();
            this.node._ractive.binding = this.binding
        }
        if (this.eventHandlers) {
            this.eventHandlers.forEach(function (a) {
                return a.render()
            })
        }
        if (this.name === "option") {
            mp(this)
        }
        if (this.name === "img") {
            io(this)
        } else if (this.name === "form") {
            jo(this)
        } else if (this.name === "input" || this.name === "textarea") {
            this.node.defaultValue = this.node.value
        } else if (this.name === "option") {
            this.node.defaultSelected = this.node.selected
        }
        if (this.decorator && this.decorator.fn) {
            qb.scheduleTask(function () {
                if (!a.decorator.torndown) {
                    a.decorator.init()
                }
            }, true)
        }
        if (b.transitionsEnabled && this.intro) {
            e = new gp(this, this.intro, true);
            qb.registerTransition(e);
            qb.scheduleTask(function () {
                return e.start()
            }, true);
            this.transition = e
        }
        if (this.node.autofocus) {
            qb.scheduleTask(function () {
                return a.node.focus()
            }, true)
        }
        np(this);
        return this.node
    }

    function lp(a) {
        var b, c, d;
        if (c = a.getAttribute("xmlns")) {
            b = c
        } else if (a.name === "svg") {
            b = i.svg
        } else if (d = a.parent) {
            if (d.name === "foreignObject") {
                b = i.html
            } else {
                b = d.node.namespaceURI
            }
        } else {
            b = a.root.el.namespaceURI
        }
        return b
    }

    function mp(a) {
        var b, c, d;
        if (!a.select) {
            return
        }
        c = a.select.getAttribute("value");
        if (c === undefined) {
            return
        }
        b = a.getAttribute("value");
        if (a.select.node.multiple && K(c)) {
            d = c.length;
            while (d--) {
                if (b == c[d]) {
                    a.node.selected = true;
                    break
                }
            }
        } else {
            a.node.selected = b == c
        }
    }

    function np(a) {
        var b, c, d, e, f;
        b = a.root;
        do {
            c = b._liveQueries;
            d = c.length;
            while (d--) {
                e = c[d];
                f = c["_" + e];
                if (f._test(a)) {
                    (a.liveQueries || (a.liveQueries = [])).push(f)
                }
            }
        } while (b = b.parent)
    }

    var op = function () {
        var a, b;
        if (this.template.y) {
            return "<!DOCTYPE" + this.template.dd + ">"
        }
        a = "<" + this.template.e;
        a += this.attributes.map(rp).join("") + this.conditionalAttributes.map(rp).join("");
        if (this.name === "option" && pp(this)) {
            a += " selected"
        }
        if (this.name === "input" && qp(this)) {
            a += " checked"
        }
        a += ">";
        if (this.name === "textarea" && this.getAttribute("value") !== undefined) {
            a += Cg(this.getAttribute("value"))
        } else if (this.getAttribute("contenteditable") !== undefined) {
            a += this.getAttribute("value") || ""
        }
        if (this.fragment) {
            b = this.name !== "script" && this.name !== "style";
            a += this.fragment.toString(b)
        }
        if (!tg.test(this.template.e)) {
            a += "</" + this.template.e + ">"
        }
        return a
    };

    function pp(a) {
        var b, c, d;
        b = a.getAttribute("value");
        if (b === undefined || !a.select) {
            return false
        }
        c = a.select.getAttribute("value");
        if (c == b) {
            return true
        }
        if (a.select.getAttribute("multiple") && K(c)) {
            d = c.length;
            while (d--) {
                if (c[d] == b) {
                    return true
                }
            }
        }
    }

    function qp(a) {
        var b, c, d, e;
        b = a.attributes;
        c = b.type;
        d = b.value;
        e = b.name;
        if (!c || c.value !== "radio" || !d || !e.interpolator) {
            return
        }
        if (d.value === e.interpolator.value) {
            return true
        }
    }

    function rp(a) {
        var b = a.toString();
        return b ? " " + b : ""
    }

    var sp = tp;

    function tp() {
        if (this.fragment) {
            this.fragment.unbind()
        }
        if (this.binding) {
            this.binding.unbind()
        }
        if (this.eventHandlers) {
            this.eventHandlers.forEach(eb)
        }
        if (this.name === "option") {
            bo(this)
        }
        this.attributes.forEach(eb);
        this.conditionalAttributes.forEach(eb)
    }

    var up = vp;

    function vp(a) {
        var b, c, d;
        if (d = this.transition) {
            d.complete()
        }
        if (this.name === "option") {
            this.detach()
        } else if (a) {
            qb.detachWhenReady(this)
        }
        if (this.fragment) {
            this.fragment.unrender(false)
        }
        if (b = this.binding) {
            this.binding.unrender();
            this.node._ractive.binding = null;
            c = this.root._twowayBindings[b.keypath.str];
            c.splice(c.indexOf(b), 1)
        }
        if (this.eventHandlers) {
            this.eventHandlers.forEach(fb)
        }
        if (this.decorator) {
            qb.registerDecorator(this.decorator)
        }
        if (this.root.transitionsEnabled && this.outro) {
            d = new gp(this, this.outro, false);
            qb.registerTransition(d);
            qb.scheduleTask(function () {
                return d.start()
            })
        }
        if (this.liveQueries) {
            wp(this)
        }
        if (this.name === "form") {
            ko(this)
        }
    }

    function wp(a) {
        var b, c, d;
        d = a.liveQueries.length;
        while (d--) {
            b = a.liveQueries[d];
            c = b.selector;
            b._remove(a.node)
        }
    }

    var xp = function (a) {
        this.init(a)
    };
    xp.prototype = {
        bubble: rl,
        detach: sl,
        find: ul,
        findAll: vl,
        findAllComponents: wl,
        findComponent: xl,
        findNextNode: yl,
        firstNode: Al,
        getAttribute: Cl,
        init: eo,
        rebind: go,
        render: hp,
        toString: op,
        unbind: sp,
        unrender: up
    };
    var yp = xp;
    var zp = /^\s*$/, Ap = /^\s*/;
    var Bp = function (a) {
        var b, c, d, e;
        b = a.split("\n");
        c = b[0];
        if (c !== undefined && zp.test(c)) {
            b.shift()
        }
        d = Na(b);
        if (d !== undefined && zp.test(d)) {
            b.pop()
        }
        e = b.reduce(Cp, null);
        if (e) {
            a = b.map(function (a) {
                return a.replace(e, "")
            }).join("\n")
        }
        return a
    };

    function Cp(a, b) {
        var c = Ap.exec(b)[0];
        if (a === null || c.length < a.length) {
            return c
        }
        return a
    }

    var Dp = Ep;

    function Ep(a, b, c) {
        var d;
        if (d = Fp(a, b, c || {})) {
            return d
        }
        d = gi.fromId(b, {noThrow: true});
        if (d) {
            d = Bp(d);
            var e = gi.parse(d, gi.getParseOptions(a));
            return a.partials[b] = e.t
        }
    }

    function Fp(a, b, c) {
        var d = undefined, e = Ip(b, c.owner);
        if (e)return e;
        var f = ca("partials", a, b);
        if (!f) {
            return
        }
        e = f.partials[b];
        if (typeof e === "function") {
            d = e.bind(f);
            d.isOwner = f.partials.hasOwnProperty(b);
            e = d.call(a, gi)
        }
        if (!e && e !== "") {
            Y(_, b, "partial", "partial", {ractive: a});
            return
        }
        if (!gi.isParsed(e)) {
            var g = gi.parse(e, gi.getParseOptions(f));
            if (g.p) {
                Y("Partials ({{>%s}}) cannot contain nested inline partials", b, {ractive: a})
            }
            var h = d ? f : Gp(f, b);
            h.partials[b] = e = g.t
        }
        if (d) {
            e._fn = d
        }
        return e.v ? e.t : e
    }

    function Gp(a, b) {
        return a.partials.hasOwnProperty(b) ? a : Hp(a.constructor, b)
    }

    function Hp(a, b) {
        if (!a) {
            return
        }
        return a.partials.hasOwnProperty(b) ? a : Hp(a._Parent, b)
    }

    function Ip(a, b) {
        if (b) {
            if (b.template && b.template.p && b.template.p[a]) {
                return b.template.p[a]
            } else if (b.parentFragment && b.parentFragment.owner) {
                return Ip(a, b.parentFragment.owner)
            }
        }
    }

    var Jp = function (a, b) {
        var c;
        if (!b) {
            return a
        }
        c = a.split("\n").map(function (a, c) {
            return c ? b + a : a
        }).join("\n");
        return c
    };
    var Kp = 'Could not find template for partial "%s"';
    var Lp = function (a) {
        var b, c;
        b = this.parentFragment = a.parentFragment;
        this.root = b.root;
        this.type = Pd;
        this.index = a.index;
        this.name = a.template.r;
        this.rendered = false;
        this.fragment = this.fragmentToRender = this.fragmentToUnrender = null;
        Wj.init(this, a);
        if (!this.keypath) {
            if (c = Dp(this.root, this.name, b)) {
                ij.call(this);
                this.isNamed = true;
                this.setTemplate(c)
            } else {
                Z(Kp, this.name)
            }
        }
    };
    Lp.prototype = {
        bubble: function () {
            this.parentFragment.bubble()
        }, detach: function () {
            return this.fragment.detach()
        }, find: function (a) {
            return this.fragment.find(a)
        }, findAll: function (a, b) {
            return this.fragment.findAll(a, b)
        }, findComponent: function (a) {
            return this.fragment.findComponent(a)
        }, findAllComponents: function (a, b) {
            return this.fragment.findAllComponents(a, b)
        }, firstNode: function () {
            return this.fragment.firstNode()
        }, findNextNode: function () {
            return this.parentFragment.findNextNode(this)
        }, getPartialName: function () {
            if (this.isNamed && this.name)return this.name; else if (this.value === undefined)return this.name; else return this.value
        }, getValue: function () {
            return this.fragment.getValue()
        }, rebind: function (a, b) {
            if (!this.isNamed) {
                Uj.call(this, a, b)
            }
            if (this.fragment) {
                this.fragment.rebind(a, b)
            }
        }, render: function () {
            this.docFrag = document.createDocumentFragment();
            this.update();
            this.rendered = true;
            return this.docFrag
        }, resolve: Wj.resolve, setValue: function (a) {
            var b;
            if (a !== undefined && a === this.value) {
                return
            }
            if (a !== undefined) {
                b = Dp(this.root, "" + a, this.parentFragment)
            }
            if (!b && this.name && (b = Dp(this.root, this.name, this.parentFragment))) {
                ij.call(this);
                this.isNamed = true
            }
            if (!b) {
                Z(Kp, this.name, {ractive: this.root})
            }
            this.value = a;
            this.setTemplate(b || []);
            this.bubble();
            if (this.rendered) {
                qb.addView(this)
            }
        }, setTemplate: function (a) {
            if (this.fragment) {
                this.fragment.unbind();
                if (this.rendered) {
                    this.fragmentToUnrender = this.fragment
                }
            }
            this.fragment = new Zs({template: a, root: this.root, owner: this, pElement: this.parentFragment.pElement});
            this.fragmentToRender = this.fragment
        }, toString: function (a) {
            var b, c, d, e;
            b = this.fragment.toString(a);
            c = this.parentFragment.items[this.index - 1];
            if (!c || c.type !== Id) {
                return b
            }
            d = c.text.split("\n").pop();
            if (e = /^\s+$/.exec(d)) {
                return Jp(b, e[0])
            }
            return b
        }, unbind: function () {
            if (!this.isNamed) {
                ij.call(this)
            }
            if (this.fragment) {
                this.fragment.unbind()
            }
        }, unrender: function (a) {
            if (this.rendered) {
                if (this.fragment) {
                    this.fragment.unrender(a)
                }
                this.rendered = false
            }
        }, update: function () {
            var a, b;
            if (this.fragmentToUnrender) {
                this.fragmentToUnrender.unrender(true);
                this.fragmentToUnrender = null
            }
            if (this.fragmentToRender) {
                this.docFrag.appendChild(this.fragmentToRender.render());
                this.fragmentToRender = null
            }
            if (this.rendered) {
                a = this.parentFragment.getNode();
                b = this.parentFragment.findNextNode(this);
                a.insertBefore(this.docFrag, b)
            }
        }
    };
    var Mp = Lp;
    var Np = Op;

    function Op(a, b) {
        var c, d = ca("components", a, b);
        if (d) {
            c = d.components[b];
            if (!c._Parent) {
                var e = c.bind(d);
                e.isOwner = d.components.hasOwnProperty(b);
                c = e();
                if (!c) {
                    Y(_, b, "component", "component", {ractive: a});
                    return
                }
                if (typeof c === "string") {
                    c = Op(a, c)
                }
                c._fn = e;
                d.components[b] = c
            }
        }
        return c
    }

    var Pp = Rp;
    var Qp = new Ia("detach");

    function Rp() {
        var a = this.instance.fragment.detach();
        Qp.fire(this.instance);
        return a
    }

    var Sp = Tp;

    function Tp(a) {
        return this.instance.fragment.find(a)
    }

    var Up = Vp;

    function Vp(a, b) {
        return this.instance.fragment.findAll(a, b)
    }

    var Wp = Xp;

    function Xp(a, b) {
        b._test(this, true);
        if (this.instance.fragment) {
            this.instance.fragment.findAllComponents(a, b)
        }
    }

    var Yp = Zp;

    function Zp(a) {
        if (!a || a === this.name) {
            return this.instance
        }
        if (this.instance.fragment) {
            return this.instance.fragment.findComponent(a)
        }
        return null
    }

    var $p = _p;

    function _p() {
        return this.parentFragment.findNextNode(this)
    }

    var aq = bq;

    function bq() {
        if (this.rendered) {
            return this.instance.fragment.firstNode()
        }
        return null
    }

    var cq = function (a, b, c, d) {
        var e = a.root;
        var f = a.keypath;
        if (!!d) {
            e.viewmodel.smartUpdate(f, b, d)
        } else {
            e.viewmodel.mark(f)
        }
    };
    var dq = [], eq = ["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], fq, gq, hq;
    eq.forEach(function (a) {
        var b = function () {
            for (var b = arguments.length, c = Array(b), d = 0; d < b; d++) {
                c[d] = arguments[d]
            }
            var e, f, g, h;
            e = Pc(this, a, c);
            f = Array.prototype[a].apply(this, arguments);
            qb.start();
            this._ractive.setting = true;
            h = this._ractive.wrappers.length;
            while (h--) {
                g = this._ractive.wrappers[h];
                qb.addRactive(g.root);
                cq(g, this, a, e)
            }
            qb.end();
            this._ractive.setting = false;
            return f
        };
        D(dq, a, {value: b})
    });
    fq = {};
    if (fq.__proto__) {
        gq = function (a) {
            a.__proto__ = dq
        };
        hq = function (a) {
            a.__proto__ = Array.prototype
        }
    } else {
        gq = function (a) {
            var b, c;
            b = eq.length;
            while (b--) {
                c = eq[b];
                D(a, c, {value: dq[c], configurable: true})
            }
        };
        hq = function (a) {
            var b;
            b = eq.length;
            while (b--) {
                delete a[eq[b]]
            }
        }
    }
    gq.unpatch = hq;
    var iq = gq;
    var jq, kq, lq;
    jq = {
        filter: function (a) {
            return K(a) && (!a._ractive || !a._ractive.setting)
        }, wrap: function (a, b, c) {
            return new kq(a, b, c)
        }
    };
    kq = function (a, b, c) {
        this.root = a;
        this.value = b;
        this.keypath = sa(c);
        if (!b._ractive) {
            D(b, "_ractive", {value: {wrappers: [], instances: [], setting: false}, configurable: true});
            iq(b)
        }
        if (!b._ractive.instances[a._guid]) {
            b._ractive.instances[a._guid] = 0;
            b._ractive.instances.push(a)
        }
        b._ractive.instances[a._guid] += 1;
        b._ractive.wrappers.push(this)
    };
    kq.prototype = {
        get: function () {
            return this.value
        }, teardown: function () {
            var a, b, c, d, e;
            a = this.value;
            b = a._ractive;
            c = b.wrappers;
            d = b.instances;
            if (b.setting) {
                return false
            }
            e = c.indexOf(this);
            if (e === -1) {
                throw new Error(lq)
            }
            c.splice(e, 1);
            if (!c.length) {
                delete a._ractive;
                iq.unpatch(this.value)
            } else {
                d[this.root._guid] -= 1;
                if (!d[this.root._guid]) {
                    e = d.indexOf(this.root);
                    if (e === -1) {
                        throw new Error(lq)
                    }
                    d.splice(e, 1)
                }
            }
        }
    };
    lq = "Something went wrong in a rather interesting way";
    var mq = jq;
    var nq = /^\s*[0-9]+\s*$/;
    var oq = function (a) {
        return nq.test(a) ? [] : {}
    };
    var pq, qq;
    try {
        Object.defineProperty({}, "test", {value: 0});
        pq = {
            filter: function (a, b, c) {
                var d, e;
                if (!b) {
                    return false
                }
                b = sa(b);
                if ((d = c.viewmodel.wrapped[b.parent.str]) && !d.magic) {
                    return false
                }
                e = c.viewmodel.get(b.parent);
                if (K(e) && /^[0-9]+$/.test(b.lastKey)) {
                    return false
                }
                return e && (typeof e === "object" || typeof e === "function")
            }, wrap: function (a, b, c) {
                return new qq(a, b, c)
            }
        };
        qq = function (a, b, c) {
            var d, e, f;
            c = sa(c);
            this.magic = true;
            this.ractive = a;
            this.keypath = c;
            this.value = b;
            this.prop = c.lastKey;
            d = c.parent;
            this.obj = d.isRoot ? a.viewmodel.data : a.viewmodel.get(d);
            e = this.originalDescriptor = Object.getOwnPropertyDescriptor(this.obj, this.prop);
            if (e && e.set && (f = e.set._ractiveWrappers)) {
                if (f.indexOf(this) === -1) {
                    f.push(this)
                }
                return
            }
            sq(this, b, e)
        };
        qq.prototype = {
            get: function () {
                return this.value
            }, reset: function (a) {
                if (this.updating) {
                    return
                }
                this.updating = true;
                this.obj[this.prop] = a;
                qb.addRactive(this.ractive);
                this.ractive.viewmodel.mark(this.keypath, {keepExistingWrapper: true});
                this.updating = false;
                return true
            }, set: function (a, b) {
                if (this.updating) {
                    return
                }
                if (!this.obj[this.prop]) {
                    this.updating = true;
                    this.obj[this.prop] = oq(a);
                    this.updating = false
                }
                this.obj[this.prop][a] = b
            }, teardown: function () {
                var a, b, c, d, e;
                if (this.updating) {
                    return false
                }
                a = Object.getOwnPropertyDescriptor(this.obj, this.prop);
                b = a && a.set;
                if (!b) {
                    return
                }
                d = b._ractiveWrappers;
                e = d.indexOf(this);
                if (e !== -1) {
                    d.splice(e, 1)
                }
                if (!d.length) {
                    c = this.obj[this.prop];
                    Object.defineProperty(this.obj, this.prop, this.originalDescriptor || {
                            writable: true,
                            enumerable: true,
                            configurable: true
                        });
                    this.obj[this.prop] = c
                }
            }
        }
    } catch (a) {
        pq = false
    }
    var rq = pq;

    function sq(a, b, c) {
        var d, e, f, g, h, i;
        d = a.obj;
        e = a.prop;
        if (c && !c.configurable) {
            if (e === "length") {
                return
            }
            throw new Error('Cannot use magic mode with property "' + e + '" - object is not configurable')
        }
        if (c) {
            f = c.get;
            g = c.set
        }
        h = f || function () {
                return b
            };
        i = function (a) {
            if (g) {
                g(a)
            }
            b = f ? f() : a;
            i._ractiveWrappers.forEach(j)
        };
        function j(a) {
            var c, d;
            a.value = b;
            if (a.updating) {
                return
            }
            d = a.ractive;
            c = a.keypath;
            a.updating = true;
            qb.start(d);
            d.viewmodel.mark(c);
            qb.end();
            a.updating = false
        }

        i._ractiveWrappers = [a];
        Object.defineProperty(d, e, {get: h, set: i, enumerable: true, configurable: true})
    }

    var tq, uq;
    if (rq) {
        tq = {
            filter: function (a, b, c) {
                return rq.filter(a, b, c) && mq.filter(a)
            }, wrap: function (a, b, c) {
                return new uq(a, b, c)
            }
        };
        uq = function (a, b, c) {
            this.value = b;
            this.magic = true;
            this.magicWrapper = rq.wrap(a, b, c);
            this.arrayWrapper = mq.wrap(a, b, c)
        };
        uq.prototype = {
            get: function () {
                return this.value
            }, teardown: function () {
                this.arrayWrapper.teardown();
                this.magicWrapper.teardown()
            }, reset: function (a) {
                return this.magicWrapper.reset(a)
            }
        }
    }
    var vq = tq;
    var wq = yq;
    var xq = {};

    function yq(a, b) {
        var c, d, e, f;
        if (!this.adaptors)return;
        c = this.adaptors.length;
        for (d = 0; d < c; d += 1) {
            e = this.adaptors[d];
            if (e.filter(b, a, this.ractive)) {
                f = this.wrapped[a] = e.wrap(this.ractive, b, a, Aq(a));
                f.value = b;
                return
            }
        }
    }

    function zq(a, b) {
        var c = {}, d;
        if (!b) {
            return a
        }
        b += ".";
        for (d in a) {
            if (a.hasOwnProperty(d)) {
                c[b + d] = a[d]
            }
        }
        return c
    }

    function Aq(a) {
        var b;
        if (!xq[a]) {
            b = a ? a + "." : "";
            xq[a] = function (c, d) {
                var e;
                if (typeof c === "string") {
                    e = {};
                    e[b + c] = d;
                    return e
                }
                if (typeof c === "object") {
                    return b ? zq(c, a) : c
                }
            }
        }
        return xq[a]
    }

    var Bq = Cq;

    function Cq(a) {
        var b = [wa], c, d;
        c = a.length;
        while (c--) {
            d = a[c].parent;
            while (d && !d.isRoot) {
                if (a.indexOf(d) === -1) {
                    Ja(b, d)
                }
                d = d.parent
            }
        }
        return b
    }

    var Dq = Eq;

    function Eq(a, b, c) {
        var d;
        Gq(a, b);
        if (c) {
            return
        }
        d = b.wildcardMatches();
        d.forEach(function (c) {
            Fq(a, c, b)
        })
    }

    function Fq(a, b, c) {
        var d, e, f;
        b = b.str || b;
        d = a.depsMap.patternObservers;
        e = d && d[b];
        if (!e) {
            return
        }
        e.forEach(function (b) {
            f = c.join(b.lastKey);
            Gq(a, f);
            Fq(a, b, f)
        })
    }

    function Gq(a, b) {
        a.patternObservers.forEach(function (a) {
            if (a.regex.test(b.str)) {
                a.update(b)
            }
        })
    }

    var Hq = Iq;

    function Iq() {
        var a = this;
        var b = this, c, d, e = {}, f;
        c = this.changes;
        if (!c.length) {
            return
        }
        function g(a) {
            var d = a.key;
            if (a.viewmodel === b) {
                b.clearCache(d.str);
                a.invalidate();
                c.push(d);
                h(d)
            } else {
                a.viewmodel.mark(d)
            }
        }

        function h(a) {
            var c, d;
            if (b.noCascade.hasOwnProperty(a.str)) {
                return
            }
            if (d = b.deps.computed[a.str]) {
                d.forEach(g)
            }
            if (c = b.depsMap.computed[a.str]) {
                c.forEach(h)
            }
        }

        c.slice().forEach(h);
        d = Bq(c);
        d.forEach(function (a) {
            var d;
            if (c.indexOf(a) === -1 && (d = b.deps.computed[a.str])) {
                d.forEach(g)
            }
        });
        this.changes = [];
        if (this.patternObservers.length) {
            d.forEach(function (b) {
                return Dq(a, b, true)
            });
            c.forEach(function (b) {
                return Dq(a, b)
            })
        }
        if (this.deps.observers) {
            d.forEach(function (b) {
                return Jq(a, null, b, "observers")
            });
            Lq(this, c, "observers")
        }
        if (this.deps["default"]) {
            f = [];
            d.forEach(function (b) {
                return Jq(a, f, b, "default")
            });
            if (f.length) {
                Kq(this, f, c)
            }
            Lq(this, c, "default")
        }
        c.forEach(function (b) {
            e[b.str] = a.get(b)
        });
        this.implicitChanges = {};
        this.noCascade = {};
        return e
    }

    function Jq(a, b, c, d) {
        var e, f;
        if (e = Mq(a, c, d)) {
            f = a.get(c);
            e.forEach(function (a) {
                if (b && a.refineValue) {
                    b.push(a)
                } else {
                    a.setValue(f)
                }
            })
        }
    }

    function Kq(a, b, c) {
        b.forEach(function (b) {
            var d = false, e = 0, f = c.length, g = [];
            while (e < f) {
                var h = c[e];
                if (h === b.keypath) {
                    d = true;
                    break
                }
                if (h.slice(0, b.keypath.length) === b.keypath) {
                    g.push(h)
                }
                e++
            }
            if (d) {
                b.setValue(a.get(b.keypath))
            }
            if (g.length) {
                b.refineValue(g)
            }
        })
    }

    function Lq(a, b, c) {
        var d = [];
        e(b);
        d.forEach(h);
        function e(a) {
            a.forEach(f);
            a.forEach(g)
        }

        function f(b) {
            var e = Mq(a, b, c);
            if (e) {
                d.push({keypath: b, deps: e})
            }
        }

        function g(b) {
            var d;
            if (d = a.depsMap[c][b.str]) {
                e(d)
            }
        }

        function h(b) {
            var c = a.get(b.keypath);
            b.deps.forEach(function (a) {
                return a.setValue(c)
            })
        }
    }

    function Mq(a, b, c) {
        var d = a.deps[c];
        return d ? d[b.str] : null
    }

    var Nq = Oq;

    function Oq() {
        this.captureGroups.push([])
    }

    var Pq = Qq;

    function Qq(a, b) {
        var c, d;
        if (!b) {
            if (d = this.wrapped[a]) {
                if (d.teardown() !== false) {
                    this.wrapped[a] = null
                }
            }
        }
        this.cache[a] = undefined;
        if (c = this.cacheMap[a]) {
            while (c.length) {
                this.clearCache(c.pop())
            }
        }
    }

    var Rq = function (a, b) {
        this.computation = a;
        this.viewmodel = a.viewmodel;
        this.ref = b;
        this.root = this.viewmodel.ractive;
        this.parentFragment = this.root.component && this.root.component.parentFragment
    };
    Rq.prototype = {
        resolve: function (a) {
            this.computation.softDeps.push(a);
            this.computation.unresolvedDeps[a.str] = null;
            this.viewmodel.register(a, this.computation, "computed")
        }
    };
    var Sq = Rq;
    var Tq = function (a, b) {
        this.key = a;
        this.getter = b.getter;
        this.setter = b.setter;
        this.hardDeps = b.deps || [];
        this.softDeps = [];
        this.unresolvedDeps = {};
        this.depValues = {};
        this._dirty = this._firstRun = true
    };
    Tq.prototype = {
        constructor: Tq, init: function (a) {
            var b = this;
            var c;
            this.viewmodel = a;
            this.bypass = true;
            c = a.get(this.key);
            a.clearCache(this.key.str);
            this.bypass = false;
            if (this.setter && c !== undefined) {
                this.set(c)
            }
            if (this.hardDeps) {
                this.hardDeps.forEach(function (c) {
                    return a.register(c, b, "computed")
                })
            }
        }, invalidate: function () {
            this._dirty = true
        }, get: function () {
            var a = this;
            var b, c, d = false;
            if (this.getting) {
                var e = "The " + this.key.str + " computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";
                X(e);
                return this.value
            }
            this.getting = true;
            if (this._dirty) {
                if (this._firstRun || !this.hardDeps.length && !this.softDeps.length) {
                    d = true
                } else {
                    [this.hardDeps, this.softDeps].forEach(function (b) {
                        var c, e, f;
                        if (d) {
                            return
                        }
                        f = b.length;
                        while (f--) {
                            c = b[f];
                            e = a.viewmodel.get(c);
                            if (!M(e, a.depValues[c.str])) {
                                a.depValues[c.str] = e;
                                d = true;
                                return
                            }
                        }
                    })
                }
                if (d) {
                    this.viewmodel.capture();
                    try {
                        this.value = this.getter()
                    } catch (a) {
                        Y('Failed to compute "%s"', this.key.str);
                        V(a.stack || a);
                        this.value = void 0
                    }
                    b = this.viewmodel.release();
                    c = this.updateDependencies(b);
                    if (c) {
                        [this.hardDeps, this.softDeps].forEach(function (b) {
                            b.forEach(function (b) {
                                a.depValues[b.str] = a.viewmodel.get(b)
                            })
                        })
                    }
                }
                this._dirty = false
            }
            this.getting = this._firstRun = false;
            return this.value
        }, set: function (a) {
            if (this.setting) {
                this.value = a;
                return
            }
            if (!this.setter) {
                throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)")
            }
            this.setter(a)
        }, updateDependencies: function (a) {
            var b, c, d, e, f;
            c = this.softDeps;
            b = c.length;
            while (b--) {
                d = c[b];
                if (a.indexOf(d) === -1) {
                    e = true;
                    this.viewmodel.unregister(d, this, "computed")
                }
            }
            b = a.length;
            while (b--) {
                d = a[b];
                if (c.indexOf(d) === -1 && (!this.hardDeps || this.hardDeps.indexOf(d) === -1)) {
                    e = true;
                    if (Uq(this.viewmodel, d) && !this.unresolvedDeps[d.str]) {
                        f = new Sq(this, d.str);
                        a.splice(b, 1);
                        this.unresolvedDeps[d.str] = f;
                        qb.addUnresolved(f)
                    } else {
                        this.viewmodel.register(d, this, "computed")
                    }
                }
            }
            if (e) {
                this.softDeps = a.slice()
            }
            return e
        }
    };
    function Uq(a, b) {
        var c = b.firstKey;
        return !(c in a.data) && !(c in a.computations) && !(c in a.mappings)
    }

    var Vq = Tq;
    var Wq = Xq;

    function Xq(a, b) {
        var c = new Vq(a, b);
        if (this.ready) {
            c.init(this)
        }
        return this.computations[a.str] = c
    }

    var Yq = {FAILED_LOOKUP: true};
    var Zq = _q;
    var $q = {};

    function _q(a, b) {
        var c = this.cache, d, e, f, g, h = a.str, i;
        b = b || $q;
        if (b.capture && (g = Na(this.captureGroups))) {
            if (!~g.indexOf(a)) {
                g.push(a)
            }
        }
        if (H.call(this.mappings, a.firstKey)) {
            return this.mappings[a.firstKey].get(a, b)
        }
        if (a.isSpecial) {
            return a.value
        }
        if (c[h] === undefined) {
            if ((e = this.computations[h]) && !e.bypass) {
                d = e.get();
                this.adapt(h, d)
            } else if (f = this.wrapped[h]) {
                d = f.value
            } else if (a.isRoot) {
                this.adapt("", this.data);
                d = this.data
            } else {
                d = ar(this, a)
            }
            c[h] = d
        } else {
            d = c[h]
        }
        if (!b.noUnwrap && (f = this.wrapped[h])) {
            d = f.get()
        }
        if (a.isRoot && b.fullRootGet) {
            for (i in this.mappings) {
                d[i] = this.mappings[i].getValue()
            }
        }
        return d === Yq ? void 0 : d
    }

    function ar(a, b) {
        var c, d, e, f;
        c = a.get(b.parent);
        if (f = a.wrapped[b.parent.str]) {
            c = f.get()
        }
        if (c === null || c === undefined) {
            return
        }
        if (!(d = a.cacheMap[b.parent.str])) {
            a.cacheMap[b.parent.str] = [b.str]
        } else {
            if (d.indexOf(b.str) === -1) {
                d.push(b.str)
            }
        }
        if (typeof c === "object" && !(b.lastKey in c)) {
            return a.cache[b.str] = Yq
        }
        e = c[b.lastKey];
        a.adapt(b.str, e, false);
        a.cache[b.str] = e;
        return e
    }

    var br = cr;

    function cr() {
        var a;
        for (a in this.computations) {
            this.computations[a].init(this)
        }
    }

    var dr = er;

    function er(a, b) {
        var c = this.mappings[a.str] = new fr(a, b);
        c.initViewmodel(this);
        return c
    }

    var fr = function (a, b) {
        this.localKey = a;
        this.keypath = b.keypath;
        this.origin = b.origin;
        this.deps = [];
        this.unresolved = [];
        this.resolved = false
    };
    fr.prototype = {
        forceResolution: function () {
            this.keypath = this.localKey;
            this.setup()
        }, get: function (a, b) {
            if (!this.resolved) {
                return undefined
            }
            return this.origin.get(this.map(a), b)
        }, getValue: function () {
            if (!this.keypath) {
                return undefined
            }
            return this.origin.get(this.keypath)
        }, initViewmodel: function (a) {
            this.local = a;
            this.setup()
        }, map: function (a) {
            if (typeof this.keypath === undefined) {
                return this.localKey
            }
            return a.replace(this.localKey, this.keypath)
        }, register: function (a, b, c) {
            this.deps.push({keypath: a, dep: b, group: c});
            if (this.resolved) {
                this.origin.register(this.map(a), b, c)
            }
        }, resolve: function (a) {
            if (this.keypath !== undefined) {
                this.unbind(true)
            }
            this.keypath = a;
            this.setup()
        }, set: function (a, b) {
            if (!this.resolved) {
                this.forceResolution()
            }
            this.origin.set(this.map(a), b)
        }, setup: function () {
            var a = this;
            if (this.keypath === undefined) {
                return
            }
            this.resolved = true;
            if (this.deps.length) {
                this.deps.forEach(function (b) {
                    var c = a.map(b.keypath);
                    a.origin.register(c, b.dep, b.group);
                    if (b.dep.setValue) {
                        b.dep.setValue(a.origin.get(c))
                    } else if (b.dep.invalidate) {
                        b.dep.invalidate()
                    } else {
                        throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!")
                    }
                });
                this.origin.mark(this.keypath)
            }
        }, setValue: function (a) {
            if (!this.keypath) {
                throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!")
            }
            this.origin.set(this.keypath, a)
        }, unbind: function (a) {
            var b = this;
            if (!a) {
                delete this.local.mappings[this.localKey]
            }
            if (!this.resolved) {
                return
            }
            this.deps.forEach(function (a) {
                b.origin.unregister(b.map(a.keypath), a.dep, a.group)
            });
            if (this.tracker) {
                this.origin.unregister(this.keypath, this.tracker)
            }
        }, unregister: function (a, b, c) {
            var d, e;
            if (!this.resolved) {
                return
            }
            d = this.deps;
            e = d.length;
            while (e--) {
                if (d[e].dep === b) {
                    d.splice(e, 1);
                    break
                }
            }
            this.origin.unregister(this.map(a), b, c)
        }
    };
    var gr = hr;

    function hr(a, b) {
        var c, d = a.str;
        if (b) {
            if (b.implicit) {
                this.implicitChanges[d] = true
            }
            if (b.noCascade) {
                this.noCascade[d] = true
            }
        }
        if (c = this.computations[d]) {
            c.invalidate()
        }
        if (this.changes.indexOf(a) === -1) {
            this.changes.push(a)
        }
        var e = b ? b.keepExistingWrapper : false;
        this.clearCache(d, e);
        if (this.ready) {
            this.onchange()
        }
    }

    var ir = function (a, b) {
        var c, d, e, f;
        c = {};
        d = 0;
        e = a.map(function (a, e) {
            var g, h, i;
            h = d;
            i = b.length;
            do {
                g = b.indexOf(a, h);
                if (g === -1) {
                    f = true;
                    return -1
                }
                h = g + 1
            } while (c[g] && h < i);
            if (g === d) {
                d += 1
            }
            if (g !== e) {
                f = true
            }
            c[g] = true;
            return g
        });
        return e
    };
    var jr = lr;
    var kr = {};

    function lr(a, b, c, d) {
        var e, f, g, h;
        this.mark(a);
        if (d && d.compare) {
            g = nr(d.compare);
            try {
                e = b.map(g);
                f = c.map(g)
            } catch (d) {
                Y('merge(): "%s" comparison failed. Falling back to identity checking', a);
                e = b;
                f = c
            }
        } else {
            e = b;
            f = c
        }
        h = ir(e, f);
        this.smartUpdate(a, c, h, b.length !== c.length)
    }

    function mr(a) {
        return JSON.stringify(a)
    }

    function nr(a) {
        if (a === true) {
            return mr
        }
        if (typeof a === "string") {
            if (!kr[a]) {
                kr[a] = function (b) {
                    return b[a]
                }
            }
            return kr[a]
        }
        if (typeof a === "function") {
            return a
        }
        throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")
    }

    var or = pr;

    function pr(a, b) {
        var c = arguments[2] === undefined ? "default" : arguments[2];
        var d, e, f;
        if (b.isStatic) {
            return
        }
        if (d = this.mappings[a.firstKey]) {
            d.register(a, b, c)
        } else {
            e = this.deps[c] || (this.deps[c] = {});
            f = e[a.str] || (e[a.str] = []);
            f.push(b);
            if (!this.depsMap[c]) {
                this.depsMap[c] = {}
            }
            if (!a.isRoot) {
                qr(this, a, c)
            }
        }
    }

    function qr(a, b, c) {
        var d, e, f;
        while (!b.isRoot) {
            d = a.depsMap[c];
            e = d[b.parent.str] || (d[b.parent.str] = []);
            f = b.str;
            if (e["_" + f] === undefined) {
                e["_" + f] = 0;
                e.push(b)
            }
            e["_" + f] += 1;
            b = b.parent
        }
    }

    var rr = sr;

    function sr() {
        return this.captureGroups.pop()
    }

    var tr = ur;

    function ur(a) {
        this.data = a;
        this.clearCache("")
    }

    var vr = wr;

    function wr(a, b) {
        var c = arguments[2] === undefined ? {} : arguments[2];
        var d, e, f, g;
        if (!c.noMapping) {
            if (d = this.mappings[a.firstKey]) {
                return d.set(a, b)
            }
        }
        e = this.computations[a.str];
        if (e) {
            if (e.setting) {
                return
            }
            e.set(b);
            b = e.get()
        }
        if (M(this.cache[a.str], b)) {
            return
        }
        f = this.wrapped[a.str];
        if (f && f.reset) {
            g = f.reset(b) !== false;
            if (g) {
                b = f.get()
            }
        }
        if (!e && !g) {
            xr(this, a, b)
        }
        if (!c.silent) {
            this.mark(a)
        } else {
            this.clearCache(a.str)
        }
    }

    function xr(a, b, c) {
        var d, e, f, g;
        f = function () {
            if (d.set) {
                d.set(b.lastKey, c)
            } else {
                e = d.get();
                g()
            }
        };
        g = function () {
            if (!e) {
                e = oq(b.lastKey);
                a.set(b.parent, e, {silent: true})
            }
            e[b.lastKey] = c
        };
        d = a.wrapped[b.parent.str];
        if (d) {
            f()
        } else {
            e = a.get(b.parent);
            if (d = a.wrapped[b.parent.str]) {
                f()
            } else {
                g()
            }
        }
    }

    var yr = Br;
    var zr = {implicit: true}, Ar = {noCascade: true};

    function Br(a, b, c) {
        var d = this;
        var e, f, g;
        f = c.length;
        c.forEach(function (b, c) {
            if (b === -1) {
                d.mark(a.join(c), Ar)
            }
        });
        this.set(a, b, {silent: true});
        if (e = this.deps["default"][a.str]) {
            e.filter(Cr).forEach(function (a) {
                return a.shuffle(c, b)
            })
        }
        if (f !== b.length) {
            this.mark(a.join("length"), zr);
            for (g = c.touchedFrom; g < b.length; g += 1) {
                this.mark(a.join(g))
            }
            for (g = b.length; g < f; g += 1) {
                this.mark(a.join(g), Ar)
            }
        }
    }

    function Cr(a) {
        return typeof a.shuffle === "function"
    }

    var Dr = Er;

    function Er() {
        var a = this;
        var b;
        Object.keys(this.cache).forEach(function (b) {
            return a.clearCache(b)
        });
        while (b = this.unresolvedImplicitDependencies.pop()) {
            b.teardown()
        }
    }

    var Fr = Gr;

    function Gr(a, b) {
        var c = arguments[2] === undefined ? "default" : arguments[2];
        var d, e, f;
        if (b.isStatic) {
            return
        }
        if (d = this.mappings[a.firstKey]) {
            return d.unregister(a, b, c)
        }
        e = this.deps[c][a.str];
        f = e.indexOf(b);
        if (f === -1) {
            throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks")
        }
        e.splice(f, 1);
        if (a.isRoot) {
            return
        }
        Hr(this, a, c)
    }

    function Hr(a, b, c) {
        var d, e;
        while (!b.isRoot) {
            d = a.depsMap[c];
            e = d[b.parent.str];
            e["_" + b.str] -= 1;
            if (!e["_" + b.str]) {
                Oa(e, b);
                e["_" + b.str] = undefined
            }
            b = b.parent
        }
    }

    var Ir = function (a) {
        var b = a.adapt;
        var c = a.data;
        var d = a.ractive;
        var e = a.computed;
        var f = a.mappings;
        var g;
        var h;
        this.ractive = d;
        this.adaptors = b;
        this.onchange = a.onchange;
        this.cache = {};
        this.cacheMap = C(null);
        this.deps = {computed: C(null), default: C(null)};
        this.depsMap = {computed: C(null), default: C(null)};
        this.patternObservers = [];
        this.specials = C(null);
        this.wrapped = C(null);
        this.computations = C(null);
        this.captureGroups = [];
        this.unresolvedImplicitDependencies = [];
        this.changes = [];
        this.implicitChanges = {};
        this.noCascade = {};
        this.data = c;
        this.mappings = C(null);
        for (g in f) {
            this.map(sa(g), f[g])
        }
        if (c) {
            for (g in c) {
                if ((h = this.mappings[g]) && h.getValue() === undefined) {
                    h.setValue(c[g])
                }
            }
        }
        for (g in e) {
            if (f && g in f) {
                U("Cannot map to a computed property ('%s')", g)
            }
            this.compute(sa(g), e[g])
        }
        this.ready = true
    };
    Ir.prototype = {
        adapt: wq,
        applyChanges: Hq,
        capture: Nq,
        clearCache: Pq,
        compute: Wq,
        get: Zq,
        init: br,
        map: dr,
        mark: gr,
        merge: jr,
        register: or,
        release: rr,
        reset: tr,
        set: vr,
        smartUpdate: yr,
        teardown: Dr,
        unregister: Fr
    };
    var Jr = Ir;

    function Kr(a) {
        this.hook = new Ia(a);
        this.inProcess = {};
        this.queue = {}
    }

    Kr.prototype = {
        constructor: Kr, begin: function (a) {
            this.inProcess[a._guid] = true
        }, end: function (a) {
            var b = a.parent;
            if (!b || !this.inProcess[b._guid]) {
                Mr(this, a)
            } else {
                Lr(this.queue, b).push(a)
            }
            delete this.inProcess[a._guid]
        }
    };
    function Lr(a, b) {
        return a[b._guid] || (a[b._guid] = [])
    }

    function Mr(a, b) {
        var c = Lr(a.queue, b);
        a.hook.fire(b);
        while (c.length) {
            Mr(a, c.shift())
        }
        delete a.queue[b._guid]
    }

    var Nr = Kr;
    var Or = Qr;
    var Pr = /\$\{([^\}]+)\}/g;

    function Qr(a, b) {
        var c = {}, d;
        for (d in b) {
            c[d] = Rr(a, d, b[d])
        }
        return c
    }

    function Rr(a, b, c) {
        var d, e;
        if (typeof c === "function") {
            d = Tr(c, a)
        }
        if (typeof c === "string") {
            d = Sr(a, c)
        }
        if (typeof c === "object") {
            if (typeof c.get === "string") {
                d = Sr(a, c.get)
            } else if (typeof c.get === "function") {
                d = Tr(c.get, a)
            } else {
                U("`%s` computation must have a `get()` method", b)
            }
            if (typeof c.set === "function") {
                e = Tr(c.set, a)
            }
        }
        return {getter: d, setter: e}
    }

    function Sr(a, b) {
        var c, d, e;
        c = "return (" + b.replace(Pr, function (a, b) {
                d = true;
                return '__ractive.get("' + b + '")'
            }) + ");";
        if (d) {
            c = "var __ractive = this; " + c
        }
        e = new Function(c);
        return d ? e.bind(a) : e
    }

    function Tr(a, b) {
        return /this/.test(a.toString()) ? a.bind(b) : a
    }

    var Ur = new Ia("construct");
    var Vr = new Ia("config");
    var Wr = new Nr("init");
    var Xr = 0;
    var Yr = ["adaptors", "components", "decorators", "easing", "events", "interpolators", "partials", "transitions"];
    var Zr = $r;

    function $r(a) {
        var b = arguments[1] === undefined ? {} : arguments[1];
        var c = arguments[2] === undefined ? {} : arguments[2];
        var d, e;
        if (Vt.DEBUG) {
            S()
        }
        bs(a, c);
        D(a, "data", {get: cs});
        Ur.fire(a, b);
        Yr.forEach(function (c) {
            a[c] = F(C(a.constructor[c] || null), b[c])
        });
        e = new Jr({
            adapt: _r(a, a.adapt, b),
            data: Ad.init(a.constructor, a, b),
            computed: Or(a, F(C(a.constructor.prototype.computed), b.computed)),
            mappings: c.mappings,
            ractive: a,
            onchange: function () {
                return qb.addRactive(a)
            }
        });
        a.viewmodel = e;
        e.init();
        Ii.init(a.constructor, a, b);
        Vr.fire(a);
        Wr.begin(a);
        if (a.template) {
            var f = undefined;
            if (c.cssIds || a.cssId) {
                f = c.cssIds ? c.cssIds.slice() : [];
                if (a.cssId) {
                    f.push(a.cssId)
                }
            }
            a.fragment = new Zs({template: a.template, root: a, owner: a, cssIds: f})
        }
        Wr.end(a);
        if (d = u(a.el)) {
            var g = a.render(d, a.append);
            if (Vt.DEBUG_PROMISES) {
                g["catch"](function (b) {
                    Z("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");
                    Y("An error happened during rendering", {ractive: a});
                    b.stack && V(b.stack);
                    throw b
                })
            }
        }
    }

    function _r(a, b, c) {
        var d, e, f;
        b = b.map(g);
        d = Ma(c.adapt).map(g);
        d = as(b, d);
        e = "magic" in c ? c.magic : a.magic;
        f = "modifyArrays" in c ? c.modifyArrays : a.modifyArrays;
        if (e) {
            if (!h) {
                throw new Error("Getters and setters (magic mode) are not supported in this browser")
            }
            if (f) {
                d.push(vq)
            }
            d.push(rq)
        }
        if (f) {
            d.push(mq)
        }
        return d;
        function g(b) {
            if (typeof b === "string") {
                b = ba("adaptors", a, b);
                if (!b) {
                    U(aa(b, "adaptor"))
                }
            }
            return b
        }
    }

    function as(a, b) {
        var c = a.slice(), d = b.length;
        while (d--) {
            if (!~c.indexOf(b[d])) {
                c.push(b[d])
            }
        }
        return c
    }

    function bs(a, b) {
        a._guid = "r-" + Xr++;
        a._subs = C(null);
        a._config = {};
        a._twowayBindings = C(null);
        a._animations = [];
        a.nodes = {};
        a._liveQueries = [];
        a._liveComponentQueries = [];
        a._boundFunctions = [];
        a._observers = [];
        if (b.component) {
            a.parent = b.parent;
            a.container = b.container || null;
            a.root = a.parent.root;
            a.component = b.component;
            b.component.instance = a;
            a._inlinePartials = b.inlinePartials
        } else {
            a.root = a;
            a.parent = a.container = null
        }
    }

    function cs() {
        throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")
    }

    function ds(a, b, c) {
        this.parentFragment = a.parentFragment;
        this.callback = c;
        this.fragment = new Zs({template: b, root: a.root, owner: this});
        this.update()
    }

    var es = ds;
    ds.prototype = {
        bubble: function () {
            if (!this.dirty) {
                this.dirty = true;
                qb.addView(this)
            }
        }, update: function () {
            this.callback(this.fragment.getValue());
            this.dirty = false
        }, rebind: function (a, b) {
            this.fragment.rebind(a, b)
        }, unbind: function () {
            this.fragment.unbind()
        }
    };
    var fs = function (a, b, c, d, e) {
        var f, g, h, i, j, k = {}, l = {}, m = {}, n, o = [];
        g = a.parentFragment;
        h = a.root;
        e = e || {};
        F(k, e);
        e.content = d || [];
        k[""] = e.content;
        if (b.defaults.el) {
            Y("The <%s/> component has a default `el` property; it has been disregarded", a.name)
        }
        i = g;
        while (i) {
            if (i.owner.type === Vd) {
                j = i.owner.container;
                break
            }
            i = i.parent
        }
        if (c) {
            Object.keys(c).forEach(function (b) {
                var d = c[b], e, g;
                if (typeof d === "string") {
                    e = lh(d);
                    l[b] = e ? e.value : d
                } else if (d === 0) {
                    l[b] = true
                } else if (K(d)) {
                    if (hs(d)) {
                        m[b] = {origin: a.root.viewmodel, keypath: undefined};
                        g = gs(a, d[0], function (a) {
                            if (a.isSpecial) {
                                if (n) {
                                    f.set(b, a.value)
                                } else {
                                    l[b] = a.value;
                                    delete m[b]
                                }
                            } else {
                                if (n) {
                                    f.viewmodel.mappings[b].resolve(a)
                                } else {
                                    m[b].keypath = a
                                }
                            }
                        })
                    } else {
                        g = new es(a, d, function (a) {
                            if (n) {
                                f.set(b, a)
                            } else {
                                l[b] = a
                            }
                        })
                    }
                    o.push(g)
                } else {
                    throw new Error("erm wut")
                }
            })
        }
        f = C(b.prototype);
        Zr(f, {
            el: null,
            append: true,
            data: l,
            partials: e,
            magic: h.magic || b.defaults.magic,
            modifyArrays: h.modifyArrays,
            adapt: h.adapt
        }, {
            parent: h, component: a, container: j, mappings: m,
            inlinePartials: k, cssIds: g.cssIds
        });
        n = true;
        a.resolvers = o;
        return f
    };

    function gs(a, b, c) {
        var d;
        if (b.r) {
            d = wj(a, b.r, c)
        } else if (b.x) {
            d = new Dj(a, a.parentFragment, b.x, c)
        } else if (b.rx) {
            d = new Pj(a, b.rx, c)
        }
        return d
    }

    function hs(a) {
        return a.length === 1 && a[0].t === Jd
    }

    var is = js;

    function js(a, b) {
        var c;
        for (c in b) {
            if (b.hasOwnProperty(c)) {
                ks(a.instance, a.root, c, b[c])
            }
        }
    }

    function ks(a, b, c, d) {
        if (typeof d !== "string") {
            U("Components currently only support simple events - you cannot include arguments. Sorry!")
        }
        a.on(c, function () {
            var a, c;
            if (arguments.length && arguments[0] && arguments[0].node) {
                a = Array.prototype.shift.call(arguments)
            }
            c = Array.prototype.slice.call(arguments);
            ec(b, d, {event: a, args: c});
            return false
        })
    }

    var ls = function (a) {
        var b, c;
        b = a.root;
        while (b) {
            if (c = b._liveComponentQueries["_" + a.name]) {
                c.push(a.instance)
            }
            b = b.parent
        }
    };
    var ms = ns;

    function ns(a, b) {
        var c, d;
        if (!b) {
            throw new Error('Component "' + this.name + '" not found')
        }
        c = this.parentFragment = a.parentFragment;
        d = c.root;
        this.root = d;
        this.type = Ud;
        this.name = a.template.e;
        this.index = a.index;
        this.indexRefBindings = {};
        this.yielders = {};
        this.resolvers = [];
        fs(this, b, a.template.a, a.template.f, a.template.p);
        is(this, a.template.v);
        if (a.template.t0 || a.template.t1 || a.template.t2 || a.template.o) {
            Y('The "intro", "outro" and "decorator" directives have no effect on components', {ractive: this.instance})
        }
        ls(this)
    }

    var os = ps;

    function ps(a, b) {
        var c;
        this.resolvers.forEach(e);
        for (var d in this.yielders) {
            if (this.yielders[d][0]) {
                e(this.yielders[d][0])
            }
        }
        if (c = this.root._liveComponentQueries["_" + this.name]) {
            c._makeDirty()
        }
        function e(c) {
            c.rebind(a, b)
        }
    }

    var qs = rs;

    function rs() {
        var a = this.instance;
        a.render(this.parentFragment.getNode());
        this.rendered = true;
        return a.fragment.detach()
    }

    var ss = ts;

    function ts() {
        return this.instance.fragment.toString()
    }

    var us = ws;
    var vs = new Ia("teardown");

    function ws() {
        var a = this.instance;
        this.resolvers.forEach(eb);
        xs(this);
        a._observers.forEach(gb);
        a.fragment.unbind();
        a.viewmodel.teardown();
        if (a.fragment.rendered && a.el.__ractive_instances__) {
            Oa(a.el.__ractive_instances__, a)
        }
        vs.fire(a)
    }

    function xs(a) {
        var b, c;
        b = a.root;
        do {
            if (c = b._liveComponentQueries["_" + a.name]) {
                c._remove(a)
            }
        } while (b = b.parent)
    }

    var ys = zs;

    function zs(a) {
        this.shouldDestroy = a;
        this.instance.unrender()
    }

    var As = function (a, b) {
        this.init(a, b)
    };
    As.prototype = {
        detach: Pp,
        find: Sp,
        findAll: Up,
        findAllComponents: Wp,
        findComponent: Yp,
        findNextNode: $p,
        firstNode: aq,
        init: ms,
        rebind: os,
        render: qs,
        toString: ss,
        unbind: us,
        unrender: ys
    };
    var Bs = As;
    var Cs = function (a) {
        this.type = Qd;
        this.value = a.template.c
    };
    Cs.prototype = {
        detach: fj, firstNode: function () {
            return this.node
        }, render: function () {
            if (!this.node) {
                this.node = document.createComment(this.value)
            }
            return this.node
        }, toString: function () {
            return "<!--" + this.value + "-->"
        }, unrender: function (a) {
            if (a) {
                this.node.parentNode.removeChild(this.node)
            }
        }
    };
    var Ds = Cs;
    var Es = function (a) {
        var b, c;
        this.type = Vd;
        this.container = b = a.parentFragment.root;
        this.component = c = b.component;
        this.container = b;
        this.containerFragment = a.parentFragment;
        this.parentFragment = c.parentFragment;
        var d = this.name = a.template.n || "";
        var e = b._inlinePartials[d];
        if (!e) {
            Y('Could not find template for partial "' + d + '"', {ractive: a.root});
            e = []
        }
        this.fragment = new Zs({owner: this, root: b.parent, template: e, pElement: this.containerFragment.pElement});
        if (!K(c.yielders[d])) {
            c.yielders[d] = [this]
        } else {
            c.yielders[d].push(this)
        }
        qb.scheduleTask(function () {
            if (c.yielders[d].length > 1) {
                throw new Error("A component template can only have one {{yield" + (d ? " " + d : "") + "}} declaration at a time")
            }
        })
    };
    Es.prototype = {
        detach: function () {
            return this.fragment.detach()
        }, find: function (a) {
            return this.fragment.find(a)
        }, findAll: function (a, b) {
            return this.fragment.findAll(a, b)
        }, findComponent: function (a) {
            return this.fragment.findComponent(a)
        }, findAllComponents: function (a, b) {
            return this.fragment.findAllComponents(a, b)
        }, findNextNode: function () {
            return this.containerFragment.findNextNode(this)
        }, firstNode: function () {
            return this.fragment.firstNode()
        }, getValue: function (a) {
            return this.fragment.getValue(a)
        }, render: function () {
            return this.fragment.render()
        }, unbind: function () {
            this.fragment.unbind()
        }, unrender: function (a) {
            this.fragment.unrender(a);
            Oa(this.component.yielders[this.name], this)
        }, rebind: function (a, b) {
            this.fragment.rebind(a, b)
        }, toString: function () {
            return this.fragment.toString()
        }
    };
    var Fs = Es;
    var Gs = function (a) {
        this.declaration = a.template.a
    };
    Gs.prototype = {
        init: x, render: x, unrender: x, teardown: x, toString: function () {
            return "<!DOCTYPE" + this.declaration + ">"
        }
    };
    var Hs = Gs;
    var Is = Js;

    function Js(a) {
        var b = this;
        this.owner = a.owner;
        this.parent = this.owner.parentFragment;
        this.root = a.root;
        this.pElement = a.pElement;
        this.context = a.context;
        this.index = a.index;
        this.key = a.key;
        this.registeredIndexRefs = [];
        this.cssIds = "cssIds" in a ? a.cssIds : this.parent ? this.parent.cssIds : null;
        this.items = a.template.map(function (c, d) {
            return Ks({parentFragment: b, pElement: a.pElement, template: c, index: d})
        });
        this.value = this.argsList = null;
        this.dirtyArgs = this.dirtyValue = true;
        this.bound = true
    }

    function Ks(a) {
        if (typeof a.template === "string") {
            return new hj(a)
        }
        switch (a.template.t) {
            case Vd:
                return new Fs(a);
            case Jd:
                return new Yj(a);
            case Ld:
                return new Qk(a);
            case Kd:
                return new ql(a);
            case Od:
                var b = undefined;
                if (b = Np(a.parentFragment.root, a.template.e)) {
                    return new Bs(a, b)
                }
                return new yp(a);
            case Pd:
                return new Mp(a);
            case Qd:
                return new Ds(a);
            case Xd:
                return new Hs(a);
            default:
                throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")
        }
    }

    var Ls = Ms;

    function Ms(a, b) {
        if (!this.owner || this.owner.hasContext) {
            qa(this, "context", a, b)
        }
        this.items.forEach(function (c) {
            if (c.rebind) {
                c.rebind(a, b)
            }
        })
    }

    var Ns = Os;

    function Os() {
        var a;
        if (this.items.length === 1) {
            a = this.items[0].render()
        } else {
            a = document.createDocumentFragment();
            this.items.forEach(function (b) {
                a.appendChild(b.render())
            })
        }
        this.rendered = true;
        return a
    }

    var Ps = Qs;

    function Qs(a) {
        if (!this.items) {
            return ""
        }
        return this.items.map(a ? Ss : Rs).join("")
    }

    function Rs(a) {
        return a.toString()
    }

    function Ss(a) {
        return a.toString(true)
    }

    var Ts = Us;

    function Us() {
        if (!this.bound) {
            return
        }
        this.items.forEach(Vs);
        this.bound = false
    }

    function Vs(a) {
        if (a.unbind) {
            a.unbind()
        }
    }

    var Ws = Xs;

    function Xs(a) {
        if (!this.rendered) {
            throw new Error("Attempted to unrender a fragment that was not rendered")
        }
        this.items.forEach(function (b) {
            return b.unrender(a)
        });
        this.rendered = false
    }

    var Ys = function (a) {
        this.init(a)
    };
    Ys.prototype = {
        bubble: Ji,
        detach: Li,
        find: Ni,
        findAll: Pi,
        findAllComponents: Ri,
        findComponent: Ti,
        findNextNode: Vi,
        firstNode: Xi,
        getArgsList: _i,
        getNode: bj,
        getValue: dj,
        init: Is,
        rebind: Ls,
        registerIndexRef: function (a) {
            var b = this.registeredIndexRefs;
            if (b.indexOf(a) === -1) {
                b.push(a)
            }
        },
        render: Ns,
        toString: Ps,
        unbind: Ts,
        unregisterIndexRef: function (a) {
            var b = this.registeredIndexRefs;
            b.splice(b.indexOf(a), 1)
        },
        unrender: Ws
    };
    var Zs = Ys;
    var $s = bt;
    var _s = ["template", "partials", "components", "decorators", "events"], at = new Ia("reset");

    function bt(a) {
        var b, c, d, e, f;
        a = a || {};
        if (typeof a !== "object") {
            throw new Error("The reset method takes either no arguments, or an object containing new data")
        }
        if ((c = this.viewmodel.wrapped[""]) && c.reset) {
            if (c.reset(a) === false) {
                this.viewmodel.reset(a)
            }
        } else {
            this.viewmodel.reset(a)
        }
        d = Ii.reset(this);
        e = d.length;
        while (e--) {
            if (_s.indexOf(d[e]) > -1) {
                f = true;
                break
            }
        }
        if (f) {
            var g = undefined;
            this.viewmodel.mark(wa);
            if (g = this.component) {
                g.shouldDestroy = true
            }
            this.unrender();
            if (g) {
                g.shouldDestroy = false
            }
            if (this.fragment.template !== this.template) {
                this.fragment.unbind();
                this.fragment = new Zs({template: this.template, root: this, owner: this})
            }
            b = this.render(this.el, this.anchor)
        } else {
            b = qb.start(this, true);
            this.viewmodel.mark(wa);
            qb.end()
        }
        at.fire(this, a);
        return b
    }

    var ct = function (a, b) {
        var c, d = [];

        function e(b, c, d) {
            if (d && d.partials[a])return;
            b.forEach(function (b) {
                if (b.type === Pd && b.getPartialName() === a) {
                    c.push(b)
                }
                if (b.fragment) {
                    e(b.fragment.items, c, d)
                }
                if (K(b.fragments)) {
                    e(b.fragments, c, d)
                } else if (K(b.items)) {
                    e(b.items, c, d)
                } else if (b.type === Ud && b.instance) {
                    e(b.instance.fragment.items, c, b.instance)
                }
                if (b.type === Od) {
                    if (K(b.attributes)) {
                        e(b.attributes, c, d)
                    }
                    if (K(b.conditionalAttributes)) {
                        e(b.conditionalAttributes, c, d)
                    }
                }
            })
        }

        e(this.fragment.items, d);
        this.partials[a] = b;
        c = qb.start(this, true);
        d.forEach(function (b) {
            b.value = undefined;
            b.setValue(a)
        });
        qb.end();
        return c
    };
    var dt = et;

    function et(a) {
        var b, c;
        ni.init(null, this, {template: a});
        b = this.transitionsEnabled;
        this.transitionsEnabled = false;
        if (c = this.component) {
            c.shouldDestroy = true
        }
        this.unrender();
        if (c) {
            c.shouldDestroy = false
        }
        this.fragment.unbind();
        this.fragment = new Zs({template: this.template, root: this, owner: this});
        this.render(this.el, this.anchor);
        this.transitionsEnabled = b
    }

    var ft = Tc("reverse");
    var gt = ht;

    function ht(a, b) {
        var c, d;
        d = qb.start(this, true);
        if (O(a)) {
            c = a;
            for (a in c) {
                if (c.hasOwnProperty(a)) {
                    b = c[a];
                    it(this, a, b)
                }
            }
        } else {
            it(this, a, b)
        }
        qb.end();
        return d
    }

    function it(a, b, c) {
        b = sa(va(b));
        if (b.isPattern) {
            ta(a, b).forEach(function (b) {
                a.viewmodel.set(b, c)
            })
        } else {
            a.viewmodel.set(b, c)
        }
    }

    var jt = Tc("shift");
    var kt = Tc("sort");
    var lt = Tc("splice");
    var mt = nt;

    function nt(a, b) {
        return xa(this, a, b === undefined ? -1 : -b)
    }

    var ot = qt;
    var pt = new Ia("teardown");

    function qt() {
        var a;
        this.fragment.unbind();
        this.viewmodel.teardown();
        this._observers.forEach(gb);
        if (this.fragment.rendered && this.el.__ractive_instances__) {
            Oa(this.el.__ractive_instances__, this)
        }
        this.shouldDestroy = true;
        a = this.fragment.rendered ? this.unrender() : Ua.resolve();
        pt.fire(this);
        this._boundFunctions.forEach(rt);
        return a
    }

    function rt(a) {
        delete a.fn[a.prop]
    }

    var st = tt;

    function tt(a) {
        var b = this;
        if (typeof a !== "string") {
            throw new TypeError($)
        }
        var c = undefined;
        if (/\*/.test(a)) {
            c = {};
            ta(this, sa(va(a))).forEach(function (a) {
                c[a.str] = !b.viewmodel.get(a)
            });
            return this.set(c)
        }
        return this.set(a, !this.get(a))
    }

    var ut = vt;

    function vt() {
        return this.fragment.toString(true)
    }

    var wt = yt;
    var xt = new Ia("unrender");

    function yt() {
        var a, b;
        if (!this.fragment.rendered) {
            Y("ractive.unrender() was called on a Ractive instance that was not rendered");
            return Ua.resolve()
        }
        a = qb.start(this, true);
        b = !this.component || this.component.shouldDestroy || this.shouldDestroy;
        while (this._animations[0]) {
            this._animations[0].stop()
        }
        this.fragment.unrender(b);
        Oa(this.el.__ractive_instances__, this);
        xt.fire(this);
        qb.end();
        return a
    }

    var zt = Tc("unshift");
    var At = Ct;
    var Bt = new Ia("update");

    function Ct(a) {
        var b;
        a = sa(a) || wa;
        b = qb.start(this, true);
        this.viewmodel.mark(a);
        qb.end();
        Bt.fire(this, a);
        return b
    }

    var Dt = Et;

    function Et(a, b) {
        var c, d, e;
        if (typeof a === "string" && !b) {
            e = this._twowayBindings[a]
        } else {
            e = [];
            for (d in this._twowayBindings) {
                if (!a || sa(d).equalsOrStartsWith(a)) {
                    e.push.apply(e, this._twowayBindings[d])
                }
            }
        }
        c = Ft(this, e);
        return this.set(c)
    }

    function Ft(a, b) {
        var c = {}, d = [];
        b.forEach(function (a) {
            var b, e;
            if (a.radioName && !a.element.node.checked) {
                return
            }
            if (a.checkboxName) {
                if (!d[a.keypath.str] && !a.changed()) {
                    d.push(a.keypath);
                    d[a.keypath.str] = a
                }
                return
            }
            b = a.attribute.value;
            e = a.getValue();
            if (La(b, e)) {
                return
            }
            if (!M(b, e)) {
                c[a.keypath.str] = e
            }
        });
        if (d.length) {
            d.forEach(function (a) {
                var b, e, f;
                b = d[a.str];
                e = b.attribute.value;
                f = b.getValue();
                if (!La(e, f)) {
                    c[a.str] = f
                }
            })
        }
        return c
    }

    var Gt = {
        add: Aa,
        animate: zb,
        detach: Db,
        find: Gb,
        findAll: Ub,
        findAllComponents: Wb,
        findComponent: Yb,
        findContainer: $b,
        findParent: ac,
        fire: ic,
        get: kc,
        insert: nc,
        merge: rc,
        observe: Dc,
        observeOnce: Fc,
        off: Jc,
        on: Lc,
        once: Nc,
        pop: Uc,
        push: Vc,
        render: ed,
        reset: $s,
        resetPartial: ct,
        resetTemplate: dt,
        reverse: ft,
        set: gt,
        shift: jt,
        sort: kt,
        splice: lt,
        subtract: mt,
        teardown: ot,
        toggle: st,
        toHTML: ut,
        toHtml: ut,
        unrender: wt,
        unshift: zt,
        update: At,
        updateModel: Dt
    };
    var Ht = function (a, b, c) {
        if (c || It(a, b)) {
            return function () {
                var c = "_super" in this, d = this._super, e;
                this._super = b;
                e = a.apply(this, arguments);
                if (c) {
                    this._super = d
                }
                return e
            }
        } else {
            return a
        }
    };

    function It(a, b) {
        return typeof b === "function" && /_super/.test(a)
    }

    var Jt = Kt;

    function Kt(a) {
        var b = {};
        while (a) {
            Lt(a, b);
            Nt(a, b);
            if (a._Parent !== Vt) {
                a = a._Parent
            } else {
                a = false
            }
        }
        return b
    }

    function Lt(a, b) {
        ri.forEach(function (c) {
            Mt(c.useDefaults ? a.prototype : a, b, c.name)
        })
    }

    function Mt(a, b, c) {
        var d, e = Object.keys(a[c]);
        if (!e.length) {
            return
        }
        if (!(d = b[c])) {
            d = b[c] = {}
        }
        e.filter(function (a) {
            return !(a in d)
        }).forEach(function (b) {
            return d[b] = a[c][b]
        })
    }

    function Nt(a, b) {
        Object.keys(a.prototype).forEach(function (c) {
            if (c === "computed") {
                return
            }
            var d = a.prototype[c];
            if (!(c in b)) {
                b[c] = d._method ? d._method : d
            } else if (typeof b[c] === "function" && typeof d === "function" && b[c]._method) {
                var e = undefined, f = d._method;
                if (f) {
                    d = d._method
                }
                e = Ht(b[c]._method, d);
                if (f) {
                    e._method = e
                }
                b[c] = e
            }
        })
    }

    var Ot = Pt;

    function Pt() {
        for (var a = arguments.length, b = Array(a), c = 0; c < a; c++) {
            b[c] = arguments[c]
        }
        if (!b.length) {
            return Qt(this)
        } else {
            return b.reduce(Qt, this)
        }
    }

    function Qt(a) {
        var b = arguments[1] === undefined ? {} : arguments[1];
        var c, d;
        if (b.prototype instanceof Vt) {
            b = Jt(b)
        }
        c = function (a) {
            if (!(this instanceof c))return new c(a);
            Zr(this, a)
        };
        d = C(a.prototype);
        d.constructor = c;
        E(c, {defaults: {value: d}, extend: {value: Pt, writable: true, configurable: true}, _Parent: {value: a}});
        Ii.extend(a, d, b);
        Ad.extend(a, d, b);
        if (b.computed) {
            d.computed = F(C(a.prototype.computed), b.computed)
        }
        c.prototype = d;
        return c
    }

    var Rt = function (a) {
        var b = {}, c, d;
        if (!a || !(c = a._ractive)) {
            return b
        }
        b.ractive = c.root;
        b.keypath = c.keypath.str;
        b.index = {};
        if (d = uj(c.proxy.parentFragment)) {
            b.index = uj.resolve(d)
        }
        return b
    };
    var St, Tt;
    St = function (a) {
        if (!(this instanceof St))return new St(a);
        Zr(this, a)
    };
    Tt = {
        DEBUG: {writable: true, value: true},
        DEBUG_PROMISES: {writable: true, value: true},
        extend: {value: Ot},
        getNodeInfo: {value: Rt},
        parse: {value: Sh},
        Promise: {value: Ua},
        svg: {value: j},
        magic: {value: h},
        VERSION: {value: "0.7.3"},
        adaptors: {writable: true, value: {}},
        components: {writable: true, value: {}},
        decorators: {writable: true, value: {}},
        easing: {writable: true, value: d},
        events: {writable: true, value: {}},
        interpolators: {writable: true, value: ha},
        partials: {writable: true, value: {}},
        transitions: {writable: true, value: {}}
    };
    E(St, Tt);
    St.prototype = F(Gt, c);
    St.prototype.constructor = St;
    St.defaults = St.prototype;
    var Ut = "function";
    if (typeof Date.now !== Ut || typeof String.prototype.trim !== Ut || typeof Object.keys !== Ut || typeof Array.prototype.indexOf !== Ut || typeof Array.prototype.forEach !== Ut || typeof Array.prototype.map !== Ut || typeof Array.prototype.filter !== Ut || typeof window !== "undefined" && typeof window.addEventListener !== Ut) {
        throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.")
    }
    var Vt = St;
    return Vt
});
!function (a) {
    "function" == typeof define && define.amd ? define("picker", ["jquery"], a) : "object" == typeof exports ? module.exports = a(require("jquery")) : this.Picker = a(jQuery)
}(function (a) {
    function b(f, g, i, m) {
        function n() {
            return b._.node("div", b._.node("div", b._.node("div", b._.node("div", B.component.nodes(w.open), y.box), y.wrap), y.frame), y.holder, 'tabindex="-1"')
        }

        function o() {
            z.data(g, B).addClass(y.input).val(z.data("value") ? B.get("select", x.format) : f.value), x.editable || z.on("focus." + w.id + " click." + w.id, function (a) {
                a.preventDefault(), B.open()
            }).on("keydown." + w.id, u), e(f, {haspopup: !0, expanded: !1, readonly: !1, owns: f.id + "_root"})
        }

        function p() {
            e(B.$root[0], "hidden", !0)
        }

        function q() {
            B.$holder.on({
                keydown: u, "focus.toOpen": t, blur: function () {
                    z.removeClass(y.target)
                }, focusin: function (a) {
                    B.$root.removeClass(y.focused), a.stopPropagation()
                }, "mousedown click": function (b) {
                    var c = b.target;
                    c != B.$holder[0] && (b.stopPropagation(), "mousedown" != b.type || a(c).is("input, select, textarea, button, option") || (b.preventDefault(), B.$holder[0].focus()))
                }
            }).on("click", "[data-pick], [data-nav], [data-clear], [data-close]", function () {
                var b = a(this), c = b.data(), d = b.hasClass(y.navDisabled) || b.hasClass(y.disabled), e = h();
                e = e && (e.type || e.href), (d || e && !a.contains(B.$root[0], e)) && B.$holder[0].focus(), !d && c.nav ? B.set("highlight", B.component.item.highlight, {nav: c.nav}) : !d && "pick" in c ? (B.set("select", c.pick), x.closeOnSelect && B.close(!0)) : c.clear ? (B.clear(), x.closeOnClear && B.close(!0)) : c.close && B.close(!0)
            })
        }

        function r() {
            var b;
            x.hiddenName === !0 ? (b = f.name, f.name = "") : (b = ["string" == typeof x.hiddenPrefix ? x.hiddenPrefix : "", "string" == typeof x.hiddenSuffix ? x.hiddenSuffix : "_submit"], b = b[0] + f.name + b[1]), B._hidden = a('<input type=hidden name="' + b + '"' + (z.data("value") || f.value ? ' value="' + B.get("select", x.formatSubmit) + '"' : "") + ">")[0], z.on("change." + w.id, function () {
                B._hidden.value = f.value ? B.get("select", x.formatSubmit) : ""
            })
        }

        function s() {
            v && l ? B.$holder.find("." + y.frame).one("transitionend", function () {
                B.$holder[0].focus()
            }) : B.$holder[0].focus()
        }

        function t(a) {
            a.stopPropagation(), z.addClass(y.target), B.$root.addClass(y.focused), B.open()
        }

        function u(a) {
            var b = a.keyCode, c = /^(8|46)$/.test(b);
            return 27 == b ? (B.close(!0), !1) : void((32 == b || c || !w.open && B.component.key[b]) && (a.preventDefault(), a.stopPropagation(), c ? B.clear().close() : B.open()))
        }

        if (!f)return b;
        var v = !1, w = {id: f.id || "P" + Math.abs(~~(Math.random() * new Date))}, x = i ? a.extend(!0, {}, i.defaults, m) : m || {}, y = a.extend({}, b.klasses(), x.klass), z = a(f), A = function () {
            return this.start()
        }, B = A.prototype = {
            constructor: A, $node: z, start: function () {
                return w && w.start ? B : (w.methods = {}, w.start = !0, w.open = !1, w.type = f.type, f.autofocus = f == h(), f.readOnly = !x.editable, f.id = f.id || w.id, "text" != f.type && (f.type = "text"), B.component = new i(B, x), B.$root = a('<div class="' + y.picker + '" id="' + f.id + '_root" />'), p(), B.$holder = a(n()).appendTo(B.$root), q(), x.formatSubmit && r(), o(), x.containerHidden ? a(x.containerHidden).append(B._hidden) : z.after(B._hidden), x.container ? a(x.container).append(B.$root) : z.after(B.$root), B.on({
                    start: B.component.onStart,
                    render: B.component.onRender,
                    stop: B.component.onStop,
                    open: B.component.onOpen,
                    close: B.component.onClose,
                    set: B.component.onSet
                }).on({
                    start: x.onStart,
                    render: x.onRender,
                    stop: x.onStop,
                    open: x.onOpen,
                    close: x.onClose,
                    set: x.onSet
                }), v = c(B.$holder[0]), f.autofocus && B.open(), B.trigger("start").trigger("render"))
            }, render: function (b) {
                return b ? (B.$holder = a(n()), q(), B.$root.html(B.$holder)) : B.$root.find("." + y.box).html(B.component.nodes(w.open)), B.trigger("render")
            }, stop: function () {
                return w.start ? (B.close(), B._hidden && B._hidden.parentNode.removeChild(B._hidden), B.$root.remove(), z.removeClass(y.input).removeData(g), setTimeout(function () {
                    z.off("." + w.id)
                }, 0), f.type = w.type, f.readOnly = !1, B.trigger("stop"), w.methods = {}, w.start = !1, B) : B
            }, open: function (c) {
                return w.open ? B : (z.addClass(y.active), e(f, "expanded", !0), setTimeout(function () {
                    B.$root.addClass(y.opened), e(B.$root[0], "hidden", !1)
                }, 0), c !== !1 && (w.open = !0, v && k.css("overflow", "hidden").css("padding-right", "+=" + d()), s(), j.on("click." + w.id + " focusin." + w.id, function (a) {
                    var b = a.target;
                    b != f && b != document && 3 != a.which && B.close(b === B.$holder[0])
                }).on("keydown." + w.id, function (c) {
                    var d = c.keyCode, e = B.component.key[d], f = c.target;
                    27 == d ? B.close(!0) : f != B.$holder[0] || !e && 13 != d ? a.contains(B.$root[0], f) && 13 == d && (c.preventDefault(), f.click()) : (c.preventDefault(), e ? b._.trigger(B.component.key.go, B, [b._.trigger(e)]) : B.$root.find("." + y.highlighted).hasClass(y.disabled) || (B.set("select", B.component.item.highlight), x.closeOnSelect && B.close(!0)))
                })), B.trigger("open"))
            }, close: function (a) {
                return a && (x.editable ? f.focus() : (B.$holder.off("focus.toOpen").focus(), setTimeout(function () {
                    B.$holder.on("focus.toOpen", t)
                }, 0))), z.removeClass(y.active), e(f, "expanded", !1), setTimeout(function () {
                    B.$root.removeClass(y.opened + " " + y.focused), e(B.$root[0], "hidden", !0)
                }, 0), w.open ? (w.open = !1, v && k.css("overflow", "").css("padding-right", "-=" + d()), j.off("." + w.id), B.trigger("close")) : B
            }, clear: function (a) {
                return B.set("clear", null, a)
            }, set: function (b, c, d) {
                var e, f, g = a.isPlainObject(b), h = g ? b : {};
                if (d = g && a.isPlainObject(c) ? c : d || {}, b) {
                    g || (h[b] = c);
                    for (e in h)f = h[e], e in B.component.item && (void 0 === f && (f = null), B.component.set(e, f, d)), ("select" == e || "clear" == e) && z.val("clear" == e ? "" : B.get(e, x.format)).trigger("change");
                    B.render()
                }
                return d.muted ? B : B.trigger("set", h)
            }, get: function (a, c) {
                if (a = a || "value", null != w[a])return w[a];
                if ("valueSubmit" == a) {
                    if (B._hidden)return B._hidden.value;
                    a = "value"
                }
                if ("value" == a)return f.value;
                if (a in B.component.item) {
                    if ("string" == typeof c) {
                        var d = B.component.get(a);
                        return d ? b._.trigger(B.component.formats.toString, B.component, [c, d]) : ""
                    }
                    return B.component.get(a)
                }
            }, on: function (b, c, d) {
                var e, f, g = a.isPlainObject(b), h = g ? b : {};
                if (b) {
                    g || (h[b] = c);
                    for (e in h)f = h[e], d && (e = "_" + e), w.methods[e] = w.methods[e] || [], w.methods[e].push(f)
                }
                return B
            }, off: function () {
                var a, b, c = arguments;
                for (a = 0, namesCount = c.length; a < namesCount; a += 1)b = c[a], b in w.methods && delete w.methods[b];
                return B
            }, trigger: function (a, c) {
                var d = function (a) {
                    var d = w.methods[a];
                    d && d.map(function (a) {
                        b._.trigger(a, B, [c])
                    })
                };
                return d("_" + a), d(a), B
            }
        };
        return new A
    }

    function c(a) {
        var b, c = "position";
        return a.currentStyle ? b = a.currentStyle[c] : window.getComputedStyle && (b = getComputedStyle(a)[c]), "fixed" == b
    }

    function d() {
        if (k.height() <= i.height())return 0;
        var b = a('<div style="visibility:hidden;width:100px" />').appendTo("body"), c = b[0].offsetWidth;
        b.css("overflow", "scroll");
        var d = a('<div style="width:100%" />').appendTo(b), e = d[0].offsetWidth;
        return b.remove(), c - e
    }

    function e(b, c, d) {
        if (a.isPlainObject(c))for (var e in c)f(b, e, c[e]); else f(b, c, d)
    }

    function f(a, b, c) {
        a.setAttribute(("role" == b ? "" : "aria-") + b, c)
    }

    function g(b, c) {
        a.isPlainObject(b) || (b = {attribute: c}), c = "";
        for (var d in b) {
            var e = ("role" == d ? "" : "aria-") + d, f = b[d];
            c += null == f ? "" : e + '="' + b[d] + '"'
        }
        return c
    }

    function h() {
        try {
            return document.activeElement
        } catch (a) {
        }
    }

    var i = a(window), j = a(document), k = a(document.documentElement), l = null != document.documentElement.style.transition;
    return b.klasses = function (a) {
        return a = a || "picker", {
            picker: a,
            opened: a + "--opened",
            focused: a + "--focused",
            input: a + "__input",
            active: a + "__input--active",
            target: a + "__input--target",
            holder: a + "__holder",
            frame: a + "__frame",
            wrap: a + "__wrap",
            box: a + "__box"
        }
    }, b._ = {
        group: function (a) {
            for (var c, d = "", e = b._.trigger(a.min, a); e <= b._.trigger(a.max, a, [e]); e += a.i)c = b._.trigger(a.item, a, [e]), d += b._.node(a.node, c[0], c[1], c[2]);
            return d
        }, node: function (b, c, d, e) {
            return c ? (c = a.isArray(c) ? c.join("") : c, d = d ? ' class="' + d + '"' : "", e = e ? " " + e : "", "<" + b + d + e + ">" + c + "</" + b + ">") : ""
        }, lead: function (a) {
            return (10 > a ? "0" : "") + a
        }, trigger: function (a, b, c) {
            return "function" == typeof a ? a.apply(b, c || []) : a
        }, digits: function (a) {
            return /\d/.test(a[1]) ? 2 : 1
        }, isDate: function (a) {
            return {}.toString.call(a).indexOf("Date") > -1 && this.isInteger(a.getDate())
        }, isInteger: function (a) {
            return {}.toString.call(a).indexOf("Number") > -1 && a % 1 === 0
        }, ariaAttr: g
    }, b.extend = function (c, d) {
        a.fn[c] = function (e, f) {
            var g = this.data(c);
            return "picker" == e ? g : g && "string" == typeof e ? b._.trigger(g[e], g, [f]) : this.each(function () {
                var f = a(this);
                f.data(c) || new b(this, c, d, e)
            })
        }, a.fn[c].defaults = d.defaults
    }, b
});
!function (a) {
    "function" == typeof define && define.amd ? define(["picker", "jquery"], a) : "object" == typeof exports ? module.exports = a(require("./picker.js"), require("jquery")) : a(Picker, jQuery)
}(function (a, b) {
    function c(a, b) {
        var c = this, d = a.$node[0], e = d.value, f = a.$node.data("value"), g = f || e, h = f ? b.formatSubmit : b.format, i = function () {
            return d.currentStyle ? "rtl" == d.currentStyle.direction : "rtl" == getComputedStyle(a.$root[0]).direction
        };
        c.settings = b, c.$node = a.$node, c.queue = {
            min: "measure create",
            max: "measure create",
            now: "now create",
            select: "parse create validate",
            highlight: "parse navigate create validate",
            view: "parse create validate viewset",
            disable: "deactivate",
            enable: "activate"
        }, c.item = {}, c.item.clear = null, c.item.disable = (b.disable || []).slice(0), c.item.enable = -function (a) {
            return a[0] === !0 ? a.shift() : -1
        }(c.item.disable), c.set("min", b.min).set("max", b.max).set("now"), g ? c.set("select", g, {
            format: h,
            defaultValue: !0
        }) : c.set("select", null).set("highlight", c.item.now), c.key = {
            40: 7, 38: -7, 39: function () {
                return i() ? -1 : 1
            }, 37: function () {
                return i() ? 1 : -1
            }, go: function (a) {
                var b = c.item.highlight, d = new Date(b.year, b.month, b.date + a);
                c.set("highlight", d, {interval: a}), this.render()
            }
        }, a.on("render", function () {
            a.$root.find("." + b.klass.selectMonth).on("change", function () {
                var c = this.value;
                c && (a.set("highlight", [a.get("view").year, c, a.get("highlight").date]), a.$root.find("." + b.klass.selectMonth).trigger("focus"))
            }), a.$root.find("." + b.klass.selectYear).on("change", function () {
                var c = this.value;
                c && (a.set("highlight", [c, a.get("view").month, a.get("highlight").date]), a.$root.find("." + b.klass.selectYear).trigger("focus"))
            })
        }, 1).on("open", function () {
            var d = "";
            c.disabled(c.get("now")) && (d = ":not(." + b.klass.buttonToday + ")"), a.$root.find("button" + d + ", select").attr("disabled", !1)
        }, 1).on("close", function () {
            a.$root.find("button, select").attr("disabled", !0)
        }, 1)
    }

    var d = 7, e = 6, f = a._;
    c.prototype.set = function (a, b, c) {
        var d = this, e = d.item;
        return null === b ? ("clear" == a && (a = "select"), e[a] = b, d) : (e["enable" == a ? "disable" : "flip" == a ? "enable" : a] = d.queue[a].split(" ").map(function (e) {
            return b = d[e](a, b, c)
        }).pop(), "select" == a ? d.set("highlight", e.select, c) : "highlight" == a ? d.set("view", e.highlight, c) : a.match(/^(flip|min|max|disable|enable)$/) && (e.select && d.disabled(e.select) && d.set("select", e.select, c), e.highlight && d.disabled(e.highlight) && d.set("highlight", e.highlight, c)), d)
    }, c.prototype.get = function (a) {
        return this.item[a]
    }, c.prototype.create = function (a, c, d) {
        var e, g = this;
        return c = void 0 === c ? a : c, c == -(1 / 0) || c == 1 / 0 ? e = c : b.isPlainObject(c) && f.isInteger(c.pick) ? c = c.obj : b.isArray(c) ? (c = new Date(c[0], c[1], c[2]), c = f.isDate(c) ? c : g.create().obj) : c = f.isInteger(c) || f.isDate(c) ? g.normalize(new Date(c), d) : g.now(a, c, d), {
            year: e || c.getFullYear(),
            month: e || c.getMonth(),
            date: e || c.getDate(),
            day: e || c.getDay(),
            obj: e || c,
            pick: e || c.getTime()
        }
    }, c.prototype.createRange = function (a, c) {
        var d = this, e = function (a) {
            return a === !0 || b.isArray(a) || f.isDate(a) ? d.create(a) : a
        };
        return f.isInteger(a) || (a = e(a)), f.isInteger(c) || (c = e(c)), f.isInteger(a) && b.isPlainObject(c) ? a = [c.year, c.month, c.date + a] : f.isInteger(c) && b.isPlainObject(a) && (c = [a.year, a.month, a.date + c]), {
            from: e(a),
            to: e(c)
        }
    }, c.prototype.withinRange = function (a, b) {
        return a = this.createRange(a.from, a.to), b.pick >= a.from.pick && b.pick <= a.to.pick
    }, c.prototype.overlapRanges = function (a, b) {
        var c = this;
        return a = c.createRange(a.from, a.to), b = c.createRange(b.from, b.to), c.withinRange(a, b.from) || c.withinRange(a, b.to) || c.withinRange(b, a.from) || c.withinRange(b, a.to)
    }, c.prototype.now = function (a, b, c) {
        return b = new Date, c && c.rel && b.setDate(b.getDate() + c.rel), this.normalize(b, c)
    }, c.prototype.navigate = function (a, c, d) {
        var e, f, g, h, i = b.isArray(c), j = b.isPlainObject(c), k = this.item.view;
        if (i || j) {
            for (j ? (f = c.year, g = c.month, h = c.date) : (f = +c[0], g = +c[1], h = +c[2]), d && d.nav && k && k.month !== g && (f = k.year, g = k.month), e = new Date(f, g + (d && d.nav ? d.nav : 0), 1), f = e.getFullYear(), g = e.getMonth(); new Date(f, g, h).getMonth() !== g;)h -= 1;
            c = [f, g, h]
        }
        return c
    }, c.prototype.normalize = function (a) {
        return a.setHours(0, 0, 0, 0), a
    }, c.prototype.measure = function (a, b) {
        var c = this;
        return b ? "string" == typeof b ? b = c.parse(a, b) : f.isInteger(b) && (b = c.now(a, b, {rel: b})) : b = "min" == a ? -(1 / 0) : 1 / 0, b
    }, c.prototype.viewset = function (a, b) {
        return this.create([b.year, b.month, 1])
    }, c.prototype.validate = function (a, c, d) {
        var e, g, h, i, j = this, k = c, l = d && d.interval ? d.interval : 1, m = -1 === j.item.enable, n = j.item.min, o = j.item.max, p = m && j.item.disable.filter(function (a) {
                if (b.isArray(a)) {
                    var d = j.create(a).pick;
                    d < c.pick ? e = !0 : d > c.pick && (g = !0)
                }
                return f.isInteger(a)
            }).length;
        if ((!d || !d.nav && !d.defaultValue) && (!m && j.disabled(c) || m && j.disabled(c) && (p || e || g) || !m && (c.pick <= n.pick || c.pick >= o.pick)))for (m && !p && (!g && l > 0 || !e && 0 > l) && (l *= -1); j.disabled(c) && (Math.abs(l) > 1 && (c.month < k.month || c.month > k.month) && (c = k, l = l > 0 ? 1 : -1), c.pick <= n.pick ? (h = !0, l = 1, c = j.create([n.year, n.month, n.date + (c.pick === n.pick ? 0 : -1)])) : c.pick >= o.pick && (i = !0, l = -1, c = j.create([o.year, o.month, o.date + (c.pick === o.pick ? 0 : 1)])), !h || !i);)c = j.create([c.year, c.month, c.date + l]);
        return c
    }, c.prototype.disabled = function (a) {
        var c = this, d = c.item.disable.filter(function (d) {
            return f.isInteger(d) ? a.day === (c.settings.firstDay ? d : d - 1) % 7 : b.isArray(d) || f.isDate(d) ? a.pick === c.create(d).pick : b.isPlainObject(d) ? c.withinRange(d, a) : void 0
        });
        return d = d.length && !d.filter(function (a) {
                return b.isArray(a) && "inverted" == a[3] || b.isPlainObject(a) && a.inverted
            }).length, -1 === c.item.enable ? !d : d || a.pick < c.item.min.pick || a.pick > c.item.max.pick
    }, c.prototype.parse = function (a, b, c) {
        var d = this, e = {};
        return b && "string" == typeof b ? (c && c.format || (c = c || {}, c.format = d.settings.format), d.formats.toArray(c.format).map(function (a) {
            var c = d.formats[a], g = c ? f.trigger(c, d, [b, e]) : a.replace(/^!/, "").length;
            c && (e[a] = b.substr(0, g)), b = b.substr(g)
        }), [e.yyyy || e.yy, +(e.mm || e.m) - 1, e.dd || e.d]) : b
    }, c.prototype.formats = function () {
        function a(a, b, c) {
            var d = a.match(/[^\x00-\x7F]+|\w+/)[0];
            return c.mm || c.m || (c.m = b.indexOf(d) + 1), d.length
        }

        function b(a) {
            return a.match(/\w+/)[0].length
        }

        return {
            d: function (a, b) {
                return a ? f.digits(a) : b.date
            }, dd: function (a, b) {
                return a ? 2 : f.lead(b.date)
            }, ddd: function (a, c) {
                return a ? b(a) : this.settings.weekdaysShort[c.day]
            }, dddd: function (a, c) {
                return a ? b(a) : this.settings.weekdaysFull[c.day]
            }, m: function (a, b) {
                return a ? f.digits(a) : b.month + 1
            }, mm: function (a, b) {
                return a ? 2 : f.lead(b.month + 1)
            }, mmm: function (b, c) {
                var d = this.settings.monthsShort;
                return b ? a(b, d, c) : d[c.month]
            }, mmmm: function (b, c) {
                var d = this.settings.monthsFull;
                return b ? a(b, d, c) : d[c.month]
            }, yy: function (a, b) {
                return a ? 2 : ("" + b.year).slice(2)
            }, yyyy: function (a, b) {
                return a ? 4 : b.year
            }, toArray: function (a) {
                return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)
            }, toString: function (a, b) {
                var c = this;
                return c.formats.toArray(a).map(function (a) {
                    return f.trigger(c.formats[a], c, [0, b]) || a.replace(/^!/, "")
                }).join("")
            }
        }
    }(), c.prototype.isDateExact = function (a, c) {
        var d = this;
        return f.isInteger(a) && f.isInteger(c) || "boolean" == typeof a && "boolean" == typeof c ? a === c : (f.isDate(a) || b.isArray(a)) && (f.isDate(c) || b.isArray(c)) ? d.create(a).pick === d.create(c).pick : b.isPlainObject(a) && b.isPlainObject(c) ? d.isDateExact(a.from, c.from) && d.isDateExact(a.to, c.to) : !1
    }, c.prototype.isDateOverlap = function (a, c) {
        var d = this, e = d.settings.firstDay ? 1 : 0;
        return f.isInteger(a) && (f.isDate(c) || b.isArray(c)) ? (a = a % 7 + e, a === d.create(c).day + 1) : f.isInteger(c) && (f.isDate(a) || b.isArray(a)) ? (c = c % 7 + e, c === d.create(a).day + 1) : b.isPlainObject(a) && b.isPlainObject(c) ? d.overlapRanges(a, c) : !1
    }, c.prototype.flipEnable = function (a) {
        var b = this.item;
        b.enable = a || (-1 == b.enable ? 1 : -1)
    }, c.prototype.deactivate = function (a, c) {
        var d = this, e = d.item.disable.slice(0);
        return "flip" == c ? d.flipEnable() : c === !1 ? (d.flipEnable(1), e = []) : c === !0 ? (d.flipEnable(-1), e = []) : c.map(function (a) {
            for (var c, g = 0; g < e.length; g += 1)if (d.isDateExact(a, e[g])) {
                c = !0;
                break
            }
            c || (f.isInteger(a) || f.isDate(a) || b.isArray(a) || b.isPlainObject(a) && a.from && a.to) && e.push(a)
        }), e
    }, c.prototype.activate = function (a, c) {
        var d = this, e = d.item.disable, g = e.length;
        return "flip" == c ? d.flipEnable() : c === !0 ? (d.flipEnable(1), e = []) : c === !1 ? (d.flipEnable(-1), e = []) : c.map(function (a) {
            var c, h, i, j;
            for (i = 0; g > i; i += 1) {
                if (h = e[i], d.isDateExact(h, a)) {
                    c = e[i] = null, j = !0;
                    break
                }
                if (d.isDateOverlap(h, a)) {
                    b.isPlainObject(a) ? (a.inverted = !0, c = a) : b.isArray(a) ? (c = a, c[3] || c.push("inverted")) : f.isDate(a) && (c = [a.getFullYear(), a.getMonth(), a.getDate(), "inverted"]);
                    break
                }
            }
            if (c)for (i = 0; g > i; i += 1)if (d.isDateExact(e[i], a)) {
                e[i] = null;
                break
            }
            if (j)for (i = 0; g > i; i += 1)if (d.isDateOverlap(e[i], a)) {
                e[i] = null;
                break
            }
            c && e.push(c)
        }), e.filter(function (a) {
            return null != a
        })
    }, c.prototype.nodes = function (a) {
        var b = this, c = b.settings, g = b.item, h = g.now, i = g.select, j = g.highlight, k = g.view, l = g.disable, m = g.min, n = g.max, o = function (a, b) {
            return c.firstDay && (a.push(a.shift()), b.push(b.shift())), f.node("thead", f.node("tr", f.group({
                min: 0,
                max: d - 1,
                i: 1,
                node: "th",
                item: function (d) {
                    return [a[d], c.klass.weekdays, 'scope=col title="' + b[d] + '"']
                }
            })))
        }((c.showWeekdaysFull ? c.weekdaysFull : c.weekdaysShort).slice(0), c.weekdaysFull.slice(0)), p = function (a) {
            return f.node("div", " ", c.klass["nav" + (a ? "Next" : "Prev")] + (a && k.year >= n.year && k.month >= n.month || !a && k.year <= m.year && k.month <= m.month ? " " + c.klass.navDisabled : ""), "data-nav=" + (a || -1) + " " + f.ariaAttr({
                    role: "button",
                    controls: b.$node[0].id + "_table"
                }) + ' title="' + (a ? c.labelMonthNext : c.labelMonthPrev) + '"')
        }, q = function () {
            var d = c.showMonthsShort ? c.monthsShort : c.monthsFull;
            return c.selectMonths ? f.node("select", f.group({
                min: 0,
                max: 11,
                i: 1,
                node: "option",
                item: function (a) {
                    return [d[a], 0, "value=" + a + (k.month == a ? " selected" : "") + (k.year == m.year && a < m.month || k.year == n.year && a > n.month ? " disabled" : "")]
                }
            }), c.klass.selectMonth, (a ? "" : "disabled") + " " + f.ariaAttr({controls: b.$node[0].id + "_table"}) + ' title="' + c.labelMonthSelect + '"') : f.node("div", d[k.month], c.klass.month)
        }, r = function () {
            var d = k.year, e = c.selectYears === !0 ? 5 : ~~(c.selectYears / 2);
            if (e) {
                var g = m.year, h = n.year, i = d - e, j = d + e;
                if (g > i && (j += g - i, i = g), j > h) {
                    var l = i - g, o = j - h;
                    i -= l > o ? o : l, j = h
                }
                return f.node("select", f.group({
                    min: i, max: j, i: 1,
                    node: "option", item: function (a) {
                        return [a, 0, "value=" + a + (d == a ? " selected" : "")]
                    }
                }), c.klass.selectYear, (a ? "" : "disabled") + " " + f.ariaAttr({controls: b.$node[0].id + "_table"}) + ' title="' + c.labelYearSelect + '"')
            }
            return f.node("div", d, c.klass.year)
        };
        return f.node("div", (c.selectYears ? r() + q() : q() + r()) + p() + p(1), c.klass.header) + f.node("table", o + f.node("tbody", f.group({
                    min: 0,
                    max: e - 1,
                    i: 1,
                    node: "tr",
                    item: function (a) {
                        var e = c.firstDay && 0 === b.create([k.year, k.month, 1]).day ? -7 : 0;
                        return [f.group({
                            min: d * a - k.day + e + 1, max: function () {
                                return this.min + d - 1
                            }, i: 1, node: "td", item: function (a) {
                                a = b.create([k.year, k.month, a + (c.firstDay ? 1 : 0)]);
                                var d = i && i.pick == a.pick, e = j && j.pick == a.pick, g = l && b.disabled(a) || a.pick < m.pick || a.pick > n.pick, o = f.trigger(b.formats.toString, b, [c.format, a]);
                                return [f.node("div", a.date, function (b) {
                                    return b.push(k.month == a.month ? c.klass.infocus : c.klass.outfocus), h.pick == a.pick && b.push(c.klass.now), d && b.push(c.klass.selected), e && b.push(c.klass.highlighted), g && b.push(c.klass.disabled), b.join(" ")
                                }([c.klass.day]), "data-pick=" + a.pick + " " + f.ariaAttr({
                                        role: "gridcell",
                                        label: o,
                                        selected: d && b.$node.val() === o ? !0 : null,
                                        activedescendant: e ? !0 : null,
                                        disabled: g ? !0 : null
                                    })), "", f.ariaAttr({role: "presentation"})]
                            }
                        })]
                    }
                })), c.klass.table, 'id="' + b.$node[0].id + '_table" ' + f.ariaAttr({
                    role: "grid",
                    controls: b.$node[0].id,
                    readonly: !0
                })) + f.node("div", f.node("button", c.today, c.klass.buttonToday, "type=button data-pick=" + h.pick + (a && !b.disabled(h) ? "" : " disabled") + " " + f.ariaAttr({controls: b.$node[0].id})) + f.node("button", c.clear, c.klass.buttonClear, "type=button data-clear=1" + (a ? "" : " disabled") + " " + f.ariaAttr({controls: b.$node[0].id})) + f.node("button", c.close, c.klass.buttonClose, "type=button data-close=true " + (a ? "" : " disabled") + " " + f.ariaAttr({controls: b.$node[0].id})), c.klass.footer)
    }, c.defaults = function (a) {
        return {
            labelMonthNext: "Next month",
            labelMonthPrev: "Previous month",
            labelMonthSelect: "Select a month",
            labelYearSelect: "Select a year",
            monthsFull: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            weekdaysFull: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            weekdaysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            today: "Today",
            clear: "Clear",
            close: "Close",
            closeOnSelect: !0,
            closeOnClear: !0,
            format: "d mmmm, yyyy",
            klass: {
                table: a + "table",
                header: a + "header",
                navPrev: a + "nav--prev",
                navNext: a + "nav--next",
                navDisabled: a + "nav--disabled",
                month: a + "month",
                year: a + "year",
                selectMonth: a + "select--month",
                selectYear: a + "select--year",
                weekdays: a + "weekday",
                day: a + "day",
                disabled: a + "day--disabled",
                selected: a + "day--selected",
                highlighted: a + "day--highlighted",
                now: a + "day--today",
                infocus: a + "day--infocus",
                outfocus: a + "day--outfocus",
                footer: a + "footer",
                buttonClear: a + "button--clear",
                buttonToday: a + "button--today",
                buttonClose: a + "button--close"
            }
        }
    }(a.klasses().picker + "__"), a.extend("pickadate", c)
});
(function (a) {
    var b = "0.9.3";
    var c = {
        isMsie: function () {
            var a = /(msie) ([\w.]+)/i.exec(navigator.userAgent);
            return a ? parseInt(a[2], 10) : false
        }, isBlankString: function (a) {
            return !a || /^\s*$/.test(a)
        }, escapeRegExChars: function (a) {
            return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
        }, isString: function (a) {
            return typeof a === "string"
        }, isNumber: function (a) {
            return typeof a === "number"
        }, isArray: a.isArray, isFunction: a.isFunction, isObject: a.isPlainObject, isUndefined: function (a) {
            return typeof a === "undefined"
        }, bind: a.proxy, bindAll: function (b) {
            var c;
            for (var d in b) {
                a.isFunction(c = b[d]) && (b[d] = a.proxy(c, b))
            }
        }, indexOf: function (a, b) {
            for (var c = 0; c < a.length; c++) {
                if (a[c] === b) {
                    return c
                }
            }
            return -1
        }, each: a.each, map: a.map, filter: a.grep, every: function (b, c) {
            var d = true;
            if (!b) {
                return d
            }
            a.each(b, function (a, e) {
                if (!(d = c.call(null, e, a, b))) {
                    return false
                }
            });
            return !!d
        }, some: function (b, c) {
            var d = false;
            if (!b) {
                return d
            }
            a.each(b, function (a, e) {
                if (d = c.call(null, e, a, b)) {
                    return false
                }
            });
            return !!d
        }, mixin: a.extend, getUniqueId: function () {
            var a = 0;
            return function () {
                return a++
            }
        }(), defer: function (a) {
            setTimeout(a, 0)
        }, debounce: function (a, b, c) {
            var d, e;
            return function () {
                var f = this, g = arguments, h, i;
                h = function () {
                    d = null;
                    if (!c) {
                        e = a.apply(f, g)
                    }
                };
                i = c && !d;
                clearTimeout(d);
                d = setTimeout(h, b);
                if (i) {
                    e = a.apply(f, g)
                }
                return e
            }
        }, throttle: function (a, b) {
            var c, d, e, f, g, h;
            g = 0;
            h = function () {
                g = new Date;
                e = null;
                f = a.apply(c, d)
            };
            return function () {
                var i = new Date, j = b - (i - g);
                c = this;
                d = arguments;
                if (j <= 0) {
                    clearTimeout(e);
                    e = null;
                    g = i;
                    f = a.apply(c, d)
                } else if (!e) {
                    e = setTimeout(h, j)
                }
                return f
            }
        }, tokenizeQuery: function (b) {
            return a.trim(b).toLowerCase().split(/[\s]+/)
        }, tokenizeText: function (b) {
            return a.trim(b).toLowerCase().split(/[\s\-_]+/)
        }, getProtocol: function () {
            return location.protocol
        }, noop: function () {
        }
    };
    var d = function () {
        var a = /\s+/;
        return {
            on: function (b, c) {
                var d;
                if (!c) {
                    return this
                }
                this._callbacks = this._callbacks || {};
                b = b.split(a);
                while (d = b.shift()) {
                    this._callbacks[d] = this._callbacks[d] || [];
                    this._callbacks[d].push(c)
                }
                return this
            }, trigger: function (b, c) {
                var d, e;
                if (!this._callbacks) {
                    return this
                }
                b = b.split(a);
                while (d = b.shift()) {
                    if (e = this._callbacks[d]) {
                        for (var f = 0; f < e.length; f += 1) {
                            e[f].call(this, {type: d, data: c})
                        }
                    }
                }
                return this
            }
        }
    }();
    var e = function () {
        var b = "typeahead:";

        function d(b) {
            if (!b || !b.el) {
                a.error("EventBus initialized without el")
            }
            this.$el = a(b.el)
        }

        c.mixin(d.prototype, {
            trigger: function (a) {
                var c = [].slice.call(arguments, 1);
                this.$el.trigger(b + a, c)
            }
        });
        return d
    }();
    var f = function () {
        var a, b;
        try {
            a = window.localStorage;
            a.setItem("~~~", "!");
            a.removeItem("~~~")
        } catch (b) {
            a = null
        }
        function d(a) {
            this.prefix = ["__", a, "__"].join("");
            this.ttlKey = "__ttl__";
            this.keyMatcher = new RegExp("^" + this.prefix)
        }

        if (a && window.JSON) {
            b = {
                _prefix: function (a) {
                    return this.prefix + a
                }, _ttlKey: function (a) {
                    return this._prefix(a) + this.ttlKey
                }, get: function (b) {
                    if (this.isExpired(b)) {
                        this.remove(b)
                    }
                    return g(a.getItem(this._prefix(b)))
                }, set: function (b, d, g) {
                    if (c.isNumber(g)) {
                        a.setItem(this._ttlKey(b), f(e() + g))
                    } else {
                        a.removeItem(this._ttlKey(b))
                    }
                    return a.setItem(this._prefix(b), f(d))
                }, remove: function (b) {
                    a.removeItem(this._ttlKey(b));
                    a.removeItem(this._prefix(b));
                    return this
                }, clear: function () {
                    var b, c, d = [], e = a.length;
                    for (b = 0; b < e; b++) {
                        if ((c = a.key(b)).match(this.keyMatcher)) {
                            d.push(c.replace(this.keyMatcher, ""))
                        }
                    }
                    for (b = d.length; b--;) {
                        this.remove(d[b])
                    }
                    return this
                }, isExpired: function (b) {
                    var d = g(a.getItem(this._ttlKey(b)));
                    return c.isNumber(d) && e() > d ? true : false
                }
            }
        } else {
            b = {get: c.noop, set: c.noop, remove: c.noop, clear: c.noop, isExpired: c.noop}
        }
        c.mixin(d.prototype, b);
        return d;
        function e() {
            return (new Date).getTime()
        }

        function f(a) {
            return JSON.stringify(c.isUndefined(a) ? null : a)
        }

        function g(a) {
            return JSON.parse(a)
        }
    }();
    var g = function () {
        function a(a) {
            c.bindAll(this);
            a = a || {};
            this.sizeLimit = a.sizeLimit || 10;
            this.cache = {};
            this.cachedKeysByAge = []
        }

        c.mixin(a.prototype, {
            get: function (a) {
                return this.cache[a]
            }, set: function (a, b) {
                var c;
                if (this.cachedKeysByAge.length === this.sizeLimit) {
                    c = this.cachedKeysByAge.shift();
                    delete this.cache[c]
                }
                this.cache[a] = b;
                this.cachedKeysByAge.push(a)
            }
        });
        return a
    }();
    var h = function () {
        var b = 0, d = {}, e, f;

        function h(a) {
            c.bindAll(this);
            a = c.isString(a) ? {url: a} : a;
            f = f || new g;
            e = c.isNumber(a.maxParallelRequests) ? a.maxParallelRequests : e || 6;
            this.url = a.url;
            this.wildcard = a.wildcard || "%QUERY";
            this.filter = a.filter;
            this.replace = a.replace;
            this.ajaxSettings = {
                type: "get",
                cache: a.cache,
                timeout: a.timeout,
                dataType: a.dataType || "json",
                beforeSend: a.beforeSend
            };
            this._get = (/^throttle$/i.test(a.rateLimitFn) ? c.throttle : c.debounce)(this._get, a.rateLimitWait || 300)
        }

        c.mixin(h.prototype, {
            _get: function (a, b) {
                var c = this;
                if (k()) {
                    this._sendRequest(a).done(d)
                } else {
                    this.onDeckRequestArgs = [].slice.call(arguments, 0)
                }
                function d(d) {
                    var e = c.filter ? c.filter(d) : d;
                    b && b(e);
                    f.set(a, d)
                }
            }, _sendRequest: function (b) {
                var c = this, e = d[b];
                if (!e) {
                    i();
                    e = d[b] = a.ajax(b, this.ajaxSettings).always(f)
                }
                return e;
                function f() {
                    j();
                    d[b] = null;
                    if (c.onDeckRequestArgs) {
                        c._get.apply(c, c.onDeckRequestArgs);
                        c.onDeckRequestArgs = null
                    }
                }
            }, get: function (a, b) {
                var d = this, e = encodeURIComponent(a || ""), g, h;
                b = b || c.noop;
                g = this.replace ? this.replace(this.url, e) : this.url.replace(this.wildcard, e);
                if (h = f.get(g)) {
                    c.defer(function () {
                        b(d.filter ? d.filter(h) : h)
                    })
                } else {
                    this._get(g, b)
                }
                return !!h
            }
        });
        return h;
        function i() {
            b++
        }

        function j() {
            b--
        }

        function k() {
            return b < e
        }
    }();
    var i = function () {
        var d = {thumbprint: "thumbprint", protocol: "protocol", itemHash: "itemHash", adjacencyList: "adjacencyList"};

        function e(b) {
            c.bindAll(this);
            if (c.isString(b.template) && !b.engine) {
                a.error("no template engine specified")
            }
            if (!b.local && !b.prefetch && !b.remote) {
                a.error("one of local, prefetch, or remote is required")
            }
            this.name = b.name || c.getUniqueId();
            this.limit = b.limit || 5;
            this.hint = typeof b.limit == "undefined" ? true : b.limit;
            this.minLength = b.minLength || 1;
            this.header = b.header;
            this.footer = b.footer;
            this.valueKey = b.valueKey || "value";
            this.template = g(b.template, b.engine, this.valueKey);
            this.local = b.local;
            this.prefetch = b.prefetch;
            this.remote = b.remote;
            this.itemHash = {};
            this.adjacencyList = {};
            this.storage = b.name ? new f(b.name) : null
        }

        c.mixin(e.prototype, {
            _processLocalData: function (a) {
                this._mergeProcessedData(this._processData(a))
            }, _loadPrefetchData: function (e) {
                var f = this, g = b + (e.thumbprint || ""), h, i, j, k, l, m;
                if (this.storage) {
                    h = this.storage.get(d.thumbprint);
                    i = this.storage.get(d.protocol);
                    j = this.storage.get(d.itemHash);
                    k = this.storage.get(d.adjacencyList)
                }
                l = h !== g || i !== c.getProtocol();
                e = c.isString(e) ? {url: e} : e;
                e.ttl = c.isNumber(e.ttl) ? e.ttl : 24 * 60 * 60 * 1e3;
                if (j && k && !l) {
                    this._mergeProcessedData({itemHash: j, adjacencyList: k});
                    m = a.Deferred().resolve()
                } else {
                    m = a.getJSON(e.url).done(n)
                }
                return m;
                function n(a) {
                    var b = e.filter ? e.filter(a) : a, h = f._processData(b), i = h.itemHash, j = h.adjacencyList;
                    if (f.storage) {
                        f.storage.set(d.itemHash, i, e.ttl);
                        f.storage.set(d.adjacencyList, j, e.ttl);
                        f.storage.set(d.thumbprint, g, e.ttl);
                        f.storage.set(d.protocol, c.getProtocol(), e.ttl)
                    }
                    f._mergeProcessedData(h)
                }
            }, _transformDatum: function (a) {
                var b = c.isString(a) ? a : a[this.valueKey], d = a.tokens || c.tokenizeText(b), e = {
                    value: b,
                    tokens: d
                };
                if (c.isString(a)) {
                    e.datum = {};
                    e.datum[this.valueKey] = a
                } else {
                    e.datum = a
                }
                e.tokens = c.filter(e.tokens, function (a) {
                    return !c.isBlankString(a)
                });
                e.tokens = c.map(e.tokens, function (a) {
                    return a.toLowerCase()
                });
                return e
            }, _processData: function (a) {
                var b = this, d = {}, e = {};
                c.each(a, function (a, f) {
                    var g = b._transformDatum(f), h = c.getUniqueId(g.value);
                    d[h] = g;
                    c.each(g.tokens, function (a, b) {
                        var d = b.charAt(0), f = e[d] || (e[d] = [h]);
                        !~c.indexOf(f, h) && f.push(h)
                    })
                });
                return {itemHash: d, adjacencyList: e}
            }, _mergeProcessedData: function (a) {
                var b = this;
                c.mixin(this.itemHash, a.itemHash);
                c.each(a.adjacencyList, function (a, c) {
                    var d = b.adjacencyList[a];
                    b.adjacencyList[a] = d ? d.concat(c) : c
                })
            }, _getAllLocalSuggestions: function () {
                return a.map(this.itemHash, function (a) {
                    return a
                })
            }, _getLocalSuggestions: function (a) {
                var b = this, d = [], e = [], f, g = [];
                c.each(a, function (a, b) {
                    var e = b.charAt(0);
                    !~c.indexOf(d, e) && d.push(e)
                });
                c.each(d, function (a, c) {
                    var d = b.adjacencyList[c];
                    if (!d) {
                        return false
                    }
                    e.push(d);
                    if (!f || d.length < f.length) {
                        f = d
                    }
                });
                if (e.length < d.length) {
                    return []
                }
                c.each(f, function (d, f) {
                    var h = b.itemHash[f], i, j;
                    i = c.every(e, function (a) {
                        return ~c.indexOf(a, f)
                    });
                    j = i && c.every(a, function (a) {
                            return c.some(h.tokens, function (b) {
                                return b.indexOf(a) === 0
                            })
                        });
                    j && g.push(h)
                });
                return g
            }, initialize: function () {
                var b;
                this.local && this._processLocalData(this.local);
                this.transport = this.remote ? new h(this.remote) : null;
                b = this.prefetch ? this._loadPrefetchData(this.prefetch) : a.Deferred().resolve();
                this.local = this.prefetch = this.remote = null;
                this.initialize = function () {
                    return b
                };
                return b
            }, getAllSuggestions: function (a) {
                var b = this, c, d = false;
                c = this._getAllLocalSuggestions();
                !d && a && a(c)
            }, getSuggestions: function (a, b) {
                var d = this, e, f, g = false;
                if (a.length < this.minLength) {
                    return
                }
                e = c.tokenizeQuery(a);
                f = this._getLocalSuggestions(e).slice(0, this.limit);
                if (f.length < this.limit && this.transport) {
                    g = this.transport.get(a, h)
                }
                !g && b && b(f);
                function h(a) {
                    f = f.slice(0);
                    c.each(a, function (a, b) {
                        var e = d._transformDatum(b), g;
                        g = c.some(f, function (a) {
                            return e.value === a.value
                        });
                        !g && f.push(e);
                        return f.length < d.limit
                    });
                    b && b(f)
                }
            }
        });
        return e;
        function g(a, b, d) {
            var e, f;
            if (c.isFunction(a)) {
                e = a
            } else if (c.isString(a)) {
                f = b.compile(a);
                e = c.bind(f.render, f)
            } else {
                e = function (a) {
                    return "<p>" + a[d] + "</p>"
                }
            }
            return e
        }
    }();
    var j = function () {
        function b(b) {
            var d = this;
            c.bindAll(this);
            this.specialKeyCodeMap = {9: "tab", 27: "esc", 37: "left", 39: "right", 13: "enter", 38: "up", 40: "down"};
            this.$hint = a(b.hint);
            this.$input = a(b.input).on("blur.tt", this._handleBlur).on("focus.tt", this._handleFocus).on("keydown.tt", this._handleSpecialKeyEvent);
            if (!c.isMsie()) {
                this.$input.on("input.tt", this._compareQueryToInputValue)
            } else {
                this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function (a) {
                    if (d.specialKeyCodeMap[a.which || a.keyCode]) {
                        return
                    }
                    c.defer(d._compareQueryToInputValue)
                })
            }
            this.query = this.$input.val();
            this.$overflowHelper = e(this.$input)
        }

        c.mixin(b.prototype, d, {
            _handleFocus: function () {
                this.trigger("focused")
            }, _handleBlur: function () {
                this.trigger("blured")
            }, _handleSpecialKeyEvent: function (a) {
                var b = this.specialKeyCodeMap[a.which || a.keyCode];
                b && this.trigger(b + "Keyed", a)
            }, _compareQueryToInputValue: function () {
                var a = this.getInputValue(), b = f(this.query, a), c = b ? this.query.length !== a.length : false;
                if (c) {
                    this.trigger("whitespaceChanged", {value: this.query})
                } else if (!b) {
                    this.trigger("queryChanged", {value: this.query = a})
                }
            }, destroy: function () {
                this.$hint.off(".tt");
                this.$input.off(".tt");
                this.$hint = this.$input = this.$overflowHelper = null
            }, focus: function () {
                this.$input.focus()
            }, blur: function () {
                this.$input.blur()
            }, getQuery: function () {
                return this.query
            }, setQuery: function (a) {
                this.query = a
            }, getInputValue: function () {
                return this.$input.val()
            }, setInputValue: function (a, b) {
                this.$input.val(a);
                !b && this._compareQueryToInputValue()
            }, getHintValue: function () {
                return this.$hint.val()
            }, setHintValue: function (a) {
                this.$hint.val(a)
            }, getLanguageDirection: function () {
                return (this.$input.css("direction") || "ltr").toLowerCase()
            }, isOverflow: function () {
                this.$overflowHelper.text(this.getInputValue());
                return this.$overflowHelper.width() > this.$input.width()
            }, isCursorAtEnd: function () {
                var a = this.$input.val().length, b = this.$input[0].selectionStart, d;
                if (c.isNumber(b)) {
                    return b === a
                } else if (document.selection) {
                    d = document.selection.createRange();
                    d.moveStart("character", -a);
                    return a === d.text.length
                }
                return true
            }
        });
        return b;
        function e(b) {
            return a("<span></span>").css({
                position: "absolute",
                left: "-9999px",
                visibility: "hidden",
                whiteSpace: "nowrap",
                fontFamily: b.css("font-family"),
                fontSize: b.css("font-size"),
                fontStyle: b.css("font-style"),
                fontVariant: b.css("font-variant"),
                fontWeight: b.css("font-weight"),
                wordSpacing: b.css("word-spacing"),
                letterSpacing: b.css("letter-spacing"),
                textIndent: b.css("text-indent"),
                textRendering: b.css("text-rendering"),
                textTransform: b.css("text-transform")
            }).insertAfter(b)
        }

        function f(a, b) {
            a = (a || "").replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
            b = (b || "").replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
            return a === b
        }
    }();
    var k = function () {
        var b = {suggestionsList: '<span class="tt-suggestions"></span>'}, e = {
            suggestionsList: {display: "block"},
            suggestion: {whiteSpace: "nowrap", cursor: "pointer"},
            suggestionChild: {whiteSpace: "normal"}
        };

        function f(b) {
            c.bindAll(this);
            this.isOpen = false;
            this.isEmpty = true;
            this.isMouseOverDropdown = false;
            this.$menu = a(b.menu).on("mouseenter.tt", this._handleMouseenter).on("mouseleave.tt", this._handleMouseleave).on("click.tt", ".tt-suggestion", this._handleSelection).on("mouseover.tt", ".tt-suggestion", this._handleMouseover)
        }

        c.mixin(f.prototype, d, {
            _handleMouseenter: function () {
                this.isMouseOverDropdown = true
            }, _handleMouseleave: function () {
                this.isMouseOverDropdown = false
            }, _handleMouseover: function (b) {
                var c = a(b.currentTarget);
                this._getSuggestions().removeClass("tt-is-under-cursor");
                c.addClass("tt-is-under-cursor")
            }, _handleSelection: function (b) {
                var c = a(b.currentTarget);
                this.trigger("suggestionSelected", g(c))
            }, _show: function () {
                this.$menu.css("display", "block")
            }, _hide: function () {
                this.$menu.hide()
            }, _moveCursor: function (a) {
                var b, c, d, e;
                if (!this.isVisible()) {
                    return
                }
                b = this._getSuggestions();
                c = b.filter(".tt-is-under-cursor");
                c.removeClass("tt-is-under-cursor");
                d = b.index(c) + a;
                d = (d + 1) % (b.length + 1) - 1;
                if (d === -1) {
                    this.trigger("cursorRemoved");
                    return
                } else if (d < -1) {
                    d = b.length - 1
                }
                e = b.eq(d).addClass("tt-is-under-cursor");
                this._ensureVisibility(e);
                this.trigger("cursorMoved", g(e))
            }, _getSuggestions: function () {
                return this.$menu.find(".tt-suggestions > .tt-suggestion")
            }, _ensureVisibility: function (a) {
                var b = this.$menu.height() + parseInt(this.$menu.css("paddingTop"), 10) + parseInt(this.$menu.css("paddingBottom"), 10), c = this.$menu.scrollTop(), d = a.position().top, e = d + a.outerHeight(true);
                if (d < 0) {
                    this.$menu.scrollTop(c + d)
                } else if (b < e) {
                    this.$menu.scrollTop(c + (e - b))
                }
            }, destroy: function () {
                this.$menu.off(".tt");
                this.$menu = null
            }, isVisible: function () {
                return this.isOpen && !this.isEmpty
            }, closeUnlessMouseIsOverDropdown: function () {
                if (!this.isMouseOverDropdown) {
                    this.close()
                }
            }, close: function () {
                if (this.isOpen) {
                    this.isOpen = false;
                    this.isMouseOverDropdown = false;
                    this._hide();
                    this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor");
                    this.trigger("closed")
                }
            }, open: function () {
                if (!this.isOpen) {
                    this.isOpen = true;
                    !this.isEmpty && this._show();
                    this.trigger("opened")
                }
            }, setLanguageDirection: function (a) {
                var b = {left: "0", right: "auto"}, c = {left: "auto", right: " 0"};
                a === "ltr" ? this.$menu.css(b) : this.$menu.css(c)
            }, moveCursorUp: function () {
                this._moveCursor(-1)
            }, moveCursorDown: function () {
                this._moveCursor(+1)
            }, getSuggestionUnderCursor: function () {
                var a = this._getSuggestions().filter(".tt-is-under-cursor").first();
                return a.length > 0 ? g(a) : null
            }, getFirstSuggestion: function () {
                var a = this._getSuggestions().first();
                return a.length > 0 ? g(a) : null
            }, renderSuggestions: function (d, f) {
                var g = "tt-dataset-" + d.name, h = '<div class="tt-suggestion">%body</div>', i, j, k = this.$menu.find("." + g), l, m, n;
                if (k.length === 0) {
                    j = a(b.suggestionsList).css(e.suggestionsList);
                    k = a("<div></div>").addClass(g).append(d.header).append(j).append(d.footer).appendTo(this.$menu)
                }
                if (f.length > 0) {
                    this.isEmpty = false;
                    this.isOpen && this._show();
                    l = document.createElement("div");
                    m = document.createDocumentFragment();
                    c.each(f, function (b, c) {
                        c.dataset = d.name;
                        i = d.template(c.datum);
                        l.innerHTML = h.replace("%body", i);
                        n = a(l.firstChild).css(e.suggestion).data("suggestion", c);
                        n.children().each(function () {
                            a(this).css(e.suggestionChild)
                        });
                        m.appendChild(n[0])
                    });
                    k.show().find(".tt-suggestions").html(m)
                } else {
                    this.clearSuggestions(d.name)
                }
                this.trigger("suggestionsRendered")
            }, clearSuggestions: function (a) {
                var b = a ? this.$menu.find(".tt-dataset-" + a) : this.$menu.find('[class^="tt-dataset-"]'), c = b.find(".tt-suggestions");
                b.hide();
                c.empty();
                if (this._getSuggestions().length === 0) {
                    this.isEmpty = true;
                    this._hide()
                }
            }
        });
        return f;
        function g(a) {
            return a.data("suggestion")
        }
    }();
    var l = function () {
        var b = {
            wrapper: '<span class="twitter-typeahead"></span>',
            hint: '<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',
            dropdown: '<span class="tt-dropdown-menu"></span>',
            trigger: '<span class="tt-combobox-trigger font-icon-arr-down"></span>'
        }, e = {
            wrapper: {position: "relative", display: "inline-block"},
            hint: {position: "absolute", top: "0", left: "0", borderColor: "transparent", boxShadow: "none"},
            query: {position: "relative", verticalAlign: "top", backgroundColor: "transparent"},
            dropdown: {position: "absolute", top: "100%", left: "0", zIndex: "100", display: "none"},
            trigger: {
                position: "absolute",
                top: "0",
                right: "0",
                height: "100%",
                width: "30px",
                cursor: "pointer",
                textAlign: "center",
                lineHeight: "38px"
            }
        };
        if (c.isMsie()) {
            c.mixin(e.query, {backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})
        }
        if (c.isMsie() && c.isMsie() <= 7) {
            c.mixin(e.wrapper, {display: "inline", zoom: "1"});
            c.mixin(e.query, {marginTop: "-1px"})
        }
        function f(b) {
            var d, e, f;
            c.bindAll(this);
            this.$node = g(b.input);
            this.datasets = b.datasets;
            this.dir = null;
            this.eventBus = b.eventBus;
            d = this.$node.find(".tt-dropdown-menu");
            e = this.$node.find(".tt-query");
            f = this.$node.find(".tt-hint");
            this.combobox = e.data("tt-combobox") || false;
            this.dropdownView = new k({menu: d}).on("suggestionSelected", this._handleSelection).on("cursorMoved", this._clearHint).on("cursorMoved", this._setInputValueToSuggestionUnderCursor).on("cursorRemoved", this._setInputValueToQuery).on("cursorRemoved", this._updateHint).on("suggestionsRendered", this._updateHint).on("opened", this._updateHint).on("closed", this._clearHint).on("opened closed", this._propagateEvent);
            this.inputView = new j({
                input: e,
                hint: f
            }).on("focused", this._openDropdown).on("blured", this._closeDropdown).on("blured", this._setInputValueToQuery).on("enterKeyed tabKeyed", this._handleSelection).on("queryChanged", this._clearHint).on("queryChanged", this._clearSuggestions).on("queryChanged", this._getSuggestions).on("showAllData", this._getAllSuggestions).on("whitespaceChanged", this._updateHint).on("queryChanged whitespaceChanged", this._openDropdown).on("queryChanged whitespaceChanged", this._setLanguageDirection).on("escKeyed", this._closeDropdown).on("escKeyed", this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed enterKeyed", this._managePreventDefault).on("upKeyed downKeyed", this._moveDropdownCursor).on("upKeyed downKeyed", this._openDropdown).on("tabKeyed leftKeyed rightKeyed enterKeyed", this._autocomplete);
            e.on("click", function (a) {
                a.stopPropagation()
            });
            var h = this;
            if (e.data("tt-combobox")) {
                this.$node.find(".tt-combobox-trigger").on("click", function (a) {
                    a.stopPropagation();
                    h._openDropdown();
                    h.inputView.trigger("showAllData");
                    h._clearHint()
                });
                a(document).on("click.tt-globalClick", this, function (a) {
                    a.data._closeDropdown(a)
                })
            }
        }

        c.mixin(f.prototype, d, {
            _managePreventDefault: function (a) {
                var b = a.data, c, d, e = false;
                switch (a.type) {
                    case"tabKeyed":
                        c = this.inputView.getHintValue();
                        d = this.inputView.getInputValue();
                        e = c && c !== d;
                        break;
                    case"upKeyed":
                    case"downKeyed":
                        e = !b.shiftKey && !b.ctrlKey && !b.metaKey;
                        break
                }
                e && b.preventDefault()
            }, _setLanguageDirection: function () {
                var a = this.inputView.getLanguageDirection();
                if (a !== this.dir) {
                    this.dir = a;
                    this.$node.css("direction", a);
                    this.dropdownView.setLanguageDirection(a)
                }
            }, _updateHint: function () {
                var a = this.dropdownView.getFirstSuggestion(), b = a ? a.value : null, d = this.dropdownView.isVisible(), e = this.inputView.isOverflow(), f, g, h, i, j;
                if (b && d && !e) {
                    f = this.inputView.getInputValue();
                    g = f.replace(/\s{2,}/g, " ").replace(/^\s+/g, "");
                    h = c.escapeRegExChars(g);
                    i = new RegExp("^(?:" + h + ")(.*$)", "i");
                    j = i.exec(b);
                    this.inputView.setHintValue(f + (j ? j[1] : ""))
                }
            }, _clearHint: function () {
                this.inputView.setHintValue("")
            }, _clearSuggestions: function () {
                this.dropdownView.clearSuggestions()
            }, _setInputValueToQuery: function () {
                this.inputView.setInputValue(this.inputView.getQuery())
            }, _setInputValueToSuggestionUnderCursor: function (a) {
                var b = a.data;
                this.inputView.setInputValue(b.value, true)
            }, _openDropdown: function () {
                this.dropdownView.open()
            }, _closeDropdown: function (a) {
                this.dropdownView[a.type === "blured" ? "closeUnlessMouseIsOverDropdown" : "close"]()
            }, _moveDropdownCursor: function (a) {
                var b = a.data;
                if (!b.shiftKey && !b.ctrlKey && !b.metaKey) {
                    this.dropdownView[a.type === "upKeyed" ? "moveCursorUp" : "moveCursorDown"]()
                }
            }, _handleSelection: function (a) {
                var b = a.type === "suggestionSelected", d = b ? a.data : this.dropdownView.getSuggestionUnderCursor();
                if (d) {
                    this.inputView.setInputValue(d.value);
                    b ? this.inputView.focus() : a.data.preventDefault();
                    b && c.isMsie() ? c.defer(this.dropdownView.close) : this.dropdownView.close();
                    this.eventBus.trigger("selected", d.datum, d.dataset)
                }
            }, _getAllSuggestions: function () {
                var a = this;
                c.each(this.datasets, function (b, c) {
                    c.getAllSuggestions(function (b) {
                        a.dropdownView.renderSuggestions(c, b)
                    })
                })
            }, _getSuggestions: function () {
                var a = this, b = this.inputView.getQuery();
                if (c.isBlankString(b)) {
                    return
                }
                c.each(this.datasets, function (c, d) {
                    d.getSuggestions(b, function (c) {
                        if (b === a.inputView.getQuery()) {
                            a.dropdownView.renderSuggestions(d, c)
                        }
                    })
                })
            }, _autocomplete: function (a) {
                var b, c, d, e, f;
                if (a.type === "rightKeyed" || a.type === "leftKeyed") {
                    b = this.inputView.isCursorAtEnd();
                    c = this.inputView.getLanguageDirection() === "ltr" ? a.type === "leftKeyed" : a.type === "rightKeyed";
                    if (!b || c) {
                        return
                    }
                }
                d = this.inputView.getQuery();
                e = this.inputView.getHintValue();
                if (typeof e !== "undefined" && e !== "" && d !== e) {
                    f = this.dropdownView.getFirstSuggestion();
                    this.inputView.setInputValue(f.value);
                    this.eventBus.trigger("autocompleted", f.datum, f.dataset)
                }
            }, _propagateEvent: function (a) {
                this.eventBus.trigger(a.type)
            }, destroy: function () {
                this.inputView.destroy();
                this.dropdownView.destroy();
                h(this.$node);
                this.$node = null
            }, setQuery: function (a) {
                this.inputView.setQuery(a);
                this.inputView.setInputValue(a);
                this._clearHint();
                this._clearSuggestions();
                this._getSuggestions()
            }
        });
        return f;
        function g(c) {
            var d = a(b.wrapper), f = a(b.dropdown), g = a(c), h = a(b.hint), i = g.data("tt-combobox") || false, j;
            d = d.css(e.wrapper);
            f = f.css(e.dropdown);
            h.css(e.hint).css({
                backgroundAttachment: g.css("background-attachment"),
                backgroundClip: g.css("background-clip"),
                backgroundColor: g.css("background-color"),
                backgroundImage: g.css("background-image"),
                backgroundOrigin: g.css("background-origin"),
                backgroundPosition: g.css("background-position"),
                backgroundRepeat: g.css("background-repeat"),
                backgroundSize: g.css("background-size")
            });
            g.data("ttAttrs", {
                dir: g.attr("dir"),
                autocomplete: g.attr("autocomplete"),
                spellcheck: g.attr("spellcheck"),
                style: g.attr("style")
            });
            g.addClass("tt-query").attr({autocomplete: "off", spellcheck: false}).css(e.query);
            try {
                !g.attr("dir") && g.attr("dir", "auto")
            } catch (a) {
            }
            var k = g.wrap(d).parent().append(f);
            var l = g.data("typeaheadOptions");
            if (l && l.length && l[0].hint) {
                console.log("append hint");
                g.parent().prepend(h)
            }
            if (i) {
                j = a(b.trigger);
                j.css(e.trigger);
                k.append(j)
            }
            return k
        }

        function h(a) {
            var b = a.find(".tt-query");
            c.each(b.data("ttAttrs"), function (a, d) {
                c.isUndefined(d) ? b.removeAttr(a) : b.attr(a, d)
            });
            b.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(a);
            a.remove()
        }
    }();
    (function () {
        var b = {}, d = "ttView", f;
        f = {
            initialize: function (f) {
                var g;
                f = c.isArray(f) ? f : [f];
                if (f.length === 0) {
                    a.error("no datasets provided")
                }
                g = c.map(f, function (a) {
                    var c = b[a.name] ? b[a.name] : new i(a);
                    if (a.name) {
                        b[a.name] = c
                    }
                    return c
                });
                return this.each(h);
                function h() {
                    var b = a(this), h, i = new e({el: b});
                    if (!b.data("typeaheadOptions")) {
                        b.data("typeaheadOptions", f)
                    }
                    h = c.map(g, function (a) {
                        return a.initialize()
                    });
                    b.data(d, new l({input: b, eventBus: i = new e({el: b}), datasets: g}));
                    a.when.apply(a, h).always(function () {
                        c.defer(function () {
                            i.trigger("initialized")
                        })
                    })
                }
            }, destroy: function () {
                return this.each(b);
                function b() {
                    var b = a(this), c = b.data(d);
                    if (c) {
                        c.destroy();
                        b.removeData(d)
                    }
                }
            }, setQuery: function (b) {
                return this.each(c);
                function c() {
                    var c = a(this).data(d);
                    c && c.setQuery(b)
                }
            }
        };
        jQuery.fn.typeahead = function (a) {
            if (f[a]) {
                return f[a].apply(this, [].slice.call(arguments, 1))
            } else {
                return f.initialize.apply(this, arguments)
            }
        }
    })()
})(window.jQuery);
(function () {
    var b = void 0, f = !0, j = null, l = !1;

    function m() {
        return function () {
        }
    }

    function q(a) {
        return function () {
            return this[a]
        }
    }

    function r(a) {
        return function () {
            return a
        }
    }

    var t;
    document.createElement("video");
    document.createElement("audio");
    document.createElement("track");
    function u(a, b, c) {
        if ("string" === typeof a) {
            0 === a.indexOf("#") && (a = a.slice(1));
            if (u.Aa[a])return u.Aa[a];
            a = u.w(a)
        }
        if (!a || !a.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");
        return a.player || new u.Player(a, b, c)
    }

    var videojs = u;
    window.ke = window.le = u;
    u.Vb = "4.6";
    u.Pc = "https:" == document.location.protocol ? "https://" : "http://";
    u.options = {
        techOrder: ["html5", "flash"],
        html5: {},
        flash: {},
        width: 300,
        height: 150,
        defaultVolume: 0,
        playbackRates: [],
        children: {
            mediaLoader: {},
            posterImage: {},
            textTrackDisplay: {},
            loadingSpinner: {},
            bigPlayButton: {},
            controlBar: {},
            errorDisplay: {}
        },
        notSupportedMessage: "     "
    };
    "GENERATED_CDN_VSN" !== u.Vb && (videojs.options.flash.swf = u.Pc + "vjs.zencdn.net/" + u.Vb + "/video-js.swf");
    u.Aa = {};
    "function" === typeof define && define.amd ? define([], function () {
        return videojs
    }) : "object" === typeof exports && "object" === typeof module && (module.exports = videojs);
    u.pa = u.CoreObject = m();
    u.pa.extend = function (a) {
        var b, c;
        a = a || {};
        b = a.init || a.h || this.prototype.init || this.prototype.h || m();
        c = function () {
            b.apply(this, arguments)
        };
        c.prototype = u.l.create(this.prototype);
        c.prototype.constructor = c;
        c.extend = u.pa.extend;
        c.create = u.pa.create;
        for (var d in a)a.hasOwnProperty(d) && (c.prototype[d] = a[d]);
        return c
    };
    u.pa.create = function () {
        var a = u.l.create(this.prototype);
        this.apply(a, arguments);
        return a
    };
    u.d = function (a, b, c) {
        var d = u.getData(a);
        d.D || (d.D = {});
        d.D[b] || (d.D[b] = []);
        c.v || (c.v = u.v++);
        d.D[b].push(c);
        d.X || (d.disabled = l, d.X = function (b) {
            if (!d.disabled) {
                b = u.pc(b);
                var c = d.D[b.type];
                if (c)for (var c = c.slice(0), e = 0, f = c.length; e < f && !b.wc(); e++)c[e].call(a, b)
            }
        });
        1 == d.D[b].length && (document.addEventListener ? a.addEventListener(b, d.X, l) : document.attachEvent && a.attachEvent("on" + b, d.X))
    };
    u.p = function (a, b, c) {
        if (u.tc(a)) {
            var d = u.getData(a);
            if (d.D)if (b) {
                var e = d.D[b];
                if (e) {
                    if (c) {
                        if (c.v)for (d = 0; d < e.length; d++)e[d].v === c.v && e.splice(d--, 1)
                    } else d.D[b] = [];
                    u.kc(a, b)
                }
            } else for (e in d.D)b = e, d.D[b] = [], u.kc(a, b)
        }
    };
    u.kc = function (a, b) {
        var c = u.getData(a);
        0 === c.D[b].length && (delete c.D[b], document.removeEventListener ? a.removeEventListener(b, c.X, l) : document.detachEvent && a.detachEvent("on" + b, c.X));
        u.Fb(c.D) && (delete c.D, delete c.X, delete c.disabled);
        u.Fb(c) && u.Dc(a)
    };
    u.pc = function (a) {
        function b() {
            return f
        }

        function c() {
            return l
        }

        if (!a || !a.Gb) {
            var d = a || window.event;
            a = {};
            for (var e in d)"layerX" !== e && ("layerY" !== e && "keyboardEvent.keyLocation" !== e) && ("returnValue" == e && d.preventDefault || (a[e] = d[e]));
            a.target || (a.target = a.srcElement || document);
            a.relatedTarget = a.fromElement === a.target ? a.toElement : a.fromElement;
            a.preventDefault = function () {
                d.preventDefault && d.preventDefault();
                a.returnValue = l;
                a.sd = b;
                a.defaultPrevented = f
            };
            a.sd = c;
            a.defaultPrevented = l;
            a.stopPropagation = function () {
                d.stopPropagation && d.stopPropagation();
                a.cancelBubble = f;
                a.Gb = b
            };
            a.Gb = c;
            a.stopImmediatePropagation = function () {
                d.stopImmediatePropagation && d.stopImmediatePropagation();
                a.wc = b;
                a.stopPropagation()
            };
            a.wc = c;
            if (a.clientX != j) {
                e = document.documentElement;
                var g = document.body;
                a.pageX = a.clientX + (e && e.scrollLeft || g && g.scrollLeft || 0) - (e && e.clientLeft || g && g.clientLeft || 0);
                a.pageY = a.clientY + (e && e.scrollTop || g && g.scrollTop || 0) - (e && e.clientTop || g && g.clientTop || 0)
            }
            a.which = a.charCode || a.keyCode;
            a.button != j && (a.button = a.button & 1 ? 0 : a.button & 4 ? 1 : a.button & 2 ? 2 : 0)
        }
        return a
    };
    u.k = function (a, b) {
        var c = u.tc(a) ? u.getData(a) : {}, d = a.parentNode || a.ownerDocument;
        "string" === typeof b && (b = {type: b, target: a});
        b = u.pc(b);
        c.X && c.X.call(a, b);
        if (d && !b.Gb() && b.bubbles !== l)u.k(d, b); else if (!d && !b.defaultPrevented && (c = u.getData(b.target), b.target[b.type])) {
            c.disabled = f;
            if ("function" === typeof b.target[b.type])b.target[b.type]();
            c.disabled = l
        }
        return !b.defaultPrevented
    };
    u.W = function (a, b, c) {
        function d() {
            u.p(a, b, d);
            c.apply(this, arguments)
        }

        d.v = c.v = c.v || u.v++;
        u.d(a, b, d)
    };
    var v = Object.prototype.hasOwnProperty;
    u.e = function (a, b) {
        var c, d;
        c = document.createElement(a || "div");
        for (d in b)v.call(b, d) && (-1 !== d.indexOf("aria-") || "role" == d ? c.setAttribute(d, b[d]) : c[d] = b[d]);
        return c
    };
    u.$ = function (a) {
        return a.charAt(0).toUpperCase() + a.slice(1)
    };
    u.l = {};
    u.l.create = Object.create || function (a) {
            function b() {
            }

            b.prototype = a;
            return new b
        };
    u.l.wa = function (a, b, c) {
        for (var d in a)v.call(a, d) && b.call(c || this, d, a[d])
    };
    u.l.B = function (a, b) {
        if (!b)return a;
        for (var c in b)v.call(b, c) && (a[c] = b[c]);
        return a
    };
    u.l.fd = function (a, b) {
        var c, d, e;
        a = u.l.copy(a);
        for (c in b)v.call(b, c) && (d = a[c], e = b[c], a[c] = u.l.Sa(d) && u.l.Sa(e) ? u.l.fd(d, e) : b[c]);
        return a
    };
    u.l.copy = function (a) {
        return u.l.B({}, a)
    };
    u.l.Sa = function (a) {
        return !!a && "object" === typeof a && "[object Object]" === a.toString() && a.constructor === Object
    };
    u.bind = function (a, b, c) {
        function d() {
            return b.apply(a, arguments)
        }

        b.v || (b.v = u.v++);
        d.v = c ? c + "_" + b.v : b.v;
        return d
    };
    u.ta = {};
    u.v = 1;
    u.expando = "vdata" + (new Date).getTime();
    u.getData = function (a) {
        var b = a[u.expando];
        b || (b = a[u.expando] = u.v++, u.ta[b] = {});
        return u.ta[b]
    };
    u.tc = function (a) {
        a = a[u.expando];
        return !(!a || u.Fb(u.ta[a]))
    };
    u.Dc = function (a) {
        var b = a[u.expando];
        if (b) {
            delete u.ta[b];
            try {
                delete a[u.expando]
            } catch (b) {
                a.removeAttribute ? a.removeAttribute(u.expando) : a[u.expando] = j
            }
        }
    };
    u.Fb = function (a) {
        for (var b in a)if (a[b] !== j)return l;
        return f
    };
    u.o = function (a, b) {
        -1 == (" " + a.className + " ").indexOf(" " + b + " ") && (a.className = "" === a.className ? b : a.className + " " + b)
    };
    u.r = function (a, b) {
        var c, d;
        if (-1 != a.className.indexOf(b)) {
            c = a.className.split(" ");
            for (d = c.length - 1; 0 <= d; d--)c[d] === b && c.splice(d, 1);
            a.className = c.join(" ")
        }
    };
    u.A = u.e("video");
    u.M = navigator.userAgent;
    u.Uc = /iPhone/i.test(u.M);
    u.Tc = /iPad/i.test(u.M);
    u.Vc = /iPod/i.test(u.M);
    u.Sc = u.Uc || u.Tc || u.Vc;
    var aa = u, w;
    var x = u.M.match(/OS (\d+)_/i);
    w = x && x[1] ? x[1] : b;
    aa.$d = w;
    u.Rc = /Android/i.test(u.M);
    var ba = u, y;
    var z = u.M.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i), A, B;
    z ? (A = z[1] && parseFloat(z[1]), B = z[2] && parseFloat(z[2]), y = A && B ? parseFloat(z[1] + "." + z[2]) : A ? A : j) : y = j;
    ba.Ub = y;
    u.Wc = u.Rc && /webkit/i.test(u.M) && 2.3 > u.Ub;
    u.Yb = /Firefox/i.test(u.M);
    u.ae = /Chrome/i.test(u.M);
    u.fc = !!("ontouchstart" in window || window.Qc && document instanceof window.Qc);
    u.Cb = function (a) {
        var b, c, d, e;
        b = {};
        if (a && a.attributes && 0 < a.attributes.length) {
            c = a.attributes;
            for (var g = c.length - 1; 0 <= g; g--) {
                d = c[g].name;
                e = c[g].value;
                if ("boolean" === typeof a[d] || -1 !== ",autoplay,controls,loop,muted,default,".indexOf("," + d + ","))e = e !== j ? f : l;
                b[d] = e
            }
        }
        return b
    };
    u.de = function (a, b) {
        var c = "";
        document.defaultView && document.defaultView.getComputedStyle ? c = document.defaultView.getComputedStyle(a, "").getPropertyValue(b) : a.currentStyle && (c = a["client" + b.substr(0, 1).toUpperCase() + b.substr(1)] + "px");
        return c
    };
    u.Eb = function (a, b) {
        b.firstChild ? b.insertBefore(a, b.firstChild) : b.appendChild(a)
    };
    u.Na = {};
    u.w = function (a) {
        0 === a.indexOf("#") && (a = a.slice(1));
        return document.getElementById(a)
    };
    u.ya = function (a, b) {
        b = b || a;
        var c = Math.floor(a % 60), d = Math.floor(a / 60 % 60), e = Math.floor(a / 3600), f = Math.floor(b / 60 % 60), g = Math.floor(b / 3600);
        if (isNaN(a) || Infinity === a)e = d = c = "-";
        e = 0 < e || 0 < g ? e + ":" : "";
        return e + (((e || 10 <= f) && 10 > d ? "0" + d : d) + ":") + (10 > c ? "0" + c : c)
    };
    u.bd = function () {
        document.body.focus();
        document.onselectstart = r(l)
    };
    u.Ud = function () {
        document.onselectstart = r(f)
    };
    u.trim = function (a) {
        return (a + "").replace(/^\s+|\s+$/g, "")
    };
    u.round = function (a, b) {
        b || (b = 0);
        return Math.round(a * Math.pow(10, b)) / Math.pow(10, b)
    };
    u.zb = function (a, b) {
        return {
            length: 1, start: function () {
                return a
            }, end: function () {
                return b
            }
        }
    };
    u.get = function (a, b, c, d) {
        var e, g, h, i;
        c = c || m();
        "undefined" === typeof XMLHttpRequest && (window.XMLHttpRequest = function () {
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")
            } catch (a) {
            }
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")
            } catch (a) {
            }
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP")
            } catch (a) {
            }
            throw Error("This browser does not support XMLHttpRequest.")
        });
        g = new XMLHttpRequest;
        h = u.Gd(a);
        i = window.location;
        h.protocol + h.host !== i.protocol + i.host && window.XDomainRequest && !("withCredentials" in g) ? (g = new window.XDomainRequest, g.onload = function () {
            b(g.responseText)
        }, g.onerror = c, g.onprogress = m(), g.ontimeout = c) : (e = "file:" == h.protocol || "file:" == i.protocol, g.onreadystatechange = function () {
            4 === g.readyState && (200 === g.status || e && 0 === g.status ? b(g.responseText) : c(g.responseText))
        });
        try {
            g.open("GET", a, f), d && (g.withCredentials = f)
        } catch (a) {
            c(a);
            return
        }
        try {
            g.send()
        } catch (a) {
            c(a)
        }
    };
    u.Ld = function (a) {
        try {
            var b = window.localStorage || l;
            b && (b.volume = a)
        } catch (a) {
            22 == a.code || 1014 == a.code ? u.log("LocalStorage Full (VideoJS)", a) : 18 == a.code ? u.log("LocalStorage not allowed (VideoJS)", a) : u.log("LocalStorage Error (VideoJS)", a)
        }
    };
    u.rc = function (a) {
        a.match(/^https?:\/\//) || (a = u.e("div", {innerHTML: '<a href="' + a + '">x</a>'}).firstChild.href);
        return a
    };
    u.Gd = function (a) {
        var b, c, d, e;
        e = "protocol hostname port pathname search hash host".split(" ");
        c = u.e("a", {href: a});
        if (d = "" === c.host && "file:" !== c.protocol)b = u.e("div"), b.innerHTML = '<a href="' + a + '"></a>', c = b.firstChild, b.setAttribute("style", "display:none; position:absolute;"), document.body.appendChild(b);
        a = {};
        for (var f = 0; f < e.length; f++)a[e[f]] = c[e[f]];
        d && document.body.removeChild(b);
        return a
    };
    function D() {
    }

    var E = window.console || {log: D, warn: D, error: D};

    function F(a, b) {
        var c = Array.prototype.slice.call(b);
        a ? c.unshift(a.toUpperCase() + ":") : a = "log";
        u.log.history.push(c);
        c.unshift("VIDEOJS:");
        if (E[a].apply)E[a].apply(E, c); else E[a](c.join(" "))
    }

    u.log = function () {
        F(j, arguments)
    };
    u.log.history = [];
    u.log.error = function () {
        F("error", arguments)
    };
    u.log.warn = function () {
        F("warn", arguments)
    };
    u.od = function (a) {
        var b, c;
        a.getBoundingClientRect && a.parentNode && (b = a.getBoundingClientRect());
        if (!b)return {left: 0, top: 0};
        a = document.documentElement;
        c = document.body;
        return {
            left: u.round(b.left + (window.pageXOffset || c.scrollLeft) - (a.clientLeft || c.clientLeft || 0)),
            top: u.round(b.top + (window.pageYOffset || c.scrollTop) - (a.clientTop || c.clientTop || 0))
        }
    };
    u.oa = {};
    u.oa.Kb = function (a, b) {
        var c, d, e;
        a = u.l.copy(a);
        for (c in b)b.hasOwnProperty(c) && (d = a[c], e = b[c], a[c] = u.l.Sa(d) && u.l.Sa(e) ? u.oa.Kb(d, e) : b[c]);
        return a
    };
    u.a = u.pa.extend({
        h: function (a, b, c) {
            this.c = a;
            this.j = u.l.copy(this.j);
            b = this.options(b);
            this.T = b.id || (b.el && b.el.id ? b.el.id : a.id() + "_component_" + u.v++);
            this.xd = b.name || j;
            this.b = b.el || this.e();
            this.N = [];
            this.Oa = {};
            this.Pa = {};
            this.uc();
            this.I(c);
            if (b.Ec !== l) {
                var d, e;
                d = u.bind(this.m(), this.m().reportUserActivity);
                this.d("touchstart", function () {
                    d();
                    clearInterval(e);
                    e = setInterval(d, 250)
                });
                a = function () {
                    d();
                    clearInterval(e)
                };
                this.d("touchmove", d);
                this.d("touchend", a);
                this.d("touchcancel", a)
            }
        }
    });
    t = u.a.prototype;
    t.dispose = function () {
        this.k({type: "dispose", bubbles: l});
        if (this.N)for (var a = this.N.length - 1; 0 <= a; a--)this.N[a].dispose && this.N[a].dispose();
        this.Pa = this.Oa = this.N = j;
        this.p();
        this.b.parentNode && this.b.parentNode.removeChild(this.b);
        u.Dc(this.b);
        this.b = j
    };
    t.c = f;
    t.m = q("c");
    t.options = function (a) {
        return a === b ? this.j : this.j = u.oa.Kb(this.j, a)
    };
    t.e = function (a, b) {
        return u.e(a, b)
    };
    t.w = q("b");
    t.ia = function () {
        return this.u || this.b
    };
    t.id = q("T");
    t.name = q("xd");
    t.children = q("N");
    t.rd = function (a) {
        return this.Oa[a]
    };
    t.ja = function (a) {
        return this.Pa[a]
    };
    t.V = function (a, b) {
        var c, d;
        "string" === typeof a ? (d = a, b = b || {}, c = b.componentClass || u.$(d), b.name = d, c = new window.videojs[c](this.c || this, b)) : c = a;
        this.N.push(c);
        "function" === typeof c.id && (this.Oa[c.id()] = c);
        (d = d || c.name && c.name()) && (this.Pa[d] = c);
        "function" === typeof c.el && c.el() && this.ia().appendChild(c.el());
        return c
    };
    t.removeChild = function (a) {
        "string" === typeof a && (a = this.ja(a));
        if (a && this.N) {
            for (var b = l, c = this.N.length - 1; 0 <= c; c--)if (this.N[c] === a) {
                b = f;
                this.N.splice(c, 1);
                break
            }
            b && (this.Oa[a.id] = j, this.Pa[a.name] = j, (b = a.w()) && b.parentNode === this.ia() && this.ia().removeChild(a.w()))
        }
    };
    t.uc = function () {
        var a, b, c, d;
        a = this;
        if (b = this.options().children)if (b instanceof Array)for (var e = 0; e < b.length; e++)c = b[e], "string" == typeof c ? (d = c, c = {}) : d = c.name, a[d] = a.V(d, c); else u.l.wa(b, function (b, c) {
            c !== l && (a[b] = a.V(b, c))
        })
    };
    t.S = r("");
    t.d = function (a, b) {
        u.d(this.b, a, u.bind(this, b));
        return this
    };
    t.p = function (a, b) {
        u.p(this.b, a, b);
        return this
    };
    t.W = function (a, b) {
        u.W(this.b, a, u.bind(this, b));
        return this
    };
    t.k = function (a, b) {
        u.k(this.b, a, b);
        return this
    };
    t.I = function (a) {
        a && (this.ca ? a.call(this) : (this.Za === b && (this.Za = []), this.Za.push(a)));
        return this
    };
    t.Ea = function () {
        this.ca = f;
        var a = this.Za;
        if (a && 0 < a.length) {
            for (var b = 0, c = a.length; b < c; b++)a[b].call(this);
            this.Za = [];
            this.k("ready")
        }
    };
    t.o = function (a) {
        u.o(this.b, a);
        return this
    };
    t.r = function (a) {
        u.r(this.b, a);
        return this
    };
    t.show = function () {
        this.b.style.display = "block";
        return this
    };
    t.G = function () {
        this.b.style.display = "none";
        return this
    };
    function G(a) {
        a.r("vjs-lock-showing")
    }

    t.disable = function () {
        this.G();
        this.show = m()
    };
    t.width = function (a, b) {
        return H(this, "width", a, b)
    };
    t.height = function (a, b) {
        return H(this, "height", a, b)
    };
    t.jd = function (a, b) {
        return this.width(a, f).height(b)
    };
    function H(a, c, d, e) {
        if (d !== b)return a.b.style[c] = -1 !== ("" + d).indexOf("%") || -1 !== ("" + d).indexOf("px") ? d : "auto" === d ? "" : d + "px", e || a.k("resize"), a;
        if (!a.b)return 0;
        d = a.b.style[c];
        e = d.indexOf("px");
        return -1 !== e ? parseInt(d.slice(0, e), 10) : parseInt(a.b["offset" + u.$(c)], 10)
    }

    function I(a) {
        var b, c, d, e, g, h, i, k;
        b = 0;
        c = j;
        a.d("touchstart", function (a) {
            1 === a.touches.length && (c = a.touches[0], b = (new Date).getTime(), e = f)
        });
        a.d("touchmove", function (a) {
            1 < a.touches.length ? e = l : c && (h = a.touches[0].pageX - c.pageX, i = a.touches[0].pageY - c.pageY, k = Math.sqrt(h * h + i * i), 22 < k && (e = l))
        });
        g = function () {
            e = l
        };
        a.d("touchleave", g);
        a.d("touchcancel", g);
        a.d("touchend", function (a) {
            c = j;
            e === f && (d = (new Date).getTime() - b, 250 > d && (a.preventDefault(), this.k("tap")))
        })
    }

    u.s = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            I(this);
            this.d("tap", this.q);
            this.d("click", this.q);
            this.d("focus", this.Va);
            this.d("blur", this.Ua)
        }
    });
    t = u.s.prototype;
    t.e = function (a, b) {
        var c;
        b = u.l.B({className: this.S(), role: "button", "aria-live": "polite", tabIndex: 0}, b);
        c = u.a.prototype.e.call(this, a, b);
        b.innerHTML || (this.u = u.e("div", {className: "vjs-control-content"}), this.xb = u.e("span", {
            className: "vjs-control-text",
            innerHTML: this.sa || "Need Text"
        }), this.u.appendChild(this.xb), c.appendChild(this.u));
        return c
    };
    t.S = function () {
        return "vjs-control " + u.a.prototype.S.call(this)
    };
    t.q = m();
    t.Va = function () {
        u.d(document, "keyup", u.bind(this, this.da))
    };
    t.da = function (a) {
        if (32 == a.which || 13 == a.which)a.preventDefault(), this.q()
    };
    t.Ua = function () {
        u.p(document, "keyup", u.bind(this, this.da))
    };
    u.Q = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            this.ad = this.ja(this.j.barName);
            this.handle = this.ja(this.j.handleName);
            this.d("mousedown", this.Wa);
            this.d("touchstart", this.Wa);
            this.d("focus", this.Va);
            this.d("blur", this.Ua);
            this.d("click", this.q);
            this.c.d("controlsvisible", u.bind(this, this.update));
            a.d(this.Ac, u.bind(this, this.update));
            this.R = {}
        }
    });
    t = u.Q.prototype;
    t.e = function (a, b) {
        b = b || {};
        b.className += " vjs-slider";
        b = u.l.B({role: "slider", "aria-valuenow": 0, "aria-valuemin": 0, "aria-valuemax": 100, tabIndex: 0}, b);
        return u.a.prototype.e.call(this, a, b)
    };
    t.Wa = function (a) {
        a.preventDefault();
        u.bd();
        this.R.move = u.bind(this, this.Lb);
        this.R.end = u.bind(this, this.Mb);
        u.d(document, "mousemove", this.R.move);
        u.d(document, "mouseup", this.R.end);
        u.d(document, "touchmove", this.R.move);
        u.d(document, "touchend", this.R.end);
        this.Lb(a)
    };
    t.Mb = function () {
        u.Ud();
        u.p(document, "mousemove", this.R.move, l);
        u.p(document, "mouseup", this.R.end, l);
        u.p(document, "touchmove", this.R.move, l);
        u.p(document, "touchend", this.R.end, l);
        this.update()
    };
    t.update = function () {
        if (this.b) {
            var a, b = this.Db(), c = this.handle, d = this.ad;
            isNaN(b) && (b = 0);
            a = b;
            if (c) {
                a = this.b.offsetWidth;
                var e = c.w().offsetWidth;
                a = e ? e / a : 0;
                b *= 1 - a;
                a = b + a / 2;
                c.w().style.left = u.round(100 * b, 2) + "%"
            }
            d.w().style.width = u.round(100 * a, 2) + "%"
        }
    };
    function J(a, b) {
        var c, d, e, f;
        c = a.b;
        d = u.od(c);
        f = e = c.offsetWidth;
        c = a.handle;
        if (a.j.Wd)return f = d.top, d = b.changedTouches ? b.changedTouches[0].pageY : b.pageY, c && (c = c.w().offsetHeight, f += c / 2, e -= c), Math.max(0, Math.min(1, (f - d + e) / e));
        e = d.left;
        d = b.changedTouches ? b.changedTouches[0].pageX : b.pageX;
        c && (c = c.w().offsetWidth, e += c / 2, f -= c);
        return Math.max(0, Math.min(1, (d - e) / f))
    }

    t.Va = function () {
        u.d(document, "keyup", u.bind(this, this.da))
    };
    t.da = function (a) {
        37 == a.which ? (a.preventDefault(), this.Gc()) : 39 == a.which && (a.preventDefault(), this.Hc())
    };
    t.Ua = function () {
        u.p(document, "keyup", u.bind(this, this.da))
    };
    t.q = function (a) {
        a.stopImmediatePropagation();
        a.preventDefault()
    };
    u.Y = u.a.extend();
    u.Y.prototype.defaultValue = 0;
    u.Y.prototype.e = function (a, b) {
        b = b || {};
        b.className += " vjs-slider-handle";
        b = u.l.B({innerHTML: '<span class="vjs-control-text">' + this.defaultValue + "</span>"}, b);
        return u.a.prototype.e.call(this, "div", b)
    };
    u.ga = u.a.extend();
    function ca(a, b) {
        a.V(b);
        b.d("click", u.bind(a, function () {
            G(this)
        }))
    }

    u.ga.prototype.e = function () {
        var a = this.options().lc || "ul";
        this.u = u.e(a, {className: "vjs-menu-content"});
        a = u.a.prototype.e.call(this, "div", {append: this.u, className: "vjs-menu"});
        a.appendChild(this.u);
        u.d(a, "click", function (a) {
            a.preventDefault();
            a.stopImmediatePropagation()
        });
        return a
    };
    u.J = u.s.extend({
        h: function (a, b) {
            u.s.call(this, a, b);
            this.selected(b.selected)
        }
    });
    u.J.prototype.e = function (a, b) {
        return u.s.prototype.e.call(this, "li", u.l.B({className: "vjs-menu-item", innerHTML: this.j.label}, b))
    };
    u.J.prototype.q = function () {
        this.selected(f)
    };
    u.J.prototype.selected = function (a) {
        a ? (this.o("vjs-selected"), this.b.setAttribute("aria-selected", f)) : (this.r("vjs-selected"), this.b.setAttribute("aria-selected", l))
    };
    u.L = u.s.extend({
        h: function (a, b) {
            u.s.call(this, a, b);
            this.za = this.va();
            this.V(this.za);
            this.O && 0 === this.O.length && this.G();
            this.d("keyup", this.da);
            this.b.setAttribute("aria-haspopup", f);
            this.b.setAttribute("role", "button")
        }
    });
    t = u.L.prototype;
    t.ra = l;
    t.va = function () {
        var a = new u.ga(this.c);
        this.options().title && a.ia().appendChild(u.e("li", {
            className: "vjs-menu-title",
            innerHTML: u.$(this.options().title),
            Sd: -1
        }));
        if (this.O = this.createItems())for (var b = 0; b < this.O.length; b++)ca(a, this.O[b]);
        return a
    };
    t.ua = m();
    t.S = function () {
        return this.className + " vjs-menu-button " + u.s.prototype.S.call(this)
    };
    t.Va = m();
    t.Ua = m();
    t.q = function () {
        this.W("mouseout", u.bind(this, function () {
            G(this.za);
            this.b.blur()
        }));
        this.ra ? K(this) : L(this)
    };
    t.da = function (a) {
        a.preventDefault();
        32 == a.which || 13 == a.which ? this.ra ? K(this) : L(this) : 27 == a.which && this.ra && K(this)
    };
    function L(a) {
        a.ra = f;
        a.za.o("vjs-lock-showing");
        a.b.setAttribute("aria-pressed", f);
        a.O && 0 < a.O.length && a.O[0].w().focus()
    }

    function K(a) {
        a.ra = l;
        G(a.za);
        a.b.setAttribute("aria-pressed", l)
    }

    u.F = function (a) {
        "number" === typeof a ? this.code = a : "string" === typeof a ? this.message = a : "object" === typeof a && u.l.B(this, a);
        this.message || (this.message = u.F.gd[this.code] || "")
    };
    u.F.prototype.code = 0;
    u.F.prototype.message = "";
    u.F.prototype.status = j;
    u.F.Ra = "MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
    u.F.gd = {
        1: "You aborted the video playback",
        2: "A network error caused the video download to fail part-way.",
        3: "The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",
        4: "The video could not be loaded, either because the server or network failed or because the format is not supported.",
        5: "The video is encrypted and we do not have the keys to decrypt it."
    };
    for (var M = 0; M < u.F.Ra.length; M++)u.F[u.F.Ra[M]] = M, u.F.prototype[u.F.Ra[M]] = M;
    var N, O, P, Q;
    N = ["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "), "webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "), "webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "), "mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "), "msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")];
    O = N[0];
    for (Q = 0; Q < N.length; Q++)if (N[Q][1] in document) {
        P = N[Q];
        break
    }
    if (P) {
        u.Na.Bb = {};
        for (Q = 0; Q < P.length; Q++)u.Na.Bb[O[Q]] = P[Q]
    }
    u.Player = u.a.extend({
        h: function (a, b, c) {
            this.P = a;
            a.id = a.id || "vjs_video_" + u.v++;
            b = u.l.B(da(a), b);
            this.z = {};
            this.Bc = b.poster;
            this.yb = b.controls;
            a.controls = l;
            b.Ec = l;
            this.I(function () {
                this.d("loadstart", this.Cd);
                this.d("ended", this.yd);
                this.d("play", this.Ob);
                this.d("firstplay", this.Ad);
                this.d("pause", this.Nb);
                this.d("progress", this.Dd);
                this.d("durationchange", this.yc);
                this.d("fullscreenchange", this.Bd)
            });
            u.a.call(this, this, b, c);
            this.controls() ? this.o("vjs-controls-enabled") : this.o("vjs-controls-disabled");
            u.Aa[this.T] = this;
            b.plugins && u.l.wa(b.plugins, function (a, b) {
                this[a](b)
            }, this);
            var d, e, g, h, i, j;
            d = u.bind(this, this.reportUserActivity);
            this.d("mousedown", function () {
                d();
                clearInterval(e);
                e = setInterval(d, 250)
            });
            this.d("mousemove", function (a) {
                if (a.screenX != i || a.screenY != j)i = a.screenX, j = a.screenY, d()
            });
            this.d("mouseup", function () {
                d();
                clearInterval(e)
            });
            this.d("keydown", d);
            this.d("keyup", d);
            g = setInterval(u.bind(this, function () {
                this.na && (this.na = l, this.userActive(f), clearTimeout(h), h = setTimeout(u.bind(this, function () {
                    this.na || this.userActive(l)
                }), 2e3))
            }), 250);
            this.d("dispose", function () {
                clearInterval(g);
                clearTimeout(h)
            })
        }
    });
    t = u.Player.prototype;
    t.j = u.options;
    t.dispose = function () {
        this.k("dispose");
        this.p("dispose");
        u.Aa[this.T] = j;
        this.P && this.P.player && (this.P.player = j);
        this.b && this.b.player && (this.b.player = j);
        clearInterval(this.Ya);
        this.Ba();
        this.g && this.g.dispose();
        u.a.prototype.dispose.call(this)
    };
    function da(a) {
        var b = {sources: [], tracks: []};
        u.l.B(b, u.Cb(a));
        if (a.hasChildNodes()) {
            var c, d, e, f;
            a = a.childNodes;
            e = 0;
            for (f = a.length; e < f; e++)c = a[e], d = c.nodeName.toLowerCase(), "source" === d ? b.sources.push(u.Cb(c)) : "track" === d && b.tracks.push(u.Cb(c))
        }
        return b
    }

    t.e = function () {
        var a = this.b = u.a.prototype.e.call(this, "div"), b = this.P;
        b.removeAttribute("width");
        b.removeAttribute("height");
        if (b.hasChildNodes()) {
            var c, d, e, g, h;
            c = b.childNodes;
            d = c.length;
            for (h = []; d--;)e = c[d], g = e.nodeName.toLowerCase(), "track" === g && h.push(e);
            for (c = 0; c < h.length; c++)b.removeChild(h[c])
        }
        a.id = b.id;
        a.className = b.className;
        b.id += "_html5_api";
        b.className = "vjs-tech";
        b.player = a.player = this;
        this.o("vjs-paused");
        this.width(this.j.width, f);
        this.height(this.j.height, f);
        b.parentNode && b.parentNode.insertBefore(a, b);
        u.Eb(b, a);
        return a
    };
    function R(a, b, c) {
        a.g && (a.ca = l, a.g.dispose(), a.Ib && (a.Ib = l, clearInterval(a.Ya)), a.Jb && S(a), a.g = l);
        "Html5" !== b && a.P && (u.f.nc(a.P), a.P = j);
        a.Ca = b;
        a.ca = l;
        var d = u.l.B({source: c, parentEl: a.b}, a.j[b.toLowerCase()]);
        c && (c.src == a.z.src && 0 < a.z.currentTime && (d.startTime = a.z.currentTime), a.z.src = c.src);
        a.g = new window.videojs[b](a, d);
        a.g.I(function () {
            this.c.Ea();
            if (!this.n.progressEvents) {
                var a = this.c;
                a.Ib = f;
                a.Ya = setInterval(u.bind(a, function () {
                    this.z.tb < this.buffered().end(0) ? this.k("progress") : 1 == this.bufferedPercent() && (clearInterval(this.Ya), this.k("progress"))
                }), 500);
                a.g && a.g.W("progress", function () {
                    this.n.progressEvents = f;
                    var a = this.c;
                    a.Ib = l;
                    clearInterval(a.Ya)
                })
            }
            this.n.timeupdateEvents || (a = this.c, a.Jb = f, a.d("play", a.Kc), a.d("pause", a.Ba), a.g && a.g.W("timeupdate", function () {
                this.n.timeupdateEvents = f;
                S(this.c)
            }))
        })
    }

    function S(a) {
        a.Jb = l;
        a.Ba();
        a.p("play", a.Kc);
        a.p("pause", a.Ba)
    }

    t.Kc = function () {
        this.mc && this.Ba();
        this.mc = setInterval(u.bind(this, function () {
            this.k("timeupdate")
        }), 250)
    };
    t.Ba = function () {
        clearInterval(this.mc);
        this.k("timeupdate")
    };
    t.Cd = function () {
        this.p("play", T);
        this.W("play", T);
        this.error() && this.error(j);
        u.r(this.b, "vjs-has-started")
    };
    function T(a) {
        u.k(this.b, {
            type: "firstplay",
            target: this.b
        }) || (a.preventDefault(), a.stopPropagation(), a.stopImmediatePropagation())
    }

    t.Ob = function () {
        u.r(this.b, "vjs-paused");
        u.o(this.b, "vjs-playing")
    };
    t.Ad = function () {
        this.j.starttime && this.currentTime(this.j.starttime);
        this.o("vjs-has-started")
    };
    t.Nb = function () {
        u.r(this.b, "vjs-playing");
        u.o(this.b, "vjs-paused")
    };
    t.Dd = function () {
        1 == this.bufferedPercent() && this.k("loadedalldata")
    };
    t.yd = function () {
        this.j.loop && (this.currentTime(0), this.play())
    };
    t.yc = function () {
        var a = U(this, "duration");
        a && (0 > a && (a = Infinity), this.duration(a), Infinity === a ? this.o("vjs-live") : this.r("vjs-live"))
    };
    t.Bd = function () {
        this.isFullscreen() ? this.o("vjs-fullscreen") : this.r("vjs-fullscreen")
    };
    function V(a, b, c) {
        if (a.g && !a.g.ca)a.g.I(function () {
            this[b](c)
        }); else try {
            a.g[b](c)
        } catch (a) {
            throw u.log(a), a
        }
    }

    function U(a, c) {
        if (a.g && a.g.ca)try {
            return a.g[c]()
        } catch (d) {
            throw a.g[c] === b ? u.log("Video.js: " + c + " method not defined for " + a.Ca + " playback technology.", d) : "TypeError" == d.name ? (u.log("Video.js: " + c + " unavailable on " + a.Ca + " playback technology element.", d), a.g.ca = l) : u.log(d), d
        }
    }

    t.play = function () {
        V(this, "play");
        return this
    };
    t.pause = function () {
        V(this, "pause");
        return this
    };
    t.paused = function () {
        return U(this, "paused") === l ? l : f
    };
    t.currentTime = function (a) {
        return a !== b ? (V(this, "setCurrentTime", a), this.Jb && this.k("timeupdate"), this) : this.z.currentTime = U(this, "currentTime") || 0
    };
    t.duration = function (a) {
        if (a !== b)return this.z.duration = parseFloat(a), this;
        this.z.duration === b && this.yc();
        return this.z.duration || 0
    };
    t.buffered = function () {
        var a = U(this, "buffered"), b = a.length - 1, c = this.z.tb = this.z.tb || 0;
        a && (0 <= b && a.end(b) !== c) && (c = a.end(b), this.z.tb = c);
        return u.zb(0, c)
    };
    t.bufferedPercent = function () {
        return this.duration() ? this.buffered().end(0) / this.duration() : 0
    };
    t.volume = function (a) {
        if (a !== b)return a = Math.max(0, Math.min(1, parseFloat(a))), this.z.volume = a, V(this, "setVolume", a), u.Ld(a), this;
        a = parseFloat(U(this, "volume"));
        return isNaN(a) ? 1 : a
    };
    t.muted = function (a) {
        return a !== b ? (V(this, "setMuted", a), this) : U(this, "muted") || l
    };
    t.ab = function () {
        return U(this, "supportsFullScreen") || l
    };
    t.vc = l;
    t.isFullscreen = function (a) {
        return a !== b ? (this.vc = !!a, this) : this.vc
    };
    t.isFullScreen = function (a) {
        u.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")');
        return this.isFullscreen(a)
    };
    t.requestFullscreen = function () {
        var a = u.Na.Bb;
        this.isFullscreen(f);
        a ? (u.d(document, a.qd, u.bind(this, function (b) {
            this.isFullscreen(document[a.fullscreenElement]);
            this.isFullscreen() === l && u.p(document, a.qd, arguments.callee);
            this.k("fullscreenchange")
        })), this.b[a.requestFullscreen]()) : this.g.ab() ? V(this, "enterFullScreen") : (this.td = f, this.kd = document.documentElement.style.overflow, u.d(document, "keydown", u.bind(this, this.qc)), document.documentElement.style.overflow = "hidden", u.o(document.body, "vjs-full-window"), this.k("enterFullWindow"), this.k("fullscreenchange"));
        return this
    };
    t.exitFullscreen = function () {
        var a = u.Na.Bb;
        this.isFullscreen(l);
        if (a)document[a.exitFullscreen](); else this.g.ab() ? V(this, "exitFullScreen") : (ea(this), this.k("fullscreenchange"));
        return this
    };
    t.qc = function (a) {
        27 === a.keyCode && (this.isFullscreen() === f ? this.exitFullscreen() : ea(this))
    };
    function ea(a) {
        a.td = l;
        u.p(document, "keydown", a.qc);
        document.documentElement.style.overflow = a.kd;
        u.r(document.body, "vjs-full-window");
        a.k("exitFullWindow")
    }

    t.src = function (a) {
        if (a === b)return U(this, "src");
        if (a instanceof Array) {
            var c;
            a:{
                c = a;
                for (var d = 0, e = this.j.techOrder; d < e.length; d++) {
                    var f = u.$(e[d]), g = window.videojs[f];
                    if (g) {
                        if (g.isSupported())for (var h = 0, i = c; h < i.length; h++) {
                            var j = i[h];
                            if (g.canPlaySource(j)) {
                                c = {source: j, g: f};
                                break a
                            }
                        }
                    } else u.log.error('The "' + f + '" tech is undefined. Skipped browser support check for that tech.')
                }
                c = l
            }
            c ? (a = c.source, c = c.g, c == this.Ca ? this.src(a) : R(this, c, a)) : (this.error({
                code: 4,
                message: this.options().notSupportedMessage
            }), this.Ea())
        } else a instanceof Object ? window.videojs[this.Ca].canPlaySource(a) ? this.src(a.src) : this.src([a]) : (this.z.src = a, this.ca ? (V(this, "src", a), "auto" == this.j.preload && this.load(), this.j.autoplay && this.play()) : this.I(function () {
            this.src(a)
        }));
        return this
    };
    t.load = function () {
        V(this, "load");
        return this
    };
    t.currentSrc = function () {
        return U(this, "currentSrc") || this.z.src || ""
    };
    t.Xa = function (a) {
        return a !== b ? (V(this, "setPreload", a), this.j.preload = a, this) : U(this, "preload")
    };
    t.autoplay = function (a) {
        return a !== b ? (V(this, "setAutoplay", a), this.j.autoplay = a, this) : U(this, "autoplay")
    };
    t.loop = function (a) {
        return a !== b ? (V(this, "setLoop", a), this.j.loop = a, this) : U(this, "loop")
    };
    t.poster = function (a) {
        if (a === b)return this.Bc;
        this.Bc = a;
        V(this, "setPoster", a);
        this.k("posterchange")
    };
    t.controls = function (a) {
        return a !== b ? (a = !!a, this.yb !== a && ((this.yb = a) ? (this.r("vjs-controls-disabled"), this.o("vjs-controls-enabled"), this.k("controlsenabled")) : (this.r("vjs-controls-enabled"), this.o("vjs-controls-disabled"), this.k("controlsdisabled"))), this) : this.yb
    };
    u.Player.prototype.Tb;
    t = u.Player.prototype;
    t.usingNativeControls = function (a) {
        return a !== b ? (a = !!a, this.Tb !== a && ((this.Tb = a) ? (this.o("vjs-using-native-controls"), this.k("usingnativecontrols")) : (this.r("vjs-using-native-controls"), this.k("usingcustomcontrols"))), this) : this.Tb
    };
    t.ba = j;
    t.error = function (a) {
        if (a === b)return this.ba;
        if (a === j)return this.ba = a, this.r("vjs-error"), this;
        this.ba = a instanceof u.F ? a : new u.F(a);
        this.k("error");
        this.o("vjs-error");
        u.log.error("(CODE:" + this.ba.code + " " + u.F.Ra[this.ba.code] + ")", this.ba.message, this.ba);
        return this
    };
    t.ended = function () {
        return U(this, "ended")
    };
    t.seeking = function () {
        return U(this, "seeking")
    };
    t.na = f;
    t.reportUserActivity = function () {
        this.na = f
    };
    t.Sb = f;
    t.userActive = function (a) {
        return a !== b ? (a = !!a, a !== this.Sb && ((this.Sb = a) ? (this.na = f, this.r("vjs-user-inactive"), this.o("vjs-user-active"), this.k("useractive")) : (this.na = l, this.g && this.g.W("mousemove", function (a) {
            a.stopPropagation();
            a.preventDefault()
        }), this.r("vjs-user-active"), this.o("vjs-user-inactive"), this.k("userinactive"))), this) : this.Sb
    };
    t.playbackRate = function (a) {
        return a !== b ? (V(this, "setPlaybackRate", a), this) : this.g && this.g.n && this.g.n.playbackRate ? U(this, "playbackRate") : 1
    };
    u.Ha = u.a.extend();
    u.Ha.prototype.j = {
        fe: "play",
        children: {
            playToggle: {},
            currentTimeDisplay: {},
            timeDivider: {},
            durationDisplay: {},
            remainingTimeDisplay: {},
            liveDisplay: {},
            progressControl: {},
            fullscreenToggle: {},
            volumeControl: {},
            muteToggle: {},
            playbackRateMenuButton: {}
        }
    };
    u.Ha.prototype.e = function () {
        return u.e("div", {className: "vjs-control-bar"})
    };
    u.Zb = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b)
        }
    });
    u.Zb.prototype.e = function () {
        var a = u.a.prototype.e.call(this, "div", {className: "vjs-live-controls vjs-control"});
        this.u = u.e("div", {
            className: "vjs-live-display",
            innerHTML: '<span class="vjs-control-text">Stream Type </span>LIVE',
            "aria-live": "off"
        });
        a.appendChild(this.u);
        return a
    };
    u.bc = u.s.extend({
        h: function (a, b) {
            u.s.call(this, a, b);
            a.d("play", u.bind(this, this.Ob));
            a.d("pause", u.bind(this, this.Nb))
        }
    });
    t = u.bc.prototype;
    t.sa = "Play";
    t.S = function () {
        return "vjs-play-control " + u.s.prototype.S.call(this)
    };
    t.q = function () {
        this.c.paused() ? this.c.play() : this.c.pause()
    };
    t.Ob = function () {
        u.r(this.b, "vjs-paused");
        u.o(this.b, "vjs-playing");
        this.b.children[0].children[0].innerHTML = "Pause"
    };
    t.Nb = function () {
        u.r(this.b, "vjs-playing");
        u.o(this.b, "vjs-paused");
        this.b.children[0].children[0].innerHTML = "Play"
    };
    u.fb = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            a.d("timeupdate", u.bind(this, this.fa))
        }
    });
    u.fb.prototype.e = function () {
        var a = u.a.prototype.e.call(this, "div", {className: "vjs-current-time vjs-time-controls vjs-control"});
        this.u = u.e("div", {
            className: "vjs-current-time-display",
            innerHTML: '<span class="vjs-control-text">Current Time </span>0:00',
            "aria-live": "off"
        });
        a.appendChild(this.u);
        return a
    };
    u.fb.prototype.fa = function () {
        var a = this.c.$a ? this.c.z.currentTime : this.c.currentTime();
        this.u.innerHTML = '<span class="vjs-control-text">Current Time </span>' + u.ya(a, this.c.duration())
    };
    u.gb = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            a.d("timeupdate", u.bind(this, this.fa))
        }
    });
    u.gb.prototype.e = function () {
        var a = u.a.prototype.e.call(this, "div", {className: "vjs-duration vjs-time-controls vjs-control"});
        this.u = u.e("div", {
            className: "vjs-duration-display",
            innerHTML: '<span class="vjs-control-text">Duration Time </span>0:00',
            "aria-live": "off"
        });
        a.appendChild(this.u);
        return a
    };
    u.gb.prototype.fa = function () {
        var a = this.c.duration();
        a && (this.u.innerHTML = '<span class="vjs-control-text">Duration Time </span>' + u.ya(a))
    };
    u.hc = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b)
        }
    });
    u.hc.prototype.e = function () {
        return u.a.prototype.e.call(this, "div", {
            className: "vjs-time-divider",
            innerHTML: "<div><span>/</span></div>"
        })
    };
    u.nb = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            a.d("timeupdate", u.bind(this, this.fa))
        }
    });
    u.nb.prototype.e = function () {
        var a = u.a.prototype.e.call(this, "div", {className: "vjs-remaining-time vjs-time-controls vjs-control"});
        this.u = u.e("div", {
            className: "vjs-remaining-time-display",
            innerHTML: '<span class="vjs-control-text">Remaining Time </span>-0:00',
            "aria-live": "off"
        });
        a.appendChild(this.u);
        return a
    };
    u.nb.prototype.fa = function () {
        this.c.duration() && (this.u.innerHTML = '<span class="vjs-control-text">Remaining Time </span>-' + u.ya(this.c.duration() - this.c.currentTime()))
    };
    u.Ia = u.s.extend({
        h: function (a, b) {
            u.s.call(this, a, b)
        }
    });
    u.Ia.prototype.sa = "Fullscreen";
    u.Ia.prototype.S = function () {
        return "vjs-fullscreen-control " + u.s.prototype.S.call(this)
    };
    u.Ia.prototype.q = function () {
        this.c.isFullscreen() ? (this.c.exitFullscreen(), this.xb.innerHTML = "Fullscreen") : (this.c.requestFullscreen(), this.xb.innerHTML = "Non-Fullscreen")
    };
    u.mb = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b)
        }
    });
    u.mb.prototype.j = {children: {seekBar: {}}};
    u.mb.prototype.e = function () {
        return u.a.prototype.e.call(this, "div", {className: "vjs-progress-control vjs-control"})
    };
    u.dc = u.Q.extend({
        h: function (a, b) {
            u.Q.call(this, a, b);
            a.d("timeupdate", u.bind(this, this.ma));
            a.I(u.bind(this, this.ma))
        }
    });
    t = u.dc.prototype;
    t.j = {
        children: {loadProgressBar: {}, playProgressBar: {}, seekHandle: {}},
        barName: "playProgressBar",
        handleName: "seekHandle"
    };
    t.Ac = "timeupdate";
    t.e = function () {
        return u.Q.prototype.e.call(this, "div", {className: "vjs-progress-holder", "aria-label": "video progress bar"})
    };
    t.ma = function () {
        var a = this.c.$a ? this.c.z.currentTime : this.c.currentTime();
        this.b.setAttribute("aria-valuenow", u.round(100 * this.Db(), 2));
        this.b.setAttribute("aria-valuetext", u.ya(a, this.c.duration()))
    };
    t.Db = function () {
        return this.c.currentTime() / this.c.duration()
    };
    t.Wa = function (a) {
        u.Q.prototype.Wa.call(this, a);
        this.c.$a = f;
        this.Xd = !this.c.paused();
        this.c.pause()
    };
    t.Lb = function (a) {
        a = J(this, a) * this.c.duration();
        a == this.c.duration() && (a -= .1);
        this.c.currentTime(a)
    };
    t.Mb = function (a) {
        u.Q.prototype.Mb.call(this, a);
        this.c.$a = l;
        this.Xd && this.c.play()
    };
    t.Hc = function () {
        this.c.currentTime(this.c.currentTime() + 5)
    };
    t.Gc = function () {
        this.c.currentTime(this.c.currentTime() - 5)
    };
    u.jb = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            a.d("progress", u.bind(this, this.update))
        }
    });
    u.jb.prototype.e = function () {
        return u.a.prototype.e.call(this, "div", {
            className: "vjs-load-progress",
            innerHTML: '<span class="vjs-control-text">Loaded: 0%</span>'
        })
    };
    u.jb.prototype.update = function () {
        this.b.style && (this.b.style.width = u.round(100 * this.c.bufferedPercent(), 2) + "%")
    };
    u.ac = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b)
        }
    });
    u.ac.prototype.e = function () {
        return u.a.prototype.e.call(this, "div", {
            className: "vjs-play-progress",
            innerHTML: '<span class="vjs-control-text">Progress: 0%</span>'
        })
    };
    u.Ka = u.Y.extend({
        h: function (a, b) {
            u.Y.call(this, a, b);
            a.d("timeupdate", u.bind(this, this.fa))
        }
    });
    u.Ka.prototype.defaultValue = "00:00";
    u.Ka.prototype.e = function () {
        return u.Y.prototype.e.call(this, "div", {className: "vjs-seek-handle", "aria-live": "off"})
    };
    u.Ka.prototype.fa = function () {
        var a = this.c.$a ? this.c.z.currentTime : this.c.currentTime();
        this.b.innerHTML = '<span class="vjs-control-text">' + u.ya(a, this.c.duration()) + "</span>"
    };
    u.pb = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            a.g && (a.g.n && a.g.n.volumeControl === l) && this.o("vjs-hidden");
            a.d("loadstart", u.bind(this, function () {
                a.g.n && a.g.n.volumeControl === l ? this.o("vjs-hidden") : this.r("vjs-hidden")
            }))
        }
    });
    u.pb.prototype.j = {children: {volumeBar: {}}};
    u.pb.prototype.e = function () {
        return u.a.prototype.e.call(this, "div", {className: "vjs-volume-control vjs-control"})
    };
    u.ob = u.Q.extend({
        h: function (a, b) {
            u.Q.call(this, a, b);
            a.d("volumechange", u.bind(this, this.ma));
            a.I(u.bind(this, this.ma))
        }
    });
    t = u.ob.prototype;
    t.ma = function () {
        this.b.setAttribute("aria-valuenow", u.round(100 * this.c.volume(), 2));
        this.b.setAttribute("aria-valuetext", u.round(100 * this.c.volume(), 2) + "%")
    };
    t.j = {children: {volumeLevel: {}, volumeHandle: {}}, barName: "volumeLevel", handleName: "volumeHandle"};
    t.Ac = "volumechange";
    t.e = function () {
        return u.Q.prototype.e.call(this, "div", {className: "vjs-volume-bar", "aria-label": "volume level"})
    };
    t.Lb = function (a) {
        this.c.muted() && this.c.muted(l);
        this.c.volume(J(this, a))
    };
    t.Db = function () {
        return this.c.muted() ? 0 : this.c.volume()
    };
    t.Hc = function () {
        this.c.volume(this.c.volume() + .1)
    };
    t.Gc = function () {
        this.c.volume(this.c.volume() - .1)
    };
    u.ic = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b)
        }
    });
    u.ic.prototype.e = function () {
        return u.a.prototype.e.call(this, "div", {
            className: "vjs-volume-level",
            innerHTML: '<span class="vjs-control-text"></span>'
        })
    };
    u.qb = u.Y.extend();
    u.qb.prototype.defaultValue = "00:00";
    u.qb.prototype.e = function () {
        return u.Y.prototype.e.call(this, "div", {className: "vjs-volume-handle"})
    };
    u.ha = u.s.extend({
        h: function (a, b) {
            u.s.call(this, a, b);
            a.d("volumechange", u.bind(this, this.update));
            a.g && (a.g.n && a.g.n.volumeControl === l) && this.o("vjs-hidden");
            a.d("loadstart", u.bind(this, function () {
                a.g.n && a.g.n.volumeControl === l ? this.o("vjs-hidden") : this.r("vjs-hidden")
            }))
        }
    });
    u.ha.prototype.e = function () {
        return u.s.prototype.e.call(this, "div", {
            className: "vjs-mute-control vjs-control",
            innerHTML: '<div><span class="vjs-control-text">Mute</span></div>'
        })
    };
    u.ha.prototype.q = function () {
        this.c.muted(this.c.muted() ? l : f)
    };
    u.ha.prototype.update = function () {
        var a = this.c.volume(), b = 3;
        0 === a || this.c.muted() ? b = 0 : .33 > a ? b = 1 : .67 > a && (b = 2);
        this.c.muted() ? "Unmute" != this.b.children[0].children[0].innerHTML && (this.b.children[0].children[0].innerHTML = "Unmute") : "Mute" != this.b.children[0].children[0].innerHTML && (this.b.children[0].children[0].innerHTML = "Mute");
        for (a = 0; 4 > a; a++)u.r(this.b, "vjs-vol-" + a);
        u.o(this.b, "vjs-vol-" + b)
    };
    u.qa = u.L.extend({
        h: function (a, b) {
            u.L.call(this, a, b);
            a.d("volumechange", u.bind(this, this.update));
            a.g && (a.g.n && a.g.n.Nc === l) && this.o("vjs-hidden");
            a.d("loadstart", u.bind(this, function () {
                a.g.n && a.g.n.Nc === l ? this.o("vjs-hidden") : this.r("vjs-hidden");
            }));
            this.o("vjs-menu-button")
        }
    });
    u.qa.prototype.va = function () {
        var a = new u.ga(this.c, {lc: "div"}), b = new u.ob(this.c, u.l.B({Wd: f}, this.j.me));
        a.V(b);
        return a
    };
    u.qa.prototype.q = function () {
        u.ha.prototype.q.call(this);
        u.L.prototype.q.call(this)
    };
    u.qa.prototype.e = function () {
        return u.s.prototype.e.call(this, "div", {
            className: "vjs-volume-menu-button vjs-menu-button vjs-control",
            innerHTML: '<div><span class="vjs-control-text">Mute</span></div>'
        })
    };
    u.qa.prototype.update = u.ha.prototype.update;
    u.cc = u.L.extend({
        h: function (a, b) {
            u.L.call(this, a, b);
            this.Mc();
            this.Lc();
            a.d("loadstart", u.bind(this, this.Mc));
            a.d("ratechange", u.bind(this, this.Lc))
        }
    });
    t = u.cc.prototype;
    t.e = function () {
        var a = u.a.prototype.e.call(this, "div", {
            className: "vjs-playback-rate vjs-menu-button vjs-control",
            innerHTML: '<div class="vjs-control-content"><span class="vjs-control-text">Playback Rate</span></div>'
        });
        this.xc = u.e("div", {className: "vjs-playback-rate-value", innerHTML: 1});
        a.appendChild(this.xc);
        return a
    };
    t.va = function () {
        var a = new u.ga(this.m()), b = this.m().options().playbackRates;
        if (b)for (var c = b.length - 1; 0 <= c; c--)a.V(new u.lb(this.m(), {rate: b[c] + "x"}));
        return a
    };
    t.ma = function () {
        this.w().setAttribute("aria-valuenow", this.m().playbackRate())
    };
    t.q = function () {
        for (var a = this.m().playbackRate(), b = this.m().options().playbackRates, c = b[0], d = 0; d < b.length; d++)if (b[d] > a) {
            c = b[d];
            break
        }
        this.m().playbackRate(c)
    };
    function fa(a) {
        return a.m().g && a.m().g.n.playbackRate && a.m().options().playbackRates && 0 < a.m().options().playbackRates.length
    }

    t.Mc = function () {
        fa(this) ? this.r("vjs-hidden") : this.o("vjs-hidden")
    };
    t.Lc = function () {
        fa(this) && (this.xc.innerHTML = this.m().playbackRate() + "x")
    };
    u.lb = u.J.extend({
        lc: "button", h: function (a, b) {
            var c = this.label = b.rate, d = this.Cc = parseFloat(c, 10);
            b.label = c;
            b.selected = 1 === d;
            u.J.call(this, a, b);
            this.m().d("ratechange", u.bind(this, this.update))
        }
    });
    u.lb.prototype.q = function () {
        u.J.prototype.q.call(this);
        this.m().playbackRate(this.Cc)
    };
    u.lb.prototype.update = function () {
        this.selected(this.m().playbackRate() == this.Cc)
    };
    u.Ja = u.s.extend({
        h: function (a, b) {
            u.s.call(this, a, b);
            a.poster() && this.src(a.poster());
            (!a.poster() || !a.controls()) && this.G();
            a.d("posterchange", u.bind(this, function () {
                this.src(a.poster())
            }));
            a.d("play", u.bind(this, this.G))
        }
    });
    var ga = "backgroundSize" in u.A.style;
    u.Ja.prototype.e = function () {
        var a = u.e("div", {className: "vjs-poster", tabIndex: -1});
        ga || a.appendChild(u.e("img"));
        return a
    };
    u.Ja.prototype.src = function (a) {
        var c = this.w();
        a !== b && (ga ? c.style.backgroundImage = 'url("' + a + '")' : c.firstChild.src = a)
    };
    u.Ja.prototype.q = function () {
        this.m().controls() && this.c.play()
    };
    u.$b = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            a.d("canplay", u.bind(this, this.G));
            a.d("canplaythrough", u.bind(this, this.G));
            a.d("playing", u.bind(this, this.G));
            a.d("seeking", u.bind(this, this.show));
            a.d("seeked", u.bind(this, this.G));
            a.d("ended", u.bind(this, this.G));
            a.d("waiting", u.bind(this, this.show))
        }
    });
    u.$b.prototype.e = function () {
        return u.a.prototype.e.call(this, "div", {className: "vjs-loading-spinner"})
    };
    u.cb = u.s.extend();
    u.cb.prototype.e = function () {
        return u.s.prototype.e.call(this, "div", {
            className: "vjs-big-play-button",
            innerHTML: '<span aria-hidden="true"></span>',
            "aria-label": "play video"
        })
    };
    u.cb.prototype.q = function () {
        this.c.play()
    };
    u.hb = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            this.update();
            a.d("error", u.bind(this, this.update))
        }
    });
    u.hb.prototype.e = function () {
        var a = u.a.prototype.e.call(this, "div", {className: "vjs-error-display"});
        this.u = u.e("div");
        a.appendChild(this.u);
        return a
    };
    u.hb.prototype.update = function () {
        this.m().error() && (this.u.innerHTML = this.m().error().message)
    };
    u.t = u.a.extend({
        h: function (a, b, c) {
            b = b || {};
            b.Ec = l;
            u.a.call(this, a, b, c);
            var d, e;
            e = this;
            d = this.m();
            a = function () {
                if (d.controls() && !d.usingNativeControls()) {
                    var a;
                    e.d("mousedown", e.q);
                    e.d("touchstart", function (b) {
                        b.preventDefault();
                        a = this.c.userActive()
                    });
                    e.d("touchmove", function () {
                        a && this.m().reportUserActivity()
                    });
                    I(e);
                    e.d("tap", e.Ed)
                }
            };
            b = u.bind(e, e.Id);
            this.I(a);
            d.d("controlsenabled", a);
            d.d("controlsdisabled", b)
        }
    });
    t = u.t.prototype;
    t.Id = function () {
        this.p("tap");
        this.p("touchstart");
        this.p("touchmove");
        this.p("touchleave");
        this.p("touchcancel");
        this.p("touchend");
        this.p("click");
        this.p("mousedown")
    };
    t.q = function (a) {
        0 === a.button && this.m().controls() && (this.m().paused() ? this.m().play() : this.m().pause())
    };
    t.Ed = function () {
        this.m().userActive(!this.m().userActive())
    };
    t.Qb = m();
    t.n = {volumeControl: f, fullscreenResize: l, playbackRate: l, progressEvents: l, timeupdateEvents: l};
    u.media = {};
    u.media.bb = "play pause paused currentTime setCurrentTime duration buffered volume setVolume muted setMuted width height supportsFullScreen enterFullScreen src load currentSrc preload setPreload autoplay setAutoplay loop setLoop error networkState readyState seeking initialTime startOffsetTime played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks defaultPlaybackRate playbackRate mediaGroup controller controls defaultMuted".split(" ");
    function ha() {
        var a = u.media.bb[i];
        return function () {
            throw Error('The "' + a + "\" method is not available on the playback technology's API")
        }
    }

    for (var i = u.media.bb.length - 1; 0 <= i; i--)u.t.prototype[u.media.bb[i]] = ha();
    u.f = u.t.extend({
        h: function (a, b, c) {
            this.n.volumeControl = u.f.dd();
            this.n.playbackRate = u.f.cd();
            this.n.movingMediaElementInDOM = !u.Sc;
            this.n.fullscreenResize = f;
            u.t.call(this, a, b, c);
            for (c = u.f.ib.length - 1; 0 <= c; c--)u.d(this.b, u.f.ib[c], u.bind(this, this.md));
            (b = b.source) && this.b.currentSrc === b.src && 0 < this.b.networkState ? a.I(function () {
                a.k("loadstart")
            }) : b && (this.b.src = b.src);
            if (u.fc && a.options().nativeControlsForTouch !== l) {
                var d, e, g, h;
                d = this;
                e = this.m();
                b = e.controls();
                d.b.controls = !!b;
                g = function () {
                    d.b.controls = f
                };
                h = function () {
                    d.b.controls = l
                };
                e.d("controlsenabled", g);
                e.d("controlsdisabled", h);
                b = function () {
                    e.p("controlsenabled", g);
                    e.p("controlsdisabled", h)
                };
                d.d("dispose", b);
                e.d("usingcustomcontrols", b);
                e.usingNativeControls(f)
            }
            a.I(function () {
                this.P && (this.j.autoplay && this.paused()) && (delete this.P.poster, this.play())
            });
            this.Ea()
        }
    });
    t = u.f.prototype;
    t.dispose = function () {
        u.t.prototype.dispose.call(this)
    };
    t.e = function () {
        var a = this.c, b = a.P, c;
        if (!b || this.n.movingMediaElementInDOM === l)b ? (c = b.cloneNode(l), u.f.nc(b), b = c, a.P = j) : b = u.e("video", {
            id: a.id() + "_html5_api",
            className: "vjs-tech"
        }), b.player = a, u.Eb(b, a.w());
        c = ["autoplay", "preload", "loop", "muted"];
        for (var d = c.length - 1; 0 <= d; d--) {
            var e = c[d];
            a.j[e] !== j && (b[e] = a.j[e])
        }
        return b
    };
    t.md = function (a) {
        "error" == a.type ? this.m().error(this.error().code) : (a.bubbles = l, this.m().k(a))
    };
    t.play = function () {
        this.b.play()
    };
    t.pause = function () {
        this.b.pause()
    };
    t.paused = function () {
        return this.b.paused
    };
    t.currentTime = function () {
        return this.b.currentTime
    };
    t.Kd = function (a) {
        try {
            this.b.currentTime = a
        } catch (a) {
            u.log(a, "Video is not ready. (Video.js)")
        }
    };
    t.duration = function () {
        return this.b.duration || 0
    };
    t.buffered = function () {
        return this.b.buffered
    };
    t.volume = function () {
        return this.b.volume
    };
    t.Qd = function (a) {
        this.b.volume = a
    };
    t.muted = function () {
        return this.b.muted
    };
    t.Nd = function (a) {
        this.b.muted = a
    };
    t.width = function () {
        return this.b.offsetWidth
    };
    t.height = function () {
        return this.b.offsetHeight
    };
    t.ab = function () {
        return "function" == typeof this.b.webkitEnterFullScreen && (/Android/.test(u.M) || !/Chrome|Mac OS X 10.5/.test(u.M)) ? f : l
    };
    t.oc = function () {
        var a = this.b;
        a.paused && a.networkState <= a.Zd ? (this.b.play(), setTimeout(function () {
            a.pause();
            a.webkitEnterFullScreen()
        }, 0)) : a.webkitEnterFullScreen()
    };
    t.nd = function () {
        this.b.webkitExitFullScreen()
    };
    t.src = function (a) {
        this.b.src = a
    };
    t.load = function () {
        this.b.load()
    };
    t.currentSrc = function () {
        return this.b.currentSrc
    };
    t.poster = function () {
        return this.b.poster
    };
    t.Qb = function (a) {
        this.b.poster = a
    };
    t.Xa = function () {
        return this.b.Xa
    };
    t.Pd = function (a) {
        this.b.Xa = a
    };
    t.autoplay = function () {
        return this.b.autoplay
    };
    t.Jd = function (a) {
        this.b.autoplay = a
    };
    t.controls = function () {
        return this.b.controls
    };
    t.loop = function () {
        return this.b.loop
    };
    t.Md = function (a) {
        this.b.loop = a
    };
    t.error = function () {
        return this.b.error
    };
    t.seeking = function () {
        return this.b.seeking
    };
    t.ended = function () {
        return this.b.ended
    };
    t.playbackRate = function () {
        return this.b.playbackRate
    };
    t.Od = function (a) {
        this.b.playbackRate = a
    };
    u.f.isSupported = function () {
        try {
            u.A.volume = .5
        } catch (a) {
            return l
        }
        return !!u.A.canPlayType
    };
    u.f.ub = function (a) {
        try {
            return !!u.A.canPlayType(a.type)
        } catch (a) {
            return ""
        }
    };
    u.f.dd = function () {
        var a = u.A.volume;
        u.A.volume = a / 2 + .1;
        return a !== u.A.volume
    };
    u.f.cd = function () {
        var a = u.A.playbackRate;
        u.A.playbackRate = a / 2 + .1;
        return a !== u.A.playbackRate
    };
    var W, ia = /^application\/(?:x-|vnd\.apple\.)mpegurl/i, ja = /^video\/mp4/i;
    u.f.zc = function () {
        4 <= u.Ub && (W || (W = u.A.constructor.prototype.canPlayType), u.A.constructor.prototype.canPlayType = function (a) {
            return a && ia.test(a) ? "maybe" : W.call(this, a)
        });
        u.Wc && (W || (W = u.A.constructor.prototype.canPlayType), u.A.constructor.prototype.canPlayType = function (a) {
            return a && ja.test(a) ? "maybe" : W.call(this, a)
        })
    };
    u.f.Vd = function () {
        var a = u.A.constructor.prototype.canPlayType;
        u.A.constructor.prototype.canPlayType = W;
        W = j;
        return a
    };
    u.f.zc();
    u.f.ib = "loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" ");
    u.f.nc = function (a) {
        if (a) {
            a.player = j;
            for (a.parentNode && a.parentNode.removeChild(a); a.hasChildNodes();)a.removeChild(a.firstChild);
            a.removeAttribute("src");
            if ("function" === typeof a.load)try {
                a.load()
            } catch (a) {
            }
        }
    };
    u.i = u.t.extend({
        h: function (a, b, c) {
            u.t.call(this, a, b, c);
            var d = b.source;
            c = b.parentEl;
            var e = this.b = u.e("div", {id: a.id() + "_temp_flash"}), g = a.id() + "_flash_api";
            a = a.j;
            var h = u.l.B({
                readyFunction: "videojs.Flash.onReady",
                eventProxyFunction: "videojs.Flash.onEvent",
                errorEventProxyFunction: "videojs.Flash.onError",
                autoplay: a.autoplay,
                preload: a.Xa,
                loop: a.loop,
                muted: a.muted
            }, b.flashVars), i = u.l.B({wmode: "opaque", bgcolor: "#000000"}, b.params), j = u.l.B({
                id: g,
                name: g,
                class: "vjs-tech"
            }, b.attributes), k;
            d && (d.type && u.i.vd(d.type) ? (a = u.i.Ic(d.src), h.rtmpConnection = encodeURIComponent(a.wb), h.rtmpStream = encodeURIComponent(a.Rb)) : h.src = encodeURIComponent(u.rc(d.src)));
            this.setCurrentTime = function (a) {
                k = a;
                this.b.vjs_setProperty("currentTime", a)
            };
            this.currentTime = function () {
                return this.seeking() ? k : this.b.vjs_getProperty("currentTime")
            };
            u.Eb(e, c);
            b.startTime && this.I(function () {
                this.load();
                this.play();
                this.currentTime(b.startTime)
            });
            u.Yb && this.I(function () {
                u.d(this.w(), "mousemove", u.bind(this, function () {
                    this.m().k({type: "mousemove", bubbles: l})
                }))
            });
            if (b.iFrameMode === f && !u.Yb) {
                var m = u.e("iframe", {
                    id: g + "_iframe",
                    name: g + "_iframe",
                    className: "vjs-tech",
                    scrolling: "no",
                    marginWidth: 0,
                    marginHeight: 0,
                    frameBorder: 0
                });
                h.readyFunction = "ready";
                h.eventProxyFunction = "events";
                h.errorEventProxyFunction = "errors";
                u.d(m, "load", u.bind(this, function () {
                    var a, c = m.contentWindow;
                    a = m.contentDocument ? m.contentDocument : m.contentWindow.document;
                    a.write(u.i.sc(b.swf, h, i, j));
                    c.player = this.c;
                    c.ready = u.bind(this.c, function (b) {
                        var c = this.g;
                        c.b = a.getElementById(b);
                        u.i.vb(c)
                    });
                    c.events = u.bind(this.c, function (a, b) {
                        this && "flash" === this.Ca && this.k(b)
                    });
                    c.errors = u.bind(this.c, function (a, b) {
                        u.log("Flash Error", b)
                    })
                }));
                e.parentNode.replaceChild(m, e)
            } else u.i.ld(b.swf, e, h, i, j)
        }
    });
    t = u.i.prototype;
    t.dispose = function () {
        u.t.prototype.dispose.call(this)
    };
    t.play = function () {
        this.b.vjs_play()
    };
    t.pause = function () {
        this.b.vjs_pause()
    };
    t.src = function (a) {
        if (a === b)return this.currentSrc();
        u.i.ud(a) ? (a = u.i.Ic(a), this.he(a.wb), this.ie(a.Rb)) : (a = u.rc(a), this.b.vjs_src(a));
        if (this.c.autoplay()) {
            var c = this;
            setTimeout(function () {
                c.play()
            }, 0)
        }
    };
    t.currentSrc = function () {
        var a = this.b.vjs_getProperty("currentSrc");
        if (a == j) {
            var b = this.rtmpConnection(), c = this.rtmpStream();
            b && c && (a = u.i.Rd(b, c))
        }
        return a
    };
    t.load = function () {
        this.b.vjs_load()
    };
    t.poster = function () {
        this.b.vjs_getProperty("poster")
    };
    t.Qb = m();
    t.buffered = function () {
        return u.zb(0, this.b.vjs_getProperty("buffered"))
    };
    t.ab = r(l);
    t.oc = r(l);
    var ka = u.i.prototype, X = "rtmpConnection rtmpStream preload defaultPlaybackRate playbackRate autoplay loop mediaGroup controller controls volume muted defaultMuted".split(" "), la = "error networkState readyState seeking initialTime duration startOffsetTime paused played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks".split(" ");

    function ma() {
        var a = X[Y], b = a.charAt(0).toUpperCase() + a.slice(1);
        ka["set" + b] = function (b) {
            return this.b.vjs_setProperty(a, b)
        }
    }

    function na(a) {
        ka[a] = function () {
            return this.b.vjs_getProperty(a)
        }
    }

    var Y;
    for (Y = 0; Y < X.length; Y++)na(X[Y]), ma();
    for (Y = 0; Y < la.length; Y++)na(la[Y]);
    u.i.isSupported = function () {
        return 10 <= u.i.version()[0]
    };
    u.i.ub = function (a) {
        if (!a.type)return "";
        a = a.type.replace(/;.*/, "").toLowerCase();
        if (a in u.i.pd || a in u.i.Jc)return "maybe"
    };
    u.i.pd = {"video/flv": "FLV", "video/x-flv": "FLV", "video/mp4": "MP4", "video/m4v": "MP4"};
    u.i.Jc = {"rtmp/mp4": "MP4", "rtmp/flv": "FLV"};
    u.i.onReady = function (a) {
        a = u.w(a);
        var b = a.player || a.parentNode.player, c = b.g;
        a.player = b;
        c.b = a;
        u.i.vb(c)
    };
    u.i.vb = function (a) {
        a.w().vjs_getProperty ? a.Ea() : setTimeout(function () {
            u.i.vb(a)
        }, 50)
    };
    u.i.onEvent = function (a, b) {
        u.w(a).player.k(b)
    };
    u.i.onError = function (a, b) {
        var c = u.w(a).player, d = "FLASH: " + b;
        "srcnotfound" == b ? c.error({code: 4, message: d}) : c.error(d)
    };
    u.i.version = function () {
        var a = "0,0,0";
        try {
            a = new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g, ",").match(/^,?(.+),?$/)[1]
        } catch (b) {
            try {
                navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin && (a = (navigator.plugins["Shockwave Flash 2.0"] || navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g, ",").match(/^,?(.+),?$/)[1])
            } catch (a) {
            }
        }
        return a.split(",")
    };
    u.i.ld = function (a, b, c, d, e) {
        a = u.i.sc(a, c, d, e);
        a = u.e("div", {innerHTML: a}).childNodes[0];
        c = b.parentNode;
        b.parentNode.replaceChild(a, b);
        var f = c.childNodes[0];
        setTimeout(function () {
            f.style.display = "block"
        }, 1e3)
    };
    u.i.sc = function (a, b, c, d) {
        var e = "", f = "", g = "";
        b && u.l.wa(b, function (a, b) {
            e += a + "=" + b + "&amp;"
        });
        c = u.l.B({movie: a, flashvars: e, allowScriptAccess: "always", allowNetworking: "all"}, c);
        u.l.wa(c, function (a, b) {
            f += '<param name="' + a + '" value="' + b + '" />'
        });
        d = u.l.B({data: a, width: "100%", height: "100%"}, d);
        u.l.wa(d, function (a, b) {
            g += a + '="' + b + '" '
        });
        return '<object type="application/x-shockwave-flash"' + g + ">" + f + "</object>"
    };
    u.i.Rd = function (a, b) {
        return a + "&" + b
    };
    u.i.Ic = function (a) {
        var b = {wb: "", Rb: ""};
        if (!a)return b;
        var c = a.indexOf("&"), d;
        -1 !== c ? d = c + 1 : (c = d = a.lastIndexOf("/") + 1, 0 === c && (c = d = a.length));
        b.wb = a.substring(0, c);
        b.Rb = a.substring(d, a.length);
        return b
    };
    u.i.vd = function (a) {
        return a in u.i.Jc
    };
    u.i.Yc = /^rtmp[set]?:\/\//i;
    u.i.ud = function (a) {
        return u.i.Yc.test(a)
    };
    u.Xc = u.a.extend({
        h: function (a, b, c) {
            u.a.call(this, a, b, c);
            if (!a.j.sources || 0 === a.j.sources.length) {
                b = 0;
                for (c = a.j.techOrder; b < c.length; b++) {
                    var d = u.$(c[b]), e = window.videojs[d];
                    if (e && e.isSupported()) {
                        R(a, d);
                        break
                    }
                }
            } else a.src(a.j.sources)
        }
    });
    u.Player.prototype.textTracks = function () {
        return this.Da = this.Da || []
    };
    function oa(a, b, c, d, e) {
        var f = a.Da = a.Da || [];
        e = e || {};
        e.kind = b;
        e.label = c;
        e.language = d;
        b = u.$(b || "subtitles");
        var g = new window.videojs[b + "Track"](a, e);
        f.push(g);
        g.Qa() && a.I(function () {
            setTimeout(function () {
                g.show()
            }, 0)
        })
    }

    function pa(a, b, c) {
        for (var d = a.Da, e = 0, f = d.length, g, h; e < f; e++)g = d[e], g.id() === b ? (g.show(), h = g) : c && (g.K() == c && 0 < g.mode()) && g.disable();
        (b = h ? h.K() : c ? c : l) && a.k(b + "trackchange")
    }

    u.C = u.a.extend({
        h: function (a, b) {
            u.a.call(this, a, b);
            this.T = b.id || "vjs_" + b.kind + "_" + b.language + "_" + u.v++;
            this.Fc = b.src;
            this.hd = b["default"] || b.dflt;
            this.Td = b.title;
            this.ee = b.srclang;
            this.wd = b.label;
            this.aa = [];
            this.rb = [];
            this.ka = this.la = 0;
            this.c.d("fullscreenchange", u.bind(this, this.$c))
        }
    });
    t = u.C.prototype;
    t.K = q("H");
    t.src = q("Fc");
    t.Qa = q("hd");
    t.title = q("Td");
    t.label = q("wd");
    t.ed = q("aa");
    t.Zc = q("rb");
    t.readyState = q("la");
    t.mode = q("ka");
    t.$c = function () {
        this.b.style.fontSize = this.c.isFullScreen() ? 140 * (screen.width / this.c.width()) + "%" : ""
    };
    t.e = function () {
        return u.a.prototype.e.call(this, "div", {className: "vjs-" + this.H + " vjs-text-track"})
    };
    t.show = function () {
        qa(this);
        this.ka = 2;
        u.a.prototype.show.call(this)
    };
    t.G = function () {
        qa(this);
        this.ka = 1;
        u.a.prototype.G.call(this)
    };
    t.disable = function () {
        2 == this.ka && this.G();
        this.c.p("timeupdate", u.bind(this, this.update, this.T));
        this.c.p("ended", u.bind(this, this.reset, this.T));
        this.reset();
        this.c.ja("textTrackDisplay").removeChild(this);
        this.ka = 0
    };
    function qa(a) {
        0 === a.la && a.load();
        0 === a.ka && (a.c.d("timeupdate", u.bind(a, a.update, a.T)), a.c.d("ended", u.bind(a, a.reset, a.T)), ("captions" === a.H || "subtitles" === a.H) && a.c.ja("textTrackDisplay").V(a))
    }

    t.load = function () {
        0 === this.la && (this.la = 1, u.get(this.Fc, u.bind(this, this.Fd), u.bind(this, this.zd)))
    };
    t.zd = function (a) {
        this.error = a;
        this.la = 3;
        this.k("error")
    };
    t.Fd = function (a) {
        var b, c;
        a = a.split("\n");
        for (var d = "", e = 1, f = a.length; e < f; e++)if (d = u.trim(a[e])) {
            -1 == d.indexOf("-->") ? (b = d, d = u.trim(a[++e])) : b = this.aa.length;
            b = {id: b, index: this.aa.length};
            c = d.split(" --> ");
            b.startTime = ra(c[0]);
            b.xa = ra(c[1]);
            for (c = []; a[++e] && (d = u.trim(a[e]));)c.push(d);
            b.text = c.join("<br/>");
            this.aa.push(b)
        }
        this.la = 2;
        this.k("loaded")
    };
    function ra(a) {
        var b = a.split(":");
        a = 0;
        var c, d, e;
        3 == b.length ? (c = b[0], d = b[1], b = b[2]) : (c = 0, d = b[0], b = b[1]);
        b = b.split(/\s+/);
        b = b.splice(0, 1)[0];
        b = b.split(/\.|,/);
        e = parseFloat(b[1]);
        b = b[0];
        a += 3600 * parseFloat(c);
        a += 60 * parseFloat(d);
        a += parseFloat(b);
        e && (a += e / 1e3);
        return a
    }

    t.update = function () {
        if (0 < this.aa.length) {
            var a = this.c.options().trackTimeOffset || 0, a = this.c.currentTime() + a;
            if (this.Pb === b || a < this.Pb || this.Ta <= a) {
                var c = this.aa, d = this.c.duration(), e = 0, g = l, h = [], i, j, k, m;
                a >= this.Ta || this.Ta === b ? m = this.Ab !== b ? this.Ab : 0 : (g = f, m = this.Hb !== b ? this.Hb : c.length - 1);
                for (; ;) {
                    k = c[m];
                    if (k.xa <= a)e = Math.max(e, k.xa), k.Ma && (k.Ma = l); else if (a < k.startTime) {
                        if (d = Math.min(d, k.startTime), k.Ma && (k.Ma = l), !g)break
                    } else g ? (h.splice(0, 0, k), j === b && (j = m), i = m) : (h.push(k), i === b && (i = m), j = m), d = Math.min(d, k.xa), e = Math.max(e, k.startTime), k.Ma = f;
                    if (g)if (0 === m)break; else m--; else if (m === c.length - 1)break; else m++
                }
                this.rb = h;
                this.Ta = d;
                this.Pb = e;
                this.Ab = i;
                this.Hb = j;
                i = this.rb;
                j = "";
                a = 0;
                for (c = i.length; a < c; a++)j += '<span class="vjs-tt-cue">' + i[a].text + "</span>";
                this.b.innerHTML = j;
                this.k("cuechange")
            }
        }
    };
    t.reset = function () {
        this.Ta = 0;
        this.Pb = this.c.duration();
        this.Hb = this.Ab = 0
    };
    u.Wb = u.C.extend();
    u.Wb.prototype.H = "captions";
    u.ec = u.C.extend();
    u.ec.prototype.H = "subtitles";
    u.Xb = u.C.extend();
    u.Xb.prototype.H = "chapters";
    u.gc = u.a.extend({
        h: function (a, b, c) {
            u.a.call(this, a, b, c);
            if (a.j.tracks && 0 < a.j.tracks.length) {
                b = this.c;
                a = a.j.tracks;
                for (var d = 0; d < a.length; d++)c = a[d], oa(b, c.kind, c.label, c.language, c)
            }
        }
    });
    u.gc.prototype.e = function () {
        return u.a.prototype.e.call(this, "div", {className: "vjs-text-track-display"})
    };
    u.Z = u.J.extend({
        h: function (a, b) {
            var c = this.ea = b.track;
            b.label = c.label();
            b.selected = c.Qa();
            u.J.call(this, a, b);
            this.c.d(c.K() + "trackchange", u.bind(this, this.update))
        }
    });
    u.Z.prototype.q = function () {
        u.J.prototype.q.call(this);
        pa(this.c, this.ea.T, this.ea.K())
    };
    u.Z.prototype.update = function () {
        this.selected(2 == this.ea.mode())
    };
    u.kb = u.Z.extend({
        h: function (a, b) {
            b.track = {
                K: function () {
                    return b.kind
                }, m: a, label: function () {
                    return b.kind + " off"
                }, Qa: r(l), mode: r(l)
            };
            u.Z.call(this, a, b);
            this.selected(f)
        }
    });
    u.kb.prototype.q = function () {
        u.Z.prototype.q.call(this);
        pa(this.c, this.ea.T, this.ea.K())
    };
    u.kb.prototype.update = function () {
        for (var a = this.c.textTracks(), b = 0, c = a.length, d, e = f; b < c; b++)d = a[b], d.K() == this.ea.K() && 2 == d.mode() && (e = l);
        this.selected(e)
    };
    u.U = u.L.extend({
        h: function (a, b) {
            u.L.call(this, a, b);
            1 >= this.O.length && this.G()
        }
    });
    u.U.prototype.ua = function () {
        var a = [], b;
        a.push(new u.kb(this.c, {kind: this.H}));
        for (var c = 0; c < this.c.textTracks().length; c++)b = this.c.textTracks()[c], b.K() === this.H && a.push(new u.Z(this.c, {track: b}));
        return a
    };
    u.Fa = u.U.extend({
        h: function (a, b, c) {
            u.U.call(this, a, b, c);
            this.b.setAttribute("aria-label", "Captions Menu")
        }
    });
    u.Fa.prototype.H = "captions";
    u.Fa.prototype.sa = "Captions";
    u.Fa.prototype.className = "vjs-captions-button";
    u.La = u.U.extend({
        h: function (a, b, c) {
            u.U.call(this, a, b, c);
            this.b.setAttribute("aria-label", "Subtitles Menu")
        }
    });
    u.La.prototype.H = "subtitles";
    u.La.prototype.sa = "Subtitles";
    u.La.prototype.className = "vjs-subtitles-button";
    u.Ga = u.U.extend({
        h: function (a, b, c) {
            u.U.call(this, a, b, c);
            this.b.setAttribute("aria-label", "Chapters Menu")
        }
    });
    t = u.Ga.prototype;
    t.H = "chapters";
    t.sa = "Chapters";
    t.className = "vjs-chapters-button";
    t.ua = function () {
        for (var a = [], b, c = 0; c < this.c.textTracks().length; c++)b = this.c.textTracks()[c], b.K() === this.H && a.push(new u.Z(this.c, {track: b}));
        return a
    };
    t.va = function () {
        for (var a = this.c.textTracks(), b = 0, c = a.length, d, e, f = this.O = []; b < c; b++)if (d = a[b], d.K() == this.H && d.Qa()) {
            if (2 > d.readyState()) {
                this.be = d;
                d.d("loaded", u.bind(this, this.va));
                return
            }
            e = d;
            break
        }
        a = this.za = new u.ga(this.c);
        a.ia().appendChild(u.e("li", {className: "vjs-menu-title", innerHTML: u.$(this.H), Sd: -1}));
        if (e) {
            d = e.aa;
            for (var g, b = 0, c = d.length; b < c; b++)g = d[b], g = new u.eb(this.c, {
                track: e,
                cue: g
            }), f.push(g), a.V(g)
        }
        0 < this.O.length && this.show();
        return a
    };
    u.eb = u.J.extend({
        h: function (a, b) {
            var c = this.ea = b.track, d = this.cue = b.cue, e = a.currentTime();
            b.label = d.text;
            b.selected = d.startTime <= e && e < d.xa;
            u.J.call(this, a, b);
            c.d("cuechange", u.bind(this, this.update))
        }
    });
    u.eb.prototype.q = function () {
        u.J.prototype.q.call(this);
        this.c.currentTime(this.cue.startTime);
        this.update(this.cue.startTime)
    };
    u.eb.prototype.update = function () {
        var a = this.cue, b = this.c.currentTime();
        this.selected(a.startTime <= b && b < a.xa)
    };
    u.l.B(u.Ha.prototype.j.children, {subtitlesButton: {}, captionsButton: {}, chaptersButton: {}});
    if ("undefined" !== typeof window.JSON && "function" === window.JSON.parse)u.JSON = window.JSON; else {
        u.JSON = {};
        var Z = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        u.JSON.parse = function (a, c) {
            function d(a, e) {
                var f, g, h = a[e];
                if (h && "object" === typeof h)for (f in h)Object.prototype.hasOwnProperty.call(h, f) && (g = d(h, f), g !== b ? h[f] = g : delete h[f]);
                return c.call(a, e, h)
            }

            var e;
            a = String(a);
            Z.lastIndex = 0;
            Z.test(a) && (a = a.replace(Z, function (a) {
                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
            }));
            if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")))return e = eval("(" + a + ")"), "function" === typeof c ? d({"": e}, "") : e;
            throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")
        }
    }
    u.jc = function () {
        var a, c, d = document.getElementsByTagName("video");
        if (d && 0 < d.length)for (var e = 0, f = d.length; e < f; e++)if ((c = d[e]) && c.getAttribute)c.player === b && (a = c.getAttribute("data-setup"), a !== j && (a = u.JSON.parse(a || "{}"), videojs(c, a))); else {
            u.sb();
            break
        } else u.Oc || u.sb()
    };
    u.sb = function () {
        setTimeout(u.jc, 1)
    };
    "complete" === document.readyState ? u.Oc = f : u.W(window, "load", function () {
        u.Oc = f
    });
    u.sb();
    u.Hd = function (a, b) {
        u.Player.prototype[a] = b
    };
    var sa = this;
    sa.Yd = f;
    function $(a, c) {
        var d = a.split("."), e = sa;
        !(d[0] in e) && e.execScript && e.execScript("var " + d[0]);
        for (var f; d.length && (f = d.shift());)!d.length && c !== b ? e[f] = c : e = e[f] ? e[f] : e[f] = {}
    }

    $("videojs", u);
    $("_V_", u);
    $("videojs.options", u.options);
    $("videojs.players", u.Aa);
    $("videojs.TOUCH_ENABLED", u.fc);
    $("videojs.cache", u.ta);
    $("videojs.Component", u.a);
    u.a.prototype.player = u.a.prototype.m;
    u.a.prototype.options = u.a.prototype.options;
    u.a.prototype.init = u.a.prototype.h;
    u.a.prototype.dispose = u.a.prototype.dispose;
    u.a.prototype.createEl = u.a.prototype.e;
    u.a.prototype.contentEl = u.a.prototype.ia;
    u.a.prototype.el = u.a.prototype.w;
    u.a.prototype.addChild = u.a.prototype.V;
    u.a.prototype.getChild = u.a.prototype.ja;
    u.a.prototype.getChildById = u.a.prototype.rd;
    u.a.prototype.children = u.a.prototype.children;
    u.a.prototype.initChildren = u.a.prototype.uc;
    u.a.prototype.removeChild = u.a.prototype.removeChild;
    u.a.prototype.on = u.a.prototype.d;
    u.a.prototype.off = u.a.prototype.p;
    u.a.prototype.one = u.a.prototype.W;
    u.a.prototype.trigger = u.a.prototype.k;
    u.a.prototype.triggerReady = u.a.prototype.Ea;
    u.a.prototype.show = u.a.prototype.show;
    u.a.prototype.hide = u.a.prototype.G;
    u.a.prototype.width = u.a.prototype.width;
    u.a.prototype.height = u.a.prototype.height;
    u.a.prototype.dimensions = u.a.prototype.jd;
    u.a.prototype.ready = u.a.prototype.I;
    u.a.prototype.addClass = u.a.prototype.o;
    u.a.prototype.removeClass = u.a.prototype.r;
    u.a.prototype.buildCSSClass = u.a.prototype.S;
    u.Player.prototype.ended = u.Player.prototype.ended;
    $("videojs.MediaLoader", u.Xc);
    $("videojs.TextTrackDisplay", u.gc);
    $("videojs.ControlBar", u.Ha);
    $("videojs.Button", u.s);
    $("videojs.PlayToggle", u.bc);
    $("videojs.FullscreenToggle", u.Ia);
    $("videojs.BigPlayButton", u.cb);
    $("videojs.LoadingSpinner", u.$b);
    $("videojs.CurrentTimeDisplay", u.fb);
    $("videojs.DurationDisplay", u.gb);
    $("videojs.TimeDivider", u.hc);
    $("videojs.RemainingTimeDisplay", u.nb);
    $("videojs.LiveDisplay", u.Zb);
    $("videojs.ErrorDisplay", u.hb);
    $("videojs.Slider", u.Q);
    $("videojs.ProgressControl", u.mb);
    $("videojs.SeekBar", u.dc);
    $("videojs.LoadProgressBar", u.jb);
    $("videojs.PlayProgressBar", u.ac);
    $("videojs.SeekHandle", u.Ka);
    $("videojs.VolumeControl", u.pb);
    $("videojs.VolumeBar", u.ob);
    $("videojs.VolumeLevel", u.ic);
    $("videojs.VolumeMenuButton", u.qa);
    $("videojs.VolumeHandle", u.qb);
    $("videojs.MuteToggle", u.ha);
    $("videojs.PosterImage", u.Ja);
    $("videojs.Menu", u.ga);
    $("videojs.MenuItem", u.J);
    $("videojs.MenuButton", u.L);
    $("videojs.PlaybackRateMenuButton", u.cc);
    u.L.prototype.createItems = u.L.prototype.ua;
    u.U.prototype.createItems = u.U.prototype.ua;
    u.Ga.prototype.createItems = u.Ga.prototype.ua;
    $("videojs.SubtitlesButton", u.La);
    $("videojs.CaptionsButton", u.Fa);
    $("videojs.ChaptersButton", u.Ga);
    $("videojs.MediaTechController", u.t);
    u.t.prototype.features = u.t.prototype.n;
    u.t.prototype.n.volumeControl = u.t.prototype.n.Nc;
    u.t.prototype.n.fullscreenResize = u.t.prototype.n.ce;
    u.t.prototype.n.progressEvents = u.t.prototype.n.ge;
    u.t.prototype.n.timeupdateEvents = u.t.prototype.n.je;
    u.t.prototype.setPoster = u.t.prototype.Qb;
    $("videojs.Html5", u.f);
    u.f.Events = u.f.ib;
    u.f.isSupported = u.f.isSupported;
    u.f.canPlaySource = u.f.ub;
    u.f.patchCanPlayType = u.f.zc;
    u.f.unpatchCanPlayType = u.f.Vd;
    u.f.prototype.setCurrentTime = u.f.prototype.Kd;
    u.f.prototype.setVolume = u.f.prototype.Qd;
    u.f.prototype.setMuted = u.f.prototype.Nd;
    u.f.prototype.setPreload = u.f.prototype.Pd;
    u.f.prototype.setAutoplay = u.f.prototype.Jd;
    u.f.prototype.setLoop = u.f.prototype.Md;
    u.f.prototype.enterFullScreen = u.f.prototype.oc;
    u.f.prototype.exitFullScreen = u.f.prototype.nd;
    u.f.prototype.playbackRate = u.f.prototype.playbackRate;
    u.f.prototype.setPlaybackRate = u.f.prototype.Od;
    $("videojs.Flash", u.i);
    u.i.isSupported = u.i.isSupported;
    u.i.canPlaySource = u.i.ub;
    u.i.onReady = u.i.onReady;
    $("videojs.TextTrack", u.C);
    u.C.prototype.label = u.C.prototype.label;
    u.C.prototype.kind = u.C.prototype.K;
    u.C.prototype.mode = u.C.prototype.mode;
    u.C.prototype.cues = u.C.prototype.ed;
    u.C.prototype.activeCues = u.C.prototype.Zc;
    $("videojs.CaptionsTrack", u.Wb);
    $("videojs.SubtitlesTrack", u.ec);
    $("videojs.ChaptersTrack", u.Xb);
    $("videojs.autoSetup", u.jc);
    $("videojs.plugin", u.Hd);
    $("videojs.createTimeRange", u.zb);
    $("videojs.util", u.oa);
    u.oa.mergeOptions = u.oa.Kb
})();
!function () {
    function a(a, b) {
        if ("undefined" == typeof a)return !1;
        var c = "innerText" in a ? "innerText" : "textContent";
        try {
            a[c] = b
        } catch (c) {
            a.setAttribute("innerText", b)
        }
    }

    function b(a, b, c) {
        a.addEventListener ? a.addEventListener(b, c, !0) : a.attachEvent(b, c)
    }

    videojs.Youtube = videojs.MediaTechController.extend({
        init: function (b, c, d) {
            if (videojs.MediaTechController.call(this, b, c, d), this.features.progressEvents = !1, this.features.timeupdateEvents = !1, "undefined" != typeof c.source)for (var e in c.source)b.options()[e] = c.source[e];
            this.userQuality = videojs.Youtube.convertQualityName(b.options().quality), this.player_ = b, this.player_el_ = document.getElementById(b.id()), this.player_el_.className += " vjs-youtube", this.qualityButton = document.createElement("div"), this.qualityButton.setAttribute("class", "vjs-quality-button vjs-menu-button vjs-control"), this.qualityButton.setAttribute("tabindex", 0);
            var f = document.createElement("div");
            this.qualityButton.appendChild(f), this.qualityTitle = document.createElement("span"), f.appendChild(this.qualityTitle), "undefined" !== b.options().quality && a(this.qualityTitle, b.options().quality);
            var g = document.createElement("div");
            g.setAttribute("class", "vjs-menu"), this.qualityButton.appendChild(g), this.qualityMenuContent = document.createElement("ul"), this.qualityMenuContent.setAttribute("class", "vjs-menu-content"), g.appendChild(this.qualityMenuContent), this.id_ = this.player_.id() + "_youtube_api", this.el_ = videojs.Component.prototype.createEl("iframe", {
                id: this.id_,
                className: "vjs-tech",
                scrolling: "no",
                marginWidth: 0,
                marginHeight: 0,
                frameBorder: 0,
                webkitAllowFullScreen: "true",
                mozallowfullscreen: "true",
                allowFullScreen: "true"
            }), this.player_el_.insertBefore(this.el_, this.player_el_.firstChild), this.parseSrc(b.options().src), this.playOnReady = this.player_.options().autoplay || !1, this.forceSSL = this.player_.options().forceSSL || !0, this.forceHTML5 = this.player_.options().forceHTML5 || !0;
            var h = {
                enablejsapi: 1,
                iv_load_policy: 3,
                playerapiid: this.id(),
                disablekb: 1,
                wmode: "transparent",
                controls: this.player_.options().ytcontrols ? 1 : 0,
                html5: this.player_.options().forceHTML5 ? 1 : null,
                playsinline: this.player_.options().playsInline ? 1 : 0,
                showinfo: 0,
                modestbranding: 1,
                rel: 0,
                autoplay: this.playOnReady ? 1 : 0,
                loop: this.player_.options().loop ? 1 : 0,
                list: this.playlistId,
                vq: this.userQuality,
                origin: window.location.protocol + "//" + window.location.host
            };
            for (var i in h)!h.hasOwnProperty(i) || "undefined" != typeof h[i] && null !== h[i] || delete h[i];
            if (null == this.videoId)this.el_.src = "about:blank"; else if (this.el_.src = (this.forceSSL ? "https:" : window.location.protocol) + "//www.youtube.com/embed/" + this.videoId + "?" + videojs.Youtube.makeQueryString(h), this.player_.options().ytcontrols ? this.player_.controls(!1) : setTimeout(function () {
                    var a = l.player_el_.querySelectorAll(".vjs-poster")[0];
                    a.style.backgroundImage = "url(https://img.youtube.com/vi/" + l.videoId + "/0.jpg)", a.style.display = ""
                }, 100), videojs.Youtube.apiReady)this.loadYoutube(); else if (videojs.Youtube.loadingQueue.push(this), !videojs.Youtube.apiLoading) {
                var j = document.createElement("script");
                j.onerror = function (a) {
                    l.onError(a)
                }, j.src = this.forceSSL || "file:" === window.location.protocol ? "https://www.youtube.com/iframe_api" : "//www.youtube.com/iframe_api";
                var k = document.getElementsByTagName("script")[0];
                k.parentNode.insertBefore(j, k), videojs.Youtube.apiLoading = !0
            }
            var l = this;
            b.ready(function () {
                var a = l.player_el_.querySelectorAll(".vjs-control-bar")[0];
                a.appendChild(l.qualityButton), l.playOnReady && !l.player_.options().ytcontrols && ("undefined" != typeof l.player_.loadingSpinner && l.player_.loadingSpinner.show(), "undefined" != typeof l.player_.bigPlayButton && l.player_.bigPlayButton.hide()), b.trigger("loadstart")
            }), this.on("dispose", function () {
                this.ytplayer.destroy(), this.el_.parentNode && this.el_.parentNode.removeChild(this.el_), this.qualityButton.parentNode.removeChild(this.qualityButton), "undefined" != typeof this.player_.loadingSpinner && this.player_.loadingSpinner.hide(), "undefined" != typeof this.player_.bigPlayButton && this.player_.bigPlayButton.hide()
            })
        }
    }), videojs.Youtube.prototype.parseSrc = function (b) {
        if (this.srcVal = b, b) {
            var c = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/, d = b.match(c);
            this.videoId = d && 11 == d[2].length ? d[2] : null;
            var e = /[?&]list=([^#\&\?]+)/;
            d = b.match(e), null != d && d.length > 1 ? this.playlistId = d[1] : this.playlistId && delete this.playlistId;
            var f = /[?&]vq=([^#\&\?]+)/;
            d = b.match(f), null != d && d.length > 1 && (this.userQuality = d[1], a(this.qualityTitle, videojs.Youtube.parseQualityName(this.userQuality)))
        }
    }, videojs.Youtube.prototype.src = function (a) {
        return a && (this.parseSrc(a), delete this.defaultQuality, null == this.videoId || (this.player_.options().autoplay ? this.ytplayer.loadVideoById({
            videoId: this.videoId,
            suggestedQuality: this.userQuality
        }) : this.ytplayer.cueVideoById({
            videoId: this.videoId,
            suggestedQuality: this.userQuality
        }), this.player_el_.querySelectorAll(".vjs-poster")[0].style.backgroundImage = "url(https://img.youtube.com/vi/" + this.videoId + "/0.jpg)", this.player_.poster("https://img.youtube.com/vi/" + this.videoId + "/0.jpg"))), this.srcVal
    }, videojs.Youtube.prototype.load = function () {
    }, videojs.Youtube.prototype.play = function () {
        null != this.videoId && (this.player_.options().ytcontrols || this.player_.trigger("waiting"), this.isReady_ ? this.ytplayer.playVideo() : this.playOnReady = !0)
    }, videojs.Youtube.prototype.pause = function () {
        this.ytplayer.pauseVideo()
    }, videojs.Youtube.prototype.paused = function () {
        return this.ytplayer ? this.lastState !== YT.PlayerState.PLAYING && this.lastState !== YT.PlayerState.BUFFERING : !0;
    }, videojs.Youtube.prototype.currentTime = function () {
        return this.ytplayer && this.ytplayer.getCurrentTime ? this.ytplayer.getCurrentTime() : 0
    }, videojs.Youtube.prototype.setCurrentTime = function (a) {
        this.ytplayer.seekTo(a, !0), this.player_.trigger("timeupdate")
    }, videojs.Youtube.prototype.duration = function () {
        return this.ytplayer && this.ytplayer.getDuration ? this.ytplayer.getDuration() : 0
    }, videojs.Youtube.prototype.currentSrc = function () {
        return this.srcVal
    }, videojs.Youtube.prototype.volume = function () {
        return this.ytplayer && isNaN(this.volumeVal) && (this.volumeVal = this.ytplayer.getVolume() / 100), this.volumeVal
    }, videojs.Youtube.prototype.setVolume = function (a) {
        a && a != this.volumeVal && (this.ytplayer.setVolume(100 * a), this.volumeVal = a, this.player_.trigger("volumechange"))
    }, videojs.Youtube.prototype.muted = function () {
        return this.mutedVal
    }, videojs.Youtube.prototype.setMuted = function (a) {
        a ? this.ytplayer.mute() : this.ytplayer.unMute(), this.mutedVal = a, this.player_.trigger("volumechange")
    }, videojs.Youtube.prototype.buffered = function () {
        if (this.ytplayer && this.ytplayer.getVideoBytesLoaded) {
            var a = this.ytplayer.getVideoBytesLoaded(), b = this.ytplayer.getVideoBytesTotal();
            if (!a || !b)return 0;
            var c = this.ytplayer.getDuration(), d = a / b * c, e = this.ytplayer.getVideoStartBytes() / b * c;
            return videojs.createTimeRange(e, e + d)
        }
        return videojs.createTimeRange(0, 0)
    }, videojs.Youtube.prototype.supportsFullScreen = function () {
        return !0
    }, videojs.Youtube.isSupported = function () {
        return !0
    }, videojs.Youtube.canPlaySource = function (a) {
        return "video/youtube" == a.type
    }, videojs.Youtube.canControlVolume = function () {
        return !0
    }, videojs.Youtube.loadingQueue = [], videojs.Youtube.prototype.loadYoutube = function () {
        this.ytplayer = new YT.Player(this.id_, {
            events: {
                onReady: function (a) {
                    a.target.vjsTech.onReady()
                }, onStateChange: function (a) {
                    a.target.vjsTech.onStateChange(a.data)
                }, onPlaybackQualityChange: function (a) {
                    a.target.vjsTech.onPlaybackQualityChange(a.data)
                }, onError: function (a) {
                    a.target.vjsTech.onError(a.data)
                }
            }
        }), this.ytplayer.vjsTech = this
    }, videojs.Youtube.makeQueryString = function (a) {
        var b = [];
        for (var c in a)a.hasOwnProperty(c) && b.push(c + "=" + a[c]);
        return b.join("&")
    }, window.onYouTubeIframeAPIReady = function () {
        for (var a; a = videojs.Youtube.loadingQueue.shift();)a.loadYoutube();
        videojs.Youtube.loadingQueue = [], videojs.Youtube.apiReady = !0
    }, videojs.Youtube.prototype.onReady = function () {
        this.isReady_ = !0, this.triggerReady(), "undefined" != typeof this.player_.loadingSpinner && this.player_.loadingSpinner.hide(), this.player_.options().muted && this.setMuted(!0), this.playOnReady && (this.playOnReady = !1, this.play())
    }, videojs.Youtube.prototype.updateQualities = function () {
        var c = this.ytplayer.getAvailableQualityLevels(), d = this;
        if (c.indexOf(this.userQuality) < 0 && a(d.qualityTitle, videojs.Youtube.parseQualityName(this.defaultQuality)), 0 == c.length)this.qualityButton.style.display = "none"; else {
            for (this.qualityButton.style.display = ""; this.qualityMenuContent.hasChildNodes();)this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild);
            for (var e = 0; e < c.length; ++e) {
                var f = document.createElement("li");
                f.setAttribute("class", "vjs-menu-item"), a(f, videojs.Youtube.parseQualityName(c[e])), f.setAttribute("data-val", c[e]), c[e] == this.quality && videojs.Youtube.addClass(f, "vjs-selected"), b(f, "click", function () {
                    var b = this.getAttribute("data-val");
                    d.ytplayer.setPlaybackQuality(b), d.userQuality = b, a(d.qualityTitle, videojs.Youtube.parseQualityName(b));
                    var c = d.qualityMenuContent.querySelector(".vjs-selected");
                    c && videojs.Youtube.removeClass(c, "vjs-selected"), videojs.Youtube.addClass(this, "vjs-selected")
                }), this.qualityMenuContent.appendChild(f)
            }
        }
    }, videojs.Youtube.prototype.onStateChange = function (a) {
        if (a != this.lastState) {
            switch (a) {
                case-1:
                    this.player_.trigger("durationchange");
                    break;
                case YT.PlayerState.ENDED:
                    this.player_.options().ytcontrols || (this.player_el_.querySelectorAll(".vjs-poster")[0].style.display = "block", "undefined" != typeof this.player_.bigPlayButton && this.player_.bigPlayButton.show()), this.player_.trigger("ended");
                    break;
                case YT.PlayerState.PLAYING:
                    "undefined" != typeof this.player_.bigPlayButton && this.player_.bigPlayButton.hide(), this.updateQualities(), this.player_.trigger("timeupdate"), this.player_.trigger("durationchange"), this.player_.trigger("playing"), this.player_.trigger("play");
                    break;
                case YT.PlayerState.PAUSED:
                    this.player_.trigger("pause");
                    break;
                case YT.PlayerState.BUFFERING:
                    this.player_.trigger("timeupdate"), this.player_.options().ytcontrols || this.player_.trigger("waiting");
                    break;
                case YT.PlayerState.CUED:
            }
            this.lastState = a
        }
    }, videojs.Youtube.convertQualityName = function (a) {
        switch (a) {
            case"144p":
                return "tiny";
            case"240p":
                return "small";
            case"360p":
                return "medium";
            case"480p":
                return "large";
            case"720p":
                return "hd720";
            case"1080p":
                return "hd1080"
        }
        return a
    }, videojs.Youtube.parseQualityName = function (a) {
        switch (a) {
            case"tiny":
                return "144p";
            case"small":
                return "240p";
            case"medium":
                return "360p";
            case"large":
                return "480p";
            case"hd720":
                return "720p";
            case"hd1080":
                return "1080p"
        }
        return a
    }, videojs.Youtube.prototype.onPlaybackQualityChange = function (b) {
        if ("undefined" != typeof this.defaultQuality || (this.defaultQuality = b, "undefined" == typeof this.userQuality)) {
            switch (this.quality = b, a(this.qualityTitle, videojs.Youtube.parseQualityName(b)), b) {
                case"medium":
                    this.player_.videoWidth = 480, this.player_.videoHeight = 360;
                    break;
                case"large":
                    this.player_.videoWidth = 640, this.player_.videoHeight = 480;
                    break;
                case"hd720":
                    this.player_.videoWidth = 960, this.player_.videoHeight = 720;
                    break;
                case"hd1080":
                    this.player_.videoWidth = 1440, this.player_.videoHeight = 1080;
                    break;
                case"highres":
                    this.player_.videoWidth = 1920, this.player_.videoHeight = 1080;
                    break;
                case"small":
                    this.player_.videoWidth = 320, this.player_.videoHeight = 240;
                    break;
                case"tiny":
                    this.player_.videoWidth = 144, this.player_.videoHeight = 108;
                    break;
                default:
                    this.player_.videoWidth = 0, this.player_.videoHeight = 0
            }
            this.player_.trigger("ratechange")
        }
    }, videojs.Youtube.prototype.onError = function (a) {
        this.player_.error = a, this.player_.trigger("error"), (100 == a || 101 == a || 150 == a) && (this.player_.bigPlayButton.hide(), this.player_.loadingSpinner.hide(), this.player_.posterImage.hide())
    }, videojs.Youtube.addClass = function (a, b) {
        -1 == (" " + a.className + " ").indexOf(" " + b + " ") && (a.className = "" === a.className ? b : a.className + " " + b)
    }, videojs.Youtube.removeClass = function (a, b) {
        var c, d;
        if (-1 != a.className.indexOf(b)) {
            for (c = a.className.split(" "), d = c.length - 1; d >= 0; d--)c[d] === b && c.splice(d, 1);
            a.className = c.join(" ")
        }
    };
    var c = document.createElement("style"), d = "   .vjs-youtube .vjs-poster { background-size: 100%!important; }  .vjs-poster, .vjs-loading-spinner, .vjs-big-play-button, .vjs-text-track-display{ pointer-events: none !important; }  .vjs-youtube.vjs-user-inactive .vjs-tech { pointer-events: none; }  .vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }  ";
    c.setAttribute("type", "text/css"), document.getElementsByTagName("head")[0].appendChild(c), c.styleSheet ? c.styleSheet.cssText = d : c.appendChild(document.createTextNode(d))
}();
var VimeoState = {UNSTARTED: -1, ENDED: 0, PLAYING: 1, PAUSED: 2, BUFFERING: 3};
videojs.Vimeo = videojs.MediaTechController.extend({
    init: function (a, b, c) {
        videojs.MediaTechController.call(this, a, b, c);
        this.player_ = a;
        this.player_el_ = document.getElementById(this.player_.id());
        this.player_.controls(false);
        this.id_ = this.player_.id() + "_vimeo_api";
        this.el_ = videojs.Component.prototype.createEl("iframe", {
            id: this.id_,
            className: "vjs-tech",
            scrolling: "no",
            marginWidth: 0,
            marginHeight: 0,
            frameBorder: 0,
            webkitAllowFullScreen: "true",
            mozallowfullscreen: "true",
            allowFullScreen: "true"
        });
        this.player_el_.insertBefore(this.el_, this.player_el_.firstChild);
        this.baseUrl = document.location.protocol == "https" ? "https://secure.vimeo.com/video/" : "http://player.vimeo.com/video/";
        this.vimeo = {};
        this.vimeoInfo = {};
        var d = this;
        this.el_.onload = function () {
            d.onLoad()
        };
        this.startMuted = a.options()["muted"];
        this.src(a.options()["src"] || a.options()["sources"][0].src)
    }
});
videojs.Vimeo.prototype.dispose = function () {
    this.vimeo.api("unload");
    delete this.vimeo;
    this.el_.parentNode.removeChild(this.el_);
    videojs.MediaTechController.prototype.dispose.call(this)
};
videojs.Vimeo.prototype.src = function (a) {
    this.isReady_ = false;
    var b = /^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/;
    var c = a.match(b);
    if (c) {
        this.videoId = c[5]
    } else {
        b = /^.*(vimeo\.com\/)video\/([0-9]+)/;
        c = a.match(b);
        if (c) {
            this.videoId = c[2]
        }
    }
    var d = {
        api: 1,
        byline: 0,
        portrait: 0,
        show_title: 0,
        show_byline: 0,
        show_portait: 0,
        fullscreen: 1,
        player_id: this.id_,
        autoplay: this.player_.options()["autoplay"] ? 1 : 0,
        loop: this.player_.options()["loop"] ? 1 : 0
    };
    this.el_.src = this.baseUrl + this.videoId + "?" + videojs.Vimeo.makeQueryString(d)
};
videojs.Vimeo.prototype.load = function () {
};
videojs.Vimeo.prototype.play = function () {
    this.vimeo.api("play")
};
videojs.Vimeo.prototype.pause = function () {
    this.vimeo.api("pause")
};
videojs.Vimeo.prototype.paused = function () {
    return this.lastState !== VimeoState.PLAYING && this.lastState !== VimeoState.BUFFERING
};
videojs.Vimeo.prototype.currentTime = function () {
    return this.vimeoInfo.time || 0
};
videojs.Vimeo.prototype.setCurrentTime = function (a) {
    this.vimeo.api("seekTo", a);
    this.player_.trigger("timeupdate")
};
videojs.Vimeo.prototype.duration = function () {
    return this.vimeoInfo.duration || 0
};
videojs.Vimeo.prototype.buffered = function () {
    return videojs.createTimeRange(0, this.vimeoInfo.buffered || 0)
};
videojs.Vimeo.prototype.volume = function () {
    return this.vimeoInfo.muted ? this.vimeoInfo.muteVolume : this.vimeoInfo.volume
};
videojs.Vimeo.prototype.setVolume = function (a) {
    this.vimeo.api("setvolume", a);
    this.vimeoInfo.volume = a;
    this.player_.trigger("volumechange")
};
videojs.Vimeo.prototype.muted = function () {
    return this.vimeoInfo.muted || false
};
videojs.Vimeo.prototype.setMuted = function (a) {
    if (a) {
        this.vimeoInfo.muteVolume = this.vimeoInfo.volume;
        this.setVolume(0)
    } else {
        this.setVolume(this.vimeoInfo.muteVolume)
    }
    this.vimeoInfo.muted = a;
    this.player_.trigger("volumechange")
};
videojs.Vimeo.prototype.onReady = function () {
    this.isReady_ = true;
    this.triggerReady();
    if (this.startMuted) {
        this.setMuted(true);
        this.startMuted = false
    }
};
videojs.Vimeo.prototype.onLoad = function () {
    if (this.vimeo.api) {
        this.vimeo.api("unload");
        delete this.vimeo
    }
    this.vimeo = $f(this.el_);
    this.vimeoInfo = {
        state: VimeoState.UNSTARTED,
        volume: 1,
        muted: false,
        muteVolume: 1,
        time: 0,
        duration: 0,
        buffered: 0,
        url: this.baseUrl + this.videoId,
        error: null
    };
    var a = this;
    this.vimeo.addEvent("ready", function (b) {
        a.onReady()
    });
    this.vimeo.addEvent("loadProgress", function (b, c) {
        a.onLoadProgress(b)
    });
    this.vimeo.addEvent("playProgress", function (b, c) {
        a.onPlayProgress(b)
    });
    this.vimeo.addEvent("play", function (b) {
        a.onPlay()
    });
    this.vimeo.addEvent("pause", function (b) {
        a.onPause()
    });
    this.vimeo.addEvent("finish", function (b) {
        a.onFinish()
    });
    this.vimeo.addEvent("seek", function (b, c) {
        a.onSeek(b)
    })
};
videojs.Vimeo.prototype.onLoadProgress = function (a) {
    var b = !this.vimeoInfo.duration;
    this.vimeoInfo.duration = a.duration;
    this.vimeoInfo.buffered = a.percent;
    this.player_.trigger("progress");
    if (b)this.player_.trigger("durationchange")
};
videojs.Vimeo.prototype.onPlayProgress = function (a) {
    this.vimeoInfo.time = a.seconds;
    this.player_.trigger("timeupdate")
};
videojs.Vimeo.prototype.onPlay = function () {
    this.vimeoInfo.state = VimeoState.PLAYING;
    this.player_.trigger("play")
};
videojs.Vimeo.prototype.onPause = function () {
    this.vimeoInfo.state = VimeoState.PAUSED;
    this.player_.trigger("pause")
};
videojs.Vimeo.prototype.onFinish = function () {
    this.vimeoInfo.state = VimeoState.ENDED;
    this.player_.trigger("ended")
};
videojs.Vimeo.prototype.onSeek = function (a) {
    this.vimeoInfo.time = a.seconds;
    this.player_.trigger("timeupdate");
    this.player_.trigger("seeked")
};
videojs.Vimeo.prototype.onError = function (a) {
    this.player_.error = a;
    this.player_.trigger("error")
};
videojs.Vimeo.isSupported = function () {
    return true
};
videojs.Vimeo.prototype.supportsFullScreen = function () {
    return false
};
videojs.Vimeo.canPlaySource = function (a) {
    return a.type == "video/vimeo"
};
videojs.Vimeo.makeQueryString = function (a) {
    var b = [];
    for (var c in a) {
        if (a.hasOwnProperty(c)) {
            b.push(encodeURIComponent(c) + "=" + encodeURIComponent(a[c]))
        }
    }
    return b.join("&")
};
var Froogaloop = function () {
    function a(b) {
        return new a.fn.init(b)
    }

    var b = {}, c = false, d = false, e = Array.prototype.slice, f = "";
    a.fn = a.prototype = {
        element: null, init: function (a) {
            if (typeof a === "string") {
                a = document.getElementById(a)
            }
            this.element = a;
            f = l(this.element.getAttribute("src"));
            return this
        }, api: function (a, b) {
            if (!this.element || !a) {
                return false
            }
            var c = this, d = c.element, e = d.id !== "" ? d.id : null, f = !m(b) ? b : null, h = m(b) ? b : null;
            if (h) {
                i(a, h, e)
            }
            g(a, f, d);
            return c
        }, addEvent: function (a, b) {
            if (!this.element) {
                return false
            }
            var c = this, e = c.element, f = e.id !== "" ? e.id : null;
            i(a, b, f);
            if (a != "ready") {
                g("addEventListener", a, e)
            } else if (a == "ready" && d) {
                b.call(null, f)
            }
            return c
        }, removeEvent: function (a) {
            if (!this.element) {
                return false
            }
            var b = this, c = b.element, d = c.id !== "" ? c.id : null, e = k(a, d);
            if (a != "ready" && e) {
                g("removeEventListener", a, c)
            }
        }
    };
    function g(a, b, c) {
        if (!c.contentWindow.postMessage) {
            return false
        }
        var d = c.getAttribute("src").split("?")[0], e = JSON.stringify({method: a, value: b});
        if (d.substr(0, 2) === "//") {
            d = window.location.protocol + d
        }
        c.contentWindow.postMessage(e, d)
    }

    function h(a) {
        var b, c;
        try {
            b = JSON.parse(a.data);
            c = b.event || b.method
        } catch (a) {
        }
        if (c == "ready" && !d) {
            d = true
        }
        if (a.origin != f) {
            return false
        }
        var e = b.value, g = b.data, h = h === "" ? null : b.player_id, i = j(c, h), k = [];
        if (!i) {
            return false
        }
        if (e !== undefined) {
            k.push(e)
        }
        if (g) {
            k.push(g)
        }
        if (h) {
            k.push(h)
        }
        return k.length > 0 ? i.apply(null, k) : i.call()
    }

    function i(a, c, d) {
        if (d) {
            if (!b[d]) {
                b[d] = {}
            }
            b[d][a] = c
        } else {
            b[a] = c
        }
    }

    function j(a, c) {
        if (c) {
            return b[c][a]
        } else {
            return b[a]
        }
    }

    function k(a, c) {
        if (c && b[c]) {
            if (!b[c][a]) {
                return false
            }
            b[c][a] = null
        } else {
            if (!b[a]) {
                return false
            }
            b[a] = null
        }
        return true
    }

    function l(a) {
        if (a.substr(0, 2) === "//") {
            a = window.location.protocol + a
        }
        var b = a.split("/"), c = "";
        for (var d = 0, e = b.length; d < e; d++) {
            if (d < 3) {
                c += b[d]
            } else {
                break
            }
            if (d < 2) {
                c += "/"
            }
        }
        return c
    }

    function m(a) {
        return !!(a && a.constructor && a.call && a.apply)
    }

    function n(a) {
        return toString.call(a) === "[object Array]"
    }

    a.fn.init.prototype = a.fn;
    if (window.addEventListener) {
        window.addEventListener("message", h, false)
    } else {
        window.attachEvent("onmessage", h)
    }
    return window.Froogaloop = window.$f = a
}();
(function a(b, c, d) {
    function e(g, h) {
        if (!c[g]) {
            if (!b[g]) {
                var i = typeof require == "function" && require;
                if (!h && i)return i(g, !0);
                if (f)return f(g, !0);
                var j = new Error("Cannot find module '" + g + "'");
                throw j.code = "MODULE_NOT_FOUND", j
            }
            var k = c[g] = {exports: {}};
            b[g][0].call(k.exports, function (a) {
                var c = b[g][1][a];
                return e(c ? c : a)
            }, k, k.exports, a, b, c, d)
        }
        return c[g].exports
    }

    var f = typeof require == "function" && require;
    for (var g = 0; g < d.length; g++)e(d[g]);
    return e
})({
    1: [function (a, b, c) {
        "use strict";
        var d = a("../main");
        var e = a("../plugin/instances");

        function f(a) {
            a.fn.perfectScrollbar = function (a) {
                return this.each(function () {
                    if (typeof a === "object" || typeof a === "undefined") {
                        var b = a;
                        if (!e.get(this)) {
                            d.initialize(this, b)
                        }
                    } else {
                        var c = a;
                        if (c === "update") {
                            d.update(this)
                        } else if (c === "destroy") {
                            d.destroy(this)
                        }
                    }
                })
            }
        }

        if (typeof define === "function" && define.amd) {
            define(["jquery"], f)
        } else {
            var g = window.jQuery ? window.jQuery : window.$;
            if (typeof g !== "undefined") {
                f(g)
            }
        }
        b.exports = f
    }, {"../main": 7, "../plugin/instances": 18}],
    2: [function (a, b, c) {
        "use strict";
        function d(a, b) {
            var c = a.className.split(" ");
            if (c.indexOf(b) < 0) {
                c.push(b)
            }
            a.className = c.join(" ")
        }

        function e(a, b) {
            var c = a.className.split(" ");
            var d = c.indexOf(b);
            if (d >= 0) {
                c.splice(d, 1)
            }
            a.className = c.join(" ")
        }

        c.add = function (a, b) {
            if (a.classList) {
                a.classList.add(b)
            } else {
                d(a, b)
            }
        };
        c.remove = function (a, b) {
            if (a.classList) {
                a.classList.remove(b)
            } else {
                e(a, b)
            }
        };
        c.list = function (a) {
            if (a.classList) {
                return Array.prototype.slice.apply(a.classList)
            } else {
                return a.className.split(" ")
            }
        }
    }, {}],
    3: [function (a, b, c) {
        "use strict";
        var d = {};
        d.e = function (a, b) {
            var c = document.createElement(a);
            c.className = b;
            return c
        };
        d.appendTo = function (a, b) {
            b.appendChild(a);
            return a
        };
        function e(a, b) {
            return window.getComputedStyle(a)[b]
        }

        function f(a, b, c) {
            if (typeof c === "number") {
                c = c.toString() + "px"
            }
            a.style[b] = c;
            return a
        }

        function g(a, b) {
            for (var c in b) {
                var d = b[c];
                if (typeof d === "number") {
                    d = d.toString() + "px"
                }
                a.style[c] = d
            }
            return a
        }

        d.css = function (a, b, c) {
            if (typeof b === "object") {
                return g(a, b)
            } else {
                if (typeof c === "undefined") {
                    return e(a, b)
                } else {
                    return f(a, b, c)
                }
            }
        };
        d.matches = function (a, b) {
            if (typeof a.matches !== "undefined") {
                return a.matches(b)
            } else {
                if (typeof a.matchesSelector !== "undefined") {
                    return a.matchesSelector(b)
                } else if (typeof a.webkitMatchesSelector !== "undefined") {
                    return a.webkitMatchesSelector(b)
                } else if (typeof a.mozMatchesSelector !== "undefined") {
                    return a.mozMatchesSelector(b)
                } else if (typeof a.msMatchesSelector !== "undefined") {
                    return a.msMatchesSelector(b)
                }
            }
        };
        d.remove = function (a) {
            if (typeof a.remove !== "undefined") {
                a.remove()
            } else {
                if (a.parentNode) {
                    a.parentNode.removeChild(a)
                }
            }
        };
        d.queryChildren = function (a, b) {
            return Array.prototype.filter.call(a.childNodes, function (a) {
                return d.matches(a, b)
            })
        };
        b.exports = d
    }, {}],
    4: [function (a, b, c) {
        "use strict";
        var d = function (a) {
            this.element = a;
            this.events = {}
        };
        d.prototype.bind = function (a, b) {
            if (typeof this.events[a] === "undefined") {
                this.events[a] = []
            }
            this.events[a].push(b);
            this.element.addEventListener(a, b, false)
        };
        d.prototype.unbind = function (a, b) {
            var c = typeof b !== "undefined";
            this.events[a] = this.events[a].filter(function (d) {
                if (c && d !== b) {
                    return true
                }
                this.element.removeEventListener(a, d, false);
                return false
            }, this)
        };
        d.prototype.unbindAll = function () {
            for (var a in this.events) {
                this.unbind(a)
            }
        };
        var e = function () {
            this.eventElements = []
        };
        e.prototype.eventElement = function (a) {
            var b = this.eventElements.filter(function (b) {
                return b.element === a
            })[0];
            if (typeof b === "undefined") {
                b = new d(a);
                this.eventElements.push(b)
            }
            return b
        };
        e.prototype.bind = function (a, b, c) {
            this.eventElement(a).bind(b, c)
        };
        e.prototype.unbind = function (a, b, c) {
            this.eventElement(a).unbind(b, c)
        };
        e.prototype.unbindAll = function () {
            for (var a = 0; a < this.eventElements.length; a++) {
                this.eventElements[a].unbindAll()
            }
        };
        e.prototype.once = function (a, b, c) {
            var d = this.eventElement(a);
            var e = function (a) {
                d.unbind(b, e);
                c(a)
            };
            d.bind(b, e)
        };
        b.exports = e
    }, {}],
    5: [function (a, b, c) {
        "use strict";
        b.exports = function () {
            function a() {
                return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1)
            }

            return function () {
                return a() + a() + "-" + a() + "-" + a() + "-" + a() + "-" + a() + a() + a()
            }
        }()
    }, {}],
    6: [function (a, b, c) {
        "use strict";
        var d = a("./class");
        var e = a("./dom");
        var f = c.toInt = function (a) {
            return parseInt(a, 10) || 0
        };
        var g = c.clone = function (a) {
            if (a === null) {
                return null
            } else if (a.constructor === Array) {
                return a.map(g)
            } else if (typeof a === "object") {
                var b = {};
                for (var c in a) {
                    b[c] = g(a[c])
                }
                return b
            } else {
                return a
            }
        };
        c.extend = function (a, b) {
            var c = g(a);
            for (var d in b) {
                c[d] = g(b[d])
            }
            return c
        };
        c.isEditable = function (a) {
            return e.matches(a, "input,[contenteditable]") || e.matches(a, "select,[contenteditable]") || e.matches(a, "textarea,[contenteditable]") || e.matches(a, "button,[contenteditable]")
        };
        c.removePsClasses = function (a) {
            var b = d.list(a);
            for (var c = 0; c < b.length; c++) {
                var e = b[c];
                if (e.indexOf("ps-") === 0) {
                    d.remove(a, e)
                }
            }
        };
        c.outerWidth = function (a) {
            return f(e.css(a, "width")) + f(e.css(a, "paddingLeft")) + f(e.css(a, "paddingRight")) + f(e.css(a, "borderLeftWidth")) + f(e.css(a, "borderRightWidth"))
        };
        c.startScrolling = function (a, b) {
            d.add(a, "ps-in-scrolling");
            if (typeof b !== "undefined") {
                d.add(a, "ps-" + b)
            } else {
                d.add(a, "ps-x");
                d.add(a, "ps-y")
            }
        };
        c.stopScrolling = function (a, b) {
            d.remove(a, "ps-in-scrolling");
            if (typeof b !== "undefined") {
                d.remove(a, "ps-" + b)
            } else {
                d.remove(a, "ps-x");
                d.remove(a, "ps-y")
            }
        };
        c.env = {
            isWebKit: "WebkitAppearance" in document.documentElement.style,
            supportsTouch: "ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch,
            supportsIePointer: window.navigator.msMaxTouchPoints !== null
        }
    }, {"./class": 2, "./dom": 3}],
    7: [function (a, b, c) {
        "use strict";
        var d = a("./plugin/destroy");
        var e = a("./plugin/initialize");
        var f = a("./plugin/update");
        b.exports = {initialize: e, update: f, destroy: d}
    }, {"./plugin/destroy": 9, "./plugin/initialize": 17, "./plugin/update": 21}],
    8: [function (a, b, c) {
        "use strict";
        b.exports = {
            handlers: ["click-rail", "drag-scrollbar", "keyboard", "wheel", "touch"],
            maxScrollbarLength: null,
            minScrollbarLength: null,
            scrollXMarginOffset: 0,
            scrollYMarginOffset: 0,
            stopPropagationOnClick: true,
            suppressScrollX: false,
            suppressScrollY: false,
            swipePropagation: true,
            useBothWheelAxes: false,
            wheelPropagation: false,
            wheelSpeed: 1,
            theme: "default"
        }
    }, {}],
    9: [function (a, b, c) {
        "use strict";
        var d = a("../lib/helper");
        var e = a("../lib/dom");
        var f = a("./instances");
        b.exports = function (a) {
            var b = f.get(a);
            if (!b) {
                return
            }
            b.event.unbindAll();
            e.remove(b.scrollbarX);
            e.remove(b.scrollbarY);
            e.remove(b.scrollbarXRail);
            e.remove(b.scrollbarYRail);
            d.removePsClasses(a);
            f.remove(a)
        }
    }, {"../lib/dom": 3, "../lib/helper": 6, "./instances": 18}],
    10: [function (a, b, c) {
        "use strict";
        var d = a("../../lib/helper");
        var e = a("../instances");
        var f = a("../update-geometry");
        var g = a("../update-scroll");

        function h(a, b) {
            function c(a) {
                return a.getBoundingClientRect()
            }

            var e = function (a) {
                a.stopPropagation()
            };
            if (b.settings.stopPropagationOnClick) {
                b.event.bind(b.scrollbarY, "click", e)
            }
            b.event.bind(b.scrollbarYRail, "click", function (e) {
                var h = d.toInt(b.scrollbarYHeight / 2);
                var i = b.railYRatio * (e.pageY - window.pageYOffset - c(b.scrollbarYRail).top - h);
                var j = b.railYRatio * (b.railYHeight - b.scrollbarYHeight);
                var k = i / j;
                if (k < 0) {
                    k = 0
                } else if (k > 1) {
                    k = 1
                }
                g(a, "top", (b.contentHeight - b.containerHeight) * k);
                f(a);
                e.stopPropagation()
            });
            if (b.settings.stopPropagationOnClick) {
                b.event.bind(b.scrollbarX, "click", e)
            }
            b.event.bind(b.scrollbarXRail, "click", function (e) {
                var h = d.toInt(b.scrollbarXWidth / 2);
                var i = b.railXRatio * (e.pageX - window.pageXOffset - c(b.scrollbarXRail).left - h);
                var j = b.railXRatio * (b.railXWidth - b.scrollbarXWidth);
                var k = i / j;
                if (k < 0) {
                    k = 0
                } else if (k > 1) {
                    k = 1
                }
                g(a, "left", (b.contentWidth - b.containerWidth) * k - b.negativeScrollAdjustment);
                f(a);
                e.stopPropagation()
            })
        }

        b.exports = function (a) {
            var b = e.get(a);
            h(a, b)
        }
    }, {"../../lib/helper": 6, "../instances": 18, "../update-geometry": 19, "../update-scroll": 20}],
    11: [function (a, b, c) {
        "use strict";
        var d = a("../../lib/helper");
        var e = a("../../lib/dom");
        var f = a("../instances");
        var g = a("../update-geometry");
        var h = a("../update-scroll");

        function i(a, b) {
            var c = null;
            var f = null;

            function i(e) {
                var f = c + e * b.railXRatio;
                var g = Math.max(0, b.scrollbarXRail.getBoundingClientRect().left) + b.railXRatio * (b.railXWidth - b.scrollbarXWidth);
                if (f < 0) {
                    b.scrollbarXLeft = 0
                } else if (f > g) {
                    b.scrollbarXLeft = g
                } else {
                    b.scrollbarXLeft = f
                }
                var i = d.toInt(b.scrollbarXLeft * (b.contentWidth - b.containerWidth) / (b.containerWidth - b.railXRatio * b.scrollbarXWidth)) - b.negativeScrollAdjustment;
                h(a, "left", i)
            }

            var j = function (b) {
                i(b.pageX - f);
                g(a);
                b.stopPropagation();
                b.preventDefault()
            };
            var k = function () {
                d.stopScrolling(a, "x");
                b.event.unbind(b.ownerDocument, "mousemove", j)
            };
            b.event.bind(b.scrollbarX, "mousedown", function (g) {
                f = g.pageX;
                c = d.toInt(e.css(b.scrollbarX, "left")) * b.railXRatio;
                d.startScrolling(a, "x");
                b.event.bind(b.ownerDocument, "mousemove", j);
                b.event.once(b.ownerDocument, "mouseup", k);
                g.stopPropagation();
                g.preventDefault()
            })
        }

        function j(a, b) {
            var c = null;
            var f = null;

            function i(e) {
                var f = c + e * b.railYRatio;
                var g = Math.max(0, b.scrollbarYRail.getBoundingClientRect().top) + b.railYRatio * (b.railYHeight - b.scrollbarYHeight);
                if (f < 0) {
                    b.scrollbarYTop = 0
                } else if (f > g) {
                    b.scrollbarYTop = g
                } else {
                    b.scrollbarYTop = f
                }
                var i = d.toInt(b.scrollbarYTop * (b.contentHeight - b.containerHeight) / (b.containerHeight - b.railYRatio * b.scrollbarYHeight));
                h(a, "top", i)
            }

            var j = function (b) {
                i(b.pageY - f);
                g(a);
                b.stopPropagation();
                b.preventDefault()
            };
            var k = function () {
                d.stopScrolling(a, "y");
                b.event.unbind(b.ownerDocument, "mousemove", j)
            };
            b.event.bind(b.scrollbarY, "mousedown", function (g) {
                f = g.pageY;
                c = d.toInt(e.css(b.scrollbarY, "top")) * b.railYRatio;
                d.startScrolling(a, "y");
                b.event.bind(b.ownerDocument, "mousemove", j);
                b.event.once(b.ownerDocument, "mouseup", k);
                g.stopPropagation();
                g.preventDefault()
            })
        }

        b.exports = function (a) {
            var b = f.get(a);
            i(a, b);
            j(a, b)
        }
    }, {
        "../../lib/dom": 3,
        "../../lib/helper": 6,
        "../instances": 18,
        "../update-geometry": 19,
        "../update-scroll": 20
    }],
    12: [function (a, b, c) {
        "use strict";
        var d = a("../../lib/helper");
        var e = a("../../lib/dom");
        var f = a("../instances");
        var g = a("../update-geometry");
        var h = a("../update-scroll");

        function i(a, b) {
            var c = false;
            b.event.bind(a, "mouseenter", function () {
                c = true
            });
            b.event.bind(a, "mouseleave", function () {
                c = false
            });
            var f = false;

            function i(c, d) {
                var e = a.scrollTop;
                if (c === 0) {
                    if (!b.scrollbarYActive) {
                        return false
                    }
                    if (e === 0 && d > 0 || e >= b.contentHeight - b.containerHeight && d < 0) {
                        return !b.settings.wheelPropagation
                    }
                }
                var f = a.scrollLeft;
                if (d === 0) {
                    if (!b.scrollbarXActive) {
                        return false
                    }
                    if (f === 0 && c < 0 || f >= b.contentWidth - b.containerWidth && c > 0) {
                        return !b.settings.wheelPropagation
                    }
                }
                return true
            }

            b.event.bind(b.ownerDocument, "keydown", function (j) {
                if (j.isDefaultPrevented && j.isDefaultPrevented() || j.defaultPrevented) {
                    return
                }
                var k = e.matches(b.scrollbarX, ":focus") || e.matches(b.scrollbarY, ":focus");
                if (!c && !k) {
                    return
                }
                var l = document.activeElement ? document.activeElement : b.ownerDocument.activeElement;
                if (l) {
                    if (l.tagName === "IFRAME") {
                        l = l.contentDocument.activeElement
                    } else {
                        while (l.shadowRoot) {
                            l = l.shadowRoot.activeElement
                        }
                    }
                    if (d.isEditable(l)) {
                        return
                    }
                }
                var m = 0;
                var n = 0;
                switch (j.which) {
                    case 37:
                        m = -30;
                        break;
                    case 38:
                        n = 30;
                        break;
                    case 39:
                        m = 30;
                        break;
                    case 40:
                        n = -30;
                        break;
                    case 33:
                        n = 90;
                        break;
                    case 32:
                        if (j.shiftKey) {
                            n = 90
                        } else {
                            n = -90
                        }
                        break;
                    case 34:
                        n = -90;
                        break;
                    case 35:
                        if (j.ctrlKey) {
                            n = -b.contentHeight
                        } else {
                            n = -b.containerHeight
                        }
                        break;
                    case 36:
                        if (j.ctrlKey) {
                            n = a.scrollTop
                        } else {
                            n = b.containerHeight
                        }
                        break;
                    default:
                        return
                }
                h(a, "top", a.scrollTop - n);
                h(a, "left", a.scrollLeft + m);
                g(a);
                f = i(m, n);
                if (f) {
                    j.preventDefault()
                }
            })
        }

        b.exports = function (a) {
            var b = f.get(a);
            i(a, b)
        }
    }, {
        "../../lib/dom": 3,
        "../../lib/helper": 6,
        "../instances": 18,
        "../update-geometry": 19,
        "../update-scroll": 20
    }],
    13: [function (a, b, c) {
        "use strict";
        var d = a("../instances");
        var e = a("../update-geometry");
        var f = a("../update-scroll");

        function g(a, b) {
            var c = false;

            function d(c, d) {
                var e = a.scrollTop;
                if (c === 0) {
                    if (!b.scrollbarYActive) {
                        return false
                    }
                    if (e === 0 && d > 0 || e >= b.contentHeight - b.containerHeight && d < 0) {
                        return !b.settings.wheelPropagation
                    }
                }
                var f = a.scrollLeft;
                if (d === 0) {
                    if (!b.scrollbarXActive) {
                        return false
                    }
                    if (f === 0 && c < 0 || f >= b.contentWidth - b.containerWidth && c > 0) {
                        return !b.settings.wheelPropagation
                    }
                }
                return true
            }

            function g(a) {
                var b = a.deltaX;
                var c = -1 * a.deltaY;
                if (typeof b === "undefined" || typeof c === "undefined") {
                    b = -1 * a.wheelDeltaX / 6;
                    c = a.wheelDeltaY / 6
                }
                if (a.deltaMode && a.deltaMode === 1) {
                    b *= 10;
                    c *= 10
                }
                if (b !== b && c !== c) {
                    b = 0;
                    c = a.wheelDelta
                }
                return [b, c]
            }

            function h(b, c) {
                var d = a.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");
                if (d) {
                    if (d.tagName !== "TEXTAREA" && !window.getComputedStyle(d).overflow.match(/(scroll|auto)/)) {
                        return false
                    }
                    var e = d.scrollHeight - d.clientHeight;
                    if (e > 0) {
                        if (!(d.scrollTop === 0 && c > 0) && !(d.scrollTop === e && c < 0)) {
                            return true
                        }
                    }
                    var f = d.scrollLeft - d.clientWidth;
                    if (f > 0) {
                        if (!(d.scrollLeft === 0 && b < 0) && !(d.scrollLeft === f && b > 0)) {
                            return true
                        }
                    }
                }
                return false
            }

            function i(i) {
                var j = g(i);
                var k = j[0];
                var l = j[1];
                if (h(k, l)) {
                    return
                }
                c = false;
                if (!b.settings.useBothWheelAxes) {
                    f(a, "top", a.scrollTop - l * b.settings.wheelSpeed);
                    f(a, "left", a.scrollLeft + k * b.settings.wheelSpeed)
                } else if (b.scrollbarYActive && !b.scrollbarXActive) {
                    if (l) {
                        f(a, "top", a.scrollTop - l * b.settings.wheelSpeed)
                    } else {
                        f(a, "top", a.scrollTop + k * b.settings.wheelSpeed)
                    }
                    c = true
                } else if (b.scrollbarXActive && !b.scrollbarYActive) {
                    if (k) {
                        f(a, "left", a.scrollLeft + k * b.settings.wheelSpeed)
                    } else {
                        f(a, "left", a.scrollLeft - l * b.settings.wheelSpeed)
                    }
                    c = true
                }
                e(a);
                c = c || d(k, l);
                if (c) {
                    i.stopPropagation();
                    i.preventDefault()
                }
            }

            if (typeof window.onwheel !== "undefined") {
                b.event.bind(a, "wheel", i)
            } else if (typeof window.onmousewheel !== "undefined") {
                b.event.bind(a, "mousewheel", i)
            }
        }

        b.exports = function (a) {
            var b = d.get(a);
            g(a, b)
        }
    }, {"../instances": 18, "../update-geometry": 19, "../update-scroll": 20}],
    14: [function (a, b, c) {
        "use strict";
        var d = a("../instances");
        var e = a("../update-geometry");

        function f(a, b) {
            b.event.bind(a, "scroll", function () {
                e(a)
            })
        }

        b.exports = function (a) {
            var b = d.get(a);
            f(a, b)
        }
    }, {"../instances": 18, "../update-geometry": 19}],
    15: [function (a, b, c) {
        "use strict";
        var d = a("../../lib/helper");
        var e = a("../instances");
        var f = a("../update-geometry");
        var g = a("../update-scroll");

        function h(a, b) {
            function c() {
                var a = window.getSelection ? window.getSelection() : document.getSelection ? document.getSelection() : "";
                if (a.toString().length === 0) {
                    return null
                } else {
                    return a.getRangeAt(0).commonAncestorContainer
                }
            }

            var h = null;
            var i = {top: 0, left: 0};

            function j() {
                if (!h) {
                    h = setInterval(function () {
                        if (!e.get(a)) {
                            clearInterval(h);
                            return
                        }
                        g(a, "top", a.scrollTop + i.top);
                        g(a, "left", a.scrollLeft + i.left);
                        f(a)
                    }, 50)
                }
            }

            function k() {
                if (h) {
                    clearInterval(h);
                    h = null
                }
                d.stopScrolling(a)
            }

            var l = false;
            b.event.bind(b.ownerDocument, "selectionchange", function () {
                if (a.contains(c())) {
                    l = true
                } else {
                    l = false;
                    k()
                }
            });
            b.event.bind(window, "mouseup", function () {
                if (l) {
                    l = false;
                    k()
                }
            });
            b.event.bind(window, "mousemove", function (b) {
                if (l) {
                    var c = {x: b.pageX, y: b.pageY};
                    var e = {
                        left: a.offsetLeft,
                        right: a.offsetLeft + a.offsetWidth,
                        top: a.offsetTop,
                        bottom: a.offsetTop + a.offsetHeight
                    };
                    if (c.x < e.left + 3) {
                        i.left = -5;
                        d.startScrolling(a, "x")
                    } else if (c.x > e.right - 3) {
                        i.left = 5;
                        d.startScrolling(a, "x")
                    } else {
                        i.left = 0
                    }
                    if (c.y < e.top + 3) {
                        if (e.top + 3 - c.y < 5) {
                            i.top = -5
                        } else {
                            i.top = -20
                        }
                        d.startScrolling(a, "y")
                    } else if (c.y > e.bottom - 3) {
                        if (c.y - e.bottom + 3 < 5) {
                            i.top = 5
                        } else {
                            i.top = 20
                        }
                        d.startScrolling(a, "y")
                    } else {
                        i.top = 0
                    }
                    if (i.top === 0 && i.left === 0) {
                        k()
                    } else {
                        j()
                    }
                }
            })
        }

        b.exports = function (a) {
            var b = e.get(a);
            h(a, b)
        }
    }, {"../../lib/helper": 6, "../instances": 18, "../update-geometry": 19, "../update-scroll": 20}],
    16: [function (a, b, c) {
        "use strict";
        var d = a("../../lib/helper");
        var e = a("../instances");
        var f = a("../update-geometry");
        var g = a("../update-scroll");

        function h(a, b, c, d) {
            function h(c, d) {
                var e = a.scrollTop;
                var f = a.scrollLeft;
                var g = Math.abs(c);
                var h = Math.abs(d);
                if (h > g) {
                    if (d < 0 && e === b.contentHeight - b.containerHeight || d > 0 && e === 0) {
                        return !b.settings.swipePropagation
                    }
                } else if (g > h) {
                    if (c < 0 && f === b.contentWidth - b.containerWidth || c > 0 && f === 0) {
                        return !b.settings.swipePropagation
                    }
                }
                return true
            }

            function i(b, c) {
                g(a, "top", a.scrollTop - c);
                g(a, "left", a.scrollLeft - b);
                f(a)
            }

            var j = {};
            var k = 0;
            var l = {};
            var m = null;
            var n = false;
            var o = false;

            function p() {
                n = true
            }

            function q() {
                n = false
            }

            function r(a) {
                if (a.targetTouches) {
                    return a.targetTouches[0]
                } else {
                    return a
                }
            }

            function s(a) {
                if (a.targetTouches && a.targetTouches.length === 1) {
                    return true
                }
                if (a.pointerType && a.pointerType !== "mouse" && a.pointerType !== a.MSPOINTER_TYPE_MOUSE) {
                    return true
                }
                return false
            }

            function t(a) {
                if (s(a)) {
                    o = true;
                    var b = r(a);
                    j.pageX = b.pageX;
                    j.pageY = b.pageY;
                    k = (new Date).getTime();
                    if (m !== null) {
                        clearInterval(m)
                    }
                    a.stopPropagation()
                }
            }

            function u(a) {
                if (!o && b.settings.swipePropagation) {
                    t(a)
                }
                if (!n && o && s(a)) {
                    var c = r(a);
                    var d = {pageX: c.pageX, pageY: c.pageY};
                    var e = d.pageX - j.pageX;
                    var f = d.pageY - j.pageY;
                    i(e, f);
                    j = d;
                    var g = (new Date).getTime();
                    var m = g - k;
                    if (m > 0) {
                        l.x = e / m;
                        l.y = f / m;
                        k = g
                    }
                    if (h(e, f)) {
                        a.stopPropagation();
                        a.preventDefault()
                    }
                }
            }

            function v() {
                if (!n && o) {
                    o = false;
                    clearInterval(m);
                    m = setInterval(function () {
                        if (!e.get(a)) {
                            clearInterval(m);
                            return
                        }
                        if (Math.abs(l.x) < .01 && Math.abs(l.y) < .01) {
                            clearInterval(m);
                            return
                        }
                        i(l.x * 30, l.y * 30);
                        l.x *= .8;
                        l.y *= .8
                    }, 10)
                }
            }

            if (c) {
                b.event.bind(window, "touchstart", p);
                b.event.bind(window, "touchend", q);
                b.event.bind(a, "touchstart", t);
                b.event.bind(a, "touchmove", u);
                b.event.bind(a, "touchend", v)
            }
            if (d) {
                if (window.PointerEvent) {
                    b.event.bind(window, "pointerdown", p);
                    b.event.bind(window, "pointerup", q);
                    b.event.bind(a, "pointerdown", t);
                    b.event.bind(a, "pointermove", u);
                    b.event.bind(a, "pointerup", v)
                } else if (window.MSPointerEvent) {
                    b.event.bind(window, "MSPointerDown", p);
                    b.event.bind(window, "MSPointerUp", q);
                    b.event.bind(a, "MSPointerDown", t);
                    b.event.bind(a, "MSPointerMove", u);
                    b.event.bind(a, "MSPointerUp", v)
                }
            }
        }

        b.exports = function (a) {
            if (!d.env.supportsTouch && !d.env.supportsIePointer) {
                return
            }
            var b = e.get(a);
            h(a, b, d.env.supportsTouch, d.env.supportsIePointer)
        }
    }, {"../../lib/helper": 6, "../instances": 18, "../update-geometry": 19, "../update-scroll": 20}],
    17: [function (a, b, c) {
        "use strict";
        var d = a("../lib/helper");
        var e = a("../lib/class");
        var f = a("./instances");
        var g = a("./update-geometry");
        var h = {
            "click-rail": a("./handler/click-rail"),
            "drag-scrollbar": a("./handler/drag-scrollbar"),
            keyboard: a("./handler/keyboard"),
            wheel: a("./handler/mouse-wheel"),
            touch: a("./handler/touch"),
            selection: a("./handler/selection")
        };
        var i = a("./handler/native-scroll");
        b.exports = function (a, b) {
            b = typeof b === "object" ? b : {};
            e.add(a, "ps-container");
            var c = f.add(a);
            c.settings = d.extend(c.settings, b);
            e.add(a, "ps-theme-" + c.settings.theme);
            c.settings.handlers.forEach(function (b) {
                h[b](a)
            });
            i(a);
            g(a)
        }
    }, {
        "../lib/class": 2,
        "../lib/helper": 6,
        "./handler/click-rail": 10,
        "./handler/drag-scrollbar": 11,
        "./handler/keyboard": 12,
        "./handler/mouse-wheel": 13,
        "./handler/native-scroll": 14,
        "./handler/selection": 15,
        "./handler/touch": 16,
        "./instances": 18,
        "./update-geometry": 19
    }],
    18: [function (a, b, c) {
        "use strict";
        var d = a("../lib/helper");
        var e = a("../lib/class");
        var f = a("./default-setting");
        var g = a("../lib/dom");
        var h = a("../lib/event-manager");
        var i = a("../lib/guid");
        var j = {};

        function k(a) {
            var b = this;
            b.settings = d.clone(f);
            b.containerWidth = null;
            b.containerHeight = null;
            b.contentWidth = null;
            b.contentHeight = null;
            b.isRtl = g.css(a, "direction") === "rtl";
            b.isNegativeScroll = function () {
                var b = a.scrollLeft;
                var c = null;
                a.scrollLeft = -1;
                c = a.scrollLeft < 0;
                a.scrollLeft = b;
                return c
            }();
            b.negativeScrollAdjustment = b.isNegativeScroll ? a.scrollWidth - a.clientWidth : 0;
            b.event = new h;
            b.ownerDocument = a.ownerDocument || document;
            function c() {
                e.add(a, "ps-focus")
            }

            function i() {
                e.remove(a, "ps-focus")
            }

            b.scrollbarXRail = g.appendTo(g.e("div", "ps-scrollbar-x-rail"), a);
            b.scrollbarX = g.appendTo(g.e("div", "ps-scrollbar-x"), b.scrollbarXRail);
            b.scrollbarX.setAttribute("tabindex", 0);
            b.event.bind(b.scrollbarX, "focus", c);
            b.event.bind(b.scrollbarX, "blur", i);
            b.scrollbarXActive = null;
            b.scrollbarXWidth = null;
            b.scrollbarXLeft = null;
            b.scrollbarXBottom = d.toInt(g.css(b.scrollbarXRail, "bottom"));
            b.isScrollbarXUsingBottom = b.scrollbarXBottom === b.scrollbarXBottom;
            b.scrollbarXTop = b.isScrollbarXUsingBottom ? null : d.toInt(g.css(b.scrollbarXRail, "top"));
            b.railBorderXWidth = d.toInt(g.css(b.scrollbarXRail, "borderLeftWidth")) + d.toInt(g.css(b.scrollbarXRail, "borderRightWidth"));
            g.css(b.scrollbarXRail, "display", "block");
            b.railXMarginWidth = d.toInt(g.css(b.scrollbarXRail, "marginLeft")) + d.toInt(g.css(b.scrollbarXRail, "marginRight"));
            g.css(b.scrollbarXRail, "display", "");
            b.railXWidth = null;
            b.railXRatio = null;
            b.scrollbarYRail = g.appendTo(g.e("div", "ps-scrollbar-y-rail"), a);
            b.scrollbarY = g.appendTo(g.e("div", "ps-scrollbar-y"), b.scrollbarYRail);
            b.scrollbarY.setAttribute("tabindex", 0);
            b.event.bind(b.scrollbarY, "focus", c);
            b.event.bind(b.scrollbarY, "blur", i);
            b.scrollbarYActive = null;
            b.scrollbarYHeight = null;
            b.scrollbarYTop = null;
            b.scrollbarYRight = d.toInt(g.css(b.scrollbarYRail, "right"));
            b.isScrollbarYUsingRight = b.scrollbarYRight === b.scrollbarYRight;
            b.scrollbarYLeft = b.isScrollbarYUsingRight ? null : d.toInt(g.css(b.scrollbarYRail, "left"));
            b.scrollbarYOuterWidth = b.isRtl ? d.outerWidth(b.scrollbarY) : null;
            b.railBorderYWidth = d.toInt(g.css(b.scrollbarYRail, "borderTopWidth")) + d.toInt(g.css(b.scrollbarYRail, "borderBottomWidth"));
            g.css(b.scrollbarYRail, "display", "block");
            b.railYMarginHeight = d.toInt(g.css(b.scrollbarYRail, "marginTop")) + d.toInt(g.css(b.scrollbarYRail, "marginBottom"));
            g.css(b.scrollbarYRail, "display", "");
            b.railYHeight = null;
            b.railYRatio = null
        }

        function l(a) {
            return a.getAttribute("data-ps-id")
        }

        function m(a, b) {
            a.setAttribute("data-ps-id", b)
        }

        function n(a) {
            a.removeAttribute("data-ps-id")
        }

        c.add = function (a) {
            var b = i();
            m(a, b);
            j[b] = new k(a);
            return j[b]
        };
        c.remove = function (a) {
            delete j[l(a)];
            n(a)
        };
        c.get = function (a) {
            return j[l(a)]
        }
    }, {
        "../lib/class": 2,
        "../lib/dom": 3,
        "../lib/event-manager": 4,
        "../lib/guid": 5,
        "../lib/helper": 6,
        "./default-setting": 8
    }],
    19: [function (a, b, c) {
        "use strict";
        var d = a("../lib/helper");
        var e = a("../lib/class");
        var f = a("../lib/dom");
        var g = a("./instances");
        var h = a("./update-scroll");

        function i(a, b) {
            if (a.settings.minScrollbarLength) {
                b = Math.max(b, a.settings.minScrollbarLength)
            }
            if (a.settings.maxScrollbarLength) {
                b = Math.min(b, a.settings.maxScrollbarLength)
            }
            return b
        }

        function j(a, b) {
            var c = {width: b.railXWidth};
            if (b.isRtl) {
                c.left = b.negativeScrollAdjustment + a.scrollLeft + b.containerWidth - b.contentWidth
            } else {
                c.left = a.scrollLeft
            }
            if (b.isScrollbarXUsingBottom) {
                c.bottom = b.scrollbarXBottom - a.scrollTop
            } else {
                c.top = b.scrollbarXTop + a.scrollTop
            }
            f.css(b.scrollbarXRail, c);
            var d = {top: a.scrollTop, height: b.railYHeight};
            if (b.isScrollbarYUsingRight) {
                if (b.isRtl) {
                    d.right = b.contentWidth - (b.negativeScrollAdjustment + a.scrollLeft) - b.scrollbarYRight - b.scrollbarYOuterWidth
                } else {
                    d.right = b.scrollbarYRight - a.scrollLeft
                }
            } else {
                if (b.isRtl) {
                    d.left = b.negativeScrollAdjustment + a.scrollLeft + b.containerWidth * 2 - b.contentWidth - b.scrollbarYLeft - b.scrollbarYOuterWidth
                } else {
                    d.left = b.scrollbarYLeft + a.scrollLeft
                }
            }
            f.css(b.scrollbarYRail, d);
            f.css(b.scrollbarX, {left: b.scrollbarXLeft, width: b.scrollbarXWidth - b.railBorderXWidth});
            f.css(b.scrollbarY, {top: b.scrollbarYTop, height: b.scrollbarYHeight - b.railBorderYWidth})
        }

        b.exports = function (a) {
            var b = g.get(a);
            b.containerWidth = a.clientWidth;
            b.containerHeight = a.clientHeight;
            b.contentWidth = a.scrollWidth;
            b.contentHeight = a.scrollHeight;
            var c;
            if (!a.contains(b.scrollbarXRail)) {
                c = f.queryChildren(a, ".ps-scrollbar-x-rail");
                if (c.length > 0) {
                    c.forEach(function (a) {
                        f.remove(a)
                    })
                }
                f.appendTo(b.scrollbarXRail, a)
            }
            if (!a.contains(b.scrollbarYRail)) {
                c = f.queryChildren(a, ".ps-scrollbar-y-rail");
                if (c.length > 0) {
                    c.forEach(function (a) {
                        f.remove(a)
                    })
                }
                f.appendTo(b.scrollbarYRail, a)
            }
            if (!b.settings.suppressScrollX && b.containerWidth + b.settings.scrollXMarginOffset < b.contentWidth) {
                b.scrollbarXActive = true;
                b.railXWidth = b.containerWidth - b.railXMarginWidth;
                b.railXRatio = b.containerWidth / b.railXWidth;
                b.scrollbarXWidth = i(b, d.toInt(b.railXWidth * b.containerWidth / b.contentWidth));
                b.scrollbarXLeft = d.toInt((b.negativeScrollAdjustment + a.scrollLeft) * (b.railXWidth - b.scrollbarXWidth) / (b.contentWidth - b.containerWidth))
            } else {
                b.scrollbarXActive = false
            }
            if (!b.settings.suppressScrollY && b.containerHeight + b.settings.scrollYMarginOffset < b.contentHeight) {
                b.scrollbarYActive = true;
                b.railYHeight = b.containerHeight - b.railYMarginHeight;
                b.railYRatio = b.containerHeight / b.railYHeight;
                b.scrollbarYHeight = i(b, d.toInt(b.railYHeight * b.containerHeight / b.contentHeight));
                b.scrollbarYTop = d.toInt(a.scrollTop * (b.railYHeight - b.scrollbarYHeight) / (b.contentHeight - b.containerHeight))
            } else {
                b.scrollbarYActive = false
            }
            if (b.scrollbarXLeft >= b.railXWidth - b.scrollbarXWidth) {
                b.scrollbarXLeft = b.railXWidth - b.scrollbarXWidth
            }
            if (b.scrollbarYTop >= b.railYHeight - b.scrollbarYHeight) {
                b.scrollbarYTop = b.railYHeight - b.scrollbarYHeight
            }
            j(a, b);
            if (b.scrollbarXActive) {
                e.add(a, "ps-active-x")
            } else {
                e.remove(a, "ps-active-x");
                b.scrollbarXWidth = 0;
                b.scrollbarXLeft = 0;
                h(a, "left", 0)
            }
            if (b.scrollbarYActive) {
                e.add(a, "ps-active-y")
            } else {
                e.remove(a, "ps-active-y");
                b.scrollbarYHeight = 0;
                b.scrollbarYTop = 0;
                h(a, "top", 0)
            }
        }
    }, {"../lib/class": 2, "../lib/dom": 3, "../lib/helper": 6, "./instances": 18, "./update-scroll": 20}],
    20: [function (a, b, c) {
        "use strict";
        var d = a("./instances");
        var e = document.createEvent("Event");
        var f = document.createEvent("Event");
        var g = document.createEvent("Event");
        var h = document.createEvent("Event");
        var i = document.createEvent("Event");
        var j = document.createEvent("Event");
        var k = document.createEvent("Event");
        var l = document.createEvent("Event");
        var m = document.createEvent("Event");
        var n = document.createEvent("Event");
        var o;
        var p;
        e.initEvent("ps-scroll-up", true, true);
        f.initEvent("ps-scroll-down", true, true);
        g.initEvent("ps-scroll-left", true, true);
        h.initEvent("ps-scroll-right", true, true);
        i.initEvent("ps-scroll-y", true, true);
        j.initEvent("ps-scroll-x", true, true);
        k.initEvent("ps-x-reach-start", true, true);
        l.initEvent("ps-x-reach-end", true, true);
        m.initEvent("ps-y-reach-start", true, true);
        n.initEvent("ps-y-reach-end", true, true);
        b.exports = function (a, b, c) {
            if (typeof a === "undefined") {
                throw"You must provide an element to the update-scroll function"
            }
            if (typeof b === "undefined") {
                throw"You must provide an axis to the update-scroll function"
            }
            if (typeof c === "undefined") {
                throw"You must provide a value to the update-scroll function"
            }
            if (b === "top" && c <= 0) {
                a.scrollTop = c = 0;
                a.dispatchEvent(m)
            }
            if (b === "left" && c <= 0) {
                a.scrollLeft = c = 0;
                a.dispatchEvent(k)
            }
            var q = d.get(a);
            if (b === "top" && c >= q.contentHeight - q.containerHeight) {
                c = q.contentHeight - q.containerHeight;
                if (c - a.scrollTop <= 1) {
                    c = a.scrollTop
                } else {
                    a.scrollTop = c
                }
                a.dispatchEvent(n)
            }
            if (b === "left" && c >= q.contentWidth - q.containerWidth) {
                c = q.contentWidth - q.containerWidth;
                if (c - a.scrollLeft <= 1) {
                    c = a.scrollLeft
                } else {
                    a.scrollLeft = c
                }
                a.dispatchEvent(l)
            }
            if (!o) {
                o = a.scrollTop
            }
            if (!p) {
                p = a.scrollLeft
            }
            if (b === "top" && c < o) {
                a.dispatchEvent(e)
            }
            if (b === "top" && c > o) {
                a.dispatchEvent(f)
            }
            if (b === "left" && c < p) {
                a.dispatchEvent(g)
            }
            if (b === "left" && c > p) {
                a.dispatchEvent(h)
            }
            if (b === "top") {
                a.scrollTop = o = c;
                a.dispatchEvent(i)
            }
            if (b === "left") {
                a.scrollLeft = p = c;
                a.dispatchEvent(j)
            }
        }
    }, {"./instances": 18}],
    21: [function (a, b, c) {
        "use strict";
        var d = a("../lib/helper");
        var e = a("../lib/dom");
        var f = a("./instances");
        var g = a("./update-geometry");
        var h = a("./update-scroll");
        b.exports = function (a) {
            var b = f.get(a);
            if (!b) {
                return
            }
            b.negativeScrollAdjustment = b.isNegativeScroll ? a.scrollWidth - a.clientWidth : 0;
            e.css(b.scrollbarXRail, "display", "block");
            e.css(b.scrollbarYRail, "display", "block");
            b.railXMarginWidth = d.toInt(e.css(b.scrollbarXRail, "marginLeft")) + d.toInt(e.css(b.scrollbarXRail, "marginRight"));
            b.railYMarginHeight = d.toInt(e.css(b.scrollbarYRail, "marginTop")) + d.toInt(e.css(b.scrollbarYRail, "marginBottom"));
            e.css(b.scrollbarXRail, "display", "none");
            e.css(b.scrollbarYRail, "display", "none");
            g(a);
            h(a, "top", a.scrollTop);
            h(a, "left", a.scrollLeft);
            e.css(b.scrollbarXRail, "display", "");
            e.css(b.scrollbarYRail, "display", "")
        }
    }, {"../lib/dom": 3, "../lib/helper": 6, "./instances": 18, "./update-geometry": 19, "./update-scroll": 20}]
}, {}, [1]);
(function () {
    "use strict";
    var a;
    var b = function (c, d) {
        if (!(this instanceof b))return new b(c, d);
        var e = {
            direction: "horizontal",
            touchEventsTarget: "container",
            initialSlide: 0,
            speed: 300,
            autoplay: false,
            autoplayDisableOnInteraction: true,
            autoplayStopOnLast: false,
            iOSEdgeSwipeDetection: false,
            iOSEdgeSwipeThreshold: 20,
            freeMode: false,
            freeModeMomentum: true,
            freeModeMomentumRatio: 1,
            freeModeMomentumBounce: true,
            freeModeMomentumBounceRatio: 1,
            freeModeSticky: false,
            freeModeMinimumVelocity: .02,
            autoHeight: false,
            setWrapperSize: false,
            virtualTranslate: false,
            effect: "slide",
            coverflow: {rotate: 50, stretch: 0, depth: 100, modifier: 1, slideShadows: true},
            flip: {slideShadows: true, limitRotation: true},
            cube: {slideShadows: true, shadow: true, shadowOffset: 20, shadowScale: .94},
            fade: {crossFade: false},
            parallax: false,
            scrollbar: null,
            scrollbarHide: true,
            scrollbarDraggable: false,
            scrollbarSnapOnRelease: false,
            keyboardControl: false,
            mousewheelControl: false,
            mousewheelReleaseOnEdges: false,
            mousewheelInvert: false,
            mousewheelForceToAxis: false,
            mousewheelSensitivity: 1,
            hashnav: false,
            breakpoints: undefined,
            spaceBetween: 0,
            slidesPerView: 1,
            slidesPerColumn: 1,
            slidesPerColumnFill: "column",
            slidesPerGroup: 1,
            centeredSlides: false,
            slidesOffsetBefore: 0,
            slidesOffsetAfter: 0,
            roundLengths: false,
            touchRatio: 1,
            touchAngle: 45,
            simulateTouch: true,
            shortSwipes: true,
            longSwipes: true,
            longSwipesRatio: .5,
            longSwipesMs: 300,
            followFinger: true,
            onlyExternal: false,
            threshold: 0,
            touchMoveStopPropagation: true,
            uniqueNavElements: true,
            pagination: null,
            paginationElement: "span",
            paginationClickable: false,
            paginationHide: false,
            paginationBulletRender: null,
            paginationProgressRender: null,
            paginationFractionRender: null,
            paginationCustomRender: null,
            paginationType: "bullets",
            resistance: true,
            resistanceRatio: .85,
            nextButton: null,
            prevButton: null,
            watchSlidesProgress: false,
            watchSlidesVisibility: false,
            grabCursor: false,
            preventClicks: true,
            preventClicksPropagation: true,
            slideToClickedSlide: false,
            lazyLoading: false,
            lazyLoadingInPrevNext: false,
            lazyLoadingInPrevNextAmount: 1,
            lazyLoadingOnTransitionStart: false,
            preloadImages: true,
            updateOnImagesReady: true,
            loop: false,
            loopAdditionalSlides: 0,
            loopedSlides: null,
            control: undefined,
            controlInverse: false,
            controlBy: "slide",
            allowSwipeToPrev: true,
            allowSwipeToNext: true,
            swipeHandler: null,
            noSwiping: true,
            noSwipingClass: "swiper-no-swiping",
            slideClass: "swiper-slide",
            slideActiveClass: "swiper-slide-active",
            slideVisibleClass: "swiper-slide-visible",
            slideDuplicateClass: "swiper-slide-duplicate",
            slideNextClass: "swiper-slide-next",
            slidePrevClass: "swiper-slide-prev",
            wrapperClass: "swiper-wrapper",
            bulletClass: "swiper-pagination-bullet",
            bulletActiveClass: "swiper-pagination-bullet-active",
            buttonDisabledClass: "swiper-button-disabled",
            paginationCurrentClass: "swiper-pagination-current",
            paginationTotalClass: "swiper-pagination-total",
            paginationHiddenClass: "swiper-pagination-hidden",
            paginationProgressbarClass: "swiper-pagination-progressbar",
            observer: false,
            observeParents: false,
            a11y: false,
            prevSlideMessage: "Previous slide",
            nextSlideMessage: "Next slide",
            firstSlideMessage: "This is the first slide",
            lastSlideMessage: "This is the last slide",
            paginationBulletMessage: "Go to slide {{index}}",
            runCallbacksOnInit: true
        };
        var f = d && d.virtualTranslate;
        d = d || {};
        var g = {};
        for (var h in d) {
            if (typeof d[h] === "object" && d[h] !== null && !(d[h].nodeType || d[h] === window || d[h] === document || typeof Dom7 !== "undefined" && d[h] instanceof Dom7 || typeof jQuery !== "undefined" && d[h] instanceof jQuery)) {
                g[h] = {};
                for (var i in d[h]) {
                    g[h][i] = d[h][i]
                }
            } else {
                g[h] = d[h]
            }
        }
        for (var j in e) {
            if (typeof d[j] === "undefined") {
                d[j] = e[j]
            } else if (typeof d[j] === "object") {
                for (var k in e[j]) {
                    if (typeof d[j][k] === "undefined") {
                        d[j][k] = e[j][k]
                    }
                }
            }
        }
        var l = this;
        l.params = d;
        l.originalParams = g;
        l.classNames = [];
        if (typeof a !== "undefined" && typeof Dom7 !== "undefined") {
            a = Dom7
        }
        if (typeof a === "undefined") {
            if (typeof Dom7 === "undefined") {
                a = window.Dom7 || window.Zepto || window.jQuery
            } else {
                a = Dom7
            }
            if (!a)return
        }
        l.$ = a;
        l.currentBreakpoint = undefined;
        l.getActiveBreakpoint = function () {
            if (!l.params.breakpoints)return false;
            var a = false;
            var b = [], c;
            for (c in l.params.breakpoints) {
                if (l.params.breakpoints.hasOwnProperty(c)) {
                    b.push(c)
                }
            }
            b.sort(function (a, b) {
                return parseInt(a, 10) > parseInt(b, 10)
            });
            for (var d = 0; d < b.length; d++) {
                c = b[d];
                if (c >= window.innerWidth && !a) {
                    a = c
                }
            }
            return a || "max"
        };
        l.setBreakpoint = function () {
            var a = l.getActiveBreakpoint();
            if (a && l.currentBreakpoint !== a) {
                var b = a in l.params.breakpoints ? l.params.breakpoints[a] : l.originalParams;
                var c = l.params.loop && b.slidesPerView !== l.params.slidesPerView;
                for (var d in b) {
                    l.params[d] = b[d]
                }
                l.currentBreakpoint = a;
                if (c && l.destroyLoop) {
                    l.reLoop(true)
                }
            }
        };
        if (l.params.breakpoints) {
            l.setBreakpoint()
        }
        l.container = a(c);
        if (l.container.length === 0)return;
        if (l.container.length > 1) {
            var m = [];
            l.container.each(function () {
                var a = this;
                m.push(new b(this, d))
            });
            return m
        }
        l.container[0].swiper = l;
        l.container.data("swiper", l);
        l.classNames.push("swiper-container-" + l.params.direction);
        if (l.params.freeMode) {
            l.classNames.push("swiper-container-free-mode")
        }
        if (!l.support.flexbox) {
            l.classNames.push("swiper-container-no-flexbox");
            l.params.slidesPerColumn = 1
        }
        if (l.params.autoHeight) {
            l.classNames.push("swiper-container-autoheight")
        }
        if (l.params.parallax || l.params.watchSlidesVisibility) {
            l.params.watchSlidesProgress = true
        }
        if (["cube", "coverflow", "flip"].indexOf(l.params.effect) >= 0) {
            if (l.support.transforms3d) {
                l.params.watchSlidesProgress = true;
                l.classNames.push("swiper-container-3d")
            } else {
                l.params.effect = "slide"
            }
        }
        if (l.params.effect !== "slide") {
            l.classNames.push("swiper-container-" + l.params.effect)
        }
        if (l.params.effect === "cube") {
            l.params.resistanceRatio = 0;
            l.params.slidesPerView = 1;
            l.params.slidesPerColumn = 1;
            l.params.slidesPerGroup = 1;
            l.params.centeredSlides = false;
            l.params.spaceBetween = 0;
            l.params.virtualTranslate = true;
            l.params.setWrapperSize = false
        }
        if (l.params.effect === "fade" || l.params.effect === "flip") {
            l.params.slidesPerView = 1;
            l.params.slidesPerColumn = 1;
            l.params.slidesPerGroup = 1;
            l.params.watchSlidesProgress = true;
            l.params.spaceBetween = 0;
            l.params.setWrapperSize = false;
            if (typeof f === "undefined") {
                l.params.virtualTranslate = true
            }
        }
        if (l.params.grabCursor && l.support.touch) {
            l.params.grabCursor = false
        }
        l.wrapper = l.container.children("." + l.params.wrapperClass);
        if (l.params.pagination) {
            l.paginationContainer = a(l.params.pagination);
            if (l.params.uniqueNavElements && typeof l.params.pagination === "string" && l.paginationContainer.length > 1 && l.container.find(l.params.pagination).length === 1) {
                l.paginationContainer = l.container.find(l.params.pagination)
            }
            if (l.params.paginationType === "bullets" && l.params.paginationClickable) {
                l.paginationContainer.addClass("swiper-pagination-clickable")
            } else {
                l.params.paginationClickable = false
            }
            l.paginationContainer.addClass("swiper-pagination-" + l.params.paginationType)
        }
        if (l.params.nextButton || l.params.prevButton) {
            if (l.params.nextButton) {
                l.nextButton = a(l.params.nextButton);
                if (l.params.uniqueNavElements && typeof l.params.nextButton === "string" && l.nextButton.length > 1 && l.container.find(l.params.nextButton).length === 1) {
                    l.nextButton = l.container.find(l.params.nextButton)
                }
            }
            if (l.params.prevButton) {
                l.prevButton = a(l.params.prevButton);
                if (l.params.uniqueNavElements && typeof l.params.prevButton === "string" && l.prevButton.length > 1 && l.container.find(l.params.prevButton).length === 1) {
                    l.prevButton = l.container.find(l.params.prevButton)
                }
            }
        }
        l.isHorizontal = function () {
            return l.params.direction === "horizontal"
        };
        l.rtl = l.isHorizontal() && (l.container[0].dir.toLowerCase() === "rtl" || l.container.css("direction") === "rtl");
        if (l.rtl) {
            l.classNames.push("swiper-container-rtl")
        }
        if (l.rtl) {
            l.wrongRTL = l.wrapper.css("display") === "-webkit-box"
        }
        if (l.params.slidesPerColumn > 1) {
            l.classNames.push("swiper-container-multirow")
        }
        if (l.device.android) {
            l.classNames.push("swiper-container-android")
        }
        l.container.addClass(l.classNames.join(" "));
        l.translate = 0;
        l.progress = 0;
        l.velocity = 0;
        l.lockSwipeToNext = function () {
            l.params.allowSwipeToNext = false
        };
        l.lockSwipeToPrev = function () {
            l.params.allowSwipeToPrev = false
        };
        l.lockSwipes = function () {
            l.params.allowSwipeToNext = l.params.allowSwipeToPrev = false
        };
        l.unlockSwipeToNext = function () {
            l.params.allowSwipeToNext = true
        };
        l.unlockSwipeToPrev = function () {
            l.params.allowSwipeToPrev = true
        };
        l.unlockSwipes = function () {
            l.params.allowSwipeToNext = l.params.allowSwipeToPrev = true
        };
        function n(a) {
            return Math.floor(a)
        }

        if (l.params.grabCursor) {
            l.container[0].style.cursor = "move";
            l.container[0].style.cursor = "-webkit-grab";
            l.container[0].style.cursor = "-moz-grab";
            l.container[0].style.cursor = "grab"
        }
        l.imagesToLoad = [];
        l.imagesLoaded = 0;
        l.loadImage = function (a, b, c, d, e) {
            var f;

            function g() {
                if (e)e()
            }

            if (!a.complete || !d) {
                if (b) {
                    f = new window.Image;
                    f.onload = g;
                    f.onerror = g;
                    if (c) {
                        f.srcset = c
                    }
                    if (b) {
                        f.src = b
                    }
                } else {
                    g()
                }
            } else {
                g()
            }
        };
        l.preloadImages = function () {
            l.imagesToLoad = l.container.find("img");
            function a() {
                if (typeof l === "undefined" || l === null)return;
                if (l.imagesLoaded !== undefined)l.imagesLoaded++;
                if (l.imagesLoaded === l.imagesToLoad.length) {
                    if (l.params.updateOnImagesReady)l.update();
                    l.emit("onImagesReady", l)
                }
            }

            for (var b = 0; b < l.imagesToLoad.length; b++) {
                l.loadImage(l.imagesToLoad[b], l.imagesToLoad[b].currentSrc || l.imagesToLoad[b].getAttribute("src"), l.imagesToLoad[b].srcset || l.imagesToLoad[b].getAttribute("srcset"), true, a)
            }
        };
        l.autoplayTimeoutId = undefined;
        l.autoplaying = false;
        l.autoplayPaused = false;
        function o() {
            l.autoplayTimeoutId = setTimeout(function () {
                if (l.params.loop) {
                    l.fixLoop();
                    l._slideNext();
                    l.emit("onAutoplay", l)
                } else {
                    if (!l.isEnd) {
                        l._slideNext();
                        l.emit("onAutoplay", l)
                    } else {
                        if (!d.autoplayStopOnLast) {
                            l._slideTo(0);
                            l.emit("onAutoplay", l)
                        } else {
                            l.stopAutoplay()
                        }
                    }
                }
            }, l.params.autoplay)
        }

        l.startAutoplay = function () {
            if (typeof l.autoplayTimeoutId !== "undefined")return false;
            if (!l.params.autoplay)return false;
            if (l.autoplaying)return false;
            l.autoplaying = true;
            l.emit("onAutoplayStart", l);
            o()
        };
        l.stopAutoplay = function (a) {
            if (!l.autoplayTimeoutId)return;
            if (l.autoplayTimeoutId)clearTimeout(l.autoplayTimeoutId);
            l.autoplaying = false;
            l.autoplayTimeoutId = undefined;
            l.emit("onAutoplayStop", l)
        };
        l.pauseAutoplay = function (a) {
            if (l.autoplayPaused)return;
            if (l.autoplayTimeoutId)clearTimeout(l.autoplayTimeoutId);
            l.autoplayPaused = true;
            if (a === 0) {
                l.autoplayPaused = false;
                o()
            } else {
                l.wrapper.transitionEnd(function () {
                    if (!l)return;
                    l.autoplayPaused = false;
                    if (!l.autoplaying) {
                        l.stopAutoplay()
                    } else {
                        o()
                    }
                })
            }
        };
        l.minTranslate = function () {
            return -l.snapGrid[0]
        };
        l.maxTranslate = function () {
            return -l.snapGrid[l.snapGrid.length - 1]
        };
        l.updateAutoHeight = function () {
            var a = l.slides.eq(l.activeIndex)[0];
            if (typeof a !== "undefined") {
                var b = a.offsetHeight;
                if (b)l.wrapper.css("height", b + "px")
            }
        };
        l.updateContainerSize = function () {
            var a, b;
            if (typeof l.params.width !== "undefined") {
                a = l.params.width
            } else {
                a = l.container[0].clientWidth
            }
            if (typeof l.params.height !== "undefined") {
                b = l.params.height
            } else {
                b = l.container[0].clientHeight
            }
            if (a === 0 && l.isHorizontal() || b === 0 && !l.isHorizontal()) {
                return
            }
            a = a - parseInt(l.container.css("padding-left"), 10) - parseInt(l.container.css("padding-right"), 10);
            b = b - parseInt(l.container.css("padding-top"), 10) - parseInt(l.container.css("padding-bottom"), 10);
            l.width = a;
            l.height = b;
            l.size = l.isHorizontal() ? l.width : l.height
        };
        l.updateSlidesSize = function () {
            l.slides = l.wrapper.children("." + l.params.slideClass);
            l.snapGrid = [];
            l.slidesGrid = [];
            l.slidesSizesGrid = [];
            var a = l.params.spaceBetween, b = -l.params.slidesOffsetBefore, c, d = 0, e = 0;
            if (typeof l.size === "undefined")return;
            if (typeof a === "string" && a.indexOf("%") >= 0) {
                a = parseFloat(a.replace("%", "")) / 100 * l.size
            }
            l.virtualSize = -a;
            if (l.rtl)l.slides.css({marginLeft: "", marginTop: ""}); else l.slides.css({
                marginRight: "",
                marginBottom: ""
            });
            var f;
            if (l.params.slidesPerColumn > 1) {
                if (Math.floor(l.slides.length / l.params.slidesPerColumn) === l.slides.length / l.params.slidesPerColumn) {
                    f = l.slides.length
                } else {
                    f = Math.ceil(l.slides.length / l.params.slidesPerColumn) * l.params.slidesPerColumn
                }
                if (l.params.slidesPerView !== "auto" && l.params.slidesPerColumnFill === "row") {
                    f = Math.max(f, l.params.slidesPerView * l.params.slidesPerColumn)
                }
            }
            var g;
            var h = l.params.slidesPerColumn;
            var i = f / h;
            var j = i - (l.params.slidesPerColumn * i - l.slides.length);
            for (c = 0; c < l.slides.length; c++) {
                g = 0;
                var k = l.slides.eq(c);
                if (l.params.slidesPerColumn > 1) {
                    var m;
                    var o, p;
                    if (l.params.slidesPerColumnFill === "column") {
                        o = Math.floor(c / h);
                        p = c - o * h;
                        if (o > j || o === j && p === h - 1) {
                            if (++p >= h) {
                                p = 0;
                                o++
                            }
                        }
                        m = o + p * f / h;
                        k.css({
                            "-webkit-box-ordinal-group": m,
                            "-moz-box-ordinal-group": m,
                            "-ms-flex-order": m,
                            "-webkit-order": m,
                            order: m
                        })
                    } else {
                        p = Math.floor(c / i);
                        o = c - p * i
                    }
                    k.css({"margin-top": p !== 0 && l.params.spaceBetween && l.params.spaceBetween + "px"}).attr("data-swiper-column", o).attr("data-swiper-row", p)
                }
                if (k.css("display") === "none")continue;
                if (l.params.slidesPerView === "auto") {
                    g = l.isHorizontal() ? k.outerWidth(true) : k.outerHeight(true);
                    if (l.params.roundLengths)g = n(g)
                } else {
                    g = (l.size - (l.params.slidesPerView - 1) * a) / l.params.slidesPerView;
                    if (l.params.roundLengths)g = n(g);
                    if (l.isHorizontal()) {
                        l.slides[c].style.width = g + "px"
                    } else {
                        l.slides[c].style.height = g + "px"
                    }
                }
                l.slides[c].swiperSlideSize = g;
                l.slidesSizesGrid.push(g);
                if (l.params.centeredSlides) {
                    b = b + g / 2 + d / 2 + a;
                    if (c === 0)b = b - l.size / 2 - a;
                    if (Math.abs(b) < 1 / 1e3)b = 0;
                    if (e % l.params.slidesPerGroup === 0)l.snapGrid.push(b);
                    l.slidesGrid.push(b)
                } else {
                    if (e % l.params.slidesPerGroup === 0)l.snapGrid.push(b);
                    l.slidesGrid.push(b);
                    b = b + g + a
                }
                l.virtualSize += g + a;
                d = g;
                e++
            }
            l.virtualSize = Math.max(l.virtualSize, l.size) + l.params.slidesOffsetAfter;
            var q;
            if (l.rtl && l.wrongRTL && (l.params.effect === "slide" || l.params.effect === "coverflow")) {
                l.wrapper.css({width: l.virtualSize + l.params.spaceBetween + "px"})
            }
            if (!l.support.flexbox || l.params.setWrapperSize) {
                if (l.isHorizontal())l.wrapper.css({width: l.virtualSize + l.params.spaceBetween + "px"}); else l.wrapper.css({height: l.virtualSize + l.params.spaceBetween + "px"})
            }
            if (l.params.slidesPerColumn > 1) {
                l.virtualSize = (g + l.params.spaceBetween) * f;
                l.virtualSize = Math.ceil(l.virtualSize / l.params.slidesPerColumn) - l.params.spaceBetween;
                l.wrapper.css({width: l.virtualSize + l.params.spaceBetween + "px"});
                if (l.params.centeredSlides) {
                    q = [];
                    for (c = 0; c < l.snapGrid.length; c++) {
                        if (l.snapGrid[c] < l.virtualSize + l.snapGrid[0])q.push(l.snapGrid[c])
                    }
                    l.snapGrid = q
                }
            }
            if (!l.params.centeredSlides) {
                q = [];
                for (c = 0; c < l.snapGrid.length; c++) {
                    if (l.snapGrid[c] <= l.virtualSize - l.size) {
                        q.push(l.snapGrid[c])
                    }
                }
                l.snapGrid = q;
                if (Math.floor(l.virtualSize - l.size) - Math.floor(l.snapGrid[l.snapGrid.length - 1]) > 1) {
                    l.snapGrid.push(l.virtualSize - l.size)
                }
            }
            if (l.snapGrid.length === 0)l.snapGrid = [0];
            if (l.params.spaceBetween !== 0) {
                if (l.isHorizontal()) {
                    if (l.rtl)l.slides.css({marginLeft: a + "px"}); else l.slides.css({marginRight: a + "px"})
                } else l.slides.css({marginBottom: a + "px"})
            }
            if (l.params.watchSlidesProgress) {
                l.updateSlidesOffset()
            }
        };
        l.updateSlidesOffset = function () {
            for (var a = 0; a < l.slides.length; a++) {
                l.slides[a].swiperSlideOffset = l.isHorizontal() ? l.slides[a].offsetLeft : l.slides[a].offsetTop
            }
        };
        l.updateSlidesProgress = function (a) {
            if (typeof a === "undefined") {
                a = l.translate || 0
            }
            if (l.slides.length === 0)return;
            if (typeof l.slides[0].swiperSlideOffset === "undefined")l.updateSlidesOffset();
            var b = -a;
            if (l.rtl)b = a;
            l.slides.removeClass(l.params.slideVisibleClass);
            for (var c = 0; c < l.slides.length; c++) {
                var d = l.slides[c];
                var e = (b - d.swiperSlideOffset) / (d.swiperSlideSize + l.params.spaceBetween);
                if (l.params.watchSlidesVisibility) {
                    var f = -(b - d.swiperSlideOffset);
                    var g = f + l.slidesSizesGrid[c];
                    var h = f >= 0 && f < l.size || g > 0 && g <= l.size || f <= 0 && g >= l.size;
                    if (h) {
                        l.slides.eq(c).addClass(l.params.slideVisibleClass)
                    }
                }
                d.progress = l.rtl ? -e : e
            }
        };
        l.updateProgress = function (a) {
            if (typeof a === "undefined") {
                a = l.translate || 0
            }
            var b = l.maxTranslate() - l.minTranslate();
            var c = l.isBeginning;
            var d = l.isEnd;
            if (b === 0) {
                l.progress = 0;
                l.isBeginning = l.isEnd = true
            } else {
                l.progress = (a - l.minTranslate()) / b;
                l.isBeginning = l.progress <= 0;
                l.isEnd = l.progress >= 1
            }
            if (l.isBeginning && !c)l.emit("onReachBeginning", l);
            if (l.isEnd && !d)l.emit("onReachEnd", l);
            if (l.params.watchSlidesProgress)l.updateSlidesProgress(a);
            l.emit("onProgress", l, l.progress)
        };
        l.updateActiveIndex = function () {
            var a = l.rtl ? l.translate : -l.translate;
            var b, c, d;
            for (c = 0; c < l.slidesGrid.length; c++) {
                if (typeof l.slidesGrid[c + 1] !== "undefined") {
                    if (a >= l.slidesGrid[c] && a < l.slidesGrid[c + 1] - (l.slidesGrid[c + 1] - l.slidesGrid[c]) / 2) {
                        b = c
                    } else if (a >= l.slidesGrid[c] && a < l.slidesGrid[c + 1]) {
                        b = c + 1
                    }
                } else {
                    if (a >= l.slidesGrid[c]) {
                        b = c
                    }
                }
            }
            if (b < 0 || typeof b === "undefined")b = 0;
            d = Math.floor(b / l.params.slidesPerGroup);
            if (d >= l.snapGrid.length)d = l.snapGrid.length - 1;
            if (b === l.activeIndex) {
                return
            }
            l.snapIndex = d;
            l.previousIndex = l.activeIndex;
            l.activeIndex = b;
            l.updateClasses()
        };
        l.updateClasses = function () {
            l.slides.removeClass(l.params.slideActiveClass + " " + l.params.slideNextClass + " " + l.params.slidePrevClass);
            var b = l.slides.eq(l.activeIndex);
            b.addClass(l.params.slideActiveClass);
            var c = b.next("." + l.params.slideClass).addClass(l.params.slideNextClass);
            if (l.params.loop && c.length === 0) {
                l.slides.eq(0).addClass(l.params.slideNextClass)
            }
            var d = b.prev("." + l.params.slideClass).addClass(l.params.slidePrevClass);
            if (l.params.loop && d.length === 0) {
                l.slides.eq(-1).addClass(l.params.slidePrevClass)
            }
            if (l.paginationContainer && l.paginationContainer.length > 0) {
                var e, f = l.params.loop ? Math.ceil((l.slides.length - l.loopedSlides * 2) / l.params.slidesPerGroup) : l.snapGrid.length;
                if (l.params.loop) {
                    e = Math.ceil((l.activeIndex - l.loopedSlides) / l.params.slidesPerGroup);
                    if (e > l.slides.length - 1 - l.loopedSlides * 2) {
                        e = e - (l.slides.length - l.loopedSlides * 2)
                    }
                    if (e > f - 1)e = e - f;
                    if (e < 0 && l.params.paginationType !== "bullets")e = f + e
                } else {
                    if (typeof l.snapIndex !== "undefined") {
                        e = l.snapIndex
                    } else {
                        e = l.activeIndex || 0
                    }
                }
                if (l.params.paginationType === "bullets" && l.bullets && l.bullets.length > 0) {
                    l.bullets.removeClass(l.params.bulletActiveClass);
                    if (l.paginationContainer.length > 1) {
                        l.bullets.each(function () {
                            if (a(this).index() === e)a(this).addClass(l.params.bulletActiveClass)
                        })
                    } else {
                        l.bullets.eq(e).addClass(l.params.bulletActiveClass)
                    }
                }
                if (l.params.paginationType === "fraction") {
                    l.paginationContainer.find("." + l.params.paginationCurrentClass).text(e + 1);
                    l.paginationContainer.find("." + l.params.paginationTotalClass).text(f)
                }
                if (l.params.paginationType === "progress") {
                    var g = (e + 1) / f, h = g, i = 1;
                    if (!l.isHorizontal()) {
                        i = g;
                        h = 1
                    }
                    l.paginationContainer.find("." + l.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX(" + h + ") scaleY(" + i + ")").transition(l.params.speed)
                }
                if (l.params.paginationType === "custom" && l.params.paginationCustomRender) {
                    l.paginationContainer.html(l.params.paginationCustomRender(l, e + 1, f));
                    l.emit("onPaginationRendered", l, l.paginationContainer[0])
                }
            }
            if (!l.params.loop) {
                if (l.params.prevButton && l.prevButton && l.prevButton.length > 0) {
                    if (l.isBeginning) {
                        l.prevButton.addClass(l.params.buttonDisabledClass);
                        if (l.params.a11y && l.a11y)l.a11y.disable(l.prevButton)
                    } else {
                        l.prevButton.removeClass(l.params.buttonDisabledClass);
                        if (l.params.a11y && l.a11y)l.a11y.enable(l.prevButton)
                    }
                }
                if (l.params.nextButton && l.nextButton && l.nextButton.length > 0) {
                    if (l.isEnd) {
                        l.nextButton.addClass(l.params.buttonDisabledClass);
                        if (l.params.a11y && l.a11y)l.a11y.disable(l.nextButton)
                    } else {
                        l.nextButton.removeClass(l.params.buttonDisabledClass);
                        if (l.params.a11y && l.a11y)l.a11y.enable(l.nextButton)
                    }
                }
            }
        };
        l.updatePagination = function () {
            if (!l.params.pagination)return;
            if (l.paginationContainer && l.paginationContainer.length > 0) {
                var a = "";
                if (l.params.paginationType === "bullets") {
                    var b = l.params.loop ? Math.ceil((l.slides.length - l.loopedSlides * 2) / l.params.slidesPerGroup) : l.snapGrid.length;
                    for (var c = 0; c < b; c++) {
                        if (l.params.paginationBulletRender) {
                            a += l.params.paginationBulletRender(c, l.params.bulletClass)
                        } else {
                            a += "<" + l.params.paginationElement + ' class="' + l.params.bulletClass + '"></' + l.params.paginationElement + ">"
                        }
                    }
                    l.paginationContainer.html(a);
                    l.bullets = l.paginationContainer.find("." + l.params.bulletClass);
                    if (l.params.paginationClickable && l.params.a11y && l.a11y) {
                        l.a11y.initPagination()
                    }
                }
                if (l.params.paginationType === "fraction") {
                    if (l.params.paginationFractionRender) {
                        a = l.params.paginationFractionRender(l, l.params.paginationCurrentClass, l.params.paginationTotalClass)
                    } else {
                        a = '<span class="' + l.params.paginationCurrentClass + '"></span>' + " / " + '<span class="' + l.params.paginationTotalClass + '"></span>'
                    }
                    l.paginationContainer.html(a)
                }
                if (l.params.paginationType === "progress") {
                    if (l.params.paginationProgressRender) {
                        a = l.params.paginationProgressRender(l, l.params.paginationProgressbarClass)
                    } else {
                        a = '<span class="' + l.params.paginationProgressbarClass + '"></span>'
                    }
                    l.paginationContainer.html(a)
                }
                if (l.params.paginationType !== "custom") {
                    l.emit("onPaginationRendered", l, l.paginationContainer[0])
                }
            }
        };
        l.update = function (a) {
            l.updateContainerSize();
            l.updateSlidesSize();
            l.updateProgress();
            l.updatePagination();
            l.updateClasses();
            if (l.params.scrollbar && l.scrollbar) {
                l.scrollbar.set()
            }
            function b() {
                d = Math.min(Math.max(l.translate, l.maxTranslate()), l.minTranslate());
                l.setWrapperTranslate(d);
                l.updateActiveIndex();
                l.updateClasses()
            }

            if (a) {
                var c, d;
                if (l.controller && l.controller.spline) {
                    l.controller.spline = undefined
                }
                if (l.params.freeMode) {
                    b();
                    if (l.params.autoHeight) {
                        l.updateAutoHeight()
                    }
                } else {
                    if ((l.params.slidesPerView === "auto" || l.params.slidesPerView > 1) && l.isEnd && !l.params.centeredSlides) {
                        c = l.slideTo(l.slides.length - 1, 0, false, true)
                    } else {
                        c = l.slideTo(l.activeIndex, 0, false, true)
                    }
                    if (!c) {
                        b()
                    }
                }
            } else if (l.params.autoHeight) {
                l.updateAutoHeight()
            }
        };
        l.onResize = function (a) {
            if (l.params.breakpoints) {
                l.setBreakpoint()
            }
            var b = l.params.allowSwipeToPrev;
            var c = l.params.allowSwipeToNext;
            l.params.allowSwipeToPrev = l.params.allowSwipeToNext = true;
            l.updateContainerSize();
            l.updateSlidesSize();
            if (l.params.slidesPerView === "auto" || l.params.freeMode || a)l.updatePagination();
            if (l.params.scrollbar && l.scrollbar) {
                l.scrollbar.set()
            }
            if (l.controller && l.controller.spline) {
                l.controller.spline = undefined
            }
            var d = false;
            if (l.params.freeMode) {
                var e = Math.min(Math.max(l.translate, l.maxTranslate()), l.minTranslate());
                l.setWrapperTranslate(e);
                l.updateActiveIndex();
                l.updateClasses();
                if (l.params.autoHeight) {
                    l.updateAutoHeight()
                }
            } else {
                l.updateClasses();
                if ((l.params.slidesPerView === "auto" || l.params.slidesPerView > 1) && l.isEnd && !l.params.centeredSlides) {
                    d = l.slideTo(l.slides.length - 1, 0, false, true)
                } else {
                    d = l.slideTo(l.activeIndex, 0, false, true)
                }
            }
            if (l.params.lazyLoading && !d && l.lazy) {
                l.lazy.load()
            }
            l.params.allowSwipeToPrev = b;
            l.params.allowSwipeToNext = c
        };
        var p = ["mousedown", "mousemove", "mouseup"];
        if (window.navigator.pointerEnabled)p = ["pointerdown", "pointermove", "pointerup"]; else if (window.navigator.msPointerEnabled)p = ["MSPointerDown", "MSPointerMove", "MSPointerUp"];
        l.touchEvents = {
            start: l.support.touch || !l.params.simulateTouch ? "touchstart" : p[0],
            move: l.support.touch || !l.params.simulateTouch ? "touchmove" : p[1],
            end: l.support.touch || !l.params.simulateTouch ? "touchend" : p[2]
        };
        if (window.navigator.pointerEnabled || window.navigator.msPointerEnabled) {
            (l.params.touchEventsTarget === "container" ? l.container : l.wrapper).addClass("swiper-wp8-" + l.params.direction)
        }
        l.initEvents = function (a) {
            var b = a ? "off" : "on";
            var c = a ? "removeEventListener" : "addEventListener";
            var e = l.params.touchEventsTarget === "container" ? l.container[0] : l.wrapper[0];
            var f = l.support.touch ? e : document;
            var g = l.params.nested ? true : false;
            if (l.browser.ie) {
                e[c](l.touchEvents.start, l.onTouchStart, false);
                f[c](l.touchEvents.move, l.onTouchMove, g);
                f[c](l.touchEvents.end, l.onTouchEnd, false)
            } else {
                if (l.support.touch) {
                    e[c](l.touchEvents.start, l.onTouchStart, false);
                    e[c](l.touchEvents.move, l.onTouchMove, g);
                    e[c](l.touchEvents.end, l.onTouchEnd, false)
                }
                if (d.simulateTouch && !l.device.ios && !l.device.android) {
                    e[c]("mousedown", l.onTouchStart, false);
                    document[c]("mousemove", l.onTouchMove, g);
                    document[c]("mouseup", l.onTouchEnd, false)
                }
            }
            window[c]("resize", l.onResize);
            if (l.params.nextButton && l.nextButton && l.nextButton.length > 0) {
                l.nextButton[b]("click", l.onClickNext);
                if (l.params.a11y && l.a11y)l.nextButton[b]("keydown", l.a11y.onEnterKey)
            }
            if (l.params.prevButton && l.prevButton && l.prevButton.length > 0) {
                l.prevButton[b]("click", l.onClickPrev);
                if (l.params.a11y && l.a11y)l.prevButton[b]("keydown", l.a11y.onEnterKey)
            }
            if (l.params.pagination && l.params.paginationClickable) {
                l.paginationContainer[b]("click", "." + l.params.bulletClass, l.onClickIndex);
                if (l.params.a11y && l.a11y)l.paginationContainer[b]("keydown", "." + l.params.bulletClass, l.a11y.onEnterKey)
            }
            if (l.params.preventClicks || l.params.preventClicksPropagation)e[c]("click", l.preventClicks, true)
        };
        l.attachEvents = function () {
            l.initEvents()
        };
        l.detachEvents = function () {
            l.initEvents(true)
        };
        l.allowClick = true;
        l.preventClicks = function (a) {
            if (!l.allowClick) {
                if (l.params.preventClicks)a.preventDefault();
                if (l.params.preventClicksPropagation && l.animating) {
                    a.stopPropagation();
                    a.stopImmediatePropagation()
                }
            }
        };
        l.onClickNext = function (a) {
            a.preventDefault();
            if (l.isEnd && !l.params.loop)return;
            l.slideNext()
        };
        l.onClickPrev = function (a) {
            a.preventDefault();
            if (l.isBeginning && !l.params.loop)return;
            l.slidePrev()
        };
        l.onClickIndex = function (b) {
            b.preventDefault();
            var c = a(this).index() * l.params.slidesPerGroup;
            if (l.params.loop)c = c + l.loopedSlides;
            l.slideTo(c)
        };
        function q(b, c) {
            var d = a(b.target);
            if (!d.is(c)) {
                if (typeof c === "string") {
                    d = d.parents(c)
                } else if (c.nodeType) {
                    var e;
                    d.parents().each(function (a, b) {
                        if (b === c)e = c
                    });
                    if (!e)return undefined; else return c
                }
            }
            if (d.length === 0) {
                return undefined
            }
            return d[0]
        }

        l.updateClickedSlide = function (b) {
            var c = q(b, "." + l.params.slideClass);
            var d = false;
            if (c) {
                for (var e = 0; e < l.slides.length; e++) {
                    if (l.slides[e] === c)d = true
                }
            }
            if (c && d) {
                l.clickedSlide = c;
                l.clickedIndex = a(c).index()
            } else {
                l.clickedSlide = undefined;
                l.clickedIndex = undefined;
                return
            }
            if (l.params.slideToClickedSlide && l.clickedIndex !== undefined && l.clickedIndex !== l.activeIndex) {
                var f = l.clickedIndex, g, h;
                if (l.params.loop) {
                    if (l.animating)return;
                    g = a(l.clickedSlide).attr("data-swiper-slide-index");
                    if (l.params.centeredSlides) {
                        if (f < l.loopedSlides - l.params.slidesPerView / 2 || f > l.slides.length - l.loopedSlides + l.params.slidesPerView / 2) {
                            l.fixLoop();
                            f = l.wrapper.children("." + l.params.slideClass + '[data-swiper-slide-index="' + g + '"]:not(.swiper-slide-duplicate)').eq(0).index();
                            setTimeout(function () {
                                l.slideTo(f)
                            }, 0)
                        } else {
                            l.slideTo(f)
                        }
                    } else {
                        if (f > l.slides.length - l.params.slidesPerView) {
                            l.fixLoop();
                            f = l.wrapper.children("." + l.params.slideClass + '[data-swiper-slide-index="' + g + '"]:not(.swiper-slide-duplicate)').eq(0).index();
                            setTimeout(function () {
                                l.slideTo(f)
                            }, 0)
                        } else {
                            l.slideTo(f)
                        }
                    }
                } else {
                    l.slideTo(f)
                }
            }
        };
        var r, s, t, u, v, w, x, y, z = "input, select, textarea, button", A = Date.now(), B, C = [], D;
        l.animating = false;
        l.touches = {startX: 0, startY: 0, currentX: 0, currentY: 0, diff: 0};
        var E, F;
        l.onTouchStart = function (b) {
            if (b.originalEvent)b = b.originalEvent;
            E = b.type === "touchstart";
            if (!E && "which" in b && b.which === 3)return;
            if (l.params.noSwiping && q(b, "." + l.params.noSwipingClass)) {
                l.allowClick = true;
                return
            }
            if (l.params.swipeHandler) {
                if (!q(b, l.params.swipeHandler))return
            }
            var c = l.touches.currentX = b.type === "touchstart" ? b.targetTouches[0].pageX : b.pageX;
            var d = l.touches.currentY = b.type === "touchstart" ? b.targetTouches[0].pageY : b.pageY;
            if (l.device.ios && l.params.iOSEdgeSwipeDetection && c <= l.params.iOSEdgeSwipeThreshold) {
                return
            }
            r = true;
            s = false;
            t = true;
            v = undefined;
            F = undefined;
            l.touches.startX = c;
            l.touches.startY = d;
            u = Date.now();
            l.allowClick = true;
            l.updateContainerSize();
            l.swipeDirection = undefined;
            if (l.params.threshold > 0)y = false;
            if (b.type !== "touchstart") {
                var e = true;
                if (a(b.target).is(z))e = false;
                if (document.activeElement && a(document.activeElement).is(z)) {
                    document.activeElement.blur()
                }
                if (e) {
                    b.preventDefault()
                }
            }
            l.emit("onTouchStart", l, b)
        };
        l.onTouchMove = function (b) {
            if (b.originalEvent)b = b.originalEvent;
            if (E && b.type === "mousemove")return;
            if (b.preventedByNestedSwiper) {
                l.touches.startX = b.type === "touchmove" ? b.targetTouches[0].pageX : b.pageX;
                l.touches.startY = b.type === "touchmove" ? b.targetTouches[0].pageY : b.pageY;
                return
            }
            if (l.params.onlyExternal) {
                l.allowClick = false;
                if (r) {
                    l.touches.startX = l.touches.currentX = b.type === "touchmove" ? b.targetTouches[0].pageX : b.pageX;
                    l.touches.startY = l.touches.currentY = b.type === "touchmove" ? b.targetTouches[0].pageY : b.pageY;
                    u = Date.now()
                }
                return
            }
            if (E && document.activeElement) {
                if (b.target === document.activeElement && a(b.target).is(z)) {
                    s = true;
                    l.allowClick = false;
                    return
                }
            }
            if (t) {
                l.emit("onTouchMove", l, b)
            }
            if (b.targetTouches && b.targetTouches.length > 1)return;
            l.touches.currentX = b.type === "touchmove" ? b.targetTouches[0].pageX : b.pageX;
            l.touches.currentY = b.type === "touchmove" ? b.targetTouches[0].pageY : b.pageY;
            if (typeof v === "undefined") {
                var c = Math.atan2(Math.abs(l.touches.currentY - l.touches.startY), Math.abs(l.touches.currentX - l.touches.startX)) * 180 / Math.PI;
                v = l.isHorizontal() ? c > l.params.touchAngle : 90 - c > l.params.touchAngle
            }
            if (v) {
                l.emit("onTouchMoveOpposite", l, b)
            }
            if (typeof F === "undefined" && l.browser.ieTouch) {
                if (l.touches.currentX !== l.touches.startX || l.touches.currentY !== l.touches.startY) {
                    F = true
                }
            }
            if (!r)return;
            if (v) {
                r = false;
                return
            }
            if (!F && l.browser.ieTouch) {
                return
            }
            l.allowClick = false;
            l.emit("onSliderMove", l, b);
            b.preventDefault();
            if (l.params.touchMoveStopPropagation && !l.params.nested) {
                b.stopPropagation()
            }
            if (!s) {
                if (d.loop) {
                    l.fixLoop()
                }
                x = l.getWrapperTranslate();
                l.setWrapperTransition(0);
                if (l.animating) {
                    l.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd")
                }
                if (l.params.autoplay && l.autoplaying) {
                    if (l.params.autoplayDisableOnInteraction) {
                        l.stopAutoplay()
                    } else {
                        l.pauseAutoplay()
                    }
                }
                D = false;
                if (l.params.grabCursor) {
                    l.container[0].style.cursor = "move";
                    l.container[0].style.cursor = "-webkit-grabbing";
                    l.container[0].style.cursor = "-moz-grabbin";
                    l.container[0].style.cursor = "grabbing"
                }
            }
            s = true;
            var e = l.touches.diff = l.isHorizontal() ? l.touches.currentX - l.touches.startX : l.touches.currentY - l.touches.startY;
            e = e * l.params.touchRatio;
            if (l.rtl)e = -e;
            l.swipeDirection = e > 0 ? "prev" : "next";
            w = e + x;
            var f = true;
            if (e > 0 && w > l.minTranslate()) {
                f = false;
                if (l.params.resistance)w = l.minTranslate() - 1 + Math.pow(-l.minTranslate() + x + e, l.params.resistanceRatio)
            } else if (e < 0 && w < l.maxTranslate()) {
                f = false;
                if (l.params.resistance)w = l.maxTranslate() + 1 - Math.pow(l.maxTranslate() - x - e, l.params.resistanceRatio)
            }
            if (f) {
                b.preventedByNestedSwiper = true
            }
            if (!l.params.allowSwipeToNext && l.swipeDirection === "next" && w < x) {
                w = x
            }
            if (!l.params.allowSwipeToPrev && l.swipeDirection === "prev" && w > x) {
                w = x
            }
            if (!l.params.followFinger)return;
            if (l.params.threshold > 0) {
                if (Math.abs(e) > l.params.threshold || y) {
                    if (!y) {
                        y = true;
                        l.touches.startX = l.touches.currentX;
                        l.touches.startY = l.touches.currentY;
                        w = x;
                        l.touches.diff = l.isHorizontal() ? l.touches.currentX - l.touches.startX : l.touches.currentY - l.touches.startY;
                        return
                    }
                } else {
                    w = x;
                    return
                }
            }
            if (l.params.freeMode || l.params.watchSlidesProgress) {
                l.updateActiveIndex()
            }
            if (l.params.freeMode) {
                if (C.length === 0) {
                    C.push({position: l.touches[l.isHorizontal() ? "startX" : "startY"], time: u})
                }
                C.push({
                    position: l.touches[l.isHorizontal() ? "currentX" : "currentY"],
                    time: (new window.Date).getTime()
                })
            }
            l.updateProgress(w);
            l.setWrapperTranslate(w)
        };
        l.onTouchEnd = function (b) {
            if (b.originalEvent)b = b.originalEvent;
            if (t) {
                l.emit("onTouchEnd", l, b)
            }
            t = false;
            if (!r)return;
            if (l.params.grabCursor && s && r) {
                l.container[0].style.cursor = "move";
                l.container[0].style.cursor = "-webkit-grab";
                l.container[0].style.cursor = "-moz-grab";
                l.container[0].style.cursor = "grab"
            }
            var c = Date.now();
            var d = c - u;
            if (l.allowClick) {
                l.updateClickedSlide(b);
                l.emit("onTap", l, b);
                if (d < 300 && c - A > 300) {
                    if (B)clearTimeout(B);
                    B = setTimeout(function () {
                        if (!l)return;
                        if (l.params.paginationHide && l.paginationContainer.length > 0 && !a(b.target).hasClass(l.params.bulletClass)) {
                            l.paginationContainer.toggleClass(l.params.paginationHiddenClass)
                        }
                        l.emit("onClick", l, b)
                    }, 300)
                }
                if (d < 300 && c - A < 300) {
                    if (B)clearTimeout(B);
                    l.emit("onDoubleTap", l, b)
                }
            }
            A = Date.now();
            setTimeout(function () {
                if (l)l.allowClick = true
            }, 0);
            if (!r || !s || !l.swipeDirection || l.touches.diff === 0 || w === x) {
                r = s = false;
                return
            }
            r = s = false;
            var e;
            if (l.params.followFinger) {
                e = l.rtl ? l.translate : -l.translate
            } else {
                e = -w
            }
            if (l.params.freeMode) {
                if (e < -l.minTranslate()) {
                    l.slideTo(l.activeIndex);
                    return
                } else if (e > -l.maxTranslate()) {
                    if (l.slides.length < l.snapGrid.length) {
                        l.slideTo(l.snapGrid.length - 1)
                    } else {
                        l.slideTo(l.slides.length - 1)
                    }
                    return
                }
                if (l.params.freeModeMomentum) {
                    if (C.length > 1) {
                        var f = C.pop(), g = C.pop();
                        var h = f.position - g.position;
                        var i = f.time - g.time;
                        l.velocity = h / i;
                        l.velocity = l.velocity / 2;
                        if (Math.abs(l.velocity) < l.params.freeModeMinimumVelocity) {
                            l.velocity = 0
                        }
                        if (i > 150 || (new window.Date).getTime() - f.time > 300) {
                            l.velocity = 0
                        }
                    } else {
                        l.velocity = 0
                    }
                    C.length = 0;
                    var j = 1e3 * l.params.freeModeMomentumRatio;
                    var k = l.velocity * j;
                    var m = l.translate + k;
                    if (l.rtl)m = -m;
                    var n = false;
                    var o;
                    var p = Math.abs(l.velocity) * 20 * l.params.freeModeMomentumBounceRatio;
                    if (m < l.maxTranslate()) {
                        if (l.params.freeModeMomentumBounce) {
                            if (m + l.maxTranslate() < -p) {
                                m = l.maxTranslate() - p
                            }
                            o = l.maxTranslate();
                            n = true;
                            D = true
                        } else {
                            m = l.maxTranslate()
                        }
                    } else if (m > l.minTranslate()) {
                        if (l.params.freeModeMomentumBounce) {
                            if (m - l.minTranslate() > p) {
                                m = l.minTranslate() + p
                            }
                            o = l.minTranslate();
                            n = true;
                            D = true
                        } else {
                            m = l.minTranslate()
                        }
                    } else if (l.params.freeModeSticky) {
                        var q = 0, v;
                        for (q = 0; q < l.snapGrid.length; q += 1) {
                            if (l.snapGrid[q] > -m) {
                                v = q;
                                break
                            }
                        }
                        if (Math.abs(l.snapGrid[v] - m) < Math.abs(l.snapGrid[v - 1] - m) || l.swipeDirection === "next") {
                            m = l.snapGrid[v]
                        } else {
                            m = l.snapGrid[v - 1]
                        }
                        if (!l.rtl)m = -m
                    }
                    if (l.velocity !== 0) {
                        if (l.rtl) {
                            j = Math.abs((-m - l.translate) / l.velocity)
                        } else {
                            j = Math.abs((m - l.translate) / l.velocity)
                        }
                    } else if (l.params.freeModeSticky) {
                        l.slideReset();
                        return
                    }
                    if (l.params.freeModeMomentumBounce && n) {
                        l.updateProgress(o);
                        l.setWrapperTransition(j);
                        l.setWrapperTranslate(m);
                        l.onTransitionStart();
                        l.animating = true;
                        l.wrapper.transitionEnd(function () {
                            if (!l || !D)return;
                            l.emit("onMomentumBounce", l);
                            l.setWrapperTransition(l.params.speed);
                            l.setWrapperTranslate(o);
                            l.wrapper.transitionEnd(function () {
                                if (!l)return;
                                l.onTransitionEnd()
                            })
                        })
                    } else if (l.velocity) {
                        l.updateProgress(m);
                        l.setWrapperTransition(j);
                        l.setWrapperTranslate(m);
                        l.onTransitionStart();
                        if (!l.animating) {
                            l.animating = true;
                            l.wrapper.transitionEnd(function () {
                                if (!l)return;
                                l.onTransitionEnd()
                            })
                        }
                    } else {
                        l.updateProgress(m)
                    }
                    l.updateActiveIndex()
                }
                if (!l.params.freeModeMomentum || d >= l.params.longSwipesMs) {
                    l.updateProgress();
                    l.updateActiveIndex()
                }
                return
            }
            var y, z = 0, E = l.slidesSizesGrid[0];
            for (y = 0; y < l.slidesGrid.length; y += l.params.slidesPerGroup) {
                if (typeof l.slidesGrid[y + l.params.slidesPerGroup] !== "undefined") {
                    if (e >= l.slidesGrid[y] && e < l.slidesGrid[y + l.params.slidesPerGroup]) {
                        z = y;
                        E = l.slidesGrid[y + l.params.slidesPerGroup] - l.slidesGrid[y]
                    }
                } else {
                    if (e >= l.slidesGrid[y]) {
                        z = y;
                        E = l.slidesGrid[l.slidesGrid.length - 1] - l.slidesGrid[l.slidesGrid.length - 2]
                    }
                }
            }
            var F = (e - l.slidesGrid[z]) / E;
            if (d > l.params.longSwipesMs) {
                if (!l.params.longSwipes) {
                    l.slideTo(l.activeIndex);
                    return
                }
                if (l.swipeDirection === "next") {
                    if (F >= l.params.longSwipesRatio)l.slideTo(z + l.params.slidesPerGroup); else l.slideTo(z)
                }
                if (l.swipeDirection === "prev") {
                    if (F > 1 - l.params.longSwipesRatio)l.slideTo(z + l.params.slidesPerGroup); else l.slideTo(z)
                }
            } else {
                if (!l.params.shortSwipes) {
                    l.slideTo(l.activeIndex);
                    return
                }
                if (l.swipeDirection === "next") {
                    l.slideTo(z + l.params.slidesPerGroup)
                }
                if (l.swipeDirection === "prev") {
                    l.slideTo(z)
                }
            }
        };
        l._slideTo = function (a, b) {
            return l.slideTo(a, b, true, true)
        };
        l.slideTo = function (a, b, c, d) {
            if (typeof c === "undefined")c = true;
            if (typeof a === "undefined")a = 0;
            if (a < 0)a = 0;
            l.snapIndex = Math.floor(a / l.params.slidesPerGroup);
            if (l.snapIndex >= l.snapGrid.length)l.snapIndex = l.snapGrid.length - 1;
            var e = -l.snapGrid[l.snapIndex];
            if (l.params.autoplay && l.autoplaying) {
                if (d || !l.params.autoplayDisableOnInteraction) {
                    l.pauseAutoplay(b)
                } else {
                    l.stopAutoplay()
                }
            }
            l.updateProgress(e);
            for (var f = 0; f < l.slidesGrid.length; f++) {
                if (-Math.floor(e * 100) >= Math.floor(l.slidesGrid[f] * 100)) {
                    a = f
                }
            }
            if (!l.params.allowSwipeToNext && e < l.translate && e < l.minTranslate()) {
                return false
            }
            if (!l.params.allowSwipeToPrev && e > l.translate && e > l.maxTranslate()) {
                if ((l.activeIndex || 0) !== a)return false
            }
            if (typeof b === "undefined")b = l.params.speed;
            l.previousIndex = l.activeIndex || 0;
            l.activeIndex = a;
            if (l.rtl && -e === l.translate || !l.rtl && e === l.translate) {
                if (l.params.autoHeight) {
                    l.updateAutoHeight()
                }
                l.updateClasses();
                if (l.params.effect !== "slide") {
                    l.setWrapperTranslate(e)
                }
                return false
            }
            l.updateClasses();
            l.onTransitionStart(c);
            if (b === 0) {
                l.setWrapperTranslate(e);
                l.setWrapperTransition(0);
                l.onTransitionEnd(c)
            } else {
                l.setWrapperTranslate(e);
                l.setWrapperTransition(b);
                if (!l.animating) {
                    l.animating = true;
                    l.wrapper.transitionEnd(function () {
                        if (!l)return;
                        l.onTransitionEnd(c)
                    })
                }
            }
            return true
        };
        l.onTransitionStart = function (a) {
            if (typeof a === "undefined")a = true;
            if (l.params.autoHeight) {
                l.updateAutoHeight()
            }
            if (l.lazy)l.lazy.onTransitionStart();
            if (a) {
                l.emit("onTransitionStart", l);
                if (l.activeIndex !== l.previousIndex) {
                    l.emit("onSlideChangeStart", l);
                    if (l.activeIndex > l.previousIndex) {
                        l.emit("onSlideNextStart", l)
                    } else {
                        l.emit("onSlidePrevStart", l)
                    }
                }
            }
        };
        l.onTransitionEnd = function (a) {
            l.animating = false;
            l.setWrapperTransition(0);
            if (typeof a === "undefined")a = true;
            if (l.lazy)l.lazy.onTransitionEnd();
            if (a) {
                l.emit("onTransitionEnd", l);
                if (l.activeIndex !== l.previousIndex) {
                    l.emit("onSlideChangeEnd", l);
                    if (l.activeIndex > l.previousIndex) {
                        l.emit("onSlideNextEnd", l)
                    } else {
                        l.emit("onSlidePrevEnd", l)
                    }
                }
            }
            if (l.params.hashnav && l.hashnav) {
                l.hashnav.setHash()
            }
        };
        l.slideNext = function (a, b, c) {
            if (l.params.loop) {
                if (l.animating)return false;
                l.fixLoop();
                var d = l.container[0].clientLeft;
                return l.slideTo(l.activeIndex + l.params.slidesPerGroup, b, a, c)
            } else return l.slideTo(l.activeIndex + l.params.slidesPerGroup, b, a, c)
        };
        l._slideNext = function (a) {
            return l.slideNext(true, a, true)
        };
        l.slidePrev = function (a, b, c) {
            if (l.params.loop) {
                if (l.animating)return false;
                l.fixLoop();
                var d = l.container[0].clientLeft;
                return l.slideTo(l.activeIndex - 1, b, a, c)
            } else return l.slideTo(l.activeIndex - 1, b, a, c)
        };
        l._slidePrev = function (a) {
            return l.slidePrev(true, a, true)
        };
        l.slideReset = function (a, b, c) {
            return l.slideTo(l.activeIndex, b, a)
        };
        l.setWrapperTransition = function (a, b) {
            l.wrapper.transition(a);
            if (l.params.effect !== "slide" && l.effects[l.params.effect]) {
                l.effects[l.params.effect].setTransition(a)
            }
            if (l.params.parallax && l.parallax) {
                l.parallax.setTransition(a)
            }
            if (l.params.scrollbar && l.scrollbar) {
                l.scrollbar.setTransition(a)
            }
            if (l.params.control && l.controller) {
                l.controller.setTransition(a, b)
            }
            l.emit("onSetTransition", l, a)
        };
        l.setWrapperTranslate = function (a, b, c) {
            var d = 0, e = 0, f = 0;
            if (l.isHorizontal()) {
                d = l.rtl ? -a : a
            } else {
                e = a
            }
            if (l.params.roundLengths) {
                d = n(d);
                e = n(e)
            }
            if (!l.params.virtualTranslate) {
                if (l.support.transforms3d)l.wrapper.transform("translate3d(" + d + "px, " + e + "px, " + f + "px)"); else l.wrapper.transform("translate(" + d + "px, " + e + "px)")
            }
            l.translate = l.isHorizontal() ? d : e;
            var g;
            var h = l.maxTranslate() - l.minTranslate();
            if (h === 0) {
                g = 0
            } else {
                g = (a - l.minTranslate()) / h
            }
            if (g !== l.progress) {
                l.updateProgress(a)
            }
            if (b)l.updateActiveIndex();
            if (l.params.effect !== "slide" && l.effects[l.params.effect]) {
                l.effects[l.params.effect].setTranslate(l.translate)
            }
            if (l.params.parallax && l.parallax) {
                l.parallax.setTranslate(l.translate)
            }
            if (l.params.scrollbar && l.scrollbar) {
                l.scrollbar.setTranslate(l.translate)
            }
            if (l.params.control && l.controller) {
                l.controller.setTranslate(l.translate, c)
            }
            l.emit("onSetTranslate", l, l.translate)
        };
        l.getTranslate = function (a, b) {
            var c, d, e, f;
            if (typeof b === "undefined") {
                b = "x"
            }
            if (l.params.virtualTranslate) {
                return l.rtl ? -l.translate : l.translate
            }
            e = window.getComputedStyle(a, null);
            if (window.WebKitCSSMatrix) {
                d = e.transform || e.webkitTransform;
                if (d.split(",").length > 6) {
                    d = d.split(", ").map(function (a) {
                        return a.replace(",", ".")
                    }).join(", ")
                }
                f = new window.WebKitCSSMatrix(d === "none" ? "" : d)
            } else {
                f = e.MozTransform || e.OTransform || e.MsTransform || e.msTransform || e.transform || e.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,");
                c = f.toString().split(",")
            }
            if (b === "x") {
                if (window.WebKitCSSMatrix)d = f.m41; else if (c.length === 16)d = parseFloat(c[12]); else d = parseFloat(c[4])
            }
            if (b === "y") {
                if (window.WebKitCSSMatrix)d = f.m42; else if (c.length === 16)d = parseFloat(c[13]); else d = parseFloat(c[5])
            }
            if (l.rtl && d)d = -d;
            return d || 0
        };
        l.getWrapperTranslate = function (a) {
            if (typeof a === "undefined") {
                a = l.isHorizontal() ? "x" : "y"
            }
            return l.getTranslate(l.wrapper[0], a)
        };
        l.observers = [];
        function G(a, b) {
            b = b || {};
            var c = window.MutationObserver || window.WebkitMutationObserver;
            var d = new c(function (a) {
                a.forEach(function (a) {
                    l.onResize(true);
                    l.emit("onObserverUpdate", l, a)
                })
            });
            d.observe(a, {
                attributes: typeof b.attributes === "undefined" ? true : b.attributes,
                childList: typeof b.childList === "undefined" ? true : b.childList,
                characterData: typeof b.characterData === "undefined" ? true : b.characterData
            });
            l.observers.push(d)
        }

        l.initObservers = function () {
            if (l.params.observeParents) {
                var a = l.container.parents();
                for (var b = 0; b < a.length; b++) {
                    G(a[b])
                }
            }
            G(l.container[0], {childList: false});
            G(l.wrapper[0], {attributes: false})
        };
        l.disconnectObservers = function () {
            for (var a = 0; a < l.observers.length; a++) {
                l.observers[a].disconnect()
            }
            l.observers = []
        };
        l.createLoop = function () {
            l.wrapper.children("." + l.params.slideClass + "." + l.params.slideDuplicateClass).remove();
            var b = l.wrapper.children("." + l.params.slideClass);
            if (l.params.slidesPerView === "auto" && !l.params.loopedSlides)l.params.loopedSlides = b.length;
            l.loopedSlides = parseInt(l.params.loopedSlides || l.params.slidesPerView, 10);
            l.loopedSlides = l.loopedSlides + l.params.loopAdditionalSlides;
            if (l.loopedSlides > b.length) {
                l.loopedSlides = b.length
            }
            var c = [], d = [], e;
            b.each(function (e, f) {
                var g = a(this);
                if (e < l.loopedSlides)d.push(f);
                if (e < b.length && e >= b.length - l.loopedSlides)c.push(f);
                g.attr("data-swiper-slide-index", e)
            });
            for (e = 0; e < d.length; e++) {
                l.wrapper.append(a(d[e].cloneNode(true)).addClass(l.params.slideDuplicateClass))
            }
            for (e = c.length - 1; e >= 0; e--) {
                l.wrapper.prepend(a(c[e].cloneNode(true)).addClass(l.params.slideDuplicateClass))
            }
        };
        l.destroyLoop = function () {
            l.wrapper.children("." + l.params.slideClass + "." + l.params.slideDuplicateClass).remove();
            l.slides.removeAttr("data-swiper-slide-index")
        };
        l.reLoop = function (a) {
            var b = l.activeIndex - l.loopedSlides;
            l.destroyLoop();
            l.createLoop();
            l.updateSlidesSize();
            if (a) {
                l.slideTo(b + l.loopedSlides, 0, false)
            }
        };
        l.fixLoop = function () {
            var a;
            if (l.activeIndex < l.loopedSlides) {
                a = l.slides.length - l.loopedSlides * 3 + l.activeIndex;
                a = a + l.loopedSlides;
                l.slideTo(a, 0, false, true)
            } else if (l.params.slidesPerView === "auto" && l.activeIndex >= l.loopedSlides * 2 || l.activeIndex > l.slides.length - l.params.slidesPerView * 2) {
                a = -l.slides.length + l.activeIndex + l.loopedSlides;
                a = a + l.loopedSlides;
                l.slideTo(a, 0, false, true)
            }
        };
        l.appendSlide = function (a) {
            if (l.params.loop) {
                l.destroyLoop()
            }
            if (typeof a === "object" && a.length) {
                for (var b = 0; b < a.length; b++) {
                    if (a[b])l.wrapper.append(a[b])
                }
            } else {
                l.wrapper.append(a)
            }
            if (l.params.loop) {
                l.createLoop()
            }
            if (!(l.params.observer && l.support.observer)) {
                l.update(true)
            }
        };
        l.prependSlide = function (a) {
            if (l.params.loop) {
                l.destroyLoop()
            }
            var b = l.activeIndex + 1;
            if (typeof a === "object" && a.length) {
                for (var c = 0; c < a.length; c++) {
                    if (a[c])l.wrapper.prepend(a[c])
                }
                b = l.activeIndex + a.length
            } else {
                l.wrapper.prepend(a)
            }
            if (l.params.loop) {
                l.createLoop()
            }
            if (!(l.params.observer && l.support.observer)) {
                l.update(true)
            }
            l.slideTo(b, 0, false)
        };
        l.removeSlide = function (a) {
            if (l.params.loop) {
                l.destroyLoop();
                l.slides = l.wrapper.children("." + l.params.slideClass)
            }
            var b = l.activeIndex, c;
            if (typeof a === "object" && a.length) {
                for (var d = 0; d < a.length; d++) {
                    c = a[d];
                    if (l.slides[c])l.slides.eq(c).remove();
                    if (c < b)b--
                }
                b = Math.max(b, 0)
            } else {
                c = a;
                if (l.slides[c])l.slides.eq(c).remove();
                if (c < b)b--;
                b = Math.max(b, 0)
            }
            if (l.params.loop) {
                l.createLoop()
            }
            if (!(l.params.observer && l.support.observer)) {
                l.update(true)
            }
            if (l.params.loop) {
                l.slideTo(b + l.loopedSlides, 0, false)
            } else {
                l.slideTo(b, 0, false)
            }
        };
        l.removeAllSlides = function () {
            var a = [];
            for (var b = 0; b < l.slides.length; b++) {
                a.push(b)
            }
            l.removeSlide(a)
        };
        l.effects = {
            fade: {
                setTranslate: function () {
                    for (var a = 0; a < l.slides.length; a++) {
                        var b = l.slides.eq(a);
                        var c = b[0].swiperSlideOffset;
                        var d = -c;
                        if (!l.params.virtualTranslate)d = d - l.translate;
                        var e = 0;
                        if (!l.isHorizontal()) {
                            e = d;
                            d = 0
                        }
                        var f = l.params.fade.crossFade ? Math.max(1 - Math.abs(b[0].progress), 0) : 1 + Math.min(Math.max(b[0].progress, -1), 0);
                        b.css({opacity: f}).transform("translate3d(" + d + "px, " + e + "px, 0px)")
                    }
                }, setTransition: function (a) {
                    l.slides.transition(a);
                    if (l.params.virtualTranslate && a !== 0) {
                        var b = false;
                        l.slides.transitionEnd(function () {
                            if (b)return;
                            if (!l)return;
                            b = true;
                            l.animating = false;
                            var a = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"];
                            for (var c = 0; c < a.length; c++) {
                                l.wrapper.trigger(a[c])
                            }
                        })
                    }
                }
            }, flip: {
                setTranslate: function () {
                    for (var b = 0; b < l.slides.length; b++) {
                        var c = l.slides.eq(b);
                        var d = c[0].progress;
                        if (l.params.flip.limitRotation) {
                            d = Math.max(Math.min(c[0].progress, 1), -1)
                        }
                        var e = c[0].swiperSlideOffset;
                        var f = -180 * d, g = f, h = 0, i = -e, j = 0;
                        if (!l.isHorizontal()) {
                            j = i;
                            i = 0;
                            h = -g;
                            g = 0
                        } else if (l.rtl) {
                            g = -g
                        }
                        c[0].style.zIndex = -Math.abs(Math.round(d)) + l.slides.length;
                        if (l.params.flip.slideShadows) {
                            var k = l.isHorizontal() ? c.find(".swiper-slide-shadow-left") : c.find(".swiper-slide-shadow-top");
                            var m = l.isHorizontal() ? c.find(".swiper-slide-shadow-right") : c.find(".swiper-slide-shadow-bottom");
                            if (k.length === 0) {
                                k = a('<div class="swiper-slide-shadow-' + (l.isHorizontal() ? "left" : "top") + '"></div>');
                                c.append(k)
                            }
                            if (m.length === 0) {
                                m = a('<div class="swiper-slide-shadow-' + (l.isHorizontal() ? "right" : "bottom") + '"></div>');
                                c.append(m)
                            }
                            if (k.length)k[0].style.opacity = Math.max(-d, 0);
                            if (m.length)m[0].style.opacity = Math.max(d, 0)
                        }
                        c.transform("translate3d(" + i + "px, " + j + "px, 0px) rotateX(" + h + "deg) rotateY(" + g + "deg)")
                    }
                }, setTransition: function (b) {
                    l.slides.transition(b).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(b);
                    if (l.params.virtualTranslate && b !== 0) {
                        var c = false;
                        l.slides.eq(l.activeIndex).transitionEnd(function () {
                            if (c)return;
                            if (!l)return;
                            if (!a(this).hasClass(l.params.slideActiveClass))return;
                            c = true;
                            l.animating = false;
                            var b = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"];
                            for (var d = 0; d < b.length; d++) {
                                l.wrapper.trigger(b[d])
                            }
                        })
                    }
                }
            }, cube: {
                setTranslate: function () {
                    var b = 0, c;
                    if (l.params.cube.shadow) {
                        if (l.isHorizontal()) {
                            c = l.wrapper.find(".swiper-cube-shadow");
                            if (c.length === 0) {
                                c = a('<div class="swiper-cube-shadow"></div>');
                                l.wrapper.append(c)
                            }
                            c.css({height: l.width + "px"})
                        } else {
                            c = l.container.find(".swiper-cube-shadow");
                            if (c.length === 0) {
                                c = a('<div class="swiper-cube-shadow"></div>');
                                l.container.append(c)
                            }
                        }
                    }
                    for (var d = 0; d < l.slides.length; d++) {
                        var e = l.slides.eq(d);
                        var f = d * 90;
                        var g = Math.floor(f / 360);
                        if (l.rtl) {
                            f = -f;
                            g = Math.floor(-f / 360)
                        }
                        var h = Math.max(Math.min(e[0].progress, 1), -1);
                        var i = 0, j = 0, k = 0;
                        if (d % 4 === 0) {
                            i = -g * 4 * l.size;
                            k = 0
                        } else if ((d - 1) % 4 === 0) {
                            i = 0;
                            k = -g * 4 * l.size
                        } else if ((d - 2) % 4 === 0) {
                            i = l.size + g * 4 * l.size;
                            k = l.size
                        } else if ((d - 3) % 4 === 0) {
                            i = -l.size;
                            k = 3 * l.size + l.size * 4 * g
                        }
                        if (l.rtl) {
                            i = -i
                        }
                        if (!l.isHorizontal()) {
                            j = i;
                            i = 0
                        }
                        var m = "rotateX(" + (l.isHorizontal() ? 0 : -f) + "deg) rotateY(" + (l.isHorizontal() ? f : 0) + "deg) translate3d(" + i + "px, " + j + "px, " + k + "px)";
                        if (h <= 1 && h > -1) {
                            b = d * 90 + h * 90;
                            if (l.rtl)b = -d * 90 - h * 90
                        }
                        e.transform(m);
                        if (l.params.cube.slideShadows) {
                            var n = l.isHorizontal() ? e.find(".swiper-slide-shadow-left") : e.find(".swiper-slide-shadow-top");
                            var o = l.isHorizontal() ? e.find(".swiper-slide-shadow-right") : e.find(".swiper-slide-shadow-bottom");
                            if (n.length === 0) {
                                n = a('<div class="swiper-slide-shadow-' + (l.isHorizontal() ? "left" : "top") + '"></div>');
                                e.append(n)
                            }
                            if (o.length === 0) {
                                o = a('<div class="swiper-slide-shadow-' + (l.isHorizontal() ? "right" : "bottom") + '"></div>');
                                e.append(o)
                            }
                            if (n.length)n[0].style.opacity = Math.max(-h, 0);
                            if (o.length)o[0].style.opacity = Math.max(h, 0)
                        }
                    }
                    l.wrapper.css({
                        "-webkit-transform-origin": "50% 50% -" + l.size / 2 + "px",
                        "-moz-transform-origin": "50% 50% -" + l.size / 2 + "px",
                        "-ms-transform-origin": "50% 50% -" + l.size / 2 + "px",
                        "transform-origin": "50% 50% -" + l.size / 2 + "px"
                    });
                    if (l.params.cube.shadow) {
                        if (l.isHorizontal()) {
                            c.transform("translate3d(0px, " + (l.width / 2 + l.params.cube.shadowOffset) + "px, " + -l.width / 2 + "px) rotateX(90deg) rotateZ(0deg) scale(" + l.params.cube.shadowScale + ")")
                        } else {
                            var p = Math.abs(b) - Math.floor(Math.abs(b) / 90) * 90;
                            var q = 1.5 - (Math.sin(p * 2 * Math.PI / 360) / 2 + Math.cos(p * 2 * Math.PI / 360) / 2);
                            var r = l.params.cube.shadowScale, s = l.params.cube.shadowScale / q, t = l.params.cube.shadowOffset;
                            c.transform("scale3d(" + r + ", 1, " + s + ") translate3d(0px, " + (l.height / 2 + t) + "px, " + -l.height / 2 / s + "px) rotateX(-90deg)")
                        }
                    }
                    var u = l.isSafari || l.isUiWebView ? -l.size / 2 : 0;
                    l.wrapper.transform("translate3d(0px,0," + u + "px) rotateX(" + (l.isHorizontal() ? 0 : b) + "deg) rotateY(" + (l.isHorizontal() ? -b : 0) + "deg)")
                }, setTransition: function (a) {
                    l.slides.transition(a).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(a);
                    if (l.params.cube.shadow && !l.isHorizontal()) {
                        l.container.find(".swiper-cube-shadow").transition(a)
                    }
                }
            }, coverflow: {
                setTranslate: function () {
                    var b = l.translate;
                    var c = l.isHorizontal() ? -b + l.width / 2 : -b + l.height / 2;
                    var d = l.isHorizontal() ? l.params.coverflow.rotate : -l.params.coverflow.rotate;
                    var e = l.params.coverflow.depth;
                    for (var f = 0, g = l.slides.length; f < g; f++) {
                        var h = l.slides.eq(f);
                        var i = l.slidesSizesGrid[f];
                        var j = h[0].swiperSlideOffset;
                        var k = (c - j - i / 2) / i * l.params.coverflow.modifier;
                        var m = l.isHorizontal() ? d * k : 0;
                        var n = l.isHorizontal() ? 0 : d * k;
                        var o = -e * Math.abs(k);
                        var p = l.isHorizontal() ? 0 : l.params.coverflow.stretch * k;
                        var q = l.isHorizontal() ? l.params.coverflow.stretch * k : 0;
                        if (Math.abs(q) < .001)q = 0;
                        if (Math.abs(p) < .001)p = 0;
                        if (Math.abs(o) < .001)o = 0;
                        if (Math.abs(m) < .001)m = 0;
                        if (Math.abs(n) < .001)n = 0;
                        var r = "translate3d(" + q + "px," + p + "px," + o + "px)  rotateX(" + n + "deg) rotateY(" + m + "deg)";
                        h.transform(r);
                        h[0].style.zIndex = -Math.abs(Math.round(k)) + 1;
                        if (l.params.coverflow.slideShadows) {
                            var s = l.isHorizontal() ? h.find(".swiper-slide-shadow-left") : h.find(".swiper-slide-shadow-top");
                            var t = l.isHorizontal() ? h.find(".swiper-slide-shadow-right") : h.find(".swiper-slide-shadow-bottom");
                            if (s.length === 0) {
                                s = a('<div class="swiper-slide-shadow-' + (l.isHorizontal() ? "left" : "top") + '"></div>');
                                h.append(s)
                            }
                            if (t.length === 0) {
                                t = a('<div class="swiper-slide-shadow-' + (l.isHorizontal() ? "right" : "bottom") + '"></div>');
                                h.append(t)
                            }
                            if (s.length)s[0].style.opacity = k > 0 ? k : 0;
                            if (t.length)t[0].style.opacity = -k > 0 ? -k : 0
                        }
                    }
                    if (l.browser.ie) {
                        var u = l.wrapper[0].style;
                        u.perspectiveOrigin = c + "px 50%"
                    }
                }, setTransition: function (a) {
                    l.slides.transition(a).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(a)
                }
            }
        };
        l.lazy = {
            initialImageLoaded: false, loadImageInSlide: function (b, c) {
                if (typeof b === "undefined")return;
                if (typeof c === "undefined")c = true;
                if (l.slides.length === 0)return;
                var d = l.slides.eq(b);
                var e = d.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");
                if (d.hasClass("swiper-lazy") && !d.hasClass("swiper-lazy-loaded") && !d.hasClass("swiper-lazy-loading")) {
                    e = e.add(d[0])
                }
                if (e.length === 0)return;
                e.each(function () {
                    var b = a(this);
                    b.addClass("swiper-lazy-loading");
                    var e = b.attr("data-background");
                    var f = b.attr("data-src"), g = b.attr("data-srcset");
                    l.loadImage(b[0], f || e, g, false, function () {
                        if (e) {
                            b.css("background-image", 'url("' + e + '")');
                            b.removeAttr("data-background")
                        } else {
                            if (g) {
                                b.attr("srcset", g);
                                b.removeAttr("data-srcset")
                            }
                            if (f) {
                                b.attr("src", f);
                                b.removeAttr("data-src")
                            }
                        }
                        b.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading");
                        d.find(".swiper-lazy-preloader, .preloader").remove();
                        if (l.params.loop && c) {
                            var a = d.attr("data-swiper-slide-index");
                            if (d.hasClass(l.params.slideDuplicateClass)) {
                                var h = l.wrapper.children('[data-swiper-slide-index="' + a + '"]:not(.' + l.params.slideDuplicateClass + ")");
                                l.lazy.loadImageInSlide(h.index(), false)
                            } else {
                                var i = l.wrapper.children("." + l.params.slideDuplicateClass + '[data-swiper-slide-index="' + a + '"]');
                                l.lazy.loadImageInSlide(i.index(), false)
                            }
                        }
                        l.emit("onLazyImageReady", l, d[0], b[0])
                    });
                    l.emit("onLazyImageLoad", l, d[0], b[0])
                })
            }, load: function () {
                var b;
                if (l.params.watchSlidesVisibility) {
                    l.wrapper.children("." + l.params.slideVisibleClass).each(function () {
                        l.lazy.loadImageInSlide(a(this).index())
                    })
                } else {
                    if (l.params.slidesPerView > 1) {
                        for (b = l.activeIndex; b < l.activeIndex + l.params.slidesPerView; b++) {
                            if (l.slides[b])l.lazy.loadImageInSlide(b)
                        }
                    } else {
                        l.lazy.loadImageInSlide(l.activeIndex)
                    }
                }
                if (l.params.lazyLoadingInPrevNext) {
                    if (l.params.slidesPerView > 1 || l.params.lazyLoadingInPrevNextAmount && l.params.lazyLoadingInPrevNextAmount > 1) {
                        var c = l.params.lazyLoadingInPrevNextAmount;
                        var d = l.params.slidesPerView;
                        var e = Math.min(l.activeIndex + d + Math.max(c, d), l.slides.length);
                        var f = Math.max(l.activeIndex - Math.max(d, c), 0);
                        for (b = l.activeIndex + l.params.slidesPerView; b < e; b++) {
                            if (l.slides[b])l.lazy.loadImageInSlide(b)
                        }
                        for (b = f; b < l.activeIndex; b++) {
                            if (l.slides[b])l.lazy.loadImageInSlide(b)
                        }
                    } else {
                        var g = l.wrapper.children("." + l.params.slideNextClass);
                        if (g.length > 0)l.lazy.loadImageInSlide(g.index());
                        var h = l.wrapper.children("." + l.params.slidePrevClass);
                        if (h.length > 0)l.lazy.loadImageInSlide(h.index())
                    }
                }
            }, onTransitionStart: function () {
                if (l.params.lazyLoading) {
                    if (l.params.lazyLoadingOnTransitionStart || !l.params.lazyLoadingOnTransitionStart && !l.lazy.initialImageLoaded) {
                        l.lazy.load()
                    }
                }
            }, onTransitionEnd: function () {
                if (l.params.lazyLoading && !l.params.lazyLoadingOnTransitionStart) {
                    l.lazy.load()
                }
            }
        };
        l.scrollbar = {
            isTouched: false, setDragPosition: function (a) {
                var b = l.scrollbar;
                var c = 0, d = 0;
                var e;
                var f = l.isHorizontal() ? a.type === "touchstart" || a.type === "touchmove" ? a.targetTouches[0].pageX : a.pageX || a.clientX : a.type === "touchstart" || a.type === "touchmove" ? a.targetTouches[0].pageY : a.pageY || a.clientY;
                var g = f - b.track.offset()[l.isHorizontal() ? "left" : "top"] - b.dragSize / 2;
                var h = -l.minTranslate() * b.moveDivider;
                var i = -l.maxTranslate() * b.moveDivider;
                if (g < h) {
                    g = h
                } else if (g > i) {
                    g = i
                }
                g = -g / b.moveDivider;
                l.updateProgress(g);
                l.setWrapperTranslate(g, true)
            }, dragStart: function (a) {
                var b = l.scrollbar;
                b.isTouched = true;
                a.preventDefault();
                a.stopPropagation();
                b.setDragPosition(a);
                clearTimeout(b.dragTimeout);
                b.track.transition(0);
                if (l.params.scrollbarHide) {
                    b.track.css("opacity", 1)
                }
                l.wrapper.transition(100);
                b.drag.transition(100);
                l.emit("onScrollbarDragStart", l)
            }, dragMove: function (a) {
                var b = l.scrollbar;
                if (!b.isTouched)return;
                if (a.preventDefault)a.preventDefault(); else a.returnValue = false;
                b.setDragPosition(a);
                l.wrapper.transition(0);
                b.track.transition(0);
                b.drag.transition(0);
                l.emit("onScrollbarDragMove", l)
            }, dragEnd: function (a) {
                var b = l.scrollbar;
                if (!b.isTouched)return;
                b.isTouched = false;
                if (l.params.scrollbarHide) {
                    clearTimeout(b.dragTimeout);
                    b.dragTimeout = setTimeout(function () {
                        b.track.css("opacity", 0);
                        b.track.transition(400)
                    }, 1e3)
                }
                l.emit("onScrollbarDragEnd", l);
                if (l.params.scrollbarSnapOnRelease) {
                    l.slideReset()
                }
            }, enableDraggable: function () {
                var b = l.scrollbar;
                var c = l.support.touch ? b.track : document;
                a(b.track).on(l.touchEvents.start, b.dragStart);
                a(c).on(l.touchEvents.move, b.dragMove);
                a(c).on(l.touchEvents.end, b.dragEnd)
            }, disableDraggable: function () {
                var b = l.scrollbar;
                var c = l.support.touch ? b.track : document;
                a(b.track).off(l.touchEvents.start, b.dragStart);
                a(c).off(l.touchEvents.move, b.dragMove);
                a(c).off(l.touchEvents.end, b.dragEnd)
            }, set: function () {
                if (!l.params.scrollbar)return;
                var b = l.scrollbar;
                b.track = a(l.params.scrollbar);
                if (l.params.uniqueNavElements && typeof l.params.scrollbar === "string" && b.track.length > 1 && l.container.find(l.params.scrollbar).length === 1) {
                    b.track = l.container.find(l.params.scrollbar)
                }
                b.drag = b.track.find(".swiper-scrollbar-drag");
                if (b.drag.length === 0) {
                    b.drag = a('<div class="swiper-scrollbar-drag"></div>');
                    b.track.append(b.drag)
                }
                b.drag[0].style.width = "";
                b.drag[0].style.height = "";
                b.trackSize = l.isHorizontal() ? b.track[0].offsetWidth : b.track[0].offsetHeight;
                b.divider = l.size / l.virtualSize;
                b.moveDivider = b.divider * (b.trackSize / l.size);
                b.dragSize = b.trackSize * b.divider;
                if (l.isHorizontal()) {
                    b.drag[0].style.width = b.dragSize + "px"
                } else {
                    b.drag[0].style.height = b.dragSize + "px"
                }
                if (b.divider >= 1) {
                    b.track[0].style.display = "none"
                } else {
                    b.track[0].style.display = ""
                }
                if (l.params.scrollbarHide) {
                    b.track[0].style.opacity = 0
                }
            }, setTranslate: function () {
                if (!l.params.scrollbar)return;
                var a;
                var b = l.scrollbar;
                var c = l.translate || 0;
                var d;
                var e = b.dragSize;
                d = (b.trackSize - b.dragSize) * l.progress;
                if (l.rtl && l.isHorizontal()) {
                    d = -d;
                    if (d > 0) {
                        e = b.dragSize - d;
                        d = 0
                    } else if (-d + b.dragSize > b.trackSize) {
                        e = b.trackSize + d
                    }
                } else {
                    if (d < 0) {
                        e = b.dragSize + d;
                        d = 0
                    } else if (d + b.dragSize > b.trackSize) {
                        e = b.trackSize - d
                    }
                }
                if (l.isHorizontal()) {
                    if (l.support.transforms3d) {
                        b.drag.transform("translate3d(" + d + "px, 0, 0)")
                    } else {
                        b.drag.transform("translateX(" + d + "px)")
                    }
                    b.drag[0].style.width = e + "px"
                } else {
                    if (l.support.transforms3d) {
                        b.drag.transform("translate3d(0px, " + d + "px, 0)")
                    } else {
                        b.drag.transform("translateY(" + d + "px)")
                    }
                    b.drag[0].style.height = e + "px"
                }
                if (l.params.scrollbarHide) {
                    clearTimeout(b.timeout);
                    b.track[0].style.opacity = 1;
                    b.timeout = setTimeout(function () {
                        b.track[0].style.opacity = 0;
                        b.track.transition(400)
                    }, 1e3)
                }
            }, setTransition: function (a) {
                if (!l.params.scrollbar)return;
                l.scrollbar.drag.transition(a)
            }
        };
        l.controller = {
            LinearSpline: function (a, b) {
                this.x = a;
                this.y = b;
                this.lastIndex = a.length - 1;
                var c, d;
                var e = this.x.length;
                this.interpolate = function (a) {
                    if (!a)return 0;
                    d = f(this.x, a);
                    c = d - 1;
                    return (a - this.x[c]) * (this.y[d] - this.y[c]) / (this.x[d] - this.x[c]) + this.y[c]
                };
                var f = function () {
                    var a, b, c;
                    return function (d, e) {
                        b = -1;
                        a = d.length;
                        while (a - b > 1)if (d[c = a + b >> 1] <= e) {
                            b = c
                        } else {
                            a = c
                        }
                        return a
                    }
                }()
            }, getInterpolateFunction: function (a) {
                if (!l.controller.spline)l.controller.spline = l.params.loop ? new l.controller.LinearSpline(l.slidesGrid, a.slidesGrid) : new l.controller.LinearSpline(l.snapGrid, a.snapGrid)
            }, setTranslate: function (a, c) {
                var d = l.params.control;
                var e, f;

                function g(b) {
                    a = b.rtl && b.params.direction === "horizontal" ? -l.translate : l.translate;
                    if (l.params.controlBy === "slide") {
                        l.controller.getInterpolateFunction(b);
                        f = -l.controller.spline.interpolate(-a)
                    }
                    if (!f || l.params.controlBy === "container") {
                        e = (b.maxTranslate() - b.minTranslate()) / (l.maxTranslate() - l.minTranslate());
                        f = (a - l.minTranslate()) * e + b.minTranslate()
                    }
                    if (l.params.controlInverse) {
                        f = b.maxTranslate() - f
                    }
                    b.updateProgress(f);
                    b.setWrapperTranslate(f, false, l);
                    b.updateActiveIndex()
                }

                if (l.isArray(d)) {
                    for (var h = 0; h < d.length; h++) {
                        if (d[h] !== c && d[h] instanceof b) {
                            g(d[h])
                        }
                    }
                } else if (d instanceof b && c !== d) {
                    g(d)
                }
            }, setTransition: function (a, c) {
                var d = l.params.control;
                var e;

                function f(b) {
                    b.setWrapperTransition(a, l);
                    if (a !== 0) {
                        b.onTransitionStart();
                        b.wrapper.transitionEnd(function () {
                            if (!d)return;
                            if (b.params.loop && l.params.controlBy === "slide") {
                                b.fixLoop()
                            }
                            b.onTransitionEnd()
                        })
                    }
                }

                if (l.isArray(d)) {
                    for (e = 0; e < d.length; e++) {
                        if (d[e] !== c && d[e] instanceof b) {
                            f(d[e])
                        }
                    }
                } else if (d instanceof b && c !== d) {
                    f(d)
                }
            }
        };
        l.hashnav = {
            init: function () {
                if (!l.params.hashnav)return;
                l.hashnav.initialized = true;
                var a = document.location.hash.replace("#", "");
                if (!a)return;
                var b = 0;
                for (var c = 0, d = l.slides.length; c < d; c++) {
                    var e = l.slides.eq(c);
                    var f = e.attr("data-hash");
                    if (f === a && !e.hasClass(l.params.slideDuplicateClass)) {
                        var g = e.index();
                        l.slideTo(g, b, l.params.runCallbacksOnInit, true)
                    }
                }
            }, setHash: function () {
                if (!l.hashnav.initialized || !l.params.hashnav)return;
                document.location.hash = l.slides.eq(l.activeIndex).attr("data-hash") || ""
            }
        };
        function H(a) {
            if (a.originalEvent)a = a.originalEvent;
            var b = a.keyCode || a.charCode;
            if (!l.params.allowSwipeToNext && (l.isHorizontal() && b === 39 || !l.isHorizontal() && b === 40)) {
                return false
            }
            if (!l.params.allowSwipeToPrev && (l.isHorizontal() && b === 37 || !l.isHorizontal() && b === 38)) {
                return false
            }
            if (a.shiftKey || a.altKey || a.ctrlKey || a.metaKey) {
                return
            }
            if (document.activeElement && document.activeElement.nodeName && (document.activeElement.nodeName.toLowerCase() === "input" || document.activeElement.nodeName.toLowerCase() === "textarea")) {
                return
            }
            if (b === 37 || b === 39 || b === 38 || b === 40) {
                var c = false;
                if (l.container.parents(".swiper-slide").length > 0 && l.container.parents(".swiper-slide-active").length === 0) {
                    return
                }
                var d = {left: window.pageXOffset, top: window.pageYOffset};
                var e = window.innerWidth;
                var f = window.innerHeight;
                var g = l.container.offset();
                if (l.rtl)g.left = g.left - l.container[0].scrollLeft;
                var h = [[g.left, g.top], [g.left + l.width, g.top], [g.left, g.top + l.height], [g.left + l.width, g.top + l.height]];
                for (var i = 0; i < h.length; i++) {
                    var j = h[i];
                    if (j[0] >= d.left && j[0] <= d.left + e && j[1] >= d.top && j[1] <= d.top + f) {
                        c = true
                    }
                }
                if (!c)return
            }
            if (l.isHorizontal()) {
                if (b === 37 || b === 39) {
                    if (a.preventDefault)a.preventDefault(); else a.returnValue = false
                }
                if (b === 39 && !l.rtl || b === 37 && l.rtl)l.slideNext();
                if (b === 37 && !l.rtl || b === 39 && l.rtl)l.slidePrev()
            } else {
                if (b === 38 || b === 40) {
                    if (a.preventDefault)a.preventDefault(); else a.returnValue = false
                }
                if (b === 40)l.slideNext();
                if (b === 38)l.slidePrev()
            }
        }

        l.disableKeyboardControl = function () {
            l.params.keyboardControl = false;
            a(document).off("keydown", H)
        };
        l.enableKeyboardControl = function () {
            l.params.keyboardControl = true;
            a(document).on("keydown", H)
        };
        l.mousewheel = {event: false, lastScrollTime: (new window.Date).getTime()};
        if (l.params.mousewheelControl) {
            try {
                new window.WheelEvent("wheel");
                l.mousewheel.event = "wheel"
            } catch (a) {
                if (window.WheelEvent || l.container[0] && "wheel" in l.container[0]) {
                    l.mousewheel.event = "wheel"
                }
            }
            if (!l.mousewheel.event && window.WheelEvent) {
            }
            if (!l.mousewheel.event && document.onmousewheel !== undefined) {
                l.mousewheel.event = "mousewheel"
            }
            if (!l.mousewheel.event) {
                l.mousewheel.event = "DOMMouseScroll"
            }
        }
        function I(a) {
            if (a.originalEvent)a = a.originalEvent;
            var b = l.mousewheel.event;
            var c = 0;
            var d = l.rtl ? -1 : 1;
            if (b === "mousewheel") {
                if (l.params.mousewheelForceToAxis) {
                    if (l.isHorizontal()) {
                        if (Math.abs(a.wheelDeltaX) > Math.abs(a.wheelDeltaY))c = a.wheelDeltaX * d; else return
                    } else {
                        if (Math.abs(a.wheelDeltaY) > Math.abs(a.wheelDeltaX))c = a.wheelDeltaY; else return
                    }
                } else {
                    c = Math.abs(a.wheelDeltaX) > Math.abs(a.wheelDeltaY) ? -a.wheelDeltaX * d : -a.wheelDeltaY
                }
            } else if (b === "DOMMouseScroll")c = -a.detail; else if (b === "wheel") {
                if (l.params.mousewheelForceToAxis) {
                    if (l.isHorizontal()) {
                        if (Math.abs(a.deltaX) > Math.abs(a.deltaY))c = -a.deltaX * d; else return
                    } else {
                        if (Math.abs(a.deltaY) > Math.abs(a.deltaX))c = -a.deltaY; else return
                    }
                } else {
                    c = Math.abs(a.deltaX) > Math.abs(a.deltaY) ? -a.deltaX * d : -a.deltaY
                }
            }
            if (c === 0)return;
            if (l.params.mousewheelInvert)c = -c;
            if (!l.params.freeMode) {
                if ((new window.Date).getTime() - l.mousewheel.lastScrollTime > 60) {
                    if (c < 0) {
                        if ((!l.isEnd || l.params.loop) && !l.animating)l.slideNext(); else if (l.params.mousewheelReleaseOnEdges)return true
                    } else {
                        if ((!l.isBeginning || l.params.loop) && !l.animating)l.slidePrev(); else if (l.params.mousewheelReleaseOnEdges)return true
                    }
                }
                l.mousewheel.lastScrollTime = (new window.Date).getTime()
            } else {
                var e = l.getWrapperTranslate() + c * l.params.mousewheelSensitivity;
                var f = l.isBeginning, g = l.isEnd;
                if (e >= l.minTranslate())e = l.minTranslate();
                if (e <= l.maxTranslate())e = l.maxTranslate();
                l.setWrapperTransition(0);
                l.setWrapperTranslate(e);
                l.updateProgress();
                l.updateActiveIndex();
                if (!f && l.isBeginning || !g && l.isEnd) {
                    l.updateClasses()
                }
                if (l.params.freeModeSticky) {
                    clearTimeout(l.mousewheel.timeout);
                    l.mousewheel.timeout = setTimeout(function () {
                        l.slideReset()
                    }, 300)
                } else {
                    if (l.params.lazyLoading && l.lazy) {
                        l.lazy.load()
                    }
                }
                if (e === 0 || e === l.maxTranslate())return
            }
            if (l.params.autoplay)l.stopAutoplay();
            if (a.preventDefault)a.preventDefault(); else a.returnValue = false;
            return false
        }

        l.disableMousewheelControl = function () {
            if (!l.mousewheel.event)return false;
            l.container.off(l.mousewheel.event, I);
            return true
        };
        l.enableMousewheelControl = function () {
            if (!l.mousewheel.event)return false;
            l.container.on(l.mousewheel.event, I);
            return true
        };
        function J(b, c) {
            b = a(b);
            var d, e, f;
            var g = l.rtl ? -1 : 1;
            d = b.attr("data-swiper-parallax") || "0";
            e = b.attr("data-swiper-parallax-x");
            f = b.attr("data-swiper-parallax-y");
            if (e || f) {
                e = e || "0";
                f = f || "0"
            } else {
                if (l.isHorizontal()) {
                    e = d;
                    f = "0"
                } else {
                    f = d;
                    e = "0"
                }
            }
            if (e.indexOf("%") >= 0) {
                e = parseInt(e, 10) * c * g + "%"
            } else {
                e = e * c * g + "px"
            }
            if (f.indexOf("%") >= 0) {
                f = parseInt(f, 10) * c + "%"
            } else {
                f = f * c + "px"
            }
            b.transform("translate3d(" + e + ", " + f + ",0px)")
        }

        l.parallax = {
            setTranslate: function () {
                l.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function () {
                    J(this, l.progress)
                });
                l.slides.each(function () {
                    var b = a(this);
                    b.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function () {
                        var a = Math.min(Math.max(b[0].progress, -1), 1);
                        J(this, a)
                    })
                })
            }, setTransition: function (b) {
                if (typeof b === "undefined")b = l.params.speed;
                l.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function () {
                    var c = a(this);
                    var d = parseInt(c.attr("data-swiper-parallax-duration"), 10) || b;
                    if (b === 0)d = 0;
                    c.transition(d)
                })
            }
        };
        l._plugins = [];
        for (var K in l.plugins) {
            var L = l.plugins[K](l, l.params[K]);
            if (L)l._plugins.push(L)
        }
        l.callPlugins = function (a) {
            for (var b = 0; b < l._plugins.length; b++) {
                if (a in l._plugins[b]) {
                    l._plugins[b][a](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
                }
            }
        };
        function M(a) {
            if (a.indexOf("on") !== 0) {
                if (a[0] !== a[0].toUpperCase()) {
                    a = "on" + a[0].toUpperCase() + a.substring(1)
                } else {
                    a = "on" + a
                }
            }
            return a
        }

        l.emitterEventListeners = {};
        l.emit = function (a) {
            if (l.params[a]) {
                l.params[a](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
            }
            var b;
            if (l.emitterEventListeners[a]) {
                for (b = 0; b < l.emitterEventListeners[a].length; b++) {
                    l.emitterEventListeners[a][b](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
                }
            }
            if (l.callPlugins)l.callPlugins(a, arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
        };
        l.on = function (a, b) {
            a = M(a);
            if (!l.emitterEventListeners[a])l.emitterEventListeners[a] = [];
            l.emitterEventListeners[a].push(b);
            return l
        };
        l.off = function (a, b) {
            var c;
            a = M(a);
            if (typeof b === "undefined") {
                l.emitterEventListeners[a] = [];
                return l
            }
            if (!l.emitterEventListeners[a] || l.emitterEventListeners[a].length === 0)return;
            for (c = 0; c < l.emitterEventListeners[a].length; c++) {
                if (l.emitterEventListeners[a][c] === b)l.emitterEventListeners[a].splice(c, 1)
            }
            return l
        };
        l.once = function (a, b) {
            a = M(a);
            var c = function () {
                b(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);
                l.off(a, c)
            };
            l.on(a, c);
            return l
        };
        l.a11y = {
            makeFocusable: function (a) {
                a.attr("tabIndex", "0");
                return a
            },
            addRole: function (a, b) {
                a.attr("role", b);
                return a
            },
            addLabel: function (a, b) {
                a.attr("aria-label", b);
                return a
            },
            disable: function (a) {
                a.attr("aria-disabled", true);
                return a
            },
            enable: function (a) {
                a.attr("aria-disabled", false);
                return a
            },
            onEnterKey: function (b) {
                if (b.keyCode !== 13)return;
                if (a(b.target).is(l.params.nextButton)) {
                    l.onClickNext(b);
                    if (l.isEnd) {
                        l.a11y.notify(l.params.lastSlideMessage)
                    } else {
                        l.a11y.notify(l.params.nextSlideMessage)
                    }
                } else if (a(b.target).is(l.params.prevButton)) {
                    l.onClickPrev(b);
                    if (l.isBeginning) {
                        l.a11y.notify(l.params.firstSlideMessage)
                    } else {
                        l.a11y.notify(l.params.prevSlideMessage)
                    }
                }
                if (a(b.target).is("." + l.params.bulletClass)) {
                    a(b.target)[0].click()
                }
            },
            liveRegion: a('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),
            notify: function (a) {
                var b = l.a11y.liveRegion;
                if (b.length === 0)return;
                b.html("");
                b.html(a)
            },
            init: function () {
                if (l.params.nextButton && l.nextButton && l.nextButton.length > 0) {
                    l.a11y.makeFocusable(l.nextButton);
                    l.a11y.addRole(l.nextButton, "button");
                    l.a11y.addLabel(l.nextButton, l.params.nextSlideMessage)
                }
                if (l.params.prevButton && l.prevButton && l.prevButton.length > 0) {
                    l.a11y.makeFocusable(l.prevButton);
                    l.a11y.addRole(l.prevButton, "button");
                    l.a11y.addLabel(l.prevButton, l.params.prevSlideMessage)
                }
                a(l.container).append(l.a11y.liveRegion)
            },
            initPagination: function () {
                if (l.params.pagination && l.params.paginationClickable && l.bullets && l.bullets.length) {
                    l.bullets.each(function () {
                        var b = a(this);
                        l.a11y.makeFocusable(b);
                        l.a11y.addRole(b, "button");
                        l.a11y.addLabel(b, l.params.paginationBulletMessage.replace(/{{index}}/, b.index() + 1))
                    })
                }
            },
            destroy: function () {
                if (l.a11y.liveRegion && l.a11y.liveRegion.length > 0)l.a11y.liveRegion.remove()
            }
        };
        l.init = function () {
            if (l.params.loop)l.createLoop();
            l.updateContainerSize();
            l.updateSlidesSize();
            l.updatePagination();
            if (l.params.scrollbar && l.scrollbar) {
                l.scrollbar.set();
                if (l.params.scrollbarDraggable) {
                    l.scrollbar.enableDraggable()
                }
            }
            if (l.params.effect !== "slide" && l.effects[l.params.effect]) {
                if (!l.params.loop)l.updateProgress();
                l.effects[l.params.effect].setTranslate()
            }
            if (l.params.loop) {
                l.slideTo(l.params.initialSlide + l.loopedSlides, 0, l.params.runCallbacksOnInit)
            } else {
                l.slideTo(l.params.initialSlide, 0, l.params.runCallbacksOnInit);
                if (l.params.initialSlide === 0) {
                    if (l.parallax && l.params.parallax)l.parallax.setTranslate();
                    if (l.lazy && l.params.lazyLoading) {
                        l.lazy.load();
                        l.lazy.initialImageLoaded = true
                    }
                }
            }
            l.attachEvents();
            if (l.params.observer && l.support.observer) {
                l.initObservers()
            }
            if (l.params.preloadImages && !l.params.lazyLoading) {
                l.preloadImages()
            }
            if (l.params.autoplay) {
                l.startAutoplay()
            }
            if (l.params.keyboardControl) {
                if (l.enableKeyboardControl)l.enableKeyboardControl()
            }
            if (l.params.mousewheelControl) {
                if (l.enableMousewheelControl)l.enableMousewheelControl()
            }
            if (l.params.hashnav) {
                if (l.hashnav)l.hashnav.init()
            }
            if (l.params.a11y && l.a11y)l.a11y.init();
            l.emit("onInit", l)
        };
        l.cleanupStyles = function () {
            l.container.removeClass(l.classNames.join(" ")).removeAttr("style");
            l.wrapper.removeAttr("style");
            if (l.slides && l.slides.length) {
                l.slides.removeClass([l.params.slideVisibleClass, l.params.slideActiveClass, l.params.slideNextClass, l.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row")
            }
            if (l.paginationContainer && l.paginationContainer.length) {
                l.paginationContainer.removeClass(l.params.paginationHiddenClass)
            }
            if (l.bullets && l.bullets.length) {
                l.bullets.removeClass(l.params.bulletActiveClass)
            }
            if (l.params.prevButton)a(l.params.prevButton).removeClass(l.params.buttonDisabledClass);
            if (l.params.nextButton)a(l.params.nextButton).removeClass(l.params.buttonDisabledClass);
            if (l.params.scrollbar && l.scrollbar) {
                if (l.scrollbar.track && l.scrollbar.track.length)l.scrollbar.track.removeAttr("style");
                if (l.scrollbar.drag && l.scrollbar.drag.length)l.scrollbar.drag.removeAttr("style")
            }
        };
        l.destroy = function (a, b) {
            l.detachEvents();
            l.stopAutoplay();
            if (l.params.scrollbar && l.scrollbar) {
                if (l.params.scrollbarDraggable) {
                    l.scrollbar.disableDraggable()
                }
            }
            if (l.params.loop) {
                l.destroyLoop()
            }
            if (b) {
                l.cleanupStyles()
            }
            l.disconnectObservers();
            if (l.params.keyboardControl) {
                if (l.disableKeyboardControl)l.disableKeyboardControl()
            }
            if (l.params.mousewheelControl) {
                if (l.disableMousewheelControl)l.disableMousewheelControl()
            }
            if (l.params.a11y && l.a11y)l.a11y.destroy();
            l.emit("onDestroy");
            if (a !== false)l = null
        };
        l.init();
        return l
    };
    b.prototype = {
        isSafari: function () {
            var a = navigator.userAgent.toLowerCase();
            return a.indexOf("safari") >= 0 && a.indexOf("chrome") < 0 && a.indexOf("android") < 0
        }(),
        isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),
        isArray: function (a) {
            return Object.prototype.toString.apply(a) === "[object Array]"
        },
        browser: {
            ie: window.navigator.pointerEnabled || window.navigator.msPointerEnabled,
            ieTouch: window.navigator.msPointerEnabled && window.navigator.msMaxTouchPoints > 1 || window.navigator.pointerEnabled && window.navigator.maxTouchPoints > 1
        },
        device: function () {
            var a = navigator.userAgent;
            var b = a.match(/(Android);?[\s\/]+([\d.]+)?/);
            var c = a.match(/(iPad).*OS\s([\d_]+)/);
            var d = a.match(/(iPod)(.*OS\s([\d_]+))?/);
            var e = !c && a.match(/(iPhone\sOS)\s([\d_]+)/);
            return {ios: c || e || d, android: b}
        }(),
        support: {
            touch: window.Modernizr && Modernizr.touch === true || function () {
                return !!("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch)
            }(), transforms3d: window.Modernizr && Modernizr.csstransforms3d === true || function () {
                var a = document.createElement("div").style;
                return "webkitPerspective" in a || "MozPerspective" in a || "OPerspective" in a || "MsPerspective" in a || "perspective" in a
            }(), flexbox: function () {
                var a = document.createElement("div").style;
                var b = "alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" ");
                for (var c = 0; c < b.length; c++) {
                    if (b[c] in a)return true
                }
            }(), observer: function () {
                return "MutationObserver" in window || "WebkitMutationObserver" in window
            }()
        },
        plugins: {}
    };
    var c = ["jQuery", "Zepto", "Dom7"];
    for (var d = 0; d < c.length; d++) {
        if (window[c[d]]) {
            f(window[c[d]])
        }
    }
    var e;
    if (typeof Dom7 === "undefined") {
        e = window.Dom7 || window.Zepto || window.jQuery
    } else {
        e = Dom7
    }
    function f(a) {
        a.fn.swiper = function (c) {
            var d;
            a(this).each(function () {
                var a = new b(this, c);
                if (!d)d = a
            });
            return d
        }
    }

    if (e) {
        if (!("transitionEnd" in e.fn)) {
            e.fn.transitionEnd = function (a) {
                var b = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"], c, d, e = this;

                function f(d) {
                    if (d.target !== this)return;
                    a.call(this, d);
                    for (c = 0; c < b.length; c++) {
                        e.off(b[c], f)
                    }
                }

                if (a) {
                    for (c = 0; c < b.length; c++) {
                        e.on(b[c], f)
                    }
                }
                return this
            }
        }
        if (!("transform" in e.fn)) {
            e.fn.transform = function (a) {
                for (var b = 0; b < this.length; b++) {
                    var c = this[b].style;
                    c.webkitTransform = c.MsTransform = c.msTransform = c.MozTransform = c.OTransform = c.transform = a
                }
                return this
            }
        }
        if (!("transition" in e.fn)) {
            e.fn.transition = function (a) {
                if (typeof a !== "string") {
                    a = a + "ms"
                }
                for (var b = 0; b < this.length; b++) {
                    var c = this[b].style;
                    c.webkitTransitionDuration = c.MsTransitionDuration = c.msTransitionDuration = c.MozTransitionDuration = c.OTransitionDuration = c.transitionDuration = a
                }
                return this
            }
        }
    }
    window.Swiper = b
})();
if (typeof module !== "undefined") {
    module.exports = window.Swiper
} else if (typeof define === "function" && define.amd) {
    define([], function () {
        "use strict";
        return window.Swiper
    })
}
!function (a, b, c, d) {
    "use strict";
    function e(a, b, c) {
        return setTimeout(j(a, c), b)
    }

    function f(a, b, c) {
        return Array.isArray(a) ? (g(a, c[b], c), !0) : !1
    }

    function g(a, b, c) {
        var e;
        if (a)if (a.forEach)a.forEach(b, c); else if (a.length !== d)for (e = 0; e < a.length;)b.call(c, a[e], e, a), e++; else for (e in a)a.hasOwnProperty(e) && b.call(c, a[e], e, a)
    }

    function h(b, c, d) {
        var e = "DEPRECATED METHOD: " + c + "\n" + d + " AT \n";
        return function () {
            var c = new Error("get-stack-trace"), d = c && c.stack ? c.stack.replace(/^[^\(]+?[\n$]/gm, "").replace(/^\s+at\s+/gm, "").replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@") : "Unknown Stack Trace", f = a.console && (a.console.warn || a.console.log);
            return f && f.call(a.console, e, d), b.apply(this, arguments)
        }
    }

    function i(a, b, c) {
        var d, e = b.prototype;
        d = a.prototype = Object.create(e), d.constructor = a, d._super = e, c && la(d, c)
    }

    function j(a, b) {
        return function () {
            return a.apply(b, arguments)
        }
    }

    function k(a, b) {
        return typeof a == oa ? a.apply(b ? b[0] || d : d, b) : a
    }

    function l(a, b) {
        return a === d ? b : a
    }

    function m(a, b, c) {
        g(q(b), function (b) {
            a.addEventListener(b, c, !1)
        })
    }

    function n(a, b, c) {
        g(q(b), function (b) {
            a.removeEventListener(b, c, !1)
        })
    }

    function o(a, b) {
        for (; a;) {
            if (a == b)return !0;
            a = a.parentNode
        }
        return !1
    }

    function p(a, b) {
        return a.indexOf(b) > -1
    }

    function q(a) {
        return a.trim().split(/\s+/g)
    }

    function r(a, b, c) {
        if (a.indexOf && !c)return a.indexOf(b);
        for (var d = 0; d < a.length;) {
            if (c && a[d][c] == b || !c && a[d] === b)return d;
            d++
        }
        return -1
    }

    function s(a) {
        return Array.prototype.slice.call(a, 0)
    }

    function t(a, b, c) {
        for (var d = [], e = [], f = 0; f < a.length;) {
            var g = b ? a[f][b] : a[f];
            r(e, g) < 0 && d.push(a[f]), e[f] = g, f++
        }
        return c && (d = b ? d.sort(function (a, c) {
            return a[b] > c[b]
        }) : d.sort()), d
    }

    function u(a, b) {
        for (var c, e, f = b[0].toUpperCase() + b.slice(1), g = 0; g < ma.length;) {
            if (c = ma[g], e = c ? c + f : b, e in a)return e;
            g++
        }
        return d
    }

    function v() {
        return ua++
    }

    function w(b) {
        var c = b.ownerDocument || b;
        return c.defaultView || c.parentWindow || a
    }

    function x(a, b) {
        var c = this;
        this.manager = a, this.callback = b, this.element = a.element, this.target = a.options.inputTarget, this.domHandler = function (b) {
            k(a.options.enable, [a]) && c.handler(b)
        }, this.init()
    }

    function y(a) {
        var b, c = a.options.inputClass;
        return new (b = c ? c : xa ? M : ya ? P : wa ? R : L)(a, z)
    }

    function z(a, b, c) {
        var d = c.pointers.length, e = c.changedPointers.length, f = b & Ea && d - e === 0, g = b & (Ga | Ha) && d - e === 0;
        c.isFirst = !!f, c.isFinal = !!g, f && (a.session = {}), c.eventType = b, A(a, c), a.emit("hammer.input", c), a.recognize(c), a.session.prevInput = c
    }

    function A(a, b) {
        var c = a.session, d = b.pointers, e = d.length;
        c.firstInput || (c.firstInput = D(b)), e > 1 && !c.firstMultiple ? c.firstMultiple = D(b) : 1 === e && (c.firstMultiple = !1);
        var f = c.firstInput, g = c.firstMultiple, h = g ? g.center : f.center, i = b.center = E(d);
        b.timeStamp = ra(), b.deltaTime = b.timeStamp - f.timeStamp, b.angle = I(h, i), b.distance = H(h, i), B(c, b), b.offsetDirection = G(b.deltaX, b.deltaY);
        var j = F(b.deltaTime, b.deltaX, b.deltaY);
        b.overallVelocityX = j.x, b.overallVelocityY = j.y, b.overallVelocity = qa(j.x) > qa(j.y) ? j.x : j.y, b.scale = g ? K(g.pointers, d) : 1, b.rotation = g ? J(g.pointers, d) : 0, b.maxPointers = c.prevInput ? b.pointers.length > c.prevInput.maxPointers ? b.pointers.length : c.prevInput.maxPointers : b.pointers.length, C(c, b);
        var k = a.element;
        o(b.srcEvent.target, k) && (k = b.srcEvent.target), b.target = k
    }

    function B(a, b) {
        var c = b.center, d = a.offsetDelta || {}, e = a.prevDelta || {}, f = a.prevInput || {};
        b.eventType !== Ea && f.eventType !== Ga || (e = a.prevDelta = {
            x: f.deltaX || 0,
            y: f.deltaY || 0
        }, d = a.offsetDelta = {x: c.x, y: c.y}), b.deltaX = e.x + (c.x - d.x), b.deltaY = e.y + (c.y - d.y)
    }

    function C(a, b) {
        var c, e, f, g, h = a.lastInterval || b, i = b.timeStamp - h.timeStamp;
        if (b.eventType != Ha && (i > Da || h.velocity === d)) {
            var j = b.deltaX - h.deltaX, k = b.deltaY - h.deltaY, l = F(i, j, k);
            e = l.x, f = l.y, c = qa(l.x) > qa(l.y) ? l.x : l.y, g = G(j, k), a.lastInterval = b
        } else c = h.velocity, e = h.velocityX, f = h.velocityY, g = h.direction;
        b.velocity = c, b.velocityX = e, b.velocityY = f, b.direction = g
    }

    function D(a) {
        for (var b = [], c = 0; c < a.pointers.length;)b[c] = {
            clientX: pa(a.pointers[c].clientX),
            clientY: pa(a.pointers[c].clientY)
        }, c++;
        return {timeStamp: ra(), pointers: b, center: E(b), deltaX: a.deltaX, deltaY: a.deltaY}
    }

    function E(a) {
        var b = a.length;
        if (1 === b)return {x: pa(a[0].clientX), y: pa(a[0].clientY)};
        for (var c = 0, d = 0, e = 0; b > e;)c += a[e].clientX, d += a[e].clientY, e++;
        return {x: pa(c / b), y: pa(d / b)}
    }

    function F(a, b, c) {
        return {x: b / a || 0, y: c / a || 0}
    }

    function G(a, b) {
        return a === b ? Ia : qa(a) >= qa(b) ? 0 > a ? Ja : Ka : 0 > b ? La : Ma
    }

    function H(a, b, c) {
        c || (c = Qa);
        var d = b[c[0]] - a[c[0]], e = b[c[1]] - a[c[1]];
        return Math.sqrt(d * d + e * e)
    }

    function I(a, b, c) {
        c || (c = Qa);
        var d = b[c[0]] - a[c[0]], e = b[c[1]] - a[c[1]];
        return 180 * Math.atan2(e, d) / Math.PI
    }

    function J(a, b) {
        return I(b[1], b[0], Ra) + I(a[1], a[0], Ra)
    }

    function K(a, b) {
        return H(b[0], b[1], Ra) / H(a[0], a[1], Ra)
    }

    function L() {
        this.evEl = Ta, this.evWin = Ua, this.pressed = !1, x.apply(this, arguments)
    }

    function M() {
        this.evEl = Xa, this.evWin = Ya, x.apply(this, arguments), this.store = this.manager.session.pointerEvents = []
    }

    function N() {
        this.evTarget = $a, this.evWin = _a, this.started = !1, x.apply(this, arguments)
    }

    function O(a, b) {
        var c = s(a.touches), d = s(a.changedTouches);
        return b & (Ga | Ha) && (c = t(c.concat(d), "identifier", !0)), [c, d]
    }

    function P() {
        this.evTarget = bb, this.targetIds = {}, x.apply(this, arguments)
    }

    function Q(a, b) {
        var c = s(a.touches), d = this.targetIds;
        if (b & (Ea | Fa) && 1 === c.length)return d[c[0].identifier] = !0, [c, c];
        var e, f, g = s(a.changedTouches), h = [], i = this.target;
        if (f = c.filter(function (a) {
                return o(a.target, i)
            }), b === Ea)for (e = 0; e < f.length;)d[f[e].identifier] = !0, e++;
        for (e = 0; e < g.length;)d[g[e].identifier] && h.push(g[e]), b & (Ga | Ha) && delete d[g[e].identifier], e++;
        return h.length ? [t(f.concat(h), "identifier", !0), h] : void 0
    }

    function R() {
        x.apply(this, arguments);
        var a = j(this.handler, this);
        this.touch = new P(this.manager, a), this.mouse = new L(this.manager, a), this.primaryTouch = null, this.lastTouches = []
    }

    function S(a, b) {
        a & Ea ? (this.primaryTouch = b.changedPointers[0].identifier, T.call(this, b)) : a & (Ga | Ha) && T.call(this, b)
    }

    function T(a) {
        var b = a.changedPointers[0];
        if (b.identifier === this.primaryTouch) {
            var c = {x: b.clientX, y: b.clientY};
            this.lastTouches.push(c);
            var d = this.lastTouches, e = function () {
                var a = d.indexOf(c);
                a > -1 && d.splice(a, 1)
            };
            setTimeout(e, cb)
        }
    }

    function U(a) {
        for (var b = a.srcEvent.clientX, c = a.srcEvent.clientY, d = 0; d < this.lastTouches.length; d++) {
            var e = this.lastTouches[d], f = Math.abs(b - e.x), g = Math.abs(c - e.y);
            if (db >= f && db >= g)return !0
        }
        return !1
    }

    function V(a, b) {
        this.manager = a, this.set(b)
    }

    function W(a) {
        if (p(a, jb))return jb;
        var b = p(a, kb), c = p(a, lb);
        return b && c ? jb : b || c ? b ? kb : lb : p(a, ib) ? ib : hb
    }

    function X() {
        if (!fb)return !1;
        var b = {}, c = a.CSS && a.CSS.supports;
        return ["auto", "manipulation", "pan-y", "pan-x", "pan-x pan-y", "none"].forEach(function (d) {
            b[d] = c ? a.CSS.supports("touch-action", d) : !0
        }), b
    }

    function Y(a) {
        this.options = la({}, this.defaults, a || {}), this.id = v(), this.manager = null, this.options.enable = l(this.options.enable, !0), this.state = nb, this.simultaneous = {}, this.requireFail = []
    }

    function Z(a) {
        return a & sb ? "cancel" : a & qb ? "end" : a & pb ? "move" : a & ob ? "start" : ""
    }

    function $(a) {
        return a == Ma ? "down" : a == La ? "up" : a == Ja ? "left" : a == Ka ? "right" : ""
    }

    function _(a, b) {
        var c = b.manager;
        return c ? c.get(a) : a
    }

    function aa() {
        Y.apply(this, arguments)
    }

    function ba() {
        aa.apply(this, arguments), this.pX = null, this.pY = null
    }

    function ca() {
        aa.apply(this, arguments)
    }

    function da() {
        Y.apply(this, arguments), this._timer = null, this._input = null
    }

    function ea() {
        aa.apply(this, arguments)
    }

    function fa() {
        aa.apply(this, arguments)
    }

    function ga() {
        Y.apply(this, arguments), this.pTime = !1, this.pCenter = !1, this._timer = null, this._input = null, this.count = 0
    }

    function ha(a, b) {
        return b = b || {}, b.recognizers = l(b.recognizers, ha.defaults.preset), new ia(a, b)
    }

    function ia(a, b) {
        this.options = la({}, ha.defaults, b || {}), this.options.inputTarget = this.options.inputTarget || a, this.handlers = {}, this.session = {}, this.recognizers = [], this.oldCssProps = {}, this.element = a, this.input = y(this), this.touchAction = new V(this, this.options.touchAction), ja(this, !0), g(this.options.recognizers, function (a) {
            var b = this.add(new a[0](a[1]));
            a[2] && b.recognizeWith(a[2]), a[3] && b.requireFailure(a[3])
        }, this)
    }

    function ja(a, b) {
        var c = a.element;
        if (c.style) {
            var d;
            g(a.options.cssProps, function (e, f) {
                d = u(c.style, f), b ? (a.oldCssProps[d] = c.style[d], c.style[d] = e) : c.style[d] = a.oldCssProps[d] || ""
            }), b || (a.oldCssProps = {})
        }
    }

    function ka(a, c) {
        var d = b.createEvent("Event");
        d.initEvent(a, !0, !0), d.gesture = c, c.target.dispatchEvent(d)
    }

    var la, ma = ["", "webkit", "Moz", "MS", "ms", "o"], na = b.createElement("div"), oa = "function", pa = Math.round, qa = Math.abs, ra = Date.now;
    la = "function" != typeof Object.assign ? function (a) {
        if (a === d || null === a)throw new TypeError("Cannot convert undefined or null to object");
        for (var b = Object(a), c = 1; c < arguments.length; c++) {
            var e = arguments[c];
            if (e !== d && null !== e)for (var f in e)e.hasOwnProperty(f) && (b[f] = e[f])
        }
        return b
    } : Object.assign;
    var sa = h(function (a, b, c) {
        for (var e = Object.keys(b), f = 0; f < e.length;)(!c || c && a[e[f]] === d) && (a[e[f]] = b[e[f]]), f++;
        return a
    }, "extend", "Use `assign`."), ta = h(function (a, b) {
        return sa(a, b, !0)
    }, "merge", "Use `assign`."), ua = 1, va = /mobile|tablet|ip(ad|hone|od)|android/i, wa = "ontouchstart" in a, xa = u(a, "PointerEvent") !== d, ya = wa && va.test(navigator.userAgent), za = "touch", Aa = "pen", Ba = "mouse", Ca = "kinect", Da = 25, Ea = 1, Fa = 2, Ga = 4, Ha = 8, Ia = 1, Ja = 2, Ka = 4, La = 8, Ma = 16, Na = Ja | Ka, Oa = La | Ma, Pa = Na | Oa, Qa = ["x", "y"], Ra = ["clientX", "clientY"];
    x.prototype = {
        handler: function () {
        }, init: function () {
            this.evEl && m(this.element, this.evEl, this.domHandler), this.evTarget && m(this.target, this.evTarget, this.domHandler), this.evWin && m(w(this.element), this.evWin, this.domHandler)
        }, destroy: function () {
            this.evEl && n(this.element, this.evEl, this.domHandler), this.evTarget && n(this.target, this.evTarget, this.domHandler), this.evWin && n(w(this.element), this.evWin, this.domHandler)
        }
    };
    var Sa = {mousedown: Ea, mousemove: Fa, mouseup: Ga}, Ta = "mousedown", Ua = "mousemove mouseup";
    i(L, x, {
        handler: function (a) {
            var b = Sa[a.type];
            b & Ea && 0 === a.button && (this.pressed = !0), b & Fa && 1 !== a.which && (b = Ga), this.pressed && (b & Ga && (this.pressed = !1), this.callback(this.manager, b, {
                pointers: [a],
                changedPointers: [a],
                pointerType: Ba,
                srcEvent: a
            }))
        }
    });
    var Va = {pointerdown: Ea, pointermove: Fa, pointerup: Ga, pointercancel: Ha, pointerout: Ha}, Wa = {
        2: za,
        3: Aa,
        4: Ba,
        5: Ca
    }, Xa = "pointerdown", Ya = "pointermove pointerup pointercancel";
    a.MSPointerEvent && !a.PointerEvent && (Xa = "MSPointerDown", Ya = "MSPointerMove MSPointerUp MSPointerCancel"), i(M, x, {
        handler: function (a) {
            var b = this.store, c = !1, d = a.type.toLowerCase().replace("ms", ""), e = Va[d], f = Wa[a.pointerType] || a.pointerType, g = f == za, h = r(b, a.pointerId, "pointerId");
            e & Ea && (0 === a.button || g) ? 0 > h && (b.push(a), h = b.length - 1) : e & (Ga | Ha) && (c = !0), 0 > h || (b[h] = a, this.callback(this.manager, e, {
                pointers: b,
                changedPointers: [a],
                pointerType: f,
                srcEvent: a
            }), c && b.splice(h, 1))
        }
    });
    var Za = {
        touchstart: Ea,
        touchmove: Fa,
        touchend: Ga,
        touchcancel: Ha
    }, $a = "touchstart", _a = "touchstart touchmove touchend touchcancel";
    i(N, x, {
        handler: function (a) {
            var b = Za[a.type];
            if (b === Ea && (this.started = !0), this.started) {
                var c = O.call(this, a, b);
                b & (Ga | Ha) && c[0].length - c[1].length === 0 && (this.started = !1), this.callback(this.manager, b, {
                    pointers: c[0],
                    changedPointers: c[1],
                    pointerType: za,
                    srcEvent: a
                })
            }
        }
    });
    var ab = {
        touchstart: Ea,
        touchmove: Fa,
        touchend: Ga,
        touchcancel: Ha
    }, bb = "touchstart touchmove touchend touchcancel";
    i(P, x, {
        handler: function (a) {
            var b = ab[a.type], c = Q.call(this, a, b);
            c && this.callback(this.manager, b, {pointers: c[0], changedPointers: c[1], pointerType: za, srcEvent: a})
        }
    });
    var cb = 2500, db = 25;
    i(R, x, {
        handler: function (a, b, c) {
            var d = c.pointerType == za, e = c.pointerType == Ba;
            if (!(e && c.sourceCapabilities && c.sourceCapabilities.firesTouchEvents)) {
                if (d)S.call(this, b, c); else if (e && U.call(this, c))return;
                this.callback(a, b, c)
            }
        }, destroy: function () {
            this.touch.destroy(), this.mouse.destroy()
        }
    });
    var eb = u(na.style, "touchAction"), fb = eb !== d, gb = "compute", hb = "auto", ib = "manipulation", jb = "none", kb = "pan-x", lb = "pan-y", mb = X();
    V.prototype = {
        set: function (a) {
            a == gb && (a = this.compute()), fb && this.manager.element.style && mb[a] && (this.manager.element.style[eb] = a), this.actions = a.toLowerCase().trim()
        }, update: function () {
            this.set(this.manager.options.touchAction)
        }, compute: function () {
            var a = [];
            return g(this.manager.recognizers, function (b) {
                k(b.options.enable, [b]) && (a = a.concat(b.getTouchAction()))
            }), W(a.join(" "))
        }, preventDefaults: function (a) {
            var b = a.srcEvent, c = a.offsetDirection;
            if (this.manager.session.prevented)return void b.preventDefault();
            var d = this.actions, e = p(d, jb) && !mb[jb], f = p(d, lb) && !mb[lb], g = p(d, kb) && !mb[kb];
            if (e) {
                var h = 1 === a.pointers.length, i = a.distance < 2, j = a.deltaTime < 250;
                if (h && i && j)return
            }
            return g && f ? void 0 : e || f && c & Na || g && c & Oa ? this.preventSrc(b) : void 0
        }, preventSrc: function (a) {
            this.manager.session.prevented = !0, a.preventDefault()
        }
    };
    var nb = 1, ob = 2, pb = 4, qb = 8, rb = qb, sb = 16, tb = 32;
    Y.prototype = {
        defaults: {}, set: function (a) {
            return la(this.options, a), this.manager && this.manager.touchAction.update(), this
        }, recognizeWith: function (a) {
            if (f(a, "recognizeWith", this))return this;
            var b = this.simultaneous;
            return a = _(a, this), b[a.id] || (b[a.id] = a, a.recognizeWith(this)), this
        }, dropRecognizeWith: function (a) {
            return f(a, "dropRecognizeWith", this) ? this : (a = _(a, this), delete this.simultaneous[a.id], this)
        }, requireFailure: function (a) {
            if (f(a, "requireFailure", this))return this;
            var b = this.requireFail;
            return a = _(a, this), -1 === r(b, a) && (b.push(a), a.requireFailure(this)), this
        }, dropRequireFailure: function (a) {
            if (f(a, "dropRequireFailure", this))return this;
            a = _(a, this);
            var b = r(this.requireFail, a);
            return b > -1 && this.requireFail.splice(b, 1), this
        }, hasRequireFailures: function () {
            return this.requireFail.length > 0
        }, canRecognizeWith: function (a) {
            return !!this.simultaneous[a.id]
        }, emit: function (a) {
            function b(b) {
                c.manager.emit(b, a)
            }

            var c = this, d = this.state;
            qb > d && b(c.options.event + Z(d)), b(c.options.event), a.additionalEvent && b(a.additionalEvent), d >= qb && b(c.options.event + Z(d))
        }, tryEmit: function (a) {
            return this.canEmit() ? this.emit(a) : void(this.state = tb)
        }, canEmit: function () {
            for (var a = 0; a < this.requireFail.length;) {
                if (!(this.requireFail[a].state & (tb | nb)))return !1;
                a++
            }
            return !0
        }, recognize: function (a) {
            var b = la({}, a);
            return k(this.options.enable, [this, b]) ? (this.state & (rb | sb | tb) && (this.state = nb), this.state = this.process(b), void(this.state & (ob | pb | qb | sb) && this.tryEmit(b))) : (this.reset(), void(this.state = tb))
        }, process: function (a) {
        }, getTouchAction: function () {
        }, reset: function () {
        }
    }, i(aa, Y, {
        defaults: {pointers: 1}, attrTest: function (a) {
            var b = this.options.pointers;
            return 0 === b || a.pointers.length === b
        }, process: function (a) {
            var b = this.state, c = a.eventType, d = b & (ob | pb), e = this.attrTest(a);
            return d && (c & Ha || !e) ? b | sb : d || e ? c & Ga ? b | qb : b & ob ? b | pb : ob : tb
        }
    }), i(ba, aa, {
        defaults: {event: "pan", threshold: 10, pointers: 1, direction: Pa}, getTouchAction: function () {
            var a = this.options.direction, b = [];
            return a & Na && b.push(lb), a & Oa && b.push(kb), b
        }, directionTest: function (a) {
            var b = this.options, c = !0, d = a.distance, e = a.direction, f = a.deltaX, g = a.deltaY;
            return e & b.direction || (b.direction & Na ? (e = 0 === f ? Ia : 0 > f ? Ja : Ka, c = f != this.pX, d = Math.abs(a.deltaX)) : (e = 0 === g ? Ia : 0 > g ? La : Ma, c = g != this.pY, d = Math.abs(a.deltaY))), a.direction = e, c && d > b.threshold && e & b.direction
        }, attrTest: function (a) {
            return aa.prototype.attrTest.call(this, a) && (this.state & ob || !(this.state & ob) && this.directionTest(a))
        }, emit: function (a) {
            this.pX = a.deltaX, this.pY = a.deltaY;
            var b = $(a.direction);
            b && (a.additionalEvent = this.options.event + b), this._super.emit.call(this, a)
        }
    }), i(ca, aa, {
        defaults: {event: "pinch", threshold: 0, pointers: 2}, getTouchAction: function () {
            return [jb]
        }, attrTest: function (a) {
            return this._super.attrTest.call(this, a) && (Math.abs(a.scale - 1) > this.options.threshold || this.state & ob)
        }, emit: function (a) {
            if (1 !== a.scale) {
                var b = a.scale < 1 ? "in" : "out";
                a.additionalEvent = this.options.event + b
            }
            this._super.emit.call(this, a)
        }
    }), i(da, Y, {
        defaults: {event: "press", pointers: 1, time: 251, threshold: 9}, getTouchAction: function () {
            return [hb]
        }, process: function (a) {
            var b = this.options, c = a.pointers.length === b.pointers, d = a.distance < b.threshold, f = a.deltaTime > b.time;
            if (this._input = a,
                !d || !c || a.eventType & (Ga | Ha) && !f)this.reset(); else if (a.eventType & Ea)this.reset(), this._timer = e(function () {
                this.state = rb, this.tryEmit()
            }, b.time, this); else if (a.eventType & Ga)return rb;
            return tb
        }, reset: function () {
            clearTimeout(this._timer)
        }, emit: function (a) {
            this.state === rb && (a && a.eventType & Ga ? this.manager.emit(this.options.event + "up", a) : (this._input.timeStamp = ra(), this.manager.emit(this.options.event, this._input)))
        }
    }), i(ea, aa, {
        defaults: {event: "rotate", threshold: 0, pointers: 2}, getTouchAction: function () {
            return [jb]
        }, attrTest: function (a) {
            return this._super.attrTest.call(this, a) && (Math.abs(a.rotation) > this.options.threshold || this.state & ob)
        }
    }), i(fa, aa, {
        defaults: {event: "swipe", threshold: 10, velocity: .3, direction: Na | Oa, pointers: 1},
        getTouchAction: function () {
            return ba.prototype.getTouchAction.call(this)
        },
        attrTest: function (a) {
            var b, c = this.options.direction;
            return c & (Na | Oa) ? b = a.overallVelocity : c & Na ? b = a.overallVelocityX : c & Oa && (b = a.overallVelocityY), this._super.attrTest.call(this, a) && c & a.offsetDirection && a.distance > this.options.threshold && a.maxPointers == this.options.pointers && qa(b) > this.options.velocity && a.eventType & Ga
        },
        emit: function (a) {
            var b = $(a.offsetDirection);
            b && this.manager.emit(this.options.event + b, a), this.manager.emit(this.options.event, a)
        }
    }), i(ga, Y, {
        defaults: {
            event: "tap",
            pointers: 1,
            taps: 1,
            interval: 300,
            time: 250,
            threshold: 9,
            posThreshold: 10
        }, getTouchAction: function () {
            return [ib]
        }, process: function (a) {
            var b = this.options, c = a.pointers.length === b.pointers, d = a.distance < b.threshold, f = a.deltaTime < b.time;
            if (this.reset(), a.eventType & Ea && 0 === this.count)return this.failTimeout();
            if (d && f && c) {
                if (a.eventType != Ga)return this.failTimeout();
                var g = this.pTime ? a.timeStamp - this.pTime < b.interval : !0, h = !this.pCenter || H(this.pCenter, a.center) < b.posThreshold;
                this.pTime = a.timeStamp, this.pCenter = a.center, h && g ? this.count += 1 : this.count = 1, this._input = a;
                var i = this.count % b.taps;
                if (0 === i)return this.hasRequireFailures() ? (this._timer = e(function () {
                    this.state = rb, this.tryEmit()
                }, b.interval, this), ob) : rb
            }
            return tb
        }, failTimeout: function () {
            return this._timer = e(function () {
                this.state = tb
            }, this.options.interval, this), tb
        }, reset: function () {
            clearTimeout(this._timer)
        }, emit: function () {
            this.state == rb && (this._input.tapCount = this.count, this.manager.emit(this.options.event, this._input))
        }
    }), ha.VERSION = "2.0.7", ha.defaults = {
        domEvents: !1,
        touchAction: gb,
        enable: !0,
        inputTarget: null,
        inputClass: null,
        preset: [[ea, {enable: !1}], [ca, {enable: !1}, ["rotate"]], [fa, {direction: Na}], [ba, {direction: Na}, ["swipe"]], [ga], [ga, {
            event: "doubletap",
            taps: 2
        }, ["tap"]], [da]],
        cssProps: {
            userSelect: "none",
            touchSelect: "none",
            touchCallout: "none",
            contentZooming: "none",
            userDrag: "none",
            tapHighlightColor: "rgba(0,0,0,0)"
        }
    };
    var ub = 1, vb = 2;
    ia.prototype = {
        set: function (a) {
            return la(this.options, a), a.touchAction && this.touchAction.update(), a.inputTarget && (this.input.destroy(), this.input.target = a.inputTarget, this.input.init()), this
        }, stop: function (a) {
            this.session.stopped = a ? vb : ub
        }, recognize: function (a) {
            var b = this.session;
            if (!b.stopped) {
                this.touchAction.preventDefaults(a);
                var c, d = this.recognizers, e = b.curRecognizer;
                (!e || e && e.state & rb) && (e = b.curRecognizer = null);
                for (var f = 0; f < d.length;)c = d[f], b.stopped === vb || e && c != e && !c.canRecognizeWith(e) ? c.reset() : c.recognize(a), !e && c.state & (ob | pb | qb) && (e = b.curRecognizer = c), f++
            }
        }, get: function (a) {
            if (a instanceof Y)return a;
            for (var b = this.recognizers, c = 0; c < b.length; c++)if (b[c].options.event == a)return b[c];
            return null
        }, add: function (a) {
            if (f(a, "add", this))return this;
            var b = this.get(a.options.event);
            return b && this.remove(b), this.recognizers.push(a), a.manager = this, this.touchAction.update(), a
        }, remove: function (a) {
            if (f(a, "remove", this))return this;
            if (a = this.get(a)) {
                var b = this.recognizers, c = r(b, a);
                -1 !== c && (b.splice(c, 1), this.touchAction.update())
            }
            return this
        }, on: function (a, b) {
            if (a !== d && b !== d) {
                var c = this.handlers;
                return g(q(a), function (a) {
                    c[a] = c[a] || [], c[a].push(b)
                }), this
            }
        }, off: function (a, b) {
            if (a !== d) {
                var c = this.handlers;
                return g(q(a), function (a) {
                    b ? c[a] && c[a].splice(r(c[a], b), 1) : delete c[a]
                }), this
            }
        }, emit: function (a, b) {
            this.options.domEvents && ka(a, b);
            var c = this.handlers[a] && this.handlers[a].slice();
            if (c && c.length) {
                b.type = a, b.preventDefault = function () {
                    b.srcEvent.preventDefault()
                };
                for (var d = 0; d < c.length;)c[d](b), d++
            }
        }, destroy: function () {
            this.element && ja(this, !1), this.handlers = {}, this.session = {}, this.input.destroy(), this.element = null
        }
    }, la(ha, {
        INPUT_START: Ea,
        INPUT_MOVE: Fa,
        INPUT_END: Ga,
        INPUT_CANCEL: Ha,
        STATE_POSSIBLE: nb,
        STATE_BEGAN: ob,
        STATE_CHANGED: pb,
        STATE_ENDED: qb,
        STATE_RECOGNIZED: rb,
        STATE_CANCELLED: sb,
        STATE_FAILED: tb,
        DIRECTION_NONE: Ia,
        DIRECTION_LEFT: Ja,
        DIRECTION_RIGHT: Ka,
        DIRECTION_UP: La,
        DIRECTION_DOWN: Ma,
        DIRECTION_HORIZONTAL: Na,
        DIRECTION_VERTICAL: Oa,
        DIRECTION_ALL: Pa,
        Manager: ia,
        Input: x,
        TouchAction: V,
        TouchInput: P,
        MouseInput: L,
        PointerEventInput: M,
        TouchMouseInput: R,
        SingleTouchInput: N,
        Recognizer: Y,
        AttrRecognizer: aa,
        Tap: ga,
        Pan: ba,
        Swipe: fa,
        Pinch: ca,
        Rotate: ea,
        Press: da,
        on: m,
        off: n,
        each: g,
        merge: ta,
        extend: sa,
        assign: la,
        inherit: i,
        bindFn: j,
        prefixed: u
    });
    var wb = "undefined" != typeof a ? a : "undefined" != typeof self ? self : {};
    wb.Hammer = ha, "function" == typeof define && define.amd ? define(function () {
        return ha
    }) : "undefined" != typeof module && module.exports ? module.exports = ha : a[c] = ha
}(window, document, "Hammer");
(function (a) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "hammerjs"], a)
    } else if (typeof exports === "object") {
        a(require("jquery"), require("hammerjs"))
    } else {
        a(jQuery, Hammer)
    }
})(function (a, b) {
    function c(c, d) {
        var e = a(c);
        if (!e.data("hammer")) {
            e.data("hammer", new b(e[0], d))
        }
    }

    a.fn.hammer = function (a) {
        return this.each(function () {
            c(this, a)
        })
    };
    b.Manager.prototype.emit = function (b) {
        return function (c, d) {
            b.call(this, c, d);
            a(this.element).trigger({type: c, gesture: d})
        }
    }(b.Manager.prototype.emit)
});
(function (a) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], a)
    } else if (typeof module === "object" && module.exports) {
        module.exports = a(require("jquery"))
    } else {
        a(jQuery)
    }
})(function (a) {
    var b = Array.prototype.slice;
    var c = Array.prototype.splice;
    var d = {
        topSpacing: 0,
        bottomSpacing: 0,
        className: "is-sticky",
        wrapperClassName: "sticky-wrapper",
        center: false,
        getWidthFrom: "",
        widthFromWrapper: true,
        responsiveWidth: false
    }, e = a(window), f = a(document), g = [], h = e.height(), i = function () {
        var b = e.scrollTop(), c = f.height(), d = c - h, i = b > d ? d - b : 0;
        for (var j = 0, k = g.length; j < k; j++) {
            var l = g[j], m = l.stickyWrapper.offset().top, n = m - l.topSpacing - i;
            l.stickyWrapper.css("height", l.stickyElement.outerHeight());
            if (b <= n) {
                if (l.currentTop !== null) {
                    l.stickyElement.css({width: "", position: "", top: ""});
                    l.stickyElement.parent().removeClass(l.className);
                    l.stickyElement.trigger("sticky-end", [l]);
                    l.currentTop = null
                }
            } else {
                var o = c - l.stickyElement.outerHeight() - l.topSpacing - l.bottomSpacing - b - i;
                if (o < 0) {
                    o = o + l.topSpacing
                } else {
                    o = l.topSpacing
                }
                if (l.currentTop !== o) {
                    var p;
                    if (l.getWidthFrom) {
                        p = a(l.getWidthFrom).width() || null
                    } else if (l.widthFromWrapper) {
                        p = l.stickyWrapper.width()
                    }
                    if (p == null) {
                        p = l.stickyElement.width()
                    }
                    l.stickyElement.css("width", p).css("position", "fixed").css("top", o);
                    l.stickyElement.parent().addClass(l.className);
                    if (l.currentTop === null) {
                        l.stickyElement.trigger("sticky-start", [l])
                    } else {
                        l.stickyElement.trigger("sticky-update", [l])
                    }
                    if (l.currentTop === l.topSpacing && l.currentTop > o || l.currentTop === null && o < l.topSpacing) {
                        l.stickyElement.trigger("sticky-bottom-reached", [l])
                    } else if (l.currentTop !== null && o === l.topSpacing && l.currentTop < o) {
                        l.stickyElement.trigger("sticky-bottom-unreached", [l])
                    }
                    l.currentTop = o
                }
            }
        }
    }, j = function () {
        h = e.height();
        for (var b = 0, c = g.length; b < c; b++) {
            var d = g[b];
            var f = null;
            if (d.getWidthFrom) {
                if (d.responsiveWidth) {
                    f = a(d.getWidthFrom).width()
                }
            } else if (d.widthFromWrapper) {
                f = d.stickyWrapper.width()
            }
            if (f != null) {
                d.stickyElement.css("width", f)
            }
        }
    }, k = {
        init: function (b) {
            var c = a.extend({}, d, b);
            return this.each(function () {
                var b = a(this);
                var e = b.attr("id");
                var f = b.outerHeight();
                var h = e ? e + "-" + d.wrapperClassName : d.wrapperClassName;
                var i = a("<div></div>").attr("id", h).addClass(c.wrapperClassName);
                b.wrapAll(i);
                var j = b.parent();
                if (c.center) {
                    j.css({width: b.outerWidth(), marginLeft: "auto", marginRight: "auto"})
                }
                if (b.css("float") === "right") {
                    b.css({float: "none"}).parent().css({float: "right"})
                }
                j.css("height", f);
                c.stickyElement = b;
                c.stickyWrapper = j;
                c.currentTop = null;
                g.push(c)
            })
        }, update: i, unstick: function (b) {
            return this.each(function () {
                var b = this;
                var d = a(b);
                var e = -1;
                var f = g.length;
                while (f-- > 0) {
                    if (g[f].stickyElement.get(0) === b) {
                        c.call(g, f, 1);
                        e = f
                    }
                }
                if (e !== -1) {
                    d.unwrap();
                    d.css({width: "", position: "", top: "", float: ""})
                }
            })
        }
    };
    if (window.addEventListener) {
        window.addEventListener("scroll", i, false);
        window.addEventListener("resize", j, false)
    } else if (window.attachEvent) {
        window.attachEvent("onscroll", i);
        window.attachEvent("onresize", j)
    }
    a.fn.sticky = function (c) {
        if (k[c]) {
            return k[c].apply(this, b.call(arguments, 1))
        } else if (typeof c === "object" || !c) {
            return k.init.apply(this, arguments)
        } else {
            a.error("Method " + c + " does not exist on jQuery.sticky")
        }
    };
    a.fn.unstick = function (c) {
        if (k[c]) {
            return k[c].apply(this, b.call(arguments, 1))
        } else if (typeof c === "object" || !c) {
            return k.unstick.apply(this, arguments)
        } else {
            a.error("Method " + c + " does not exist on jQuery.sticky")
        }
    };
    a(function () {
        setTimeout(i, 0)
    })
});
(function (a, b, c) {
    a.cartApi = {
        url: {
            add: "/?type=ajax&controller=cart&action=add",
            remove: "/?type=ajax&controller=cart&action=del",
            bonus: "/src/ajax/applyBonus.json",
            promo: "/src/ajax/applyPromo.json"
        }, addToCart: function (a, b, d) {
            if (b === c) {
                b = 1
            }
            if (d === c) {
                d = false
            }
            var e = {quantity: b};
            if (!d) {
                e.id = a
            } else {
                e.kit_id = a
            }
            return $.ajax(this.url.add, {data: e, dataType: "JSON"})
        }, removeFromCart: function (a, b, d) {
            if (b === c) {
                b = false
            }
            if (typeof b === "boolean") {
                d[!b ? "id" : "kit_id"] = a
            } else if (typeof $.isArray(b)) {
                d.id = a;
                d.kit_id = b
            }
            return $.ajax(this.url.remove, {data: d, dataType: "JSON"})
        }, oneClickForm: function (a) {
            return $.ajax({type: "post", dataType: "json", context: this, data: a})
        }, payByBonus: function (a) {
            return $.ajax({
                url: "/",
                dataType: "json",
                type: "post",
                data: {type: "ajax", controller: "cart", action: "bonus", value: a}
            })
        }, applyPromoCode: function (a) {
            return $.ajax({
                url: "/",
                dataType: "json",
                type: "post",
                data: {type: "ajax", controller: "cart", action: "promocode", value: a}
            })
        }, testDriveAdd: function (a) {
            return $.ajax({
                url: "/",
                dataType: "json",
                type: "post",
                data: {type: "ajax", controller: "testDrive", action: "request", id: a, method: "add"}
            })
        }, testDriveRemove: function (a) {
            return $.ajax({
                url: "/",
                dataType: "json",
                type: "post",
                data: {type: "ajax", controller: "testDrive", action: "request", id: a, method: "remove"}
            })
        }, getDelivery: function (a, b) {
            return $.ajax({
                url: "/",
                dataType: "json",
                type: "post",
                data: {type: "ajax", controller: "cart", action: "getDeliveryOptions", city_id: a}
            })
        }, getIntervals: function (a, b, c, d) {
            return $.ajax({
                url: "/",
                dataType: "json",
                type: "post",
                data: {
                    type: "ajax",
                    controller: "cart",
                    action: "getDeliveryIntervals",
                    city_id: a,
                    delivery_id: b,
                    interval: c || null,
                    devtime: d || ""
                }
            })
        }, getPayments: function (a) {
            return $.ajax({
                url: "/",
                dataType: "json",
                type: "post",
                data: {type: "ajax", controller: "cart", action: "getPaymentsOptions", city_id: a}
            })
        }
    }
})(window, document, undefined);
(function (a) {
    a.fn.checkbox = function () {
        return this.each(function () {
            var b = a(this);
            if (b.data().cb) {
                return
            }
            b.css("position", "absolute").wrap('<span style="overflow: hidden; display: inline-block !important; height: 0; width: 0; position: absolute; margin: 0 !important; padding: 0 !important; zoom: 1" />');
            var c = b.parent();
            var d = a("<label>", {
                class: a(this).attr("type") + " " + (b.attr("class") ? b.attr("class") : ""),
                html: '<ins class="font-icon-ok"></ins>',
                for: b.attr("id"),
                rel: b.attr("name")
            });
            if (b.is(":checked")) {
                d.addClass("checked")
            }
            d.insertAfter(c);
            b.data({cb: d});
            b.change(function () {
                if (a(this).attr("type").toLowerCase() == "radio") {
                    a('label.radio.checked[rel="' + a(this).attr("name") + '"]').removeClass("checked")
                }
                if (a(this).is(":checked")) {
                    d.addClass("checked")
                } else {
                    d.removeClass("checked")
                }
            })
        })
    }
})(jQuery);
(function (a) {
    var b = function (b, c, d) {
        this.rel = b;
        this.$el = null;
        this.content = c;
        this.id = (new Date).getTime() + parseInt(Math.random() * 1e3);
        var e = {
            className: "",
            template: '<div class="dropdownBox"><i class="tail"></i><a class="faker" style="position: absolute; bottom: 100%; left: 0;"></a><div class="dropdownContent"></div></div>',
            renderOnCreate: true,
            minRightPos: 20
        };
        this.options = a.extend(e, d);
        if (this.options.renderOnCreate) {
            this.render()
        }
    };
    b.prototype.render = function () {
        this.$el = a(this.options.template);
        this.$el.addClass(this.options.className);
        this.$el.on("mouseleave.dropdownClose", this, function (a) {
            a.data.close()
        }).on("click touchstart", function (a) {
            a.stopPropagation()
        });
        this.setContent();
        if (this.options.inheritFontSize) {
            this.$el.css({fontSize: a(this.rel).css("font-size")})
        }
        this.$el.appendTo("body");
        return this.$el
    };
    b.prototype.setContent = function (b) {
        if (!b) {
            b = this.content
        }
        var c = a(b);
        try {
            c.show()
        } catch (a) {
        }
        this.$el.find(".dropdownContent").html(c)
    };
    b.prototype.setPosition = function () {
        var b = a(this.rel).offset();
        var c = a(this.rel);
        var d = {width: c.outerWidth(true), height: c.outerHeight(true)};
        var e;
        var f = {height: d.height + "px", width: d.width + "px"};
        var g = this.$el.find(".tail");
        this.$el.removeClass("rightSide");
        this.$el.css({left: 0});
        this.show();
        var h = this.$el.outerWidth();
        var e;
        if (a(window).width() > 767) {
            e = {
                left: b.left + (d.width < g.position().left + g.width() ? -(g.position().left + g.width() / 2) : 0) + "px",
                top: b.top + c.outerHeight() + "px"
            }
        }
        if (a(window).width() <= 767) {
            e = {
                left: b.left + (d.width < g.position().left + g.width() ? -(g.position().left + g.width() / 2) : 0) + "px",
                top: b.top - 65 + c.height() + d.height / 2 + "px"
            }
        }
        this.$el.css(e).find("a.faker").css(f);
        var i = this.offset();
        if (i.right < this.options.minRightPos) {
            e.left = c.offset().left + c.outerWidth() - h + "px";
            this.$el.addClass("rightSide");
            f.left = "auto";
            f.right = "0";
            this.$el.css(e).find("a.faker").css(f)
        }
        this.hide()
    };
    b.prototype.show = function () {
        var b = a(this.rel).offset();
        this.$el.show();
        var c = this.$el.find(".zClip-obj");
        if (a.fn.zclip && c.length) {
            c.each(function () {
                if (!a(this).data("zclipId")) {
                    a(this).zclip({
                        path: "/libs/jquery.zclip/ZeroClipboard.swf",
                        copy: a(this).data("zcopy"),
                        afterCopy: function () {
                            notify("success", {text: " !"})
                        }
                    })
                }
            })
        }
    };
    b.prototype.hide = function () {
        this.$el.hide()
    };
    b.prototype.offset = function () {
        var b = this.$el.offset();
        var c = a("body");
        return {
            left: b.left,
            top: b.top,
            bottom: c.height() - (b.top + this.$el.outerHeight()),
            right: c.width() - (b.left + this.$el.outerWidth())
        }
    };
    b.prototype.open = function () {
        a("body").on("click.dd" + this.id + " touchstart.dd" + this.id, this, function (a) {
            a.data.close()
        });
        this.setPosition();
        this.$el.fadeIn("fast")
    };
    b.prototype.close = function () {
        a("body").off("click.dd" + this.id + ", touchstart.dd" + this.id);
        a(this.rel).removeClass("opened");
        this.$el.fadeOut("fast")
    };
    b.prototype.destroy = function () {
        a(this.rel).off(".ddEvent");
        this.$el.detach().remove()
    };
    a.fn.dropdown = function (c) {
        var d = {inheritFontSize: true};
        if (typeof c !== "string") {
            c = a.extend(d, c)
        }
        return this.each(function () {
            var d = a(this);
            if (typeof c === "string" && c === "destroy" && a(this).data("dropdown.object")) {
                a(this).data("dropdown.object").destroy();
                return true
            }
            var e = a(c.content || a(this).data("dropdown-content"));
            if (!a(this).data("dropdown.object")) {
                if (a(this).data("inherit-font-size") !== undefined) {
                    c.inheritFontSize = a(this).data("inherit-font-size")
                }
                a(this).data({"dropdown.object": new b(this, e, c)})
            }
            var f = a(this).data("dropdown.object");
            var g = a(this).data("dropdown-openevent") || "click";
            if (g !== "click" && !f.fakerRemoved) {
                f.$el.find(".faker").remove();
                f.fakerRemoved = true
            }
            a(this).on(g + ".dropdownOpen.ddEvent", f, function (b) {
                b.preventDefault();
                d.data({
                    showTimer: setTimeout(function () {
                        b.data.open();
                        a(this).addClass("opened")
                    }, b.type === "mouseenter" || b.type === "mouseover" ? 250 : 0)
                })
            });
            if (g === "mouseenter" || g === "mouseover") {
                d.on("mouseleave", function () {
                    if (a(this).data("showTimer")) {
                        clearTimeout(a(this).data("showTimer"))
                    }
                })
            }
            a(this).on("showDropdown.ddEvent", function () {
                a(this).data("dropdown.object").show()
            });
            a(this).on("hideDropdown.ddEvent", function () {
                a(this).data("dropdown.object").hide()
            })
        })
    }
})(jQuery);
(function (a) {
    a.fn.fieldCloner = function (b) {
        var c = {
            donorSelector: "", indexSelector: "", container: "", beforeAppend: function () {
            }, onClone: function () {
            }
        };
        b = a.extend(c, b);
        var d = function (c) {
            return a(b.container).find(c).last()
        };
        var e = function (c) {
            return a(b.container).find(c).size()
        };
        var f = function (b, c, d) {
            b.find(c).text(d + 1);
            var e = b.find(":input");
            var f = e.first().attr("name");
            var g = b.find("label");
            if (f && f.match(/\[[0-9]+\]/gim)) {
                e.attr("name", f.replace(/\[[0-9]+\]/gim, "[" + d + "]"))
            }
            e.each(function () {
                if (this.id && this.id.match(/[0-9]+/gim)) {
                    a(this).attr("id", a(this).attr("id").replace(/[0-9]+/gim, d))
                }
            });
            g.each(function () {
                if (a(this).attr("for") && a(this).attr("for").match(/[0-9]+/gim)) {
                    a(this).attr("for", a(this).attr("for").replace(/[0-9]+/gim, d))
                }
            })
        };
        return this.each(function () {
            a(this).on("click", function (c) {
                c.preventDefault();
                var g = d(b.donorSelector).clone();
                g.find(":input").val("");
                if (g.hasClass("typeahead-loaded")) {
                    g.removeClass("typeahead-loaded")
                }
                f(g, b.indexSelector, e(b.donorSelector));
                b.beforeAppend(g);
                a(b.container).append(g);
                if (g.hasClass("removed")) {
                    g.find("a.del").trigger("click")
                }
                b.onClone(g)
            })
        })
    }
})(jQuery);
(function (a) {
    a.fn.oneLineMenu = function (b) {
        var c = {expanderText: "More", expanderClass: ""};
        b = a.extend(c, b);
        var d = function (b, c) {
            return a('<a href="#" class="oneLineMenuExpander" />').addClass(c).html(b)
        };
        var e = function (b) {
            var c = a(b).clone();
            c.data({"oneLineMenu.donor": a(b)});
            a(b).data({"oneLineMenu.clone": c});
            return c
        };
        var f = function (b) {
            var c = a('<div class="dropdownBox"><i class="tail"></i><a class="faker" style="position: absolute; bottom: 100%; left: 0;"></a><ul></ul></div>').hide();
            a.each(b, function () {
                var b = a("<li />").append(a(this));
                c.find("ul").append(b)
            });
            a("body").append(c);
            return c
        };
        var g = function (b) {
            var c = a(b);
            var d = c.offset();
            var e = 20;
            var f = {width: c.outerWidth(true), height: c.outerHeight(true)};
            var g = {height: f.height + "px", width: f.width + "px"};
            var h = a(this).find(".tail");
            a(this).removeClass("rightSide");
            a(this).css({left: 0});
            this.show();
            var i = a(this).outerWidth();
            var j;
            if (a(window).width() > 767) {
                j = {
                    left: d.left + (f.width < h.position().left + h.width() ? -(h.position().left + h.width() / 2) : 0) + "px",
                    top: d.top + c.outerHeight() + "px"
                }
            }
            if (a(window).width() <= 767) {
                j = {
                    left: d.left + (f.width < h.position().left + h.width() ? -(h.position().left + h.width() / 2) : 0) + "px",
                    top: d.top + "px"
                }
            }
            a(this).css(j).find("a.faker").css(g);
            var k = a(this).offset();
            var l = a("body");
            var m = {
                left: k.left,
                top: k.top,
                bottom: l.height() - (k.top + a(this).outerHeight()),
                right: l.width() - (k.left + a(this).outerWidth())
            };
            if (m.right < e) {
                j.left = c.offset().left + c.outerWidth() - i + "px";
                a(this).addClass("rightSide");
                g.left = "auto";
                g.right = "0";
                a(this).css(j).find("a.faker").css(g)
            }
            this.hide()
        };
        var h = function (a, b) {
            g.call(a, b);
            a.fadeIn("fast")
        };
        this.each(function (c) {
            var g = a(this);
            var i = g.children();
            var j = i.map(function () {
                return e(this)
            });
            g.data({oneLineMenuId: (new Date).getTime() + c});
            var k = f(j);
            var l = d(b.expanderText, b.expanderClass);
            l.data({"oneLineMenu.dropdown": k});
            k.data({"oneLineMenu.expander": l});
            l.on("click.oneLineMenuExpand", function (b) {
                b.preventDefault();
                a(this).addClass("active");
                h(a(this).data("oneLineMenu.dropdown"), this)
            });
            k.on("mouseleave.oneLineMenuClose", function () {
                a(this).fadeOut("fast");
                a(this).data("oneLineMenu.expander").removeClass("active")
            });
            g.append(l);
            var m = "resize." + g.data("oneLineMenuId");
            a(window).on(m, {items: i.toArray(), expander: l, dd: k}, function (c) {
                var d = c.data.items;
                var e = c.data.expander;
                var f = d.length;
                a(d).show();
                e.show();
                k.find("li").removeClass("hidden").show();
                while (e.position().left + e.outerWidth() > g.width()) {
                    f--;
                    a(d[f]).hide();
                    if (f == 0) {
                        break
                    }
                }
                var h = k.find("li");
                h.slice(0, f).addClass("hidden").hide();
                if (h.filter(":not(li.hidden)").size() === 0) {
                    e.hide()
                } else {
                    e.show();
                    e.text(b.allHiddenText && h.filter(":not(li.hidden)").length == h.length ? b.allHiddenText : b.expanderText)
                }
            });
            a(window).on("load", function () {
                a(this).trigger(m)
            }).trigger(m)
        })
    }
})(jQuery);
(function (a, b, c, d) {
    a.fn.passShower = function (b) {
        var c = {show: false};
        b = a.extend(c, b);
        return this.each(function () {
            var c = a('<span style="position: relative" />').css({display: a(this).css("display"), width: "100%"});
            a(this).wrap(c);
            var d = a('<a href="#" class="font-icon- showPassTrigger showPass"></a>');
            var e = a('<input type="text" />').attr("placeholder", a(this).attr("placeholder")).attr("style", a(this).attr("value")).attr("placeholder", a(this).attr("style")).hide();
            a(this).after(d).after(e);
            a(this).data({pass: e, trigger: d});
            e.data({pass: this});
            a(this).on("showPass", function () {
                a(this).hide().data("pass").show();
                a(this).data("trigger").removeClass("showPass").addClass("hidePass")
            }).on("hidePass", function () {
                a(this).show().data("pass").hide();
                a(this).data("trigger").removeClass("hidePass").addClass("showPass")
            }).on("togglePassState", function () {
                if (a(this).is(":visible")) {
                    a(this).trigger("showPass")
                } else {
                    a(this).trigger("hidePass")
                }
            });
            d.on("click", a(this), function (a) {
                a.preventDefault();
                a.data.trigger("togglePassState")
            });
            var f = function () {
                a(a(this).data("pass")).val(a(this).val())
            };
            a(this).on("keyup", f);
            e.on("keyup", f);
            if (b.show) {
                a(this).trigger("showPass")
            }
        })
    }
})(jQuery, window, document, undefined);
(function (a) {
    var b = function (a, b, c) {
        this.using = [];
        this.deferred = [];
        this.onAllocateCol = a;
        this.onDeffer = b || function () {
            };
        this.onObtain = c || function () {
            }
    };
    b.prototype = {
        getCol: function (a) {
            return this.using[a]
        }, obtainCol: function () {
            if (this.deferred.length < 1) {
                this.deferred.push(this.onAllocateCol())
            }
            var a = this.deferred.shift();
            this.using.push(a);
            this.onObtain(a);
            return a
        }, deffer: function () {
            var a = this.using.splice(-1, 1);
            this.deferred.unshift(a[0]);
            this.onDeffer(a[0])
        }, defferAll: function () {
            while (this.using.length) {
                this.deffer()
            }
        }, getUsingCols: function () {
            return a.makeArray(this.using)
        }, count: function () {
            return this.using.length + this.deferred.length
        }
    };
    var c = function (a, b, d) {
        var e = b / a;
        if (e > d) {
            return c(a + 1, b, d)
        } else {
            return a
        }
    };
    var d = function (b, d) {
        var e = a(this).width();
        var f = c(1, e, b.maxWidth);
        var g = 100 / f + "%";
        if (!a(this).data("cols") || a(this).data("cols") !== f) {
            a(this).data("cols", f);
            var i = a(this).data("pylonPool");
            i.defferAll();
            while (f > 0) {
                i.obtainCol().css("width", g);
                f--
            }
            h.call(this, a(a(this).data("$els")), b.keepOrder, b.colFilter)
        }
    };
    var e = function (b) {
        h.call(this, a(a(this).data("$els")), b.keepOrder, b.colFilter)
    };
    var f = function (c) {
        var d = a(this);
        d.addClass("pyloned");
        var e = new b(function () {
            return a('<div class="pylonCol" style="float: left"></div>').appendTo(d)
        }, function (b) {
            a(b).hide()
        }, function (b) {
            a(b).show()
        });
        a(this).data({pylonInitiated: true});
        a(this).data({pylonPool: e});
        var f = a(this).find(c.elements).get();
        if (c.sortEls) {
            f.sort(c.sortEls)
        }
        a(this).data({$els: f})
    };
    var g = function (b, c) {
        if (b.sortEls) {
            c.sort(b.sortEls)
        }
        a(this).data("$els", a(this).data("$els").concat(c.get()))
    };
    var h = function (a, b, c) {
        if (b) {
            k.call(this, a)
        } else {
            j.call(this, a, c)
        }
    };
    var i = function (a) {
        var b = 0;
        var c = a[b].height();
        for (var d = 0; d < a.length; d++) {
            if (a[d].height() < c) {
                b = d;
                c = a[d].height()
            }
        }
        return a[b]
    };
    var j = function (b, c) {
        var d = a(this).data("pylonPool");
        var e = d.getUsingCols();
        var f = a(e[0]).parent();
        f.css("height", f.height() + "px");
        b.hide();
        b.each(function () {
            i(c ? c(this, d) : e).append(a(this).show())
        });
        f.css("height", "auto")
    };
    var k = function (b) {
        var c = a(this).data("pylonPool");
        var d = c.getUsingCols();
        var e = d.length;
        var f = 0;
        b.each(function () {
            if (f >= e) {
                f = 0
            }
            d[f].append(this);
            f++
        })
    };
    a.fn.pylon = function (b) {
        var c = {maxWidth: 265, minWidth: 200, elements: ">", keepOrder: true, maxCols: 4};
        b = a.extend(c, b);
        return this.each(function () {
            f.call(this, b);
            a(this).on("pylonIt", function () {
                d.call(this, b, a(a(this).data("$els")).size())
            }).on("rebuildPylon", function (a, c) {
                if (c) {
                    g.call(this, b, c)
                }
                e.call(this, b)
            }).on("cleanCache", function () {
                a(this).data({$els: []})
            }).on("clean", function () {
                a(a(this).data("$els")).remove();
                a(this).trigger("cleanCache")
            }).trigger("pylonIt");
            a(window).on("resize", this, function (b) {
                a(b.data).trigger("pylonIt")
            })
        })
    }
})(jQuery);
(function (a) {
    var b = function (b) {
        this.maxSymbols = 0;
        this.select = a(b);
        this.$el = a('<span class="customSelect"><span class="customSelected"></span><span class="arr font-icon-arr-down"></span></span>');
        this.generateDropbox();
        this.select.data("CustomSelect", this).on("val", function (b, c) {
            a(this).data("CustomSelect").val(c);
            a(this).trigger("change")
        }).on("focus", function () {
            a(this).data("CustomSelect").focus()
        }).on("blur", function () {
            a(this).data("CustomSelect").blur()
        });
        this.$el.on("click", this, function (a) {
            a.preventDefault();
            a.data.openDropbox()
        }).data("select", this)
    };
    b.prototype = {
        generateDropbox: function () {
            this.dropbox = a('<div class="selectDropdox"><ul></ul></div>').hide();
            this.generateList();
            a("body").append(this.dropbox);
            this.dropbox.on("mouseleave", this, function (a) {
                a.data.closeDropbox()
            });
            a(window).on("scroll", function (b) {
                if (a(".selectDropdox-visible").length) {
                    a(".selectDropdox-visible").hide().removeClass("selectDropdox-visible")
                }
            })
        }, generateList: function () {
            var b = this;
            var c = a(this.select).find("option");
            c.each(function () {
                var c = a("<li></li>");
                var d = a(this).text();
                if (d.length > b.maxSymbols) {
                    b.maxSymbols = d.length;
                    b.maxWord = d
                }
                c.text(d);
                c.attr("data-val", a(this).val());
                b.dropbox.find("ul").append(c);
                c.on("click", b, function (b) {
                    b.preventDefault();
                    b.data.select.trigger("val", a(this).data("val"));
                    b.data.closeDropbox()
                })
            })
        }, val: function (b) {
            if (b !== undefined) {
                this.$el.find(".customSelected").text(a(this.select).find('option[value="' + b + '"]').text());
                this.dropbox.find("li.selected").removeClass("selected");
                this.dropbox.find('[data-val="' + b + '"]').addClass("selected");
                return this.select.val(b)
            } else {
                return this.select.val()
            }
        }, positionDropbox: function () {
            this.dropbox.css({top: this.$el.offset().top + "px", left: this.$el.offset().left + "px"});
            if (a(window).width() <= 767) {
                this.dropbox.css({
                    top: this.$el.offset().top - this.$el.parents("fieldset").height() + "px",
                    left: this.$el.offset().left + "px"
                })
            }
            this.dropbox.css("padding-top", this.$el.outerHeight(true) + "px")
        }, openDropbox: function () {
            this.positionDropbox();
            this.setMinWidth();
            this.dropbox.addClass("selectDropdox-visible");
            this.dropbox.show().find("ul").hide().slideDown("fast")
        }, closeDropbox: function () {
            this.dropbox.find("ul").slideUp("fast", function () {
                a(this).parent().hide()
            });
            this.dropbox.removeClass("selectDropdox-visible")
        }, setMinWidth: function () {
            this.$el.find(".customSelected").text(this.maxWord);
            this.$el.css("min-width", this.$el.outerWidth() + "px");
            this.dropbox.css("min-width", this.$el.outerWidth() + "px");
            this.val(this.select.val());
            if (a(window).width() <= 767) {
                this.dropbox.css("min-width", this.$el.width() + 2 + "px");
                this.dropbox.css("max-width", this.$el.width() + 2 + "px")
            }
        }, focus: function () {
            this.$el.addClass("focused")
        }, blur: function () {
            this.$el.removeClass("focused")
        }
    };
    a.fn.customSelect = function () {
        return this.each(function () {
            a(this).wrap('<span style="position: absolute; overflow: hidden; width: 0; height: 0;" />');
            var c = new b(this);
            a(this).parent().after(c.$el);
            c.setMinWidth()
        })
    }
})(jQuery);
(function (a) {
    function b(b, c) {
        b.data("current").removeClass("active").data("content").hide();
        a(c).addClass("active").data("content").show();
        if (a(window).width() < 767) {
            b.data("current").removeClass("active").data("content").show();
            b.data("current").removeClass("active").data("content").slideUp("300");
            a(c).addClass("active").data("content").hide();
            a(c).addClass("active").data("content").delay("400").slideDown("300")
        }
        b.data({current: a(c)})
    }

    a.fn.tabber = function () {
        var c = {tabsSelector: "#tabs a", contentsSelector: "#tabsContents .tabContent"};
        return this.each(function () {
            var d = a(this).data("tabs") || c.tabsSelector;
            var e = a(this).data("tabs-contents") || c.contentsSelector;
            var f = a(this);
            f.data({tabs: f.find(d), contents: f.find(e), current: f.find(d).filter(".active")});
            a.each(f.data("tabs"), function () {
                a(this).data({content: f.data("contents").eq(f.data("tabs").index(a(this)))});
                a(this).on("click.tabChoose", function (c) {
                    c.preventDefault();
                    if (/^#/.test(a(this).attr("href"))) {
                        document.location.hash = a(this).attr("href").replace(/^#/, "")
                    } else {
                        b(f, this)
                    }
                })
            });
            a(window).on("hashchange.tabchange", function () {
                var a = f.data("tabs").filter('[href="' + document.location.hash + '"]');
                if (!a.length) {
                    a = f.data("tabs").first()
                }
                b(f, a)
            });
            if (document.location.hash) {
                a(window).trigger("hashchange.tabchange")
            }
        })
    }
})(jQuery);
(function (a) {
    var b = function (b, c) {
        if (b.theme && b.theme === "white") {
            this.$el = a('<div class="dropdownBox dropdownBox--tooltip"><i style="left: 50%; margin-left: -18px;" class="tail"></i><a class="faker" style="position: absolute; bottom: 100%; left: 0;"></a><div class="dropdownContent txt"></div></div>')
        } else {
            this.$el = a('<div style="top: 30px; left: 50px;" class="tooltip"><span class="f"></span><div class="txt"></div></div>').hide()
        }
        this.$el.appendTo("body");
        this.options = b;
        this.$el.addClass(this.options.className);
        this.rel = c;
        this.id = (new Date).getTime() + "" + parseInt(Math.random() * 100);
        if (this.options.hideEvent || this.options.keepOnTip) {
            this.$el.on(this.options.hideEvent, this, function (a) {
                a.data.hide()
            })
        }
    };
    b.prototype = {
        show: function () {
            var b = this;
            this.position(this.options.position);
            this.$el.fadeIn(100, function () {
                a(document).on("click.tooltip" + b.id, b, function (a) {
                    a.data.hide()
                })
            });
            this.$el.on("click", function (a) {
                a.stopPropagation()
            })
        }, hide: function () {
            a(document).off("click.tooltip" + this.id);
            this.$el.fadeOut(100)
        }, setText: function (a) {
            this.$el.find(".txt").html(a)
        }, position: function (a) {
            this.$el.show();
            var b, c = this.rel.outerHeight(), d = this.rel.outerWidth(), e = this.$el.outerWidth(), f = this.$el.outerHeight();
            var g = this.rel.offset();
            switch (a) {
                case"bottom":
                    b = {left: g.left + d / 2 - e / 2 + "px", top: g.top + c + this.options.offset + "px"};
                    break;
                case"top":
                    b = {
                        left: g.left + d / 2 - e / 2 + "px",
                        top: g.top - (this.$el.outerHeight() + this.options.offset) + "px"
                    };
                    break;
                case"right":
                    b = {left: g.left + d + this.options.offset + "px", top: g.top + c / 2 - f / 2 + "px"};
                    break;
                case"left":
                    b = {left: g.left - (e + this.options.offset) + "px", top: g.top + c / 2 - f / 2 + "px"};
                    break
            }
            var h = this.options.theme === "white" ? "dropdownBox dropdownBox--tooltip" : "tooltip";
            this.$el.css(b).attr("class", h + " " + this.options.className + " " + a);
            var i = {width: d + "px", height: c + this.options.offset + "px"};
            if (a === "top" || a === "bottom") {
                i.marginLeft = -d / 2 + "px"
            } else {
                i.marginTop = -c / 2 + "px"
            }
            if (a === "left") {
                i.marginLeft = this.options.offset + "px"
            } else if (a === "right") {
                i.marginRight = this.options.offset + "px"
            }
            this.$el.hide().find("span.f").css(i);
            if (this.options.hideEvent && !this.options.keepOnTip) {
                this.$el.find("span.f").hide()
            }
        }
    };
    a.fn.tooltip = function (c) {
        var d = {
            position: "bottom",
            offset: 10,
            showEvent: "click",
            hideEvent: "mouseleave",
            timeout: 0,
            className: "",
            keepOnTip: true
        };
        var e = !a("html").hasClass("no-touch");
        return this.each(function () {
            var f = a.extend(d, c);
            if (a(this).data("keep-on-tip") !== undefined) {
                f.keepOnTip = a(this).data("keep-on-tip")
            }
            if (a(this).data("position") !== undefined) {
                f.position = a(this).data("position")
            }
            var g = new b(f, a(this));
            a(this).data("tt", g);
            a(this).on("showTooltip", function (b, c) {
                var d = a(this).data("tt");
                d.setText(c || f.text || a(this).data("tooltip") || a(this).attr("title"));
                d.show();
                if (f.timeout >= 1e3) {
                    setTimeout(function () {
                        d.hide()
                    }, f.timeout)
                }
            });
            a(this).on("hideTooltip", function () {
                a(this).data("tt").hide()
            });
            if (f.showEvent) {
                var h;
                if (e) {
                    h = "click"
                }
                a(this).on(h || a(this).data("show-event") || f.showEvent, function (b) {
                    var c = a(this);
                    if (!e) {
                        b.preventDefault();
                        if (a(this).data("tt").$el.is(":visible")) {
                            b.stopPropagation()
                        }
                    } else {
                        setTimeout(function () {
                            c.trigger("hideTooltip")
                        }, 2e3)
                    }
                    a(this).trigger("showTooltip")
                })
            }
            if (!e && f.hideEvent && !f.keepOnTip) {
                a(this).on(a(this).data("hide-event") || f.hideEvent, function (b) {
                    b.preventDefault();
                    a(this).trigger("hideTooltip")
                })
            }
        })
    }
})(jQuery);
(function (a) {
    var b = function (b) {
        var c = this;
        a.each(b, function (a, b) {
            c[a] = b
        })
    };
    b.prototype.render = function () {
        var b = this;
        this.$el = a('<span class="voterContents">' + this.generateStars() + '<input type="hidden" value="' + this.val + '" name="' + this.name + '" /></span>');
        this.$el.on("vote", this, function (a, b) {
            a.data.setVal(b);
            a.data.$el.trigger("change", b);
            a.data.$el.find("a").removeClass("hovered")
        });
        this.$el.on("mouseleave", this, function (b) {
            if (!b.data.disabled) {
                b.data.displayVal(b.data.getVal());
                a(this).find("a.hovered").removeClass("hovered")
            }
        }).find("a").on("click.voteClick", this, function (b) {
            b.preventDefault();
            if (!b.data.disabled) {
                b.data.$el.trigger("vote", a(this).data("vote"))
            }
        }).on("mouseover", this, function (b) {
            var c = b.data;
            if (!c.disabled) {
                c.hover(a(this).data("vote"))
            }
        });
        var c = this.$el.find("a");
        if (this.showDecode) {
            c.each(function () {
                a(this).tooltip({text: b.decodeValue(a(this).data("vote")), showEvent: "mouseenter", keepOnTip: false})
            })
        }
        this.$el.trigger("vote", this.val);
        this.setDisabled(this.disabled);
        this.setReadonly(this.readonly);
        return this.$el
    };
    b.prototype.setDisabled = function (a) {
        this.disabled = a;
        if (a) {
            this.$el.addClass("disabled").find("input").attr("disabled", true);
            this.$el.find("a").removeAttr("href")
        } else {
            this.$el.removeClass("disabled").find("input").removeAttr("disabled");
            this.$el.find("a").attr("href", "#")
        }
    };
    b.prototype.setReadonly = function (a) {
        this.setDisabled(a);
        if (a) {
            this.$el.addClass("readonly").find("input").attr("readonly", true)
        } else {
            this.$el.removeClass("readonly").find("input").removeAttr("readonly")
        }
    };
    b.prototype.generateStars = function () {
        var a = "";
        for (var b = 0; b < this.max; b++) {
            a += '<a class="font-icon-star" data-vote="' + (b + 1) + '" href="#"></a>'
        }
        return a
    };
    b.prototype.hover = function (a) {
        this.$el.find("a").removeClass("hovered").slice(0, a).addClass("hovered")
    };
    b.prototype.setVal = function (a) {
        this.val = a;
        this.$el.find("a").removeClass("checked").slice(0, a).addClass("checked");
        this.$el.find("input").val(a)
    };
    b.prototype.displayVal = function (a) {
        this.$el.find("a").removeClass("checked").slice(0, a).addClass("checked")
    };
    b.prototype.getVal = function () {
        return this.val
    };
    b.prototype.getValue = function () {
        return this.getVal()
    };
    b.prototype.decodeValue = function (a) {
        if (!a) {
            a = this.getVal()
        }
        return this.decode[a]
    };
    a.fn.voter = function (c) {
        if (c && typeof c === "string" && c === "get") {
            return this.data("voter")
        } else {
            var d = "voter-";
            return this.each(function () {
                if (!a(this).data("voter")) {
                    var c = {
                        val: a(this).data(d + "value") || 0,
                        decode: a(this).data(d + "decode") || null,
                        showDecode: a(this).data(d + "show-decode") || null,
                        max: a(this).data(d + "max") || 5,
                        name: a(this).data(d + "name") || "vote",
                        disabled: typeof a(this).data(d + "disabled") !== "undefined",
                        readonly: typeof a(this).data(d + "readonly") !== "undefined",
                        onChange: a(this).attr("onchange") ? true : false
                    };
                    var e = new b(c);
                    a(this).data({voter: e});
                    a(this).append(e.render());
                    a(this).css({display: "inline-block"}).addClass("voter")
                }
            })
        }
    }
})(jQuery);
jQuery.cookie = function (a, b, c) {
    if (typeof b != "undefined") {
        c = c || {};
        if (b === null) {
            b = "";
            c.expires = -1
        }
        var d = "";
        if (c.expires && (typeof c.expires == "number" || c.expires.toUTCString)) {
            var e;
            if (typeof c.expires == "number") {
                e = new Date;
                e.setTime(e.getTime() + c.expires * 24 * 60 * 60 * 1e3)
            } else {
                e = c.expires
            }
            d = "; expires=" + e.toUTCString()
        }
        var f = c.path ? "; path=" + c.path : "";
        var g = c.domain ? "; domain=" + c.domain : "";
        var h = c.secure ? "; secure" : "";
        document.cookie = [a, "=", encodeURIComponent(b), d, f, g, h].join("")
    } else {
        var i = null;
        if (document.cookie && document.cookie !== "") {
            var j = document.cookie.split(";");
            for (var k = 0; k < j.length; k++) {
                var l = jQuery.trim(j[k]);
                if (l.substring(0, a.length + 1) == a + "=") {
                    i = decodeURIComponent(l.substring(a.length + 1));
                    break
                }
            }
        }
        return i
    }
};
var videoHandler = {
    scriptLoaded: typeof videojs !== "undefined",
    scriptLoading: false,
    queue: [],
    loadedCount: 0,
    scaleDimensions: function (a, b, c) {
        var d = /(w|h)([0-9]+)/gim.match(c);
        if (d && d.length) {
            var e = {};
            if (d[1] == "w") {
                var f = parseInt(d[2]);
                e["width"] = f;
                e["height"] = Math.round(parseInt(b) * (f / parseInt(a)))
            } else {
                var g = parseInt(d[2]);
                e["height"] = g;
                e["width"] = Math.round(parseInt(a) * (g / parseInt(b)))
            }
            return e
        } else {
            return null
        }
    },
    initPlayer: function (a) {
        if (!this.scriptLoaded && !this.scriptLoading) {
            this.include()
        }
        if (!this.scriptLoaded && this.scriptLoading) {
            this.queue.push(a)
        } else {
            this.vJsInit(a)
        }
    },
    vJsInit: function (a) {
        videojs(a, {techOrder: ["html5", "flash", "youtube", "vimeo"]}).ready(function () {
            $("#" + a).data({player: this})
        })
    },
    include: function () {
        var a = this;
        this.scriptLoading = true;
        this.loadVideoJs(function () {
            a.loadPlugins()
        })
    },
    loadVideoJs: function (a) {
        var b = this;
        var c = document.createElement("script");
        c.src = this.videojsSrc;
        c.onload = c.onreadystatechange = function () {
            if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
                b.loadedCount++;
                if (a) {
                    a()
                }
                videojs.options.flash.swf = "/libs/video-js/video-js.swf";
                b.allScriptsLoaded();
                b = null
            }
        };
        document.getElementsByTagName("head")[0].appendChild(c)
    },
    loadPlugins: function () {
        var a = this;
        var b = function (a) {
            if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
                a.loadedCount++;
                a.allScriptsLoaded()
            }
        };
        for (var c = 0; c < this.plugins.length; c++) {
            var d = document.createElement("script");
            d.onload = d.onreadystatechange = function () {
                b(a)
            };
            d.src = this.plugins[c];
            document.getElementsByTagName("head")[0].appendChild(d)
        }
    },
    allScriptsLoaded: function () {
        if (this.loadedCount === this.plugins.length + 1) {
            this.allLoaded()
        }
    },
    allLoaded: function () {
        this.scriptLoaded = true;
        if (this.queue.length > 0) {
            for (var a = 0; a < this.queue.length; a++) {
                this.vJsInit(this.queue[a])
            }
        }
        this.queue = null
    }
};
var initVideos = function () {
    var a = $("video");
    if (a.size() > 0) {
        a.each(function () {
            var a = $(this);
            var b = a.attr("id");
            var c = a.parent();
            if ($(this).data("full-width")) {
                var d = $(this).attr("width");
                var e = $(this).attr("height");
                $(this).data({originalDims: {w: d, h: e}, p: c});
                $(this).removeAttr("width").removeAttr("height");
                c.on("r", {el: this, id: b}, function (a) {
                    var b = $(a.data.el);
                    var c = $(this).find("#" + a.data.id);
                    var d = b.data("originalDims");
                    var e = b.data("p").width();
                    var f = d.h * (e / d.w);
                    c.attr("width", e).attr("height", f).css({height: f + "px", width: e + "px"})
                }).trigger("r");
                if (!window.vTags) {
                    window.vTags = []
                }
                window.vTags.push(b);
                $(window).on("resize." + b, $(this), function (a) {
                    $.each(window.vTags, function (a, b) {
                        $("#" + b).trigger("r")
                    })
                });
                $(window).trigger("resize." + b)
            }
            videoHandler.initPlayer(b)
        })
    }
};
var OneSignal = window.OneSignal || [];
OneSignal.push(["init", {
    appId: "ebb2724d-83b2-45a2-bcf3-64a94a63f06d",
    safari_web_id: "web.onesignal.auto.2eb2c68e-185f-43c2-9c38-4f330d99aa4c",
    allowLocalhostAsSecureOrigin: true,
    autoRegister: false,
    path: "/",
    welcomeNotification: {title: "", message: "  !"},
    promptOptions: {
        showCredit: false,
        actionMessage: "    :",
        exampleNotificationTitleDesktop: " ",
        exampleNotificationMessageDesktop: "   ",
        exampleNotificationTitleMobile: "  ",
        exampleNotificationMessageMobile: "   ",
        exampleNotificationCaption: "(       )",
        acceptButtonText: "".toUpperCase(),
        cancelButtonText: ", ".toUpperCase()
    },
    httpPermissionRequest: {
        modalTitle: "  ",
        modalMessage: "   , ",
        modalButtonText: ""
    },
    notifyButton: {position: "bottom-left", enable: false}
}]);
function sendNotification() {
    OneSignal.push(function () {
        OneSignal.getUserId(function (a) {
            var b = $.trim(a);
            if (b.length) {
                $.ajax({
                    type: "POST",
                    data: {action: "add", controller: "webPush", type: "ajax", token: b},
                    url: "/",
                    dataType: "json",
                    success: function (a) {
                        if (a && a.result) {
                        } else {
                            return
                        }
                    }
                });
                return true
            }
            return false
        })
    })
}
OneSignal.push(function () {
    var a = OneSignal.isPushNotificationsSupported();
    if (a) {
        OneSignal.push(function () {
            OneSignal.isPushNotificationsEnabled(function (a) {
                if (a) {
                    return
                } else {
                    OneSignal.push(["getNotificationPermission", function (a) {
                        if (a != "granted") {
                            var b = $.cookie("onesignal-notification-prompt");
                            $(document).on("click", "#onesignal-popover-cancel-button", function (a) {
                                $.cookie("reject-subscribe", true, 1)
                            });
                            if (b === "dismissed") {
                                if (!$.cookie("reject-subscribe")) {
                                    $.cookie("onesignal-notification-prompt", null)
                                }
                            } else {
                                OneSignal.push(function () {
                                    OneSignal.showHttpPrompt()
                                })
                            }
                            OneSignal.push(function () {
                                OneSignal.on("notificationPermissionChange", function (a) {
                                    var b = a.to;
                                    if (b === "granted") {
                                        sendNotification()
                                    }
                                })
                            });
                            OneSignal.on("customPromptClick", function (a) {
                                var a = permissionChange.result;
                                console.log("Fullscreen Permission Message click result:", a)
                            })
                        }
                    }])
                }
            })
        })
    } else {
        console.log("Push notifications are not supported")
    }
});
(function () {
    var a, b, c, d, e, f, g, h, i;
    window.device = {}, b = window.document.documentElement, i = window.navigator.userAgent.toLowerCase(), device.ios = function () {
        return device.iphone() || device.ipod() || device.ipad()
    }, device.iphone = function () {
        return c("iphone")
    }, device.ipod = function () {
        return c("ipod")
    }, device.ipad = function () {
        return c("ipad")
    }, device.android = function () {
        return c("android")
    }, device.androidPhone = function () {
        return device.android() && c("mobile")
    }, device.androidTablet = function () {
        return device.android() && !c("mobile")
    }, device.blackberry = function () {
        return c("blackberry") || c("bb10") || c("rim")
    }, device.blackberryPhone = function () {
        return device.blackberry() && !c("tablet")
    }, device.blackberryTablet = function () {
        return device.blackberry() && c("tablet")
    }, device.windows = function () {
        return c("windows")
    }, device.windowsPhone = function () {
        return device.windows() && c("phone")
    }, device.windowsTablet = function () {
        return device.windows() && c("touch")
    }, device.fxos = function () {
        return c("(mobile; rv:") || c("(tablet; rv:")
    }, device.fxosPhone = function () {
        return device.fxos() && c("mobile")
    }, device.fxosTablet = function () {
        return device.fxos() && c("tablet")
    }, device.mobile = function () {
        return device.androidPhone() || device.iphone() || device.ipod() || device.windowsPhone() || device.blackberryPhone() || device.fxosPhone()
    }, device.tablet = function () {
        return device.ipad() || device.androidTablet() || device.blackberryTablet() || device.windowsTablet() || device.fxosTablet()
    }, device.portrait = function () {
        return 90 !== Math.abs(window.orientation)
    }, device.landscape = function () {
        return 90 === Math.abs(window.orientation)
    }, c = function (a) {
        return -1 !== i.indexOf(a)
    }, e = function (a) {
        var c;
        return c = new RegExp(a, "i"), b.className.match(c)
    }, a = function (a) {
        return e(a) ? void 0 : b.className += " " + a
    }, g = function (a) {
        return e(a) ? b.className = b.className.replace(a, "") : void 0
    }, device.ios() ? device.ipad() ? a("ios ipad tablet") : device.iphone() ? a("ios iphone mobile") : device.ipod() && a("ios ipod mobile") : device.android() ? device.androidTablet() ? a("android tablet") : a("android mobile") : device.blackberry() ? device.blackberryTablet() ? a("blackberry tablet") : a("blackberry mobile") : device.windows() ? device.windowsTablet() ? a("windows tablet") : device.windowsPhone() ? a("windows mobile") : a("desktop") : device.fxos() ? device.fxosTablet() ? a("fxos tablet") : a("fxos mobile") : a("desktop"), d = function () {
        return device.landscape() ? (g("portrait"), a("landscape")) : (g("landscape"), a("portrait"))
    }, h = "onorientationchange" in window, f = h ? "orientationchange" : "resize", window.addEventListener ? window.addEventListener(f, d, !1) : window.attachEvent ? window.attachEvent(f, d) : window[f] = d, d()
}).call(this);
window.ac = {
    cities: function (field, datum) {
        var _ta, cityField = $(field || "#field-city");
        if (!cityField.length) {
            return false
        }
        if (document.getElementById(datum || "field-city-datum")) {
            _ta = cityField.typeahead({
                name: "cities",
                local: eval(document.getElementById("field-city-datum").innerHTML),
                limit: 10
            })
        } else {
            _ta = cityField.typeahead({
                name: "cities",
                remote: "/?type=ajax&controller=cities&action=autocomplete&term=%QUERY",
                limit: 10
            })
        }
        return _ta.on("change", function () {
            var a = this, b = $(a).data("verified");
            if (!a.value || b !== undefined && String(b) != String(a.value)) {
                cartHelper.getDelivery(false)
            } else {
            }
        })
    }, streets: function (a, b, c) {
        var d = [];
        $.get("https://geocode-maps.yandex.ru/1.x/?callback=?&format=json&geocode=" + encodeURIComponent(["", " ", " " + b].join(", ")), function (a) {
            if (a && a.response && a.response.GeoObjectCollection && a.response.GeoObjectCollection.featureMember) {
                a = a.response.GeoObjectCollection.featureMember.shift();
                a = a.GeoObject;
                if (a.metaDataProperty && a.metaDataProperty.GeocoderMetaData && a.metaDataProperty.GeocoderMetaData.text) {
                    d = a.metaDataProperty.GeocoderMetaData.text.split(", ")
                } else if (a.name) {
                    d.push(a.GeoObject.name)
                }
            }
        }, "json");
        if (d.length < 1) {
            d.push("");
            d.push(" ");
            d.push(" " + b)
        }
        var e = $(c || "#field-street").typeahead("destroy").typeahead({
            name: "streets_" + a,
            remote: {
                url: "https://geocode-maps.yandex.ru/1.x/?callback=?&format=json&geocode=" + d.join(",+") + ",+%QUERY",
                filter: function (a) {
                    var c = [];
                    d = [];
                    d.push("");
                    d.push(" ");
                    d.push(b);
                    if (a && a.response && a.response.GeoObjectCollection) {
                        a = a.response.GeoObjectCollection;
                        var e;
                        if (a.featureMember) {
                            for (var f in a.featureMember) {
                                e = a.featureMember[f];
                                if ($.inArray(e.GeoObject.name, d) < 0) {
                                    c.push({value: e.GeoObject.name})
                                }
                            }
                        }
                    }
                    if (c.length == 1 && d.join(", ").indexOf(c[0].value) > 1) {
                        c = []
                    }
                    return c
                }
            },
            limit: 10
        });
        return e
    }
};
var StackNotifier = function (a) {
    this.defaults = {
        successHeader: "!",
        failHeader: "!",
        successText: "  .",
        failText: " .",
        hideInterval: 2e3,
        useHeader: true,
        containerClass: "notifies_container",
        notifyTemplate: '<div class="notifier">\t\t\t<img class="x" src="//static.delikateska.ru/images/notify_x.gif" alt="" />\t\t\t<div>\t\t\t\t<h5></h5>\t\t\t\t<p></p>\t\t\t</div>\t\t</div>'
    };
    this.stack = [];
    this.options = $.extend(this.defaults, a);
    a = this.options;
    var b = this;
    var c = function () {
        var a = b.stack;
        if (a.length < 1) {
            d()
        }
        return a.pop()
    };
    var d = function () {
        var c = $(a.notifyTemplate);
        c.appendTo(this.container);
        c.hide();
        c.data({header: c.find("h5"), text: c.find("p")});
        c.find("img.x").click(function () {
            f.apply(c)
        });
        c.prependTo(b.container);
        b.stack.push(c)
    };
    var e = function () {
        $(this).fadeTo(0, 0).hide().slideDown("fast").fadeTo("fast", 1)
    };
    var f = function () {
        clearInterval($(this).data("closeTimer"));
        $(this).fadeTo("fast", 0).slideUp("fast", function () {
            b.stack.push(this)
        })
    };
    var g = function (a) {
        var b = $(this);
        b.data({
            closeTimer: setTimeout(function () {
                f.apply(b)
            }, a)
        })
    };
    this.init = function () {
        var b = $('<div class="' + a.containerClass + '" />');
        this.container = b;
        this.n = b;
        b.appendTo("body")
    };
    this.setOption = function (a, b) {
        this.options[a] = b
    };
    this.notify = function (d, f) {
        var h = $(c());
        if (!f) {
            f = {}
        }
        if (!f.hideAfter) {
            f.hideAfter = a.hideInterval
        }
        if (!f.header) {
            f.header = a[d + "Header"]
        }
        if (!f.text) {
            f.text = a[d + "Text"]
        }
        if (typeof f.useHeader == "undefined") {
            f.useHeader = a.useHeader
        }
        if (!f.data) {
            f.data = {}
        }
        h.removeClass("fail").removeClass("success").addClass(d);
        if (f.useHeader) {
            h.data("header").show().html(f.header)
        } else {
            h.data("header").hide()
        }
        h.data("text").html(f.text);
        h.prependTo(b.container);
        e.call(h);
        if (f.hideAfter != "never" && f.hideAfter != "mousemove") {
            g.call(h, f.hideAfter)
        }
        if (f.hideAfter == "never") {
            h.find("img.x").on("click.notifyCloseCallBack", function () {
                if (f.callback) {
                    f.callback.call(f.data)
                }
                $(this).off("click.notifyCloseCallBack")
            })
        }
        if (f.hideAfter == "mousemove") {
            $("html").on("mousemove.stackNotifier", function () {
                g.call(h, 2e3);
                $(this).off("mousemove.stackNotifier")
            })
        }
    };
    this.init();
    return this
};
var notificator = false;
var notify = function (a, b) {
    if (!notificator) {
        notificator = new StackNotifier({hideInterval: 5e3})
    }
    notificator.notify(a, b)
};
var SearchResults = function (a) {
    a = a || {};
    this.url = "/";
    this.title = a.title || "    ";
    this.hint = a.hint || '    .<br /> <span class="mobile-hidden">,       ,      .</span>';
    var b = "";
    var c = "ga('send', 'pageview', '/virtual/search'); ga('send', 'event', 'search-button', 'Iskat');";
    if (!$.cookie("searchResultsHideTooltip"))b = '<div class="tooltip mobile-hidden top"><i></i>,       ,<br/>      !</div>';
    this.template = '<div class="searchResults" style="display: none"><a href="#" class="close"><span></span><span class="mobile-hidden search-close-label"> (esc)</span></a><header class="searchHeader"><div class="fixer"><h2 class="title"></h2><p class="hint"></p></div></header><div class="fixer"><form class="pageSearch huge" onsubmit="ga(\'send\', \'pageview\', \'/virtual/search\'); ga(\'send\', \'event\', \'search-button\', \'Iskat\');" >' + b + '<input type="text" class="search-input" name="query" placeholder="  " /><button class="font-icon-search"></button></form><section class="results"></section></div></div>';
    this.xhr = null;
    this.opened = false;
    this.savedScrollTop = 0;
    this.requestParams = {type: "ajax", controller: "search", action: "index"};
    this.searchOnKey = a.searchOnKey === undefined ? true : a.searchOnKey;
    var d = {
        onOpen: function () {
        }, onClose: function () {
        }, onSearch: function () {
        }
    };
    this.callbacks = $.extend(d, a.callbacks)
};
SearchResults.isCharacterKeyPress = function (a) {
    if (typeof a.which == "undefined") {
        return true
    } else if (typeof a.which === "number" && a.which > 0) {
        return !a.ctrlKey && !a.metaKey && !a.altKey && (a.which >= 48 && a.which <= 90)
    }
    return false
};
SearchResults.prototype = {
    render: function () {
        this.view = $(this.template);
        this.titleEl = this.view.find("header h2.title");
        this.hintEl = this.view.find("header p.hint");
        this.resultsEl = this.view.find("section.results");
        this.input = this.view.find("form input:text");
        this.prevSearch = null;
        this.view.find("a.close").on("click", this, function (a) {
            a.preventDefault();
            a.data.close()
        });
        this.view.find(".tooltip i").on("click", this, function (a) {
            a.preventDefault();
            $(this).parent().fadeOut("fast");
            $.cookie("searchResultsHideTooltip", true, {expires: 30})
        });
        this.input.on("keyup", this, function (a) {
            a.data.search()
        });
        this.view.find("form").on("submit", this, function (a) {
            a.preventDefault();
            a.data.search();
            if ($(window).width() < 767) {
                $(document).find(".pageSearch").find('input[type="text"]').blur()
            }
        });
        this.setTitle(this.title);
        this.setHint(this.hint);
        $("body").append(this.view);
        var a = this;
        if (this.searchOnKey) {
            $(document).on("keydown", this, function (b) {
                if ($(b.target).is($(".searchResult").find("button"))) {
                    a.input.trigger("focus")
                }
                if (!$(b.target).is(":input") && SearchResults.isCharacterKeyPress(b)) {
                    b.data.open();
                    a.input.trigger("focus")
                }
            })
        }
    }, setTitle: function (a) {
        this.titleEl.text(a)
    }, setHint: function (a) {
        this.hintEl.html(a)
    }, setVal: function (a) {
        this.input.val(a)
    }, getVal: function () {
        return this.input.val()
    }, open: function () {
        if (!this.opened) {
            $(document).on("keyup.searchResultsClose", this, function (a) {
                if (a.which === 27) {
                    a.data.close()
                }
            });
            this.savedScrollTop = $(document).scrollTop();
            $(document).scrollTop(0);
            this.view.fadeIn("fast").scrollTop(0);
            this.input.trigger("focus");
            this.callbacks.onOpen(this);
            this.opened = true;
            $(".mainMenu").addClass("pulled");
            $("body").addClass("searching")
        }
    }, close: function () {
        if (this.opened) {
            this.setVal("");
            this.view.fadeOut("fast");
            this.callbacks.onClose(this);
            this.opened = false;
            $(document).off("keydown.searchResultsClose");
            $(".mainMenu").removeClass("pulled");
            $("body").removeClass("searching");
            $(document).scrollTop(this.savedScrollTop)
        }
    }, displayResults: function (a) {
        this.resultsEl.html(a.join(""))
    }, processResults: function (a) {
        return $.map(a, function (a, b) {
            return '<div class="searchResult ' + b + '"> <h2>' + a.title + ":</h2>" + '<div class="resultsWrap"><span class="sliderControls"><span class="bxp"></span><span class="bxn"></span></span><div class="' + b + 'Slider">' + a.result + "</div></div></div>"
        })
    }, search: function () {
        var a = this;
        if (a.timer) {
            clearTimeout(a.timer);
            a.timer = null
        }
        a.timer = setTimeout(function () {
            var b = $.trim(a.getVal());
            if (b && b != a.prevSearch) {
                a.prevSearch = b;
                a.requestParams.value = b;
                a.xhr = $.ajax(a.url, {
                    type: "POST",
                    data: a.requestParams,
                    context: a,
                    dataType: "JSON"
                }).done(function (c) {
                    if (window._searchStatTimeout) {
                        window.clearTimeout(window._searchStatTimeout)
                    }
                    window._searchStatTimeout = window.setTimeout(function () {
                        var d = {
                            type: "ajax",
                            controller: "search",
                            action: "addLog",
                            text: b,
                            source: "page",
                            count_results: c && c.products && c.products.total ? c.products.total : 0
                        };
                        $.ajax(a.url, {type: "POST", data: d, context: a, dataType: "JSON"})
                    }, 1500);
                    a.displayResults(this.processResults(c));
                    a.callbacks.onSearch(this, c);
                    document.location.hash = "!search/" + encodeURIComponent(b);
                    a.xhr = null
                })
            }
        }, 150)
    }
};
(function (window) {
    var sevenCodes = [55, 103];
    var eightCodes = [56, 104];
    var wrongCodes = Array.prototype.concat.call(sevenCodes, eightCodes);
    if ($("#chooseCartPopup").data("show") == 1) {
        $("#chooseCartPopup").fadeIn("fast")
    }
    var $cart_slider = $(".cart-slider");
    var cartSlider = new Swiper("#cartSlider", {
        nextButton: ".swiper-button-next",
        prevButton: ".swiper-button-prev",
        slidesPerView: 5,
        simulateTouch: false,
        slidesPerGroup: 2,
        roundLengths: true,
        breakpoints: {
            1024: {slidesPerView: 3, slidesPerGroup: 3},
            767: {slidesPerView: 3, slidesPerGroup: 3},
            520: {slidesPerView: 2, slidesPerGroup: 2}
        }
    });
    var cartSlider2 = new Swiper("#cartSlider2", {
        nextButton: ".swiper-button-next",
        prevButton: ".swiper-button-prev",
        slidesPerView: 5,
        simulateTouch: false,
        slidesPerGroup: 2,
        roundLengths: true,
        breakpoints: {
            1024: {slidesPerView: 3, slidesPerGroup: 3},
            767: {slidesPerView: 3, slidesPerGroup: 3},
            520: {slidesPerView: 2, slidesPerGroup: 2}
        }
    });
    $("body").on("click", ".del-prod", function (a) {
        a.preventDefault();
        if ($(this).parents("#cartSlider").length) {
            if ($(this).parents("#cartSlider").find(".swiper-wrapper").children(".product").length > 5) {
                setTimeout(function () {
                    cartSlider.update({updateTranslate: true})
                }, 500)
            }
        }
        if ($(this).parents("#cartSlider2").length) {
            if ($(this).parents("#cartSlider2").find(".swiper-wrapper").children(".product").length > 5) {
                setTimeout(function () {
                    cartSlider2.update({updateTranslate: true})
                }, 500)
            }
        }
        $(this).parent().remove();
        var b = $(this).data("type");
        if ($("." + b).size() == 0) {
            if (b == "people_cart") {
                var c = "cookie_cart"
            } else {
                var c = "people_cart"
            }
            var d = [];
            $("." + c).each(function () {
                item = {id: $(this).data("id"), amount: $(this).data("amount")};
                d.push(item)
            });
            sendCartMerge(d)
        }
        $cart_slider.each(function () {
            if ($(this).find(".swiper-wrapper").children(".product").length <= 5) {
                $(this).find(".swiper-wrapper").addClass("swiper-wrapper--to-start");
                $(this).parents(".cart-slider-wrap").find(".swiper-controls-item").hide()
            }
            if ($(this).find(".swiper-wrapper").children(".product").length === 5) {
                if ($(this).hasClass("second")) {
                    cartSlider2.destroy()
                } else {
                    cartSlider.destroy()
                }
            }
        })
    });
    $(".choose-cart, .merge-carts").on("click", function (a) {
        a.preventDefault();
        var b = $(this).data("cart");
        var c = [];
        var d = [];
        $("." + b).each(function () {
            var a;
            var b = $(this).data("id");
            var e = $(this).data("amount");
            if ($(this).data("kit")) {
                a = {kit_id: b, amount: e}
            }
            if ($(this).data("product")) {
                a = {id: b, amount: e}
            }
            if ($(this).data("promocode")) {
                a = {promocode_id: b, amount: e}
            }
            c.push(a);
            d.push(b)
        });
        var e = {};
        var f = {};
        var g = {};
        c.forEach(function (a) {
            if (a.id) {
                if (e.hasOwnProperty(a.id)) {
                    e[a.id] = e[a.id] + a.amount
                } else {
                    e[a.id] = a.amount
                }
            }
            if (a.kit_id) {
                if (f.hasOwnProperty(a.kit_id)) {
                    f[a.kit_id] = f[a.kit_id] + a.amount
                } else {
                    f[a.kit_id] = a.amount
                }
            }
            if (a.promocode_id) {
                if (g.hasOwnProperty(a.promocode_id)) {
                    g[a.promocode_id] = g[a.promocode_id] + a.amount
                } else {
                    g[a.promocode_id] = a.amount
                }
            }
        });
        var h = [];
        var i = [];
        var j = [];
        if (Object.keys(e).length > 0) {
            for (var k in e) {
                h.push({id: k, amount: e[k]})
            }
        }
        if (Object.keys(f).length > 0) {
            for (var k in f) {
                i.push({kit_id: k, amount: f[k]})
            }
        }
        if (Object.keys(g).length > 0) {
            for (var k in g) {
                j.push({promocode_id: k, amount: g[k]})
            }
        }
        var l = [];
        var m = [];
        if (h.length > 0) {
            m.push(h)
        }
        if (i.length > 0) {
            m.push(i)
        }
        if (j.length > 0) {
            m.push(j)
        }
        var l = [].concat.apply([], m);
        sendCartMerge(l)
    });
    function sendCartMerge(a) {
        $.post("/", {type: "ajax", controller: "cart", action: "mergecards", data: a}, function (a) {
            $("#chooseCartPopup").fadeOut("fast");
            window.location.reload()
        }, "json")
    }

    window.hasFlash = false;
    try {
        var flashObject = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
        if (flashObject) {
            window.hasFlash = true
        }
    } catch (a) {
        if (navigator.mimeTypes && navigator.mimeTypes["application/x-shockwave-flash"] != undefined && navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin) {
            window.hasFlash = true
        }
    }
    if (!window.hasFlash) {
        $("#cabinet-share-link").addClass("disabled");
        $("#hasFlash").addClass("disabled");
        $(".has-flash").remove()
    } else {
        $("#cabiner-share-link").removeClass("disabled");
        $("#hasFlash").removeClass("disabled")
    }
    $.fn.positionBy = function (a) {
        var b = this.last();
        var c = $(this).closest(a);
        return {
            top: b.offset().top - c.offset().top + c.scrollTop(),
            left: b.offset().left - c.offset().left + c.scrollLeft()
        }
    };
    $(function () {
        var a = $("#shares");
        if (a.length && window.APRT_DATA) {
            a.on("click", "a", function () {
                try {
                    window.APRT_SEND({pageType: 12, currentProduct: window.APRT_DATA.currentProduct})
                } catch (a) {
                }
            })
        }
        var b = $("#cabMenuItem, #cabMenuItemMobile");
        b.on("click", function () {
            $(".favoriteBlock").hide()
        });
        $("#loginForm").on("submit", function () {
            $(this).find(".tooltip.error").hide();
            var a = $(this).find("input:submit");
            a.attr("disabled", true);
            function b() {
                a.attr("disabled", false)
            }

            setTimeout(b, 3e3)
        });
        $("#regForm").on("submit", function () {
            $(this).find(".tooltip.error").hide();
            var a = $(this).find("input:submit");
            a.attr("disabled", true);
            function b() {
                a.attr("disabled", false)
            }

            setTimeout(b, 3e3)
        });
        $("#order-form").on("submit", function () {
            var a = $(this).find("#siteSubmitButton");
            a.attr("disabled", true);
            function b() {
                a.attr("disabled", false)
            }

            setTimeout(b, 3e3)
        });
        $(document).on("mouseenter", ".catalog_m_item", function () {
            var a = $(this).find("img");
            if (a && a.data("imghover")) {
                a.data("imgoriginal", a.attr("src"));
                var b = new Image;
                b.src = a.data("imghover");
                b.onload = function () {
                    a.attr("src", a.data("imghover"))
                }
            }
        }).on("mouseleave", ".catalog_m_item", function () {
            var a = $(this).find("img");
            if (a && a.data("imgoriginal")) {
                a.attr("src", a.data("imgoriginal"))
            }
        });
        $(".mainMenu table td.cart_cell .button").on("click", function (a) {
            if ($(this).hasClass("nobg")) {
                a.preventDefault()
            }
        });
        $("#submitErrorTrigger").on("click", function (a) {
            a.preventDefault();
            var b = $("#submitErrorPopup");
            if (b.css("display") != "block") {
                b.fadeIn("fast")
            } else {
                b.fadeOut("fast")
            }
        });
        $("#submitErrorPopup a.x").on("click", function (a) {
            a.preventDefault();
            $("#submitErrorPopup").fadeOut("fast")
        });
        $("#submitErrorPopup .underlay").on("click", function () {
            $("#submitErrorPopup").fadeOut("fast")
        });
        var c = $("#oneClick");
        if (c.length) {
            c.find("input:text").mask("+7 999 999-99-99");
            c.on("click", "a.x", function (a) {
                a.preventDefault();
                $(this).closest("#oneClick").fadeOut("fast")
            });
            $("#oneClickTrigger").on("click", function (a) {
                a.preventDefault();
                c.css({
                    left: $(this).parent().offset().left + "px",
                    top: $(this).parent().offset().top + "px"
                }).fadeIn("fast")
            })
        }
        var d = $("#reviewPopup");
        if (d.length) {
            d.on("close", function () {
                $(this).fadeOut("fast")
            }).on("change", ".review-type", function () {
                var a = d.find(".review-for-whom"), b = d.find(".review-hide"), c = d.find("#ratingField"), e;
                switch (this.value) {
                    case"thanks":
                        b.slideDown("fast").find("select").removeAttr("readonly");
                        a.parent().parent().find("label").text(" ");
                        e = a.parent().next().find(".customSelected").text();
                        c.slideDown("fast").find(".voter").data("voter").setDisabled(false);
                        a.parent().next().find(".customSelected").text(e.substr(0, e.length - 1) + "");
                        a.parent().next().data("select").dropbox.find("li").each(function () {
                            var a = $(this).text();
                            $(this).text(a.substr(0, a.length - 1) + "")
                        });
                        break;
                    case"complaint":
                        b.slideDown("fast").find("select").removeAttr("readonly");
                        a.parent().parent().find("label").text(" ");
                        e = a.parent().next().find(".customSelected").text();
                        c.slideDown("fast").find(".voter").data("voter").setDisabled(false);
                        a.parent().next().find(".customSelected").text(e.substr(0, e.length - 1) + "");
                        a.parent().next().data("select").dropbox.find("li").each(function () {
                            var a = $(this).text();
                            $(this).text(a.substr(0, a.length - 1) + "")
                        });
                        break;
                    case"offer":
                        c.slideUp("fast").find(".voter").data("voter").setDisabled(true);
                        b.slideUp("fast").find("select").attr("readonly", "readonly");
                        break
                }
            });
            d.on("change", ".review-for-whom,#review-order_id", function () {
                var a = document.getElementById("review-order_id").value, b = document.getElementById("review-for_whom").value, c = d.find(".managerCard"), e = $("#review-" + a + "-courier"), f = $("#review-" + a + "-manager"), g = {
                    type: "ajax",
                    controller: "reviews",
                    action: "getOrderStaff",
                    order_id: false
                };
                c.hide();
                if (this.id == "review-order_id" && a) {
                    switch (b) {
                        case"courier":
                            if (e.size()) {
                                e.show()
                            } else {
                                g.order_id = a
                            }
                            break;
                        case"manager":
                            if (f.size()) {
                                f.show()
                            } else {
                                g.order_id = a
                            }
                            break
                    }
                    if (g.order_id) {
                        $.post("/", g, function (c) {
                            if (c) {
                                var e = d.find(".review-hide").find("fieldset").eq(0);
                                if (c.courier) {
                                    e.prepend('<figure id="review-' + a + '-courier" class="managerCard small for-courier"' + (b == "courier" ? "" : ' style="display: none;"') + '>\t\t\t\t\t\t\t\t\t\t\t<img src="' + c.courier.photo + '" />\t\t\t\t\t\t\t\t\t\t\t<figcaption>\t\t\t\t\t\t\t\t\t\t\t\t<span> :</span> ' + c.courier.fio + "\t\t\t\t\t\t\t\t\t\t\t</figcaption>\t\t\t\t\t\t\t\t\t\t</figure>")
                                }
                                if (c.manager) {
                                    e.prepend('<figure id="review-' + a + '-manager" class="managerCard small for-manager"' + (b == "manager" ? "" : ' style="display: none;"') + '>\t\t\t\t\t\t\t\t\t\t\t<img src="' + c.manager.photo + '" />\t\t\t\t\t\t\t\t\t\t\t<figcaption>\t\t\t\t\t\t\t\t\t\t\t\t<span> :</span> ' + c.manager.fio + "\t\t\t\t\t\t\t\t\t\t\t</figcaption>\t\t\t\t\t\t\t\t\t\t</figure>")
                                }
                            }
                        }, "json")
                    }
                } else {
                    switch (this.value) {
                        case"courier":
                            e.show();
                            break;
                        case"manager":
                            f.show();
                            break
                    }
                }
            });
            d.find("a.x").on("click", function (a) {
                a.preventDefault();
                d.trigger("close")
            });
            d.find(".underlay").on("click", function () {
                d.trigger("close")
            });
            $(document).on("keyup", function (a) {
                if (a.which === 27) {
                    d.trigger("close")
                }
            });
            $("[data-feedback-window]").on("click", function (a) {
                a.preventDefault();
                var b = $(this), c = $("#reviewPopup");
                if (b.data("order-id")) {
                    $.post("/", {
                        type: "ajax",
                        controller: "cabinet",
                        action: "orderReview",
                        id: b.data("order-id")
                    }, function (a) {
                        if (a && a.result) {
                            $("#reviewForm").replaceWith(a.form);
                            c.fadeIn("fast");
                            $("[data-custom-select]").customSelect();
                            $("[data-voter]").voter()
                        }
                    }, "json")
                } else {
                    if (c.css("display") != "block") {
                        c.fadeIn("fast")
                    } else {
                        c.fadeOut("fast")
                    }
                }
            })
        }
        var e = $("#up").on("click", function (a) {
            a.preventDefault();
            $("body,html").animate({scrollTop: 0}, "fast")
        });
        $(window).on("scroll", function () {
            if (e.is(":hidden") && $(window).scrollTop() > 40) {
                if (!e.is(":animated")) {
                    e.fadeIn("fast")
                }
            } else if (e.is(":visible") && $(window).scrollTop() <= 40) {
                e.fadeOut("fast")
            }
        });
        numeral.language("ru");
        if ($("nav.catalogMenu").size() > 0) {
            $("nav.catalogMenu a.root span").on("click", function (a) {
                a.preventDefault();
                a.stopPropagation();
                if (!$(this).hasClass("opened")) {
                    $(this).attr("class", "opened font-icon-arr_up").parent().next("ul.subcategories").stop().slideDown("fast");
                    $(this).attr("class", "opened font-icon-arr_up").parent().next("ul.subcategories").stop().slideDown("fast")
                } else {
                    $(this).attr("class", "font-icon-arr-down").parent().next("ul.subcategories").stop().slideUp("fast")
                }
            })
        }
        var f = $("#loginPopup");
        if (f.size() > 0) {
            f.find("div.underlay").on("click", function () {
                f.fadeOut("fast")
            });
            $(".js-popup-close").on("click", function () {
                f.fadeOut("fast")
            });
            f.on("click", ".tabs a", function (a) {
                a.preventDefault();
                var b = $("#is_authorised").val();
                if (!$(this).hasClass("active")) {
                    if ($(this).hasClass("login")) {
                        f.find("#loginTab").slideDown("fast").find("form input:first").trigger("focus");
                        f.find("#regTab").slideUp("fast");
                        if ($(".favoriteBlock").css("display") !== "none") {
                            f.find(".popupWin").css({width: "730px"})
                        }
                    } else {
                        f.find("#loginTab").slideUp("fast");
                        f.find("#regTab").slideDown("fast").find("form input:first").trigger("focus");
                        f.find(".popupWin").css({width: "530px"});
                        if ($(this).parents("#loginPopup").find(".bonusBlock").length) {
                            f.find(".popupWin").css({width: "730px"})
                        }
                    }
                } else if ($(".favoriteBlock").css("display") == "none") {
                    f.find(".popupWin").css({width: "530px"})
                } else {
                    f.find(".popupWin").css({width: "730px"})
                }
                $(this).siblings("a.active").removeClass("active");
                $(this).addClass("active")
            });
            $(document).on("login", function (a, b) {
                if (b) {
                    f.find(".tabs a." + b).trigger("click")
                }
                f.fadeIn("fast");
                f.find("form:visible input:first").trigger("focus")
            });
            if (!b.hasClass("authorized")) {
                b.on("click", function (a) {
                    a.preventDefault();
                    $(document).trigger("login", [$("#loginCurrentTab").val()])
                })
            }
            if (window.location.hash.indexOf("login") > 0) {
                $(document).trigger("login");
                var g = /login&return=(.*)/.exec(window.location.hash);
                if (g) {
                    $("#login_ret").val(g[1])
                }
            }
        }
        function h(a, b, c) {
            if (window.location.hash.length > 0) {
                history.pushState("", document.title, window.location.pathname)
            }
            b = typeof b == "undefined" ? false : b;
            if (typeof a == "undefined" || !a) {
                a = top.window.location.href.split("/");
                a.shift();
                a.shift();
                a.shift();
                a = "/" + a.join("/")
            }
            if (a) {
                $("#login_ret").val(a)
            }
            $(document).trigger("login");
            if (b) {
                $("#loginPopup").find(".tabs").find(".reg").trigger("click")
            } else {
                $("#loginPopup").find(".tabs").find(".login").trigger("click")
            }
            if (c) {
                $("#loginPopup").find("#login_email").val(c)
            }
            return false
        }

        window["try2login"] = h;
        function i(a) {
            var b = a.which;
            var c;
            var d = $(this).data("errorId");
            var e = d ? $("#" + d) : $(this).parent().find(".error");
            if (!e.length) {
                e = $('<span class="error" />').appendTo($(this).parent())
            }
            if (typeof this.anarchistCount !== "number") {
                this.anarchistCount = 0
            }
            if ($(this).val().length <= 2 && a.keyCode == 8) {
                a.preventDefault();
                return false
            }
            var f = a.target.selectionStart;
            if (f <= 3 && wrongCodes.indexOf(b) > -1) {
                this.anarchistCount++;
                c = sevenCodes.indexOf(b) > -1 ? "7" : "8";
                if (this.anarchistCount >= 3) {
                    e.show().text("      " + c)
                }
                return false
            }
            e.hide().text("");
            this.anarchistCount = 0
        }

        var j = $("input.phoneMask");
        if (j.size() > 0) {
            j.mask("+7 999 999-99-99");
            j.each(function (a) {
                if ($(this).val().length === 0) {
                    $(this).on("focus", function (a) {
                        $(this).val("+7")
                    })
                }
            });
            $(document).on("keydown", "input.phoneMask", i)
        }
        var k = $("input.birthdayMask");
        if (k.size() > 0) {
            k.mask("99.99.9999")
        }
        $(window).on("resize", function (a) {
            if ($(window).width() < 767) {
                $(".one-line-mobile-destroy").remove();
            }
        });
        if ($(window).width() < 767) {
            $(".one-line-mobile-destroy").remove()
        }
        $("#expand").oneLineMenu({expanderText: "", allHiddenText: "", expanderClass: "dropdown"});
        $("[data-dropdown-content]").dropdown();
        try {
            $("[data-voter]").voter()
        } catch (a) {
        }
        try {
            $("[data-custom-checkbox]").checkbox()
        } catch (a) {
        }
        try {
            $("[data-custom-select]").customSelect()
        } catch (a) {
        }
        try {
            $("[data-passShower]").passShower()
        } catch (a) {
        }
        try {
            $("[data-tooltip]").tooltip()
        } catch (a) {
        }
        try {
            $("[data-pylon]").each(function () {
                $(this).pylon($(this).data("pylon"))
            })
        } catch (a) {
        }
        $(".call_cell a.button").on("click", function (a) {
            a.preventDefault();
            a.stopPropagation();
            $(this).addClass("active");
            var b = $(this).offset();
            var c = $("#callPopup").show();
            c.css({
                top: b.top + $(this).outerHeight() + 15 + "px",
                left: b.left - c.outerWidth() / 2 + $(this).outerWidth() / 2 + "px"
            });
            c.hide();
            c.fadeIn("fast");
            c.find("input:first").trigger("focus");
            $("body").on("click.callPopup touchstart.callPopup", function () {
                $("#callPopup").trigger("mouseleave")
            });
            ga("send", "event", "  ", "click", " ")
        });
        $("#callPopup").on("mouseleave", function () {
            $(this).fadeOut("fast");
            $(".call_cell a.button").removeClass("active");
            $("body").off("click.callPopup touchstart.callPopup")
        }).on("click touchstart", function (a) {
            a.stopPropagation()
        });
        initQA();
        initCook();
        initRecipes();
        recipePage.init();
        initArticles();
        articlePage.init();
        initEvents();
        initTestDrives();
        initContests();
        initReviews();
        ordersInit();
        orderFormInit();
        commentsBlockInit();
        autosaver.init();
        initVideos();
        initGallery();
        catalogBanners.init();
        voteForReview.init();
        recipeAddInit();
        if (b.size() && b.hasClass("authorized")) {
            ga("set", "dimension1", "authorized")
        } else {
            ga("set", "dimension1", "guest")
        }
        var l = $("#catalogRubricsExpandTrigger");
        var m = $("#catalogRubricsExpand");
        if (l.length) {
            l.on("click", function (a) {
                a.preventDefault();
                var b;
                var c = m.height();
                m.toggleClass("expanded");
                b = m.height();
                m.toggleClass("expanded").css("max-height", "none").height(c);
                m.animate({height: b + "px"}, "fast", function () {
                    m.toggleClass("expanded");
                    m.removeAttr("style");
                    if (m.hasClass("expanded")) {
                        $(this).text("").addClass("opened")
                    } else {
                        $(this).text(" ").removeClass("opened")
                    }
                }.bind(this))
            });
            $(window).on("resize.rubricsExpandCheck", function () {
                if (!m.hasClass("expanded")) {
                    if (m.children(".catalogHeaderCategories__inner__checker").height() <= m.height()) {
                        l.hide()
                    } else {
                        l.show()
                    }
                }
            }).trigger("resize.rubricsExpandCheck")
        }
    });
    var initGallery = function () {
        var a = $(".popup-gallery");
        if (a.length > 0) {
            a.magnificPopup({
                delegate: "a",
                type: "image",
                tLoading: " ",
                mainClass: "mfp-img-mobile",
                gallery: {enabled: true, navigateByImgClick: true, tCounter: "", preload: [0, 1]},
                image: {tError: '<a href="%url%">The image #%curr%</a> could not be loaded.'}
            })
        }
        var b = $("a.lightbox");
        if (b.length) {
            b.magnificPopup({
                type: "image",
                tLoading: " ",
                mainClass: "mfp-img-mobile",
                image: {tError: '<a href="%url%">The image #%curr%</a> could not be loaded.'}
            })
        }
        var c = $(".lightbox-gallery");
        if (c.length > 0) {
            c.each(function () {
                $(this).magnificPopup({
                    delegate: ".js-review-img__item",
                    tLoading: " ",
                    type: "image",
                    mainClass: "mfp-img-mobile",
                    gallery: {enabled: true, navigateByImgClick: true, tCounter: "", preload: [0, 1]},
                    callbacks: {
                        change: function (a) {
                        }
                    },
                    image: {tError: '<a href="%url%">The image #%curr%</a> could not be loaded.'}
                })
            });
            $(".js-review-video__item").each(function () {
                $(this).magnificPopup({type: "inline", midClick: true, mainClass: "video-popup-class"})
            });
            $(document).on("click", ".js-review-img__item--video-unuploaded", function (a) {
                a.preventDefault();
                $(this).css({width: "115px"});
                $(this).find(".review-with-video--convertation").slideDown(300)
            })
        }
    };
    var catalogBanners = {
        ttr: 10, init: function () {
            var container = $("[data-banners-container]"), items = container.find(".product"), banners = $(".catalogBanner"), banner, occupied = [], position, temp;
            this.ttr = container.data("banners-rotate");
            if (items.size() > 0 && banners.size() > 0) {
                items.addClass("processing");
                banners.each(function () {
                    banner = $(this);
                    banner.addClass("processing");
                    position = banner.data("position");
                    if (banner.data("position") < items.size()) {
                        items.eq(banner.data("position") - 1).before(banner)
                    } else {
                        position = "last"
                    }
                    if (!occupied[position]) {
                        banner.data("items", [{
                            title: banner.find(".banner-title").html(),
                            image: banner.find("img").attr("src"),
                            link: banner.find("a").attr("href")
                        }]);
                        occupied[position] = banner;
                        banner.removeClass("hidden")
                    } else {
                        temp = occupied[position].data("items");
                        if (!temp) {
                            temp = []
                        }
                        temp.push({
                            title: banner.find(".banner-title").html(),
                            image: banner.find("img").attr("src"),
                            link: banner.find("a").attr("href")
                        });
                        occupied[position].data("items", temp);
                        occupied[position].data("total", eval(occupied[position].data("total") + 1));
                        temp = new Image;
                        temp.src = banner.find("img").attr("src");
                        banner.remove()
                    }
                    items = container.find(".processing")
                });
                items.removeClass("processing");
                banners = $(".catalogBanner");
                banners.each(function () {
                    banner = $(this);
                    if (banner.data("total") > 1) {
                        window.setTimeout(function () {
                            catalogBanners.rotate(banner)
                        }, eval(catalogBanners.ttr * 1e3))
                    }
                })
            }
            return false
        }, rotate: function (banner) {
            var data = banner.data("items"), current;
            if (parseInt(banner.data("current")) == parseInt(banner.data("total"))) {
                banner.data("current", 1)
            } else {
                banner.data("current", eval(banner.data("current") + 1))
            }
            current = banner.data("current") - 1;
            current = data[current > 0 ? current : 0];
            if (current) {
                banner.find(".banner-title").html(current.title);
                banner.find("img").attr("src", current.image);
                banner.find("a").attr("href", current.link);
                window.setTimeout(function () {
                    catalogBanners.rotate(banner)
                }, eval(catalogBanners.ttr * 1e3))
            }
            return false
        }
    };
    var initCook = function () {
        var a = $("#cook"), b = $("#moreCook"), c = $("#cook-search-text");
        if (b.size() > 0) {
            b.on("click", function (a) {
                a.preventDefault();
                g()
            })
        }
        c.on("keyup", function () {
            var a = $(this).data("timer");
            if (a) {
                clearTimeout(a)
            }
            a = setTimeout(function () {
                b.data("next-page", 1);
                g(true)
            }, 300);
            $(this).data("timer", a);
            return false
        });
        bindEventCardsEvents(a);
        if (a.size() > 0 && top.window.location.hash.indexOf("!") > 0) {
            a.trigger("clean").html("");
            b.hide();
            b.data("next-page", 1);
            var d = top.window.location.hash.split("!")[1], e;
            d = d.replace(/(^\/|$\/)/gim, "").split("/");
            for (var f in d) {
                e = d[f].split("-");
                if (e.length > 1) {
                    e = [e.shift(), e.join("-")]
                } else {
                    e = [e.shift(), ""]
                }
                switch (e[0]) {
                    case"search":
                        c.val(decodeURIComponent(e[1]));
                        break;
                    case"page":
                        b.data("next-page", e[1]);
                        break
                }
            }
            g(true)
        }
        function g(d) {
            d = d === undefined ? false : d;
            var e = {type: "ajax", controller: "cook", action: "more"};
            var f = [], g;
            if (g = $.trim(c.val())) {
                e.search = decodeURIComponent(g);
                f.push("search-" + g)
            }
            if (b.data("next-page") > 1) {
                e.page = b.data("next-page");
                f.push("page-" + e.page)
            }
            if (f.length) {
                top.window.location.hash = "!/" + f.join("&")
            } else if (top.window.location.hash.length) {
                top.window.location.hash = "!items"
            }
            getMore.call(this, e, {filter: "article.cookCard", appendTo: "#cook", moreSelector: b}, function (b) {
                $("[data-voter]").voter();
                if (b) {
                    if (d) {
                        a.trigger("clean").trigger("rebuildPylon", [b])
                    } else {
                        a.trigger("rebuildPylon", [b]);
                        $("html,body").animate({scrollTop: $(b[0]).offset().top}, "slow")
                    }
                }
            })
        }

        if (a.size() > 0) {
            a.pylon({
                minWidth: 320, maxWidth: 400, keepOrder: true, colFilter: function (a, b) {
                    var c = b.getUsingCols();
                    if ($(a).hasClass("calEvent")) {
                        return $(c).last()
                    }
                    if ($(a).hasClass("article")) {
                        return $(c).last()
                    }
                    return c
                }
            })
        }
    };
    var initRecipes = function () {
        var a = $("#recipes"), b = $("#moreRecipes"), c = $("#recipes-search-text");
        if (b.size() > 0) {
            b.on("click", function (a) {
                a.preventDefault();
                i()
            })
        }
        var d = function (c) {
            var d = $("#recipes-filters");
            if (d.size() > 0) {
                if (c) {
                    d.find("[data-dropdown-content]").dropdown()
                }
                d.find("a.filter").each(function () {
                    var c = $(this), d = $(c.data("dropdown-content"));
                    if (d.size() > 0) {
                        d.find("a").on("click", function (d) {
                            d.preventDefault();
                            a.trigger("clean");
                            c.data("current", $(this).data("id")).html($(this).html()).trigger("hideDropdown");
                            b.data("next-page", 1);
                            i(true)
                        })
                    }
                })
            }
        };
        d(false);
        c.on("keyup", function () {
            var c = $(this).data("timer");
            if (c) {
                clearInterval(c)
            }
            c = setTimeout(function () {
                a.trigger("clean");
                b.data("next-page", 1);
                i(true);
                return false
            }, 300);
            $(this).data("timer", c)
        });
        if (a.size() > 0 && top.window.location.hash.indexOf("!") > 0) {
            a.trigger("clean");
            b.data("next-page", 1).hide();
            var e = top.window.location.hash.split("!")[1], f;
            e = e.replace(/(^\/|$\/)/gim, "").split("/");
            for (var g in e) {
                f = e[g].split("-");
                if (f.length > 1) {
                    f = [f.shift(), f.join("-")]
                } else {
                    f = [f.shift(), ""]
                }
                switch (f[0]) {
                    case"search":
                        c.val(decodeURIComponent(f[1]));
                        break;
                    case"page":
                        b.data("next-page", f[1]);
                        break;
                    default:
                        var h = "#filter" + f[0].substr(0, 1).toUpperCase() + f[0].substr(1);
                        $(h + "-a").data("current", f[1]).html($(h).find('a[data-id="' + f[1] + '"]').html());
                        break
                }
            }
            i(true)
        }
        function i(e, f) {
            f = typeof f == "undefined" ? false : f;
            var e = $.extend({type: "ajax", controller: "recipes", action: "more"}, e);
            var g = [], h;
            if (h = $("#filterBludo-a").data("current")) {
                e.bludo = h;
                g.push("bludo-" + h)
            }
            if (h = $("#filterObrabotka-a").data("current")) {
                e.obrabotka = h;
                g.push("obrabotka-" + h)
            }
            if (h = $("#filterCuisine-a").data("current")) {
                e.cuisine = h;
                g.push("cuisine-" + h)
            }
            if (h = $("#filterIngredients-a").data("current")) {
                e.ingredients = h;
                g.push("ingredients-" + h)
            }
            if (h = $("#filterSlozhnost-a").data("current")) {
                e.slozhnost = h;
                g.push("slozhnost-" + h)
            }
            if (h = $("#filterNaznachenie-a").data("current")) {
                e.naznachenie = h;
                g.push("naznachenie-" + h)
            }
            if (h = c.val()) {
                e.search = decodeURIComponent(h);
                g.push("search-" + h)
            }
            if (b.data("next-page") > 1) {
                e.page = b.data("next-page");
                g.push("page-" + e.page)
            }
            if (b.data("params") != "undefined") {
                e = $.extend(e, b.data("params"))
            }
            if (g.length) {
                top.window.location.hash = "!/" + g.join("/")
            } else if (top.window.location.hash.length) {
                top.window.location.hash = "!items"
            }
            getMore.call(this, e, {filter: "article.recipe", appendTo: "#recipes", moreSelector: b}, function (b) {
                if (b) {
                    if (f) {
                        a.trigger("clean").trigger("rebuildPylon", [b])
                    } else {
                        a.trigger("rebuildPylon", [b]);
                        $("html,body").animate({scrollTop: $(b[0]).offset().top}, "slow")
                    }
                    $(b).find("[data-voter]").voter()
                }
                d(true)
            })
        }
    };
    var initArticles = function () {
        var a = $("#articles"), b = $("#moreArticles"), c = $("#articles-search-text");
        if (b.size() > 0) {
            b.on("click", function (a) {
                a.preventDefault();
                g()
            })
        }
        c.on("change", function () {
            b.data("next-page", 1);
            g(true);
            return false
        });
        if (a.size() > 0 && top.window.location.hash.indexOf("!") > 0) {
            a.trigger("clean");
            b.hide();
            b.data("next-page", 1);
            var d = top.window.location.hash.split("!")[1], e;
            d = d.replace(/(^\/|$\/)/gim, "").split("/");
            for (var f in d) {
                e = d[f].split("-");
                if (e.length > 1) {
                    e = [e.shift(), e.join("-")]
                } else {
                    e = [e.shift(), ""]
                }
                switch (e[0]) {
                    case"search":
                        c.val(decodeURIComponent(e[1]));
                        break;
                    case"page":
                        b.data("next-page", e[1]);
                        break
                }
            }
            g(true)
        }
        function g(d) {
            d = typeof d == "undefined" ? false : d;
            var e = {type: "ajax", controller: "articles", action: "more"};
            var f = [], g;
            if (g = c.val()) {
                e.search = decodeURIComponent(g);
                f.push("search-" + g)
            }
            if (b.data("next-page") > 1) {
                e.page = b.data("next-page");
                f.push("page-" + e.page)
            }
            if (f.length) {
                top.window.location.hash = "!/" + f.join("/")
            } else if (top.window.location.hash.length) {
                top.window.location.hash = "!items"
            }
            getMore.call(this, e, {filter: "article.article", appendTo: "#articles", moreSelector: b}, function (b) {
                if (b) {
                    if (d) {
                        a.trigger("clean").trigger("rebuildPylon", [b])
                    } else {
                        a.trigger("rebuildPylon", [b]);
                        $("html,body").animate({scrollTop: $(b[0]).offset().top}, "slow")
                    }
                }
            })
        }
    };
    var voteForReview = {
        init: function () {
            var a = this;
            $("body").on("click", "[data-review-vote]", function (b) {
                b.preventDefault();
                if ($(this).hasClass("review_votes--voted")) {
                    return
                }
                var c = $(this), d = {
                    id: c.data("id"),
                    object: c.data("object"),
                    value: c.data("review-vote") === "yes" ? "yes" : "no"
                };
                if (!d.id) {
                    console.log("Vote for review error: wrong object id!");
                    return false
                }
                if (!d.object || false === $.inArray(d.object, ["product", "kit", "review"])) {
                    console.log("Vote for review error: wrong object, be careful!");
                    return false
                }
                a.send(c, d)
            });
            $("[data-review-vote]").tooltip({showEvent: null, hideEvent: null, timeout: 2e3, theme: "white"});
            return false
        }, send: function (a, b) {
            $.ajax("/", {
                type: "POST",
                context: a,
                dataType: "JSON",
                data: {type: "ajax", controller: "reviews", action: "voteForReview", data: b}
            }).done(function (a) {
                var c = $(this).parent();
                if (a && a.result) {
                    c.find('[data-review-vote="yes"] [data-count]').text(a.votes.yes);
                    c.find('[data-review-vote="no"] [data-count]').text(a.votes.no);
                    c.find('[data-review-vote="' + b.value + '"]').addClass("review_votes--voted").siblings(".review_votes__btn").removeClass("review_votes--voted");
                    this.trigger("showTooltip", ",   !")
                } else {
                    this.trigger("showTooltip", "  :(")
                }
            });
            return this
        }
    };
    var catalogLoader = $(".js-catalog-loading-controls__link");
    if (catalogLoader.length) {
        var pager = $("#items-pager");
        var itemsListActive;
        var url = catalogLoader.attr("href") + "?format=json";
        $.ajax({type: "GET", url: url}).success(function (a) {
            var b = $(".catalog-loading-controls__items-left-lext");
            var c = a.countItems;
            var d = a.requestParams.epp;
            var e = a.requestParams.page;
            var f = c - d * e;
            var g = $(".catalog-loading-controls__items-num");
            if (f > 0) {
                function h(a, b) {
                    var c = [2, 0, 1, 1, 1, 2];
                    return b[a % 100 > 4 && a % 100 < 20 ? 2 : c[a % 10 < 5 ? a % 10 : 5]]
                }

                var i = h(f, ["", "", ""]);
                var j = h(f, ["", "", ""]);
                g.html(f + " " + i);
                b.html(j + " ")
            } else {
                $(".catalog-loading-controls__items-left").remove()
            }
        }).error(function () {
            var a = $(".catalog-loading-controls__items-num");
            a.html(" ")
        });
        if ($("#items-pager").find("a.active").next("a").length) {
            itemsListActive = pager.find("a.active").next("a").attr("href")
        } else {
            itemsListActive = pager.find("a.active").attr("href");
            $(".js-catalog-loading-controls__link").parents(".catalog-loading-controls").remove()
        }
        catalogLoader.attr("href", itemsListActive);
        $(document).on("click", ".js-catalog-loading-controls__link", function (a) {
            a.preventDefault();
            var b = $(this);
            if (b.hasClass("js-catalog-loading-controls--loading")) {
                return false
            }
            var c = b.attr("href");
            var d = $("#items-pager");
            b.parents(".catalog-loading-controls").find(".catalog-loading-controls__icon").addClass("catalog-loading-controls__icon--loading");
            if (!b.hasClass("js-catalog-loading-controls--loading")) {
                b.addClass("js-catalog-loading-controls--loading")
            }
            $.ajax({type: "GET", url: c + "?format=json"}).success(function (a) {
                var c = a.itemsList;
                var e = $(".catalog-loading-controls__items-left-lext");
                var f = $(".js-catalog-loading-controls__link");
                var g = a.countItems;
                var h = a.requestParams.epp;
                var i = a.requestParams.page;
                var j = g - h * i;
                var k = $(".catalog-loading-controls__items-num");
                if (c) {
                    $(c).insertBefore(".js-catalog-loading")
                }
                $(".catalog-loading-controls__icon").removeClass("catalog-loading-controls__icon--loading");
                d.find("a.active").next("a").addClass("current");
                d.find("a.active").removeClass("active");
                d.find("a.current").addClass("active").removeClass("current");
                var l = d.find("a.active").attr("href");
                history.pushState(null, null, l);
                var m = d.find("a.active").next("a").attr("href");
                if (d.find("a.active").next("a").length === 0) {
                    f.parents(".catalog-loading-controls").remove()
                }
                if (b.hasClass("js-catalog-loading-controls--loading")) {
                    b.removeClass("js-catalog-loading-controls--loading")
                }
                if (j > 0) {
                    function n(a, b) {
                        var c = [2, 0, 1, 1, 1, 2];
                        return b[a % 100 > 4 && a % 100 < 20 ? 2 : c[a % 10 < 5 ? a % 10 : 5]]
                    }

                    var o = n(j, ["", "", ""]);
                    var p = n(j, ["", "", ""]);
                    k.html(j + " " + o);
                    e.html(p + " ")
                } else {
                    $(".catalog-loading-controls__items-left").remove()
                }
                f.attr("href", m)
            }).error(function () {
                $('<p class="error">   </p>').insertBefore(".js-catalog-loading")
            })
        })
    }
    var bindEventCardsEvents = function (a) {
        if (a.size() > 0) {
            if (document.location.hash.indexOf("id-") > -1) {
                var b = /id-([0-9]+)/gim.exec(document.location.hash)[1];
                setTimeout(function () {
                    new TestDriveViewer(a, a.find('.cookCard a[data-id="' + b + '"]').closest(".calEvent"), "/?type=ajax&controller=events&action=event", b).render().getData()
                }, 50)
            }
            a.on("click", ".calEvent a", function (b) {
                b.preventDefault();
                new TestDriveViewer(a, $(this).closest(".calEvent"), "/?type=ajax&controller=events&action=event", $(this).data("id")).render().getData()
            })
        }
    };
    var initEvents = function () {
        var a = $("#events"), b = $("#moreEvents"), c = $("#events-search-text");
        if (b.size() > 0) {
            b.on("click", function (a) {
                a.preventDefault();
                g()
            })
        }
        bindEventCardsEvents(a);
        c.on("change", function () {
            b.data("next-page", 1);
            g(true);
            return false
        });
        if (a.size() > 0 && top.window.location.hash.indexOf("!") > 0) {
            a.trigger("clean");
            b.hide();
            b.data("next-page", 1);
            var d = top.window.location.hash.split("!")[1], e;
            d = d.replace(/(^\/|$\/)/gim, "").split("/");
            for (var f in d) {
                e = d[f].split("-");
                if (e.length > 1) {
                    e = [e.shift(), e.join("-")]
                } else {
                    e = [e.shift(), ""]
                }
                switch (e[0]) {
                    case"search":
                        c.val(e[1]);
                        break;
                    case"page":
                        b.data("next-page", e[1]);
                        break
                }
            }
            g(true)
        }
        function g(d) {
            d = typeof d == "undefined" ? false : d;
            var e = {type: "ajax", controller: "events", action: "more"};
            var f = [], g;
            if (g = c.val()) {
                e.search = decodeURIComponent(g);
                f.push("search-" + g)
            }
            if (b.data("next-page") > 1) {
                e.page = b.data("next-page");
                f.push("page-" + e.page)
            }
            if (f.length) {
                top.window.location.hash = "!/" + f.join("/")
            } else if (top.window.location.hash.length) {
                top.window.location.hash = "!items"
            }
            getMore.call(this, e, {filter: "article.calEvent", appendTo: "#events", moreSelector: b}, function (b) {
                if (b) {
                    if (d) {
                        a.trigger("clean").trigger("rebuildPylon", [b])
                    } else {
                        a.trigger("rebuildPylon", [b]);
                        $("html,body").animate({scrollTop: $(b[0]).offset().top}, "slow")
                    }
                }
            })
        }
    };
    var initTestDrives = function () {
        var a = $("#testDrives"), b = $("#moreTestDrives");
        if (b.size() > 0) {
            b.on("click", function (a) {
                a.preventDefault();
                g()
            })
        }
        if (a.size() > 0) {
            if (document.location.hash.indexOf("id-") > -1) {
                var c = /id-([0-9]+)/gim.exec(document.location.hash)[1];
                new TestDriveViewer(a, a.find('h2 a[data-id="' + c + '"]').closest(".eventCard"), "/?type=ajax&controller=testDrive&action=item", c).render().getData()
            }
            a.on("click", ".eventCard a[data-id]", function (b) {
                b.preventDefault();
                new TestDriveViewer(a, $(this).closest(".eventCard"), "/?type=ajax&controller=testDrive&action=item", $(this).data("id")).render().getData()
            });
            a.on("toggleState", ".eventCard .request-button", function (a, b) {
                var c = $(this);
                if (c.data("action") == "add") {
                    c.data("action", "cancel").html(" ")
                } else {
                    c.data("action", "add").html(" ")
                }
                c.next("small.bought").html(b.requestsText)
            });
            a.on("click", ".eventCard .request-button", function (a) {
                a.preventDefault();
                var b = $(this);
                $.post("/", {
                    type: "ajax",
                    controller: "testDrive",
                    action: "request",
                    id: b.data("item-id"),
                    method: b.data("action")
                }, function (a) {
                    if (a && a.result) {
                        $('button.request-button[data-item-id="' + b.data("item-id") + '"]').trigger("toggleState", [a])
                    } else {
                        notify("fail", {text: a.message ? a.message : "   ..."})
                    }
                }, "json")
            })
        }
        if (a.size() > 0 && top.window.location.hash.indexOf("!") > 0) {
            a.trigger("clean");
            b.hide();
            b.data("next-page", 1);
            var d = top.window.location.hash.split("!")[1], e;
            d = d.replace(/(^\/|$\/)/gim, "").split("/");
            for (var f in d) {
                e = d[f].split("-");
                if (e.length > 1) {
                    e = [e.shift(), e.join("-")]
                } else {
                    e = [e.shift(), ""]
                }
                switch (e[0]) {
                    case"page":
                        b.data("next-page", e[1]);
                        break
                }
            }
            g(true)
        }
        function g(c) {
            c = typeof c == "undefined" ? false : c;
            var d = {type: "ajax", controller: "testDrive", action: "more"};
            var e = [], f;
            if (b.data("next-page") > 1) {
                d.page = b.data("next-page");
                e.push("page-" + d.page)
            }
            if (e.length) {
                top.window.location.hash = "!/" + e.join("/")
            } else if (top.window.location.hash.length) {
                top.window.location.hash = "!items"
            }
            getMore.call(this, d, {
                filter: "article.eventCard",
                appendTo: "#testDrives",
                moreSelector: b
            }, function (b) {
                if (b) {
                    if (c) {
                        a.trigger("clean").trigger("rebuildPylon", [b])
                    } else {
                        a.trigger("rebuildPylon", [b]);
                        $("html,body").animate({scrollTop: $(b[0]).offset().top}, "slow")
                    }
                }
            })
        }
    };
    var initContests = function () {
        var a = $("#contests"), b = $("#moreContests");
        if (b.size() > 0) {
            b.on("click", function (a) {
                a.preventDefault();
                g()
            })
        }
        if (a.size() > 0) {
            if (document.location.hash.indexOf("id-") > -1) {
                var c = /id-([0-9]+)/gim.exec(document.location.hash)[1];
                new TestDriveViewer(a, a.find('h2 a[data-id="' + c + '"]').closest(".eventCard"), "/?type=ajax&controller=contests&action=item", c).render().getData()
            }
            a.on("click", ".eventCard h2 a, .eventCard figure a", function (b) {
                b.preventDefault();
                new TestDriveViewer(a, $(this).closest(".eventCard"), "/?type=ajax&controller=contests&action=item", $(this).data("id")).render().getData()
            });
            a.on("toggleState", ".eventCard .request-button", function (a, b) {
                var c = $(this);
                if (c.data("action") == "add") {
                    c.data("action", "cancel").html(" ")
                } else {
                    c.data("action", "add").html(" ")
                }
                c.next("small.bought").html(b.requestsText)
            });
            a.on("click", ".eventCard .request-button", function (a) {
                a.preventDefault();
                var b = $(this);
                $.post("/", {
                    type: "ajax",
                    controller: "contests",
                    action: "request",
                    id: b.data("item-id"),
                    method: b.data("action")
                }, function (a) {
                    if (a && a.result) {
                        $('button.request-button[data-item-id="' + b.data("item-id") + '"]').trigger("toggleState", [a])
                    } else {
                        notify("fail", {text: a.message ? a.message : "   ..."})
                    }
                }, "json")
            })
        }
        if (a.size() > 0 && top.window.location.hash.indexOf("!") > 0) {
            a.trigger("clean");
            b.hide();
            b.data("next-page", 1);
            var d = top.window.location.hash.split("!")[1], e;
            d = d.replace(/(^\/|$\/)/gim, "").split("/");
            for (var f in d) {
                e = d[f].split("-");
                if (e.length > 1) {
                    e = [e.shift(), e.join("-")]
                } else {
                    e = [e.shift(), ""]
                }
                switch (e[0]) {
                    case"page":
                        b.data("next-page", e[1]);
                        break
                }
            }
            g(true)
        }
        function g(c) {
            c = typeof c == "undefined" ? false : c;
            var d = {type: "ajax", controller: "contests", action: "more"};
            var e = [], f;
            if (b.data("next-page") > 1) {
                d.page = b.data("next-page");
                e.push("page-" + d.page)
            }
            if (e.length) {
                top.window.location.hash = "!/" + e.join("/")
            } else if (top.window.location.hash.length) {
                top.window.location.hash = "!items"
            }
            getMore.call(this, d, {filter: "article.eventCard", appendTo: "#contests", moreSelector: b}, function (b) {
                if (b) {
                    if (c) {
                        a.trigger("clean").trigger("rebuildPylon", [b])
                    } else {
                        a.trigger("rebuildPylon", [b]);
                        $("html,body").animate({scrollTop: $(b[0]).offset().top}, "slow")
                    }
                }
            })
        }
    };
    var initQA = function () {
        var a = $("#qaContainer"), b = $("#moreQA"), c = $("#qa-search-text"), d = $("#showAskForm");
        if (b.size() > 0) {
            b.on("click", function (a) {
                a.preventDefault();
                h()
            })
        }
        c.on("change", function () {
            b.data("next-page", 1);
            h(true);
            return false
        });
        if (a.size() > 0) {
            a.on("click", "a.faq-item__show-thread", function (a) {
                a.preventDefault();
                var b = $(this).closest(".faq-item").find(".faq-item__thread .faq-item__message:not(:first)");
                if (!$(this).hasClass("active")) {
                    $(this).addClass("active");
                    b.slideDown("fast").closest(".faq-item__thread").removeClass("collapsed");
                    if (!$(this).data("originalText")) {
                        $(this).data({
                            originalText: $(this).html(),
                            openedText: $(this).html().replace("", "")
                        })
                    }
                    $(this).html($(this).data("openedText")).find(".font-icon-arr-down").addClass("font-icon-arr-up").removeClass("font-icon-arr-down")
                } else {
                    $(this).removeClass("active");
                    b.slideUp("fast").closest(".faq-item__thread").addClass("collapsed");
                    $(this).html($(this).data("originalText")).find(".font-icon-arr-up").addClass("font-icon-arr-down").removeClass("font-icon-arr-up")
                }
            });
            a.on("click", "a.faq-item__answer", function (a) {
                a.preventDefault();
                $(this).hide().prev(".faq-item__answer-form").slideDown("fast")
            });
            a.on("submit", ".faq-item__answer-form", function () {
                $(this).find(":submit").attr("disabled", "disabled")
            });
            a.find("a.sharesHandler").each(function () {
                $(this).dropdown({content: $(this).next("ul"), inheritFontSize: false})
            })
        }
        if (d.size() > 0) {
            d.on("click", function (a) {
                a.preventDefault();
                var b = $(this);
                if (b.hasClass("hidden")) {
                    b.removeClass("hidden");
                    $("#askForm").slideUp("fast", function () {
                        b.fadeIn("fast").prev("p").fadeIn("fast")
                    })
                } else {
                    b.addClass("hidden");
                    $.when(b.fadeOut("fast"), b.prev("p").fadeOut("fast")).done(function () {
                        $("#askForm").slideDown("fast")
                    })
                }
            })
        }
        if (a.size() > 0 && top.window.location.hash.indexOf("!") > 0) {
            b.hide();
            b.data("next-page", 1);
            var e = top.window.location.hash.split("!")[1], f;
            e = e.replace(/(^\/|$\/)/gim, "").split("/");
            if (e[0].match(/^id\-([0-9]+)$/gim)) {
                e = e[0].replace("id-", "");
                e = {type: "ajax", controller: "FAQ", action: "more", id: e};
                $("#faq-items").html("");
                getMore.call(this, e, {filter: "div.qa", appendTo: "#faq-items", moreSelector: b}, function (a) {
                    if (a) {
                        a.find("a.sharesHandler").each(function () {
                            $(this).dropdown({content: $(this).next("ul"), inheritFontSize: false})
                        });
                        $("html,body").animate({scrollTop: $(a[0]).offset().top}, "slow")
                    }
                })
            } else {
                for (var g in e) {
                    f = e[g].split("-");
                    if (f.length > 1) {
                        f = [f.shift(), f.join("-")]
                    } else {
                        f = [f.shift(), ""]
                    }
                    switch (f[0]) {
                        case"search":
                            c.val(f[1]);
                            break;
                        case"page":
                            b.data("next-page", f[1]);
                            break
                    }
                }
                h(true)
            }
        } else if (a.size() > 0 && top.window.location.hash == "#ask") {
            if (d.size() > 0) {
                d.trigger("click");
                window.setTimeout(function () {
                    $("#faq_text").focus()
                }, 250)
            } else {
                try2login()
            }
        }
        function h(a) {
            a = typeof a == "undefined" ? false : a;
            var d = {type: "ajax", controller: "FAQ", action: "more"};
            var e = [], f;
            if (f = c.val()) {
                d.search = decodeURIComponent(f);
                e.push("search-" + f)
            }
            if (b.data("next-page") > 1) {
                d.page = b.data("next-page");
                e.push("page-" + d.page)
            }
            if (e.length) {
                top.window.location.hash = "!/" + e.join("/")
            } else if (top.window.location.hash.length) {
                top.window.location.hash = "!items"
            }
            if (a) {
                $("#faq-items").find("div.faq-item").fadeOut(function () {
                    $(this).remove()
                })
            }
            getMore.call(this, d, {filter: "div.faq-item", appendTo: "#faq-items", moreSelector: b}, function (b) {
                if (b) {
                    b.find("a.sharesHandler").each(function () {
                        $(this).dropdown({content: $(this).next("ul"), inheritFontSize: false})
                    });
                    if (!a) {
                        $("html,body").animate({scrollTop: $(b[0]).offset().top}, "slow")
                    }
                }
            })
        }
    };
    var initReviews = function () {
        var a = $("#reviewsContainer"), b = $("#moreReviews"), c = $("#reviews-filters"), d = $("#showReviewForm");
        if (b.size() > 0) {
            b.on("click", function (a) {
                a.preventDefault();
                j()
            })
        }
        if (c.size() > 0) {
            c.find("a.filter").each(function () {
                var a = $(this), c = $(a.data("dropdown-content"));
                if (c.size() > 0) {
                    c.find("a").on("click", function (c) {
                        c.preventDefault();
                        var d = $(this);
                        if (a.attr("id") == "filterSort-a") {
                            a.data("sort-by", d.data("sort-by")).data("sort-dir", d.data("sort-dir")).html(d.html()).trigger("hideDropdown")
                        } else {
                            a.data("current", d.data("id")).html(d.html()).trigger("hideDropdown")
                        }
                        b.data("next-page", 1);
                        j(true)
                    })
                }
            })
        }
        if (a.size() > 0) {
            a.on("click", "a.showAnswer", function (a) {
                a.preventDefault();
                var b = $(this);
                if (!b.hasClass("active")) {
                    b.addClass("active");
                    b.closest(".qa").find("div.comment.answer").slideDown("fast");
                    if (!b.data("originalText")) {
                        b.data({originalText: b.text(), openedText: b.text().replace("", "")})
                    }
                    b.text(b.data("openedText"))
                } else {
                    b.removeClass("active");
                    b.closest(".qa").find("div.comment.answer").slideUp("fast");
                    b.text(b.data("originalText"))
                }
            })
        }
        if (d.size() > 0) {
            d.on("click", function (a) {
                a.preventDefault();
                var b = $("#reviewPopup");
                if (b.css("display") != "block") {
                    b.fadeIn("fast")
                } else {
                    b.fadeOut("fast")
                }
            })
        }
        if (a.size() > 0 && top.window.location.hash.indexOf("!") > 0) {
            b.data("next-page", 1).hide();
            var e = top.window.location.hash.split("!")[1], f, g = $("#filterSort-a");
            e = e.replace(/(^\/|$\/)/gim, "").split("/");
            if (e[0].match(/^id\-([0-9]+)$/gim)) {
                e = e[0].replace("id-", "");
                e = {type: "ajax", controller: "reviews", action: "more", id: e};
                $("#reviews-items").html("");
                getMore.call(this, e, {
                    filter: "div.qa.review",
                    appendTo: "#reviews-items",
                    moreSelector: b
                }, function (a) {
                    if (a) {
                        a.find("[data-voter]").voter()
                    }
                })
            } else {
                for (var h in e) {
                    f = e[h].split("-");
                    if (f.length > 1) {
                        f = [f.shift(), f.join("-")]
                    } else {
                        f = [f.shift(), ""]
                    }
                    switch (f[0]) {
                        case"by":
                            g.data("sort-by", f[1]);
                            break;
                        case"sort":
                            g.data("sort-dir", f[1]);
                            break;
                        case"page":
                            b.data("next-page", f[1]);
                            break;
                        default:
                            var i = "#filter" + f[0].substr(0, 1).toUpperCase() + f[0].substr(1);
                            $(i + "-a").data("current", f[1]).html($(i).find('a[data-id="' + f[1] + '"]').html());
                            break
                    }
                    g.html($("#filterSort").find('a[data-sort-by="' + g.data("sort-by") + '"]').filter('[data-sort-dir="' + g.data("sort-dir") + '"]').html())
                }
                j(true)
            }
        } else if (a.size() > 0 && top.window.location.hash == "#add") {
            if (d.size() > 0) {
                d.trigger("click")
            }
        }
        function j(a) {
            a = typeof a == "undefined" ? false : a;
            var c = {type: "ajax", controller: "reviews", action: "more"};
            var d = [], e;
            e = $("#filterSort-a");
            if (e.data("sort-by")) {
                c.by = e.data("sort-by");
                d.push("by-" + c.by)
            }
            if (e.data("sort-dir")) {
                c.sort = e.data("sort-dir");
                d.push("sort-" + c.sort)
            }
            if (e = $("#filterSource-a").data("current")) {
                c.source = e;
                d.push("source-" + c.source)
            }
            if (b.data("next-page") > 1) {
                c.page = b.data("next-page");
                d.push("page-" + c.page)
            }
            if (d.length) {
                top.window.location.hash = "!/" + d.join("/")
            } else if (top.window.location.hash.length) {
                top.window.location.hash = "items"
            }
            if (a) {
                $("#reviews-items").find("div.qa.review").fadeOut(function () {
                    $(this).remove()
                })
            }
            getMore.call(this, c, {filter: "div.qa.review", appendTo: "#reviews-items", moreSelector: b}, function (b) {
                if (b) {
                    b.find("[data-voter]").voter();
                    if (!a) {
                        var c = $(".mobileHeader");
                        $("html,body").animate({scrollTop: $(b[0]).offset().top - (c.is(":visible") ? c.outerHeight() : 0)}, "slow")
                    }
                }
                var d = $(".lightbox-gallery");
                if (d.length > 0) {
                    $(document).find(".lightbox-gallery").each(function () {
                        $(this).magnificPopup({
                            delegate: ".js-review-img__item",
                            type: "image",
                            tLoading: " ",
                            mainClass: "mfp-img-mobile",
                            gallery: {enabled: true, navigateByImgClick: true, tCounter: "", preload: [0, 1]},
                            image: {tError: '<a href="%url%">The image #%curr%</a> could not be loaded.'}
                        })
                    });
                    $(".js-review-video__item").each(function () {
                        $(this).magnificPopup({type: "inline", midClick: true, mainClass: "video-popup-class"})
                    });
                    if ($("video").length) {
                        $("video").each(function (a) {
                            var b = videojs($(this).attr("id"));
                            b.dispose()
                        });
                        setTimeout(function () {
                            initVideos()
                        }, 10)
                    }
                }
            })
        }
    };
    var getMore = function (a, b) {
        var c;
        if (arguments.length > 0 && $.isFunction(arguments[arguments.length - 1])) {
            c = arguments[arguments.length - 1]
        }
        if (!b.moreSelector || !b.moreSelector.hasClass("loading")) {
            if (b.moreSelector) {
                b.moreSelector.addClass("loading")
            }
            $.post("/", a, function (d) {
                $("#nothingFoundSection").remove();
                if (d && d.result) {
                    var e = $(d.items).filter(b.filter).hide();
                    if (b.appendTo && !$.isFunction(b.appendTo)) {
                        $(b.appendTo).show().append(e)
                    } else {
                        $(this).parent().before(e)
                    }
                    e.fadeIn("fast");
                    if (typeof b.moreSelector != "undefined") {
                        if (d.nextPage) {
                            b.moreSelector.data("next-page", d.nextPage).show()
                        } else {
                            b.moreSelector.hide()
                        }
                    }
                    if (typeof d.filters != "undefined" && $("#" + a.controller + "-filters").size() > 0) {
                        var f = $("#" + a.controller + "-filters");
                        f.find("[data-dropdown-content]").dropdown("destroy");
                        f.html(d.filters)
                    }
                    if (c) {
                        c.call($(this), e)
                    }
                } else {
                    $(b.appendTo).hide().after(d.message ? d.message : '<section class="whiteBlock textPage" id="nothingFoundSection">       .</section>');
                    b.moreSelector.hide()
                }
            }, "json").always(function () {
                if (b.moreSelector) {
                    b.moreSelector.removeClass("loading")
                }
            })
        }
    };
    var recipePage = {
        init: function () {
            if ($(".recipePage").size() > 0) {
                $("[data-voter]:not([data-voter-readonly], [data-voter-disabled])").on("change", function (a, b) {
                    recipePage.sendVote.call(this, $(this).data("id"), "recipes", $(this).data("type"), b)
                })
            }
        }, sendVote: function (a, b, c, d) {
            $.ajax("/", {
                type: "POST",
                context: $(this),
                dataType: "JSON",
                data: {type: "ajax", controller: "recipes", action: "rating", id: a, vote: d, field: c}
            }).done(function (a) {
                if (a && a.result) {
                    var b = $(this).voter("get");
                    b.setVal(a.average);
                    $(this).next("span.label").html(a.summaryText);
                    this.off("change").next("span.label").html(a.summaryText + "<br />(   " + b.decodeValue(a.vote) + ")");
                    this.voter("get").setReadonly(true)
                } else {
                    this.off("change").next("span.label").html(" <br >  <br />!")
                }
            })
        }
    };
    var articlePage = {
        init: function () {
            if ($(".articlePage").size() > 0) {
                $("[data-voter]:not([data-voter-readonly], [data-voter-disabled])").on("change", function (a, b) {
                    articlePage.sendVote.call(this, $(this).data("id"), "articles", $(this).data("type"), b)
                })
            }
        }, sendVote: function (a, b, c, d) {
            $.ajax("/", {
                type: "POST",
                context: $(this),
                dataType: "JSON",
                data: {type: "ajax", controller: "articles", action: "rating", id: a, vote: d, field: c}
            }).done(function (a) {
                if (a && a.result) {
                    var b = $(this).voter("get");
                    b.setVal(a.average);
                    $(this).next("span.label").html(a.summaryText);
                    this.off("change").next("span.label").html(a.summaryText + "<br />(   " + b.decodeValue(a.vote) + ")");
                    this.voter("get").setReadonly(true)
                } else {
                    this.off("change").next("span.label").html(" <br >  <br />!")
                }
            })
        }
    };
    var ordersInit = function () {
        var a = $("article.order");
        if (a.size() > 0) {
            a.find(".orderStructure .orderImages figure, .orderStructure table tr").on("highlight", function () {
                $(this).addClass("hover")
            }).on("unlight", function () {
                $(this).removeClass("hover")
            }).on("mouseenter", function () {
                $(this).closest(".order").find('[data-product-id="' + $(this).data("product-id") + '"]' + ($(this).data("kit") ? '[data-kit="true"]' : ':not([data-kit="true"])')).trigger("highlight")
            }).on("mouseleave", function () {
                $(this).closest(".order").find('[data-product-id="' + $(this).data("product-id") + '"]' + ($(this).data("kit") ? '[data-kit="true"]' : ':not([data-kit="true"])')).trigger("unlight")
            })
        }
    };
    var orderFormInit = function () {
        var a = $("#addressForm");
        var b;
        var c, d;

        function e() {
            if ($("#map").length) {
                c = new ymaps.Map("map", {center: [55.76, 37.64], zoom: 10, controls: ["zoomControl"]});
                $(".remove_marker").on("click", function () {
                    c.geoObjects.remove(d);
                    d = null;
                    $("#map_coords").val("");
                    $(this).hide();
                    return false
                })
            }
        }

        function f(a, b) {
            if (a && b && $("#map").length) {
                ymaps.geocode(a + ", " + b, {results: 1}).then(function (a) {
                    if (!d) {
                        d = a.geoObjects.get(0);
                        var b = d.geometry.getCoordinates(), e = d.properties.get("boundedBy");
                        d.options.set("draggable", true);
                        c.geoObjects.add(d)
                    } else {
                        b = a.geoObjects.get(0).geometry.getCoordinates();
                        e = a.geoObjects.get(0).properties.get("boundedBy");
                        d.geometry.setCoordinates(b)
                    }
                    $("#map_coords").val(b);
                    d.events.add("dragend", function (a) {
                        var b = a.get("target");
                        var c = b.geometry.getCoordinates();
                        $("#map_coords").val(c.join(", "));
                        ymaps.geocode(this.geometry.getCoordinates()).then(function (a) {
                            var b = a.geometry.getCoordinates();
                            if (b) {
                                $("#map_coords").val(b)
                            }
                        })
                    }, d);
                    c.setBounds(e, {checkZoomRange: true});
                    $(".remove_marker").show()
                })
            }
        }

        if (a.length) {
            var g = $.parseJSON($("#addressesJSON").text()) || [];
            if (g.addresses) {
                $.each(g.addresses, function (a, b) {
                    $.extend(b, $.parseJSON(b.code))
                })
            }
            b = window.addressesVM = new Ractive({
                template: "#addressesFormTpl",
                el: "#addressForm",
                data: {
                    selectedAddress: $.extend({}, g.addresses[0], {index: 0}) || {},
                    userId: g.userId,
                    addresses: g.addresses,
                    email: g.email,
                    newUser: g["new"],
                    fio: g.fio,
                    phone: g.phone,
                    adding: !g.addresses.length,
                    showAll: false,
                    anarchistMessage: "",
                    getTitle: function (a) {
                        var b = [];
                        if (a.city) {
                            b.push(a.city)
                        }
                        if (a.street) {
                            b.push(a.street)
                        }
                        if (a.flat) {
                            b.push(a.flat)
                        }
                        return b.join(", ").replace(/,{2,}/, ",")
                    }
                },
                computed: {
                    showList: function () {
                        if (this.get("adding") && this.get("addresses").length) {
                            return true
                        } else if (this.get("addresses").length > 1) {
                            return true
                        } else {
                            return false
                        }
                    }, oneClick: function () {
                        return (!this.get("userId") || this.get("newUser")) && !this.get("addresses").length
                    }, showSelected: function () {
                        return !!this.get("selectedAddress") && !this.get("selectedAddress.new")
                    }
                },
                oninit: function () {
                    var a = this;
                    this.maxShow = 2;
                    function b() {
                        var b = $('<div id="addressDeleteConfirm" class="dropdownBox"><i style="right: 10px; left: auto;" class="tail"></i> <div class="dropdownContent address-delete-confirm"><div class="confirm-message">     ?</div> <fieldset class="confirm-buttons"><input name="address_id" type="hidden"><button data-confirm class="button"></button> <button class="button grey autowidth"></button></fieldset> </div></div>').hide().appendTo("body");
                        $(document).on("click", function (a) {
                            $("#addressDeleteConfirm").fadeOut()
                        });
                        b.on("click", "[data-confirm]", function (c) {
                            c.preventDefault();
                            var d = $(this).closest("fieldset").find('input[name="address_id"]').val();
                            cabinet.settings.delAddress(this);
                            a.splice("addresses", b.data("addressIndex"), 1);
                            if (d == a.get("selectedAddress.id")) {
                                if (a.get("addresses").length) {
                                    a.set("selectedAddress", $.extend({}, a.get("addresses.0"), {index: 0}))
                                } else {
                                    a.set("selectedAddress", {new: true, edit: true})
                                }
                            }
                        });
                        return b
                    }

                    this.anarchistCount = 0;
                    this.on("selectAddress", function (b, c) {
                        b.original.preventDefault();
                        b.original.stopPropagation();
                        var d = Number(b.keypath.split(".")[1]);
                        this.set("selectedAddress", $.extend({}, a.get(b.keypath), {index: d})).then(function () {
                            if (c) {
                                a.set("selectedAddress.edit", true)
                            }
                        });
                        this.set("selectedAddress.edit", false);
                        this.set("adding", false)
                    });
                    this.on("editAddress", function () {
                        this.set("selectedAddress.edit", true)
                    });
                    this.on("toggleEditAddress", function () {
                        this.toggle("selectedAddress.edit")
                    });
                    this.on("addAddress", function (a) {
                        a.original.preventDefault();
                        this.set("adding", true)
                    });
                    this.on("showAll", function (a) {
                        a.original.preventDefault();
                        this.toggle("showAll")
                    });
                    this.observe("adding", function (a) {
                        if (a == true) {
                            this.set("selectedAddress", {edit: true, new: true})
                        } else if (a == false) {
                            this.set("selectedAddress", $.extend({}, this.get("addresses.0"), {index: 0}))
                        }
                    });
                    this.on("confirmRemove", function (a, c, d) {
                        a.original.stopPropagation();
                        var e = $(a.node);
                        var f = $("#addressDeleteConfirm");
                        if (!f.length) {
                            f = b()
                        }
                        f.show();
                        f.css({
                            top: e.offset().top + e.outerHeight() + 10 + "px",
                            right: $(document).width() - (e.offset().left + e.outerWidth()) - 16 + "px"
                        });
                        f.hide();
                        f.find('input[name="address_id"]').val(c);
                        f.data("addressIndex", d);
                        f.fadeIn("fast")
                    });
                    try {
                        ymaps.ready(function () {
                            a.observe("selectedAddress.city selectedAddress.street", function () {
                                var a = this.get("selectedAddress.city");
                                var b = this.get("selectedAddress.street");
                                if (a && b) {
                                    f(a, b)
                                }
                            })
                        })
                    } catch (a) {
                    }
                },
                onrender: function () {
                    var a = this;
                    if ($("#map").length) {
                        ymaps.ready(e)
                    }
                    function b(b, c) {
                        a.set("selectedAddress.city_id", c.id);
                        $("#field-city_n").data("verified", c.value);
                        $(this).trigger("blur", false);
                        $(this).trigger("change.autosave")
                    }

                    this.observe("selectedAddress.city_id", function (a, b, c) {
                        cartHelper.getDelivery(a)
                    });
                    this.observe("selectedAddress.new", function (a) {
                        if (a == true) {
                            $(".remove_marker").trigger("click");
                            var b = autosaver.getData();
                            if (b) {
                                var c = {};
                                $.each(b, function (a, b) {
                                    c[a.replace("field-", "").replace("city-id", "city_id").replace("city_n", "city").replace("street_n", "street")] = b
                                });
                                this.set("selectedAddress", $.extend(this.get("selectedAddress"), c))
                            }
                        }
                    });
                    this.observe("addresses", function (b) {
                        if (this.get("showAll")) {
                            return
                        }
                        if (b.length - 1 <= this.maxShow) {
                            this.set("showAll", true)
                        }
                        var c = 0;
                        $.each(b, function (b, d) {
                            a.set("addresses." + b + ".i", b);
                            if (a.get("selectedAddress.id") != d.id) {
                                c++
                            }
                            if (a.get("selectedAddress.id") != d.id && c > a.maxShow) {
                                a.set("addresses." + b + ".hidden", true)
                            }
                        })
                    });
                    this.observe("showAll", function (a) {
                        if (a == true) {
                            this.set("addresses.*.hidden", false)
                        }
                    });
                    ac.cities("#field-city_n").on("typeahead:selected", b).on("typeahead:autocompleted", b);
                    var c = $("#field-city_n");
                    var d = {};
                    var f = c.data("typeaheadOptions")[0].local;
                    $.each(f, function (a, b) {
                        d[b.value.toLowerCase()] = b.id
                    });
                    c.on("blur", function (b, c) {
                        if (c != false) {
                            if (!d[$(this).val().toLowerCase()]) {
                                a.set("selectedAddress.city", "");
                                a.set("selectedAddress.city_id", "");
                                $(this).val("")
                            } else {
                                if (a.get("selectedAddress.city").length) {
                                    a.set("selectedAddress.city_id", d[$(this).val().toLowerCase()])
                                }
                                if (a.get("selectedAddress.city").length === 0) {
                                    $(this).val("")
                                }
                            }
                        }
                    });
                    $(this.find("#field-phone")).mask("+7 999 999-99-99");
                    var g = $("#oneClick");
                    if (g.length) {
                        g.find("input:text").mask("+7 999 999-99-99");
                        g.on("click", "a.x", function (a) {
                            a.preventDefault();
                            $(this).closest("#oneClick").fadeOut("fast")
                        });
                        $("#oneClickTrigger").on("click", function (a) {
                            a.preventDefault();
                            g.css({
                                left: $(this).parent().offset().left + "px",
                                top: $(this).parent().offset().top + "px"
                            }).fadeIn("fast")
                        })
                    }
                    autosaver.init(this.el)
                },
                decorators: {
                    tooltip: function (a, b) {
                        var c;
                        c = $('<div class="ractive-tooltip">' + b + "</div>");
                        $("body").append(c);
                        var d = function (a, b) {
                            b.show();
                            b.css({
                                top: $(a).offset().top - $(b).outerHeight() - 8 + "px",
                                left: $(a).offset().left + $(a).outerWidth() / 2 - $(b).outerWidth() / 2 + "px"
                            });
                            b.hide()
                        };
                        if ($(window).width() < 767) {
                            var d = function (a, b) {
                                b.show();
                                b.css({
                                    top: $(a).offset().top - $(b).outerHeight() - 60 + "px",
                                    left: $(a).offset().left + $(a).outerWidth() / 2 - $(b).outerWidth() / 2 + "px"
                                })
                            }
                        }
                        $(a).on("mouseenter", function () {
                            d(this, c);
                            c.fadeIn("fast")
                        }).on("mouseleave", function () {
                            c.fadeOut("fast")
                        });
                        return {
                            teardown: function () {
                                $(a).off("mouseenter mouseleave")
                            }
                        }
                    }
                }
            })
        }
        initTimeChooserSlider()
    };
    var initTimeChooserSlider = function () {
        var a = $("#timeTable");
        if (a.size()) {
            var b = new Swiper(".js-order-timetable-slider", {
                slideClass: "order-timetable",
                nextButton: $("#js-timetable-slider-conrols__item-next"),
                prevButton: $("#js-timetable-slider-conrols__item-prev"),
                simulateTouch: false,
                slidesPerView: 1
            });
            a.find("input").on("change", function (a, b) {
                var c = $('[id="timeConfirm"]');
                c.html("!     " + $(this).data("confirm"));
                if (c.is(":hidden")) {
                    c.slideDown("fast")
                }
                $.cookie("delivery-interval", this.value, {expires: 365});
                var d = $(this).val().substring(3, 13), e = $("#mobile-delivery-days");
                e.val(d);
                $(".timetable-body-row--current").removeClass("timetable-body-row--current");
                if (!$(this).parents(".timetable-body-row").hasClass("timetable-body-row--current")) {
                    $(this).parents(".timetable-body-row").addClass("timetable-body-row--current")
                }
                $("#order-form-section-submit").slideDown("fast").find(".ajax-loading-overlay").remove()
            });
            function c() {
                var a = $.cookie("delivery-interval");
                if (a) {
                    var b = $('.js-delivery-cost-item__input[value="' + a + '"]');
                    b.parents(".timetable-body-row").addClass("timetable-body-row--current")
                }
            }

            c();
            a.find("a.hintTrigger").each(function () {
                var b = $(this).data("cleaner");
                if (!b) {
                    b = new CartCleaner(this);
                    $(this).data("cleaner", b)
                }
                $(this).on("click", {cleaner: b}, function (b) {
                    b.preventDefault();
                    b.data.cleaner.getData(this);
                    b.data.cleaner.open();
                    var c = a.find(".cleanerOpened").not(this);
                    if (c.size() > 0) {
                        c.data("cleaner").close()
                    }
                })
            });
            var d = $("#mobile-delivery-days");
            d.on("change", function (a) {
                var b = $(this).val();
                var c = $('.timetable-body-row[data-current-day="' + b + '"]');
                if ($(".timetable-body-row--current")) {
                    $(".timetable-body-row--current").removeClass("timetable-body-row--current")
                }
                if (!c.hasClass("timetable-body-row--current")) {
                    c.addClass("timetable-body-row--current")
                }
            }).trigger("change")
        }
    };
    window.initTimeChooserSlider = initTimeChooserSlider;
    var commentsBlockInit = function () {
        var a = $("#commentsBlock");
        if (a.size() > 0) {
            var b = a.find("div.commentForm");
            $(window).on("scroll", function () {
                if ($(document).scrollTop() >= a.offset().top) {
                    if ($(document).scrollTop() < a.offset().top + a.outerHeight() - b.outerHeight()) {
                        b.css("top", $(document).scrollTop() - a.offset().top + "px")
                    } else {
                        var c = a.outerHeight() - b.outerHeight();
                        if (b.position().top !== c) {
                            b.css("top", c + "px")
                        }
                    }
                } else {
                    if (b.position().top > 0) {
                        b.css("top", 0)
                    }
                }
            });
            var c = a.find("a.showAnswer");
            if (c.size() > 0) {
                c.on("click", function (a) {
                    a.preventDefault();
                    var b = $(this);
                    var c = {
                        type: "ajax",
                        controller: b.data("object"),
                        action: "moreComments",
                        id: b.data("object-id")
                    };
                    getMore.call(this, c, {filter: "div.comment", appendTo: "#comments-list"}, function () {
                        b.remove()
                    })
                })
            }
        }
    };
    var recipeAddInit = function () {
        var a = $("#addRecipePage");
        if (a.length > 0) {
            var b = $("#ingredientsAddList");
            if ($.fn.typeahead) {
                function c(a) {
                    if (!a.hasClass("tt-query")) {
                        a.typeahead({
                            name: "products",
                            remote: "/?type=ajax&controller=catalog&action=autocomplete&term=%QUERY",
                            limit: 10
                        }).on("typeahead:selected", function (b, c) {
                            a.parents("li").find("input").eq(0).val(c.id);
                            a.val(c.title)
                        }).on("typeahead:autocompleted", function (b, c) {
                            a.parents("li").find("input").eq(0).val(c.id);
                            a.val(c.title)
                        }).on("change", function () {
                            if (!this.value) {
                                a.parents("li").find("input").eq(0).val("")
                            }
                        }).on("keyup", function () {
                            if (!this.value || this.value.length < 2) {
                                a.parents("li").find("input").eq(0).val("")
                            }
                        })
                    }
                }

                b.find("input.nameField").each(function () {
                    c($(this))
                })
            }
            var d = $('<li><input type="hidden" value="" class="idField" /><input type="text" name="" class="nameField" /><input disabled class="qtyField" name="" type="text"/></li>');
            b.on("keyup", "li input:not(.qtyField)", function (a) {
                if ($(this).val() !== "") {
                    $(this).closest("li").find(".qtyField").removeAttr("disabled");
                    var e = $("#ingredientsAddList").find("li").size();
                    if ($.trim($(this).closest("ol").find("li").last().find("input.nameField").val()) !== "") {
                        cloneEl(d, b, function (a) {
                            c(a.find("input.nameField").val("").attr("name", "ingredient[" + e + "][name]"));
                            a.find("input.idField").val("").attr("name", "ingredient[" + e + "][id]");
                            a.find("input.qtyField").val("").attr("disabled", "disabled").attr("name", "ingredient[" + e + "][quantity]")
                        })
                    }
                } else {
                    $(this).closest("li").find(".qtyField").attr("disabled", "disabled")
                }
            }).on("blur", "li input:not(.qtyField)", function () {
                if ($(this).val() === "" && $(this).closest("ol").find("li").length > 2 && !$(this).closest("li").is($(this).closest("ol").find("li").last())) {
                    $(this).closest("li").slideUp("fast", function () {
                        $(this).remove()
                    })
                }
            });
            $("#stepsAddlist").on("keyup", "li textarea", function () {
                if ($(this).val() !== "" && $.trim($(this).closest("ol").find("li").last().find("textarea").val()) !== "") {
                    var a = $("#stepsAddlist").find("li").size();
                    cloneEl($(this).parent(), function (b) {
                        b.find("textarea").val("").attr("name", "step[" + a + "][text]");
                        var c = b.find("input:file").data("url");
                        b.find("div.stepPhotoUpload").html('<span class="fileUpload button"><span class="buttonTitle"> </span><input type="file" class="recipe-step-file" name="files[]" /></span><span class="uploaded"></span>').find("input:file").attr("data-url", c);
                        initFileInput(b.find("input:file"), {name: "step[" + a + "][file_id]", filter: "d28"})
                    })
                }
            }).on("blur", "li textarea", function () {
                if ($(this).val() === "" && $(this).closest("ol").find("li").length > 1 && !$(this).closest("li").is($(this).closest("ol").find("li").last())) {
                    $(this).closest("li").slideUp("fast", function () {
                        $(this).remove()
                    })
                }
            });
            initFileInput(a.find("input.recipe-photo"), {name: "data[recipe_file_id]", filter: "d28"});
            initFileInput(a.find("input.recipe-step-file"), {name: "step[0][file_id]", filter: "d28"});
            initFileInput(a.find("input.recipe-video"), {name: "data[recipe_video_id]"})
        }
        var e = $("input.review-photo"), f = {};
        if (e.length) {
            f = {
                name: "data[review_files][]",
                filter: "d28",
                tmp: true,
                acceptFileTypes: /\.(gif|jpe?g|png|mpeg|mp4|flv|wmv)$/i,
                allowed_types: ["image/jpeg", "image/jpg", "image/gif", "image/png", "video/mpeg", "video/mp4", "video/ogg", "video/quicktime", "video/webm", "video/x-ms-wmv", "video/x-flv", "video/3gpp", "video/3gpp2"]
            };
            if (e.data("maxSize")) {
                f.max_filesize = parseInt(e.data("maxSize")) * 1024 * 1024
            }
            if (e.data("maxSizeImage")) {
                f.fileTypeSizeLimits = f.fileTypeSizeLimits || {};
                f.fileTypeSizeLimits.image = e.data("maxSizeImage") * 1024 * 1024
            }
            if (e.data("maxSizeVideo")) {
                f.fileTypeSizeLimits = f.fileTypeSizeLimits || {};
                f.fileTypeSizeLimits.video = e.data("maxSizeVideo") * 1024 * 1024
            }
            if (e.data("object")) {
                f.object = e.data("object")
            }
            initFileInput(e, f)
        }
    };
    var initFileInput = function (a, b) {
        if (!b) {
            b = {}
        }
        if (!b.name) {
            b.name = "data[file_id]"
        }
        if (!b.acceptFileTypes) {
            b.acceptFileTypes = /\.(gif|jpe?g|png)$/i
        }
        if (!b.filter) {
            b.filter = false
        }
        if (!b.maxAmount) {
            b.maxAmount = 1
        }
        if (!b.max_filesize) {
            b.max_filesize = 2 * 1024 * 1024
        }
        if (!b.max_size_image) {
            b.max_size_image = 2 * 1024 * 1024
        }
        if (!b.max_size_video) {
            b.max_size_video = 150 * 1024 * 1024
        }
        $(a).fileupload({
            dataType: "json", acceptFileTypes: b.acceptFileTypes, add: function (a, c) {
                var d = $(this);
                var e = $(this).parent().find(".buttonTitle").text();
                if (d.attr("data-max_files")) {
                    $(this).parent().find(".buttonTitle").text(" ")
                } else {
                    $(this).parent().find(".buttonTitle").text(" ")
                }
                c.uploadedContainer = $(this).parent().parent().find(".uploaded");
                var f = c.files[0], g = f.name;
                if (g.length > 40) {
                    g = g.substring(0, 40) + "..."
                }
                if (b.fileTypeSizeLimits) {
                    var h = f.type.split("/");
                    if (b.fileTypeSizeLimits[h[0]]) {
                        b.max_filesize = b.fileTypeSizeLimits[h[0]]
                    }
                }
                if (d.attr("data-max_files")) {
                    if (b.allowed_types && $.inArray(f.type, b.allowed_types) < 0) {
                        var i = [];
                        $.each(b.allowed_types, function (a, b) {
                            if (b.indexOf("image/") >= 0) {
                                b = b.replace("image/", "")
                            } else if (b.indexOf("video/") >= 0) {
                                b = b.replace("video/", "")
                            }
                            i.push(b)
                        });
                        $("#error_review_file_id").html("    : " + i.join(", "));
                        $(".fileUpload").find('input[type="file"]').attr("disabled", false);
                        console.log("Upload error: bad format " + f.type);
                        return false
                    } else {
                        $("#error_review_file_id").html("")
                    }
                    if (f.size > b.max_filesize) {
                        $("#error_review_file_id").html("   " + b.max_filesize / (1024 * 1024) + "");
                        $(".fileUpload").find('input[type="file"]').attr("disabled", false);
                        console.log("Upload error: bad filesize " + f.size + " vs " + b.max_filesize);
                        return false
                    } else {
                        $("#error_review_file_id").html("")
                    }
                    if (c.uploadedContainer.children(".uploaded-img__item").length < d.attr("data-max_files")) {
                        var j = $(".uploaded-img__item:last").index();
                        c.uploadedContainer.append('<div class="uploaded-img__item"><input type="hidden" name="' + b.name + '" value="" /><span class="img"><img /></span> <span class="fileName">' + g + '</span> <span class="file-upload-progress" style="vertical-align: middle">(<span class="progress">0</span>%)</span> <a href="#" class="cartControl del"></a></div>')
                    } else if (c.uploadedContainer.children(".uploaded-img__item").length >= d.attr("data-max_files")) {
                        $("#error_review_file_id").html("    " + d.attr("data-max_files") + " ");
                        return false
                    } else {
                        $("#error_review_file_id").html("    " + d.attr("data-max_files") + " ")
                    }
                } else {
                    c.uploadedContainer.html('<input type="hidden" name="' + b.name + '" value="" /><span class="img"><img /></span> <span class="fileName">' + g + '</span> <span class="file-upload-progress" style="vertical-align: middle">(<span class="progress">0</span>%)</span> <a href="#" class="cartControl del"></a>')
                }
                if ($(".product-add-img-actions").find(".add-img-btn").length) {
                    $(".product-add-img-actions").find(".add-img-btn").attr("disabled", true);
                    $(".fileUpload").find('input[type="file"]').attr("disabled", true)
                }
                if ($(this).parents("#reviewPopup").find(".js-review-upload-img").length) {
                    $(this).parents("#reviewPopup").find(".js-review-upload-img").attr("disabled", true);
                    $(this).parents("#reviewPopup").find(".fileUpload").find('input[type="file"]').attr("disabled", true)
                }
                c.uploadedContainer.find(".del").on("click", function (a) {
                    a.preventDefault();
                    if ($("#error_review_file_id").length) {
                        $("#error_review_file_id").html("")
                    }
                    if ($(".product-add-img-actions").find(".add-img-btn").length) {
                        $(".product-add-img-actions").find(".add-img-btn").attr("disabled", false);
                        $(".fileUpload").find('input[type="file"]').attr("disabled", false)
                    }
                    if ($(this).parents("#reviewPopup").find(".js-review-upload-img").length) {
                        $(this).parents("#reviewPopup").find(".js-review-upload-img").attr("disabled", false);
                        $(this).parents("#reviewPopup").find(".fileUpload").find('input[type="file"]').attr("disabled", false)
                    }
                    if ($(this).parents(".uploaded-img__item")) {
                        $(this).parents(".uploaded-img__item").remove()
                    }
                    $(this).parent().fadeOut("fast", function () {
                        $(this).empty().show()
                    }).empty();
                    d.parent().find(".buttonTitle").text(e);
                    c.abort()
                });
                c.submit()
            }, progress: function (a, b) {
                var c = b.uploadedContainer.find(".progress");
                if ($(this).attr("data-max_files")) {
                    $(".uploaded-img__item:last").find(c).text(parseInt(b.loaded / b.total * 100))
                } else {
                    c.text(parseInt(b.loaded / b.total * 100))
                }
            }, done: function (a, c) {
                if (c && c.result && c.result.length > 0) {
                    if (b.object) {
                        c.result[0].object = b.object
                    }
                    $.post("/", {
                        type: "ajax",
                        controller: "index",
                        action: "upload",
                        data: c.result[0],
                        filter: b.filter || "",
                        tmp: b.tmp || "",
                        max_filesize: b.max_filesize || "",
                        max_size_image: b.max_size_image || "",
                        max_size_video: b.max_size_video || "",
                        allowed_types: b.allowed_types || ""
                    }, function (a) {
                        if (a && a.result) {
                            if (b.filter) {
                                c.uploadedContainer.find("img").one("load", function () {
                                    $(this).fadeIn("fast")
                                })
                            }
                            if (c.uploadedContainer.find(".uploaded-img__item").length) {
                                c.uploadedContainer.find(".uploaded-img__item:last-of-type").find("input").attr("value", a.id)
                            } else {
                                c.uploadedContainer.find("input").val(a.id)
                            }
                            if (a.preview) {
                                if (c.uploadedContainer.find(".uploaded-img__item").length) {
                                    c.uploadedContainer.find(".uploaded-img__item:last-of-type").find("img").attr("src", a.preview);
                                    if (a.isVideo) {
                                        c.uploadedContainer.find(".uploaded-img__item:last-of-type").append('<div class="review-video-upload-msg">     </div>')
                                    }
                                } else {
                                    c.uploadedContainer.find("img").attr("src", a.preview)
                                }
                            } else {
                                if (c.uploadedContainer.find(".uploaded-img__item").length) {
                                    c.uploadedContainer.find(".img").css("background", "none")
                                } else {
                                    c.uploadedContainer.find(".img").css("background", "none")
                                }
                            }
                            if ($(".product-add-img-actions").find(".add-img-btn").length) {
                                $(".product-add-img-actions").find(".add-img-btn").attr("disabled", false);
                                $(".fileUpload").find('input[type="file"]').attr("disabled", false)
                            }
                            if ($("#reviewPopup").find(".js-review-upload-img").length) {
                                $("#reviewPopup").find(".js-review-upload-img").attr("disabled", false);
                                $("#reviewPopup").find(".fileUpload").find('input[type="file"]').attr("disabled", false)
                            }
                        } else {
                            if ($("#error_review_file_id").length) {
                                $("#error_review_file_id").html(a.error.message)
                            }
                        }
                        $(".fileUpload").find('input[type="file"]').attr("disabled", false)
                    }, "json")
                }
            }
        })
    };
    window["initFileInput"] = initFileInput;
    Object.clone = function (a) {
        var b = {};
        for (var c in a) {
            if (a.hasOwnProperty(c)) {
                b[c] = a[c]
            }
        }
        return b
    };
    Object.extend = function (a, b) {
        var c = Object.clone(a);
        for (var d in b) {
            if (a.hasOwnProperty(d)) {
                c[d] = b[d]
            }
        }
        return c
    };
    var TestDriveViewer = function (a, b, c, d) {
        this.appendTo = a;
        this.url = c;
        this.id = d;
        this.rel = b;
        this.template = '<div class="testDriveViewer">\t\t\t\t\t\t\t<div class="viewerContentsWrap">\t\t\t\t\t\t\t\t<a href="#" class="close">\t\t\t\t\t\t\t\t\t<span></span>\t\t\t\t\t\t\t\t\t<br />(esc)\t\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t\t<div class="viewerContainer"></div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>'
    };
    TestDriveViewer.prototype = {
        render: function () {
            var a = this;
            this.$el = $(this.template).hide();
            this.container = this.$el.find(".viewerContainer");
            this.closeButton = this.$el.find("a.close");
            this.closeButton.on("click", this, function (a) {
                a.preventDefault();
                a.data.close()
            });
            this.$el.appendTo(this.appendTo);
            this.$el.on("click", ".eventCard__show-participants", function () {
                var b = $(this);
                if (!b.hasClass("active")) {
                    b.addClass("active");
                    b.html(b.html().replace(//gm, ""));
                    b.find(".font-icon-arr-down").removeClass("font-icon-arr-down").addClass("font-icon-arr_up");
                    b.next(".participants").slideDown("fast", function () {
                        a._fixHeight()
                    })
                } else {
                    b.removeClass("active");
                    b.html(b.html().replace(//gm, ""));
                    b.find(".font-icon-arr_up").removeClass("font-icon-arr_up").addClass("font-icon-arr-down");
                    b.next(".participants").slideUp("fast", function () {
                        a._fixHeight()
                    })
                }
            });
            return this
        }, show: function () {
            this.$el.show()
        }, _fixHeight: function () {
            var a = this.rel.length > 0 ? this.rel.position().top : 0;
            var b = a + this.container.height();
            $(this.appendTo).height("auto");
            if (b > $(this.appendTo).height()) {
                $(this.appendTo).css("height", b + "px")
            } else {
                $(this.appendTo).css("height", "auto")
            }
            if ($(window).width() < 767) {
                $(this.appendTo).parents(".eventsPage_mobile-modify").css({overflow: "visible"});
                var c = $(this.appendTo).outerHeight();
                $(this.appendTo).css("height", c + 140 + "px")
            }
        }, open: function () {
            this.container.show().css("margin-top", top);
            this._fixHeight();
            this.container.hide().fadeIn("fast");
            if (document.location.hash.indexOf("!") < 0) {
                document.location.hash = "!/id-" + this.id
            } else {
                document.location.hash += "!/id-" + this.id
            }
        }, close: function (a) {
            if (this.xhr) {
                this.xhr.abort()
            }
            var b = this;
            $(document).off("keydown." + this.closeEventKey);
            $(window).off("scroll." + this.closeEventKey);
            this.closeEventKey = null;
            this.$el.fadeOut("fast", function () {
                if (a === undefined && a !== false) {
                    b.destroy()
                }
                b.appendTo.css("height", "auto")
            });
            document.location.hash = document.location.hash.replace(/!\/id-[0-9]+/gim, "")
        }, destroy: function () {
            this.$el.remove()
        }, getData: function () {
            this.show();
            var a = this.rel.length ? this.rel.offset().top : this.appendTo.offset().top;
            this.$el.addClass("loading").css("background-position", "center " + ((this.rel.length > 0 ? this.rel.position().top : 0) + 40) + "px");
            this.closeEventKey = "esc" + (new Date).getTime() + parseInt(Math.random() * 1e4);
            $(document).on("keydown." + this.closeEventKey, this, function (a) {
                if (a.which === 27) {
                    a.data.close()
                }
            });
            $(window).on("scroll." + this.closeEventKey, this, function (b) {
                var c = $(window).scrollTop() - a;
                if ($(window).scrollTop() < b.data.$el.offset().top + b.data.$el.height() - 150) {
                    b.data.closeButton.css("margin-top", $(window).scrollTop() > a ? c + "px" : 0)
                }
            });
            $("body,html").animate({scrollTop: $(".backtoshop_wrap").offset().top - 20 + "px"}, 500);
            this.xhr = $.ajax(this.url, {data: {id: this.id}, context: this}).done(function (a) {
                var b = this;
                this.container.html(a);
                this.$el.removeClass("loading");
                this.open()
            })
        }
    };
    window["TestDriveViewer"] = TestDriveViewer;
    var CartCleaner = function (a) {
        this.$el = $('<div class="cartCleaner"><div class="mobile-shown cartCleaner-title"> </div><p class="message"></p><div class="cartView">\t\t\t\t</div><div class="cleanerSummary"><span class="buttons"><button class="button wider confirm"> </button> <a href="#" class="button wider cancel"></a></span> <!--p> : <strong><span class="total"></span> <small></small></strong></p--></div></div>').hide().appendTo("body");
        this.$el.find("button.confirm").on("click", {cleaner: this}, this.confirm);
        this.$el.find("a.cancel").on("click", {cleaner: this}, function (a) {
            a.preventDefault();
            a.data.cleaner.close()
        });
        this.rel = a;
        this.ids = null
    };
    CartCleaner.prototype = {
        position: function (a) {
            if (!a) {
                a = this.rel
            }
            var b;
            if (this.$el.is(":hidden")) {
                this.$el.show();
                b = this.$el.outerWidth();
                this.$el.hide()
            } else {
                b = this.$el.outerWidth()
            }
            var c = $(a).offset();
            this.$el.css({top: c.top + "px", left: c.left - b / 2 + $(a).outerWidth() / 2 + "px"})
        }, getData: function (a) {
            var b = this;
            b.ids = [];
            b.kit_ids = [];
            this.$el.find("p.message").text($(a).data("message"));
            this.$el.find(".cartView").html($(a).next("div").html());
            this.$el.find(".cartView").find("div[data-product-id]").each(function () {
                if (!$(this).data("kit")) {
                    b.ids.push($(this).data("product-id"))
                } else {
                    b.kit_ids.push($(this).data("product-id"))
                }
                console.log($(a))
            });
            this.position()
        }, open: function (a) {
            this.position();
            this.$el.fadeIn("fast");
            $(this.rel).addClass("cleanerOpened");
            var b = $("body");
            var c = $("html");
            if ($(window).width() < 767) {
                if (!$(b).hasClass("fixed")) {
                    $(b).addClass("fixed")
                }
                if (!$(c).hasClass("fixed")) {
                    $(c).addClass("fixed")
                }
            }
        }, close: function (a) {
            $(this.rel).removeClass("cleanerOpened");
            this.$el.fadeOut("fast", function () {
                if (a) {
                    $(this).remove()
                }
                var b = $("body");
                var c = $("html");
                if ($(b).hasClass("fixed")) {
                    $(b).removeClass("fixed")
                }
                if ($(c).hasClass("fixed")) {
                    $(c).removeClass("fixed")
                }
            })
        }, confirm: function (a) {
            a.preventDefault();
            var b = $(this);
            b.attr("disabled", "disabled");
            cartHelper.removeById(a.data.cleaner.ids, a.data.cleaner.kit_ids).done(function () {
                a.data.cleaner.close();
                $(a.data.cleaner.rel).next("span").find("input").attr("checked", "checked").trigger("change");
                $(a.data.cleaner.rel).remove();
                cartHelper.getDelivery($("#field-city-id").val(), $(a.data.cleaner.rel).data("interval"))
            }).fail(function () {
                b.removeAttr("disabled")
            }).always(function () {
                var b = $(a.data.cleaner.rel).data("interval");
                if (b) {
                    setTimeout(function () {
                        $(".js-delivery-cost-item__input:checked").removeAttr("checked");
                        var a = $(document).find('.js-delivery-cost-item__input[value="' + b + '"]');
                        a.prop("checked", true);
                        $(".timetable-body-row--current").removeClass("timetable-body-row--current");
                        a.parents(".timetable-body-row").addClass("timetable-body-row--current");
                        var c = a.parents(".timetable-body-row").data("current-day");
                        $("#mobile-delivery-days").val(c)
                    }, 1500)
                }
            })
        }, preload: function () {
        }
    };
    var Share = {
        vkontakte: function (a, b, c, d) {
            var e = "https://vkontakte.ru/share.php?";
            e += "url=" + encodeURIComponent(a);
            Share.popup(e)
        }, odnoklassniki: function (a, b) {
            var c = "https://www.odnoklassniki.ru/dk?st.cmd=addShare";
            c += "&st._surl=" + encodeURIComponent(a);
            if (b === undefined) {
                b = $("meta[property='og:description']");
                if (b.size()) {
                    b = b.attr("content")
                } else {
                    b = ""
                }
            }
            if (b) {
                c += "&st.comments=" + encodeURIComponent(b)
            }
            Share.popup(c)
        }, facebook: function (a) {
            var b = "https://www.facebook.com/sharer/sharer.php?u=" + a;
            Share.popup(b)
        }, twitter: function (a, b, c) {
            var d = "https://twitter.com/share?";
            d += "url=" + encodeURIComponent(a);
            if (b === undefined) {
                b = $("meta[property='og:title']");
                if (b.size()) {
                    b = b.attr("content")
                } else {
                    b = document.title
                }
            }
            d += "&text=" + encodeURIComponent(b);
            if (c) {
                d += "&via=" + encodeURIComponent(c)
            }
            Share.popup(d)
        }, mailru: function (a, b, c, d) {
            var e = "https://connect.mail.ru/share?";
            e += "url=" + encodeURIComponent(a);
            if (b === undefined) {
                b = $("meta[property='og:title']");
                if (b.size()) {
                    b = b.attr("content")
                } else {
                    b = document.title
                }
            }
            e += "&title=" + encodeURIComponent(b);
            if (c === undefined) {
                c = $("meta[property='og:description']");
                if (c.size()) {
                    c = c.attr("content")
                } else {
                    c = ""
                }
            }
            if (c) {
                e += "&description=" + encodeURIComponent(c)
            }
            if (d === undefined) {
                d = $("meta[property='og:image']");
                if (d.size()) {
                    d = d.attr("content")
                } else {
                    d = ""
                }
            }
            if (d) {
                e += "&imageurl=" + encodeURIComponent(d)
            }
            Share.popup(e)
        }, email: function (a, b, c) {
            var d = "mailto:?";
            if (!b) {
                var e = $("meta[property='og:title']");
                if (e.size()) {
                    b = e.attr("content")
                } else {
                    b = document.title
                }
            }
            if (c === undefined) {
                c = $("meta[property='og:description']");
                if (c.size()) {
                    c = c.attr("content")
                } else {
                    c = ""
                }
            }
            if (!c) {
                c = b + " "
            } else {
                c = c.replace(/<br\/>/gim, "\n")
            }
            $(this).attr("href", d + "subject=" + encodeURIComponent(b) + "&body=" + encodeURIComponent(c + "\n" + a))
        }, popup: function (a) {
            window.open(a, "", "toolbar=0,status=0,width=626,height=436")
        }
    };
    window["Share"] = Share;
    var topSearch = $(".siteHeader .search form");
    var search = new SearchResults({
        searchOnKey: document.location.href.indexOf("cart") < 0,
        callbacks: {
            onOpen: function () {
                topSearch.find(":text").val("")
            }, onClose: function () {
                var a = document.location.hash;
                if (a.indexOf("search/") > 0) {
                    document.location.hash = ""
                }
            }, onSearch: function (a) {
            }
        }
    });
    search.render();
    search.view.on("click", ".subscribeBtn", function (a) {
        var b = $(this).parent().find(".buyProduct");
        var c = $(a.delegateTarget);
        var d = $(this).closest(".product");
        a.preventDefault();
        a.stopPropagation();
        b.css({
            position: "absolute",
            background: "#fff",
            width: "200px",
            bottom: "-171px",
            "z-index": "999",
            left: -51
        });
        b.show();
        if ($(window).width() < b.offset().left + b.outerWidth()) {
            b.css({right: -2, left: "auto"})
        } else if (b.offset().left < 60) {
            b.css({left: 0})
        }
        if (b.offset().top + b.outerHeight() > c.height()) {
            c.animate({scrollTop: d.positionBy(c).top})
        }
        b.hide().fadeIn("fast").find(":text").trigger("keyup");
        $(this).parent().prevAll().find(".buyProduct").fadeOut("fast");
        $(this).parent().nextAll().find(".buyProduct").fadeOut("fast")
    }).on("click", ".product .buyProduct", function (a) {
        a.stopPropagation()
    }).on("mouseleave", ".product", function () {
        var a = $(this).find("input");
        if (!a.is(":focus")) {
            $(this).find(".buyProduct").fadeOut("fast")
        }
    });
    $(document).on("click", function () {
        search.view.find(".product .buyProduct:visible").fadeOut("fast")
    });
    topSearch.on("submit", function (a) {
        a.preventDefault();
        search.setVal($(this).find("#topSearch").val());
        search.open();
        search.search()
    });
    $("#mobile-search-trigger").on("click", function (a) {
        a.preventDefault();
        search.open()
    });
    var hash = document.location.hash;
    if (hash.indexOf("search/") > 0) {
        hash = decodeURIComponent(hash);
        document.location.hash = hash;
        search.setVal(hash.split("/")[1]);
        search.open();
        search.search()
    }
    $(".js-list-mobile-toggle").on("click", function (a) {
        if ($(window).width() < 767) {
            $(this).parents(".filter").find(".list-mobile-shown").slideToggle("300")
        }
    });
    $(document).on("click", function (a) {
        var b = $(".list-mobile-shown");
        if (!b.is(a.target) && b.has(a.target).length === 0) {
            b.slideUp("300")
        }
    });
    var hash = document.location.hash;
    if (hash.indexOf("search/") > 0) {
        hash = decodeURIComponent(hash);
        document.location.hash = hash;
        search.setVal(hash.split("/")[1]);
        search.open();
        search.search()
    }
    if ($("#showTutorial").length) {
        $("#showTutorial").on("click", function (a) {
            a.preventDefault();
            $("#tutorialPopup").css({
                height: "100%",
                opacity: 0
            }).fadeTo("fast", 1).find(".underlay").css("height", "100%");
            if (!$("#tutorial").data("inited")) {
                var b = videoHandler.initPlayer("tutorial");
                $("#tutorial").data("player").play();
                $("#tutorial").data("inited", true);
                $("#tutorialPopup").find(".x,.underlay").on("click", function (a) {
                    a.preventDefault();
                    $("#tutorial").data("player").pause();
                    $("#tutorialPopup").fadeTo("fast", 0, function () {
                        $(this).css("height", 0).find(".underlay").css("height", "0")
                    });
                    $("#tutorial").data("player").currentTime(0)
                })
            } else {
                $("#tutorial").data("player").play()
            }
        })
    }
    if (jQuery.fn.pickadate && jQuery.fn.pickadate.defaults) {
        jQuery.extend(jQuery.fn.pickadate.defaults, {
            monthsFull: ["", "", "", "", "", "", "", "", "", "", "", ""],
            monthsShort: ["", "", "", "", "", "", "", "", "", "", "", ""],
            weekdaysFull: ["", "", "", "", "", "", ""],
            weekdaysShort: ["", "", "", "", "", "", ""],
            today: "",
            clear: "",
            close: "",
            firstDay: 1,
            format: "d mmmm yyyy .",
            formatSubmit: "yyyy/mm/dd"
        })
    }
    $(".catalogContent").on("click", ".subscribeBtn", function (a) {
        var b = $(this).parent().find(".buyProduct");
        var c = $(a.delegateTarget);
        var d = $(this).closest(".product");
        a.preventDefault();
        a.stopPropagation();
        b.css({position: "absolute", background: "#fff", width: "200px", bottom: "-171px", "z-index": "999"});
        b.show();
        var e = -(b.outerWidth() / 2 - b.closest(".product").width() / 2);
        b.css("left", e);
        if (b.offset().left < 0) {
            b.css("left", 0)
        } else if (b.offset().left + b.outerWidth() >= $(document).width()) {
            b.css({left: "auto", right: 0})
        }
        if (b.offset().top + b.outerHeight() > c.height()) {
            c.animate({scrollTop: d.positionBy(c).top})
        }
        b.hide().fadeIn("fast").find(":text").trigger("keyup");
        $(this).parent().prevAll().find(".buyProduct").fadeOut("fast");
        $(this).parent().nextAll().find(".buyProduct").fadeOut("fast")
    }).on("click", ".product .buyProduct", function (a) {
        a.stopPropagation();
    }).on("mouseleave", ".product", function () {
        var a = $(this).find("input");
        if (!a.is(":focus")) {
            $(this).find(".buyProduct").fadeOut("fast")
        }
    });
    $(document).on("click", ".searchExample", function (a) {
        a.preventDefault();
        $(this).parents("form").find("input").val($(this).find("a").html());
        $(this).parents("form").submit()
    });
    $(document).on("click", function () {
        search.view.find(".product .buyProduct:visible").fadeOut("fast")
    });
    $("#topSearch").on("keyup", function (a) {
        var b = $(this), c = $.trim(b.val()), d = c.length;
        if (!$(this).parents("form").siblings(".search-on-type-block").hasClass("search-on-type-block--visible") && d >= 2) {
            $(this).parents("form").siblings(".search-on-type-block").addClass("search-on-type-block--visible")
        }
        if (d === 0) {
            $(this).parents("form").siblings(".search-on-type-block").removeClass("search-on-type-block--visible")
        }
        if (d >= 2) {
            var e = {type: "ajax", controller: "search", action: "autocomplete", value: c};
            $.ajax("/", {type: "POST", data: e, dataType: "JSON"}).done(function (a) {
                var c = $(".search-on-type-block");
                c.html("");
                if (a && a.result && c.length) {
                    c.html(a.result)
                }
                b.data("totalFound", a && a.total ? a.total : 0);
                sendStatOnSearch()
            })
        }
    });
    $(document).on("click", function (a) {
        var b = $(".search-on-type-block");
        if (!b.is(a.target) && b.has(a.target).length === 0) {
            b.removeClass("search-on-type-block--visible")
        }
    });
    function sendStatOnSearch(a) {
        a = typeof a != "undefined" ? a : 1500;
        var b = $("#topSearch"), c = $.trim(b.val());
        if (c) {
            if (window._searchStatTimeout) {
                window.clearTimeout(window._searchStatTimeout)
            }
            var d = b.data("totalFound") || 0;
            window._searchStatTimeout = window.setTimeout(function () {
                var a = {
                    type: "ajax",
                    controller: "search",
                    action: "addLog",
                    text: c,
                    source: "header",
                    count_results: d
                };
                $.ajax("/", {type: "POST", data: a, dataType: "JSON"})
            }, a);
            return true
        }
        return false
    }

    $(".siteHeader").on("click", ".search-on-type-top-block a", function (a) {
        sendStatOnSearch(1)
    }).on("click", ".search-on-type-middle-block a", function (a) {
        sendStatOnSearch(1)
    }).on("click", ".on-type-buy-block-item a", function (a) {
        sendStatOnSearch(1)
    }).on("click", ".on-type-buy-block-item-btn", function (a) {
    })
})(window);
function puntoSwitcher(a) {
    var b = {
        Q: "",
        W: "",
        E: "",
        R: "",
        T: "",
        Y: "",
        U: "",
        I: "",
        O: "",
        P: "",
        A: "",
        S: "",
        D: "",
        F: "",
        G: "",
        H: "",
        J: "",
        K: "",
        L: "",
        Z: "",
        X: "",
        C: "",
        V: "",
        B: "",
        N: "",
        M: "",
        q: "",
        w: "",
        e: "",
        r: "",
        t: "",
        y: "",
        u: "",
        i: "",
        o: "",
        p: "",
        "[": "",
        "]": "",
        a: "",
        s: "",
        d: "",
        f: "",
        g: "",
        h: "",
        j: "",
        k: "",
        l: "",
        ";": "",
        "'": "",
        z: "",
        x: "",
        c: "",
        v: "",
        b: "",
        n: "",
        m: "",
        ",": "",
        ".": "",
        "/": "."
    };
    var c;
    var d = "";
    for (var e = 0; e < a.length; e++) {
        c = a.charAt(e);
        d += c in b ? b[c] : c
    }
    return d
}
function commentDelete(a) {
    a = $(a);
    if (a.data("object") && a.data("object-id") && confirm(" ?\n   !")) {
        $.post("/", {
            type: "post",
            controller: "comments",
            action: "del",
            object: a.data("object"),
            object_id: a.data("object-id")
        }, function (b) {
            if (b && b.result) {
                var c = $("#comments-count");
                c.html(parseInt(c.html()) - 1);
                if (c.html() == "0") {
                    $("#comments-list").html('<section id="nothingFoundSection" class="whiteBlock textPage">    .</section>')
                } else {
                    $("#comment-" + a.data("object-id")).slideUp(function () {
                        $(this).remove()
                    })
                }
            } else {
                alert("    !")
            }
        }, "json")
    }
    return false
}
function isMobileDevice() {
    return navigator.appVersion.indexOf("iPhone") != -1 || navigator.appVersion.indexOf("iPod") != -1 || navigator.appVersion.indexOf("iPad") != -1 || navigator.appVersion.indexOf("Android") != -1
}
var openSubscribeForm = function (a, b) {
    var c = $("#subscribeForm");
    if (!c.length) {
        c = $('<div class="dropdownBox callRequest" style="width: auto" id="subscribeForm">\t\t\t\t\t\t<i class="tail"></i>\t\t\t\t\t\t<a class="faker"></a>\t\t\t\t\t\t<div class="dropdownContent">\t\t\t\t\t\t\t<form id="subscribe-form" target="server" method="post" action="/">\t\t\t\t\t\t\t\t<input type="hidden" name="type" value="post" />\t\t\t\t\t\t\t\t<input type="hidden" name="controller" value="subscribers" />\t\t\t\t\t\t\t\t<input type="hidden" name="action" value="subscribe" />\t\t\t\t\t\t\t\t<input type="hidden" name="data[subscribe_type]" value="promo" />\t\t\t\t\t\t\t\t<fieldset>\t\t\t\t\t\t\t\t\t<input type="text" name="data[subscribe_email]" value="' + b + '" id="subscribe_email" placeholder=" email" />\t\t\t\t\t\t\t\t\t<span class="error" id="error_subscribe_email"></span>\t\t\t\t\t\t\t\t</fieldset>\t\t\t\t\t\t\t\t<fieldset><input class="wider" type="submit" value="" /></fieldset>\t\t\t\t\t\t\t</form>\t\t\t\t\t\t</div>\t\t\t\t\t</div>').appendTo("body");
        c.on("click", function (a) {
            a.stopPropagation()
        });
        $(document).on("click.subscribeFormClose", c, function (a) {
            c.fadeOut("fast")
        })
    }
    if (c.is(":hidden")) {
        a.stopPropagation()
    } else {
        return
    }
    c.find("a.faker").css({width: $(this).outerWidth() + "px", marginLeft: -$(this).outerWidth() / 2 + "px"});
    c.show().css({
        top: $(this).offset().top + $(this).outerHeight() + 10 + "px",
        left: $(this).offset().left + $(this).outerWidth() / 2 - c.outerWidth() / 2 + "px"
    }).hide().fadeIn("fast").find('input[type="text"]').trigger("focus")
};
var cloneEl = function (a, b) {
    if (!b || typeof b === "function") {
        var c = $(a).parent()
    } else {
        c = b
    }
    var d = $(a).clone();
    var e = arguments[arguments.length - 1];
    if (typeof e == "function") {
        e(d)
    }
    d.hide().appendTo(c).slideDown("fast")
};
window["numForm"] = function a(b, c, d, e) {
    if (!e) {
        e = d
    }
    if (/[^1]1$/.test(b) || /^[1]$/.test(b)) {
        return c
    } else if (/[^1][2-4]$/.test(b) || /^[2-4]$/.test(b)) {
        return d
    } else {
        return e
    }
};
window.Modernizr = function (a, b, c) {
    function d(a) {
        o.cssText = a
    }

    function e(a, b) {
        return d(r.join(a + ";") + (b || ""))
    }

    function f(a, b) {
        return typeof a === b
    }

    function g(a, b) {
        return !!~("" + a).indexOf(b)
    }

    function h(a, b, d) {
        for (var e in a) {
            var g = b[a[e]];
            if (g !== c)return d === !1 ? a[e] : f(g, "function") ? g.bind(d || b) : g
        }
        return !1
    }

    var i = "2.7.2", j = {}, k = !0, l = b.documentElement, m = "modernizr", n = b.createElement(m), o = n.style, p, q = {}.toString, r = " -webkit- -moz- -o- -ms- ".split(" "), s = {}, t = {}, u = {}, v = [], w = v.slice, x, y = function (a, c, d, e) {
        var f, g, h, i, j = b.createElement("div"), k = b.body, n = k || b.createElement("body");
        if (parseInt(d, 10))while (d--)h = b.createElement("div"), h.id = e ? e[d] : m + (d + 1), j.appendChild(h);
        return f = ["&#173;", '<style id="s', m, '">', a, "</style>"].join(""), j.id = m, (k ? j : n).innerHTML += f, n.appendChild(j), k || (n.style.background = "", n.style.overflow = "hidden", i = l.style.overflow, l.style.overflow = "hidden", l.appendChild(n)), g = c(j, a), k ? j.parentNode.removeChild(j) : (n.parentNode.removeChild(n), l.style.overflow = i), !!g
    }, z = {}.hasOwnProperty, A;
    !f(z, "undefined") && !f(z.call, "undefined") ? A = function (a, b) {
        return z.call(a, b)
    } : A = function (a, b) {
        return b in a && f(a.constructor.prototype[b], "undefined")
    }, Function.prototype.bind || (Function.prototype.bind = function (a) {
        var b = this;
        if (typeof b != "function")throw new TypeError;
        var c = w.call(arguments, 1), d = function () {
            if (this instanceof d) {
                var e = function () {
                };
                e.prototype = b.prototype;
                var f = new e, g = b.apply(f, c.concat(w.call(arguments)));
                return Object(g) === g ? g : f
            }
            return b.apply(a, c.concat(w.call(arguments)))
        };
        return d
    }), s.touch = function () {
        var c;
        return "ontouchstart" in a || a.DocumentTouch && b instanceof DocumentTouch ? c = !0 : y(["@media (", r.join("touch-enabled),("), m, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function (a) {
            c = a.offsetTop === 9
        }), c
    };
    for (var B in s)A(s, B) && (x = B.toLowerCase(), j[x] = s[B](), v.push((j[x] ? "" : "no-") + x));
    return j.addTest = function (a, b) {
        if (typeof a == "object")for (var d in a)A(a, d) && j.addTest(d, a[d]); else {
            a = a.toLowerCase();
            if (j[a] !== c)return j;
            b = typeof b == "function" ? b() : b, typeof k != "undefined" && k && (l.className += " " + (b ? "" : "no-") + a), j[a] = b
        }
        return j
    }, d(""), n = p = null, j._version = i, j._prefixes = r, j.testStyles = y, l.className = l.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (k ? " js " + v.join(" ") : ""), j
}(this, this.document);
$(".bonusButton").click(function () {
    if ($(this).data("popup") == "reg") {
        $(document).trigger("login", ["reg"])
    } else {
        $("#bonusPopup").fadeIn("fast")
    }
});
$(".underlay").click(function () {
    $("#bonusPopup").fadeOut("fast")
});
function showSubscribeForm() {
    $(".buyProduct").fadeIn("fast")
}
if (window.location.hash == "#invalid-invite") {
    $("#finishedActivityPopup").fadeIn("fast")
}
$(".underlay").click(function () {
    $("#finishedActivityPopup").fadeOut("fast")
});
$(".activityPopupClose").on("click", function (a) {
    a.preventDefault();
    $(this).parents("#finishedActivityPopup").fadeOut("fast")
});
$(".subscribePopupClose").click(function (a) {
    $("#bonusPopup").fadeOut("fast")
});
$(".bonus-close").click(function (a) {
    $("#bonusPopup").fadeOut("fast")
});
$("#subscribe-form-popup-btn").click(function (a) {
    var b = $("#subscribe-form-popup").serialize();
    $.ajax({
        type: "POST", url: "/", data: b, dataType: "json", success: function (a) {
            if (a.error == undefined) {
                $("#subscribe-form-popup").hide();
                $(".bonusButtonWrap").hide();
                $(".subscribe_success").show()
            } else $("#valid").html(a.error.subscribe_email);
            $("#valid").show()
        }
    });
    a.stopPropagation()
});
$(document).on("click", ".js-product-preview .product-list-item-link", function (a) {
    if ($(window).width() > 767) {
        a.preventDefault();
        var b = $(this);
        var c = b.parents(".product").data("product-id");
        var d = "/product/" + c + "?format=popup";
        var e = $(".js-product-preview-popup");
        var f = e.find(".popupContent");
        var g = $('<div class="empty-message"><div class="h2"> ,  </div></div>');
        var h = $('<div class="preloader-ctn"><div class="ajax-preloader"></div></div>');
        var i = b.attr("href");
        $("body").addClass("fixed");
        $("html").addClass("fixed");
        f.html("");
        e.fadeIn(100);
        f.html(h);
        var j = $.ajax({type: "GET", url: d}).done(function (a) {
            if (a) {
                f.html(a);
                f.find(".js-product-popup-footer-link").attr("href", i);
                f.find(".js-popup-preview-product-title").attr("href", i);
                var b = f.find("#productGallery");
                if (b.length) {
                    b.productGallery()
                }
                $.fn.productGallery = function () {
                    return this.each(function () {
                        if (!$(this).data("productGalleryData")) {
                            $(this).data({
                                productGalleryData: {
                                    handlers: $(this).find(".thumbs a"),
                                    images: $(this).find(".image figure"),
                                    current: 0
                                }
                            })
                        }
                        var a = $(this).data("productGalleryData").handlers;
                        var b = $(this).data("productGalleryData").images;
                        b.not(":first").hide();
                        a.on("click.productGalleryChange", $(this).data("productGalleryData"), function (a) {
                            a.preventDefault();
                            var b = a.data.handlers;
                            var c = a.data.images;
                            var d = a.data.current;
                            if (!$(this).hasClass("active")) {
                                b.filter(".active").removeClass("active");
                                $(this).addClass("active");
                                var e = $(b).index(this);
                                a.data.current = e;
                                c.eq(d).fadeOut("fast", function () {
                                    $(this).removeClass("active");
                                    c.eq(e).fadeIn("fast", function () {
                                        $(this).addClass("active")
                                    })
                                })
                            }
                        })
                    })
                }
            } else {
                e.html(g)
            }
        }).error(function () {
            e.html(g)
        })
    }
});
$(document).on("click", ".js-popup-close , .js-product-preview-popup .underlay", function (a) {
    a.preventDefault();
    $(".js-product-preview-popup").fadeOut(100);
    $("body").removeClass("fixed");
    $("html").removeClass("fixed")
});
$(".desktopPage").on("click", ".js-change-pay-option", function (a) {
    a.preventDefault();
    $(this).hide(0);
    $(this).next(".orderBonus__change-option-list").delay("400").slideDown("300")
});
$(".desktopPage").on("click", ".orderBonus__change-option-list-item", function (a) {
    $(this).parents(".changePaymentList").find(".orderBonus__change-option-list-item").each(function (a) {
        if ($(this).hasClass("active")) {
            $(this).removeClass("active")
        }
    });
    $(this).addClass("active")
});
$(".desktopPage").on("click", ".js-orderBonus__change-option-list-item-cancel", function (a) {
    a.preventDefault();
    $(this).parents(".orderBonus__change-option-list").slideUp("300");
    $(this).parents(".orderBonus__change-option-list").prev(".js-change-pay-option").delay(500).show(0)
});
$(".topCart .products").perfectScrollbar();
$("#cartMenuItem").on("click", function (a) {
    if ($(this).parents("body").find(".topCartWrap").children(".product").length > 7) {
        $(this).parents("body").find(".topCart").find(".products").addClass("products-fake-scroll");
        $(".topCart .products").animate({scrollTop: 20}, 100);
        $(".topCart .products").animate({scrollTop: 0}, 1)
    }
});
if ($(".swiper-container--default").length) {
    $(".swiper-container--default").each(function (a, b) {
        var c = $(this);
        c.addClass("instance-" + a);
        c.find(".swiper-button-prev").addClass("btn-prev-" + a);
        c.find(".swiper-button-next").addClass("btn-next-" + a);
        var d = new Swiper(".instance-" + a, {
            nextButton: ".btn-next-" + a,
            prevButton: ".btn-prev-" + a,
            slideClass: "product",
            slidesPerView: 6,
            simulateTouch: false,
            slidesPerGroup: 4,
            roundLengths: true,
            breakpoints: {
                1280: {slidesPerView: 5, slidesPerGroup: 5},
                1100: {slidesPerView: 4, slidesPerGroup: 4},
                1024: {slidesPerView: 5, slidesPerGroup: 5},
                970: {slidesPerView: 4, slidesPerGroup: 4},
                767: {slidesPerView: 3, slidesPerGroup: 3},
                550: {slidesPerView: 2, slidesPerGroup: 2}
            }
        })
    })
}
if ($(".swiper-container--low").length) {
    $(".swiper-container--low").each(function (a, b) {
        var c = $(this);
        c.addClass("instance-" + a);
        c.find(".swiper-button-prev").addClass("btn-prev-" + a);
        c.find(".swiper-button-next").addClass("btn-next-" + a);
        var d = new Swiper(".instance-" + a, {
            nextButton: ".btn-next-" + a,
            prevButton: ".btn-prev-" + a,
            slideClass: "product",
            slidesPerGroup: 3,
            slidesPerView: 3,
            roundLengths: true,
            simulateTouch: false,
            breakpoints: {
                1225: {slidesPerView: 2},
                1159: {slidesPerView: 4},
                767: {slidesPerView: 3, slidesPerGroup: 3},
                550: {slidesPerView: 2, slidesPerGroup: 2}
            }
        })
    })
}
if ($(".swiper-container--good-of-day").length) {
    var productOfTheDayDesktop = {
        nextButton: ".swiper-button-next--new-product",
        slideClass: "product",
        slidesPerView: 1,
        loop: true,
        simulateTouch: false,
        observer: true,
        roundLengths: true,
        observeParents: true,
        watchSlidesVisibility: true,
        loopAdditionalSlides: 0,
        loopedSlides: 0
    };
    var productOfTheDayTablet = {
        nextButton: ".swiper-button-next--promo",
        prevButton: ".swiper-button-prev--promo",
        slideClass: "product",
        slidesPerView: 6,
        simulateTouch: false,
        slidesPerGroup: 4,
        roundLengths: true,
        breakpoints: {
            1100: {slidesPerView: 4, slidesPerGroup: 4},
            1024: {slidesPerView: 5, slidesPerGroup: 5},
            970: {slidesPerView: 4, slidesPerGroup: 4},
            767: {slidesPerView: 3, slidesPerGroup: 3},
            550: {slidesPerView: 2, slidesPerGroup: 2}
        }
    };
    var productSwiper = new Swiper(".swiper-container--good-of-day", productOfTheDayDesktop);
    var productSwiperTablet = new Swiper(".swiper-container--good-of-day--tablet", productOfTheDayTablet)
}
if ($(".swiper-container--blog").length) {
    $(".swiper-container--blog").each(function (a, b) {
        var c = $(this);
        c.addClass("instance-" + a);
        c.find(".swiper-button-prev").addClass("btn-prev-" + a);
        c.find(".swiper-button-next").addClass("btn-next-" + a);
        var d = new Swiper(".instance-" + a, {
            nextButton: ".btn-next-" + a,
            prevButton: ".btn-prev-" + a,
            slideClass: "smallBlogCard",
            spaceBetween: 10,
            slidesPerView: 5,
            slidesPerGroup: 5,
            simulateTouch: false,
            breakpoints: {
                1024: {slidesPerView: 4, slidesPerGroup: 4},
                767: {slidesPerView: 3, slidesPerGroup: 3},
                520: {slidesPerView: 1, slidesPerGroup: 1}
            }
        })
    })
}
if ($(".swiper-container--gallery").length) {
    var swiperPhotoGallery = new Swiper(".swiper-container--gallery", {
        nextButton: ".swiper-button-next",
        prevButton: ".swiper-button-prev",
        slidesPerView: 1,
        simulateTouch: false,
        effect: "fade",
        fade: {crossFade: false}
    });
    if ($(".swiper-container--gallery").find(".swiper-wrapper").children(".swiper-slide").length === 1) {
        $(".swiper-container--gallery").find(".swiper-controls-item").hide();
        swiperPhotoGallery.destroy()
    }
}
if ($(".js-add-product-comment").length) {
    $(document).on("submit", "#comment-form", function (a) {
        if ($(this).find("textarea").val().length != 0) {
            setTimeout(function () {
                $("body").find(".uploaded").html("");
                $("body").find("#error_comment_text").html("")
            }, 2e3)
        }
    })
}
$("body").on("click", ".js-header-menu__item-menu", function (a) {
    if ($(window).width() < 767) {
        a.preventDefault(a);
        if (!$("body").hasClass("mobile-menu-opened")) {
            $("body").addClass("mobile-menu-opened");
            $("html").addClass("mobile-menu-opened")
        } else {
            $("body").removeClass("mobile-menu-opened");
            $("html").removeClass("mobile-menu-opened")
        }
    }
});
if ($("html").hasClass("touch")) {
    var swipeMobileBody = $("body").hammer({cssProps: {userSelect: "auto"}});
    var swipeMobileMenu = $(".mobile-aside-menu").hammer({cssProps: {userSelect: "auto"}});

    function hideMobileMenu() {
        if ($(window).width() < 767) {
            if ($("body").hasClass("mobile-menu-opened")) {
                $("body").removeClass("mobile-menu-opened");
                $("html").removeClass("mobile-menu-opened")
            }
        }
    }

    swipeMobileBody.on("swipeleft", function (a) {
        hideMobileMenu()
    });
    swipeMobileMenu.on("swipeleft", function (a) {
        hideMobileMenu()
    })
}
$(".mobile-aside-menu").on("touchmove", function (a) {
    a.stopPropagation();
    a.stopImmediatePropagation()
});
$(".main-content-mobile-fixer").on("click", function (a) {
    var b = $(".mobile-aside-menu");
    if (!b.is(a.target) && b.has(a.target).length === 0) {
        $("body, html").removeClass("mobile-menu-opened")
    }
}).on("touchmove", function (a) {
    if ($("body").hasClass("mobile-menu-opened")) {
        a.preventDefault()
    }
});
$(".searchResults").on("click", function (a) {
    var b = $(".mobile-aside-menu");
    if (!b.is(a.target) && b.has(a.target).length === 0) {
        $("body, html").removeClass("mobile-menu-opened")
    }
});
var aboutCollapsible = $(".about-text__fog-ctn");
if (aboutCollapsible.length) {
    aboutCollapsible.on("click", ".js-about-text-fog-toggle", function (a) {
        a.preventDefault();
        var b = $(this).parents(".about-text__fog-ctn").find(".about-text__inner");
        var c = b.height();
        var d = b.css("height", "auto").height();
        b.toggleClass("toggled");
        if (b.hasClass("toggled")) {
            b.height(c).animate({height: d}, 600, function () {
                b.css("height", "auto")
            });
            $(this).text("C");
            $(this).addClass("toggled")
        } else {
            b.animate({height: "208px"}, 600);
            $(this).text("");
            $(this).removeClass("toggled")
        }
    })
}
$("body").on("click", ".js-filter-toggle__mobile", function (a) {
    if ($(window).width() < 767) {
        a.preventDefault();
        $(this).parents(".js-filter-toggle__mobile-ctn").next(".js-filter-toggle__mobile-content-to-toggle").slideToggle("300");
        $(this).toggleClass("mobile-filter-toggled")
    }
});
$(".cartPage").on("click", "#bottomContinueButton.deliveryInfo--warning", function (a) {
    a.preventDefault();
    var b = $(this).parents(".cart-page--side-col").find(".order-error-msg").data("min-price");
    var c = "  " + "<b>" + b + " " + "</b>";
    $(this).parents(".cart-page--side-col").find(".order-error-msg").html(c);
    $(this).parents(".cart-page--side-col").find(".order-error-msg").slideDown("300");
    setTimeout(function () {
        $(".cart-page--side-col").find(".order-error-msg").html("");
        $(".cart-page--side-col").find(".order-error-msg").slideUp("300")
    }, 2e3)
});
if ($("#bottomSubmitButton").hasClass("deliveryInfo--warning")) {
    $("#bottomSubmitButton").prop("disabled", true)
}
$(".cartPath").on("click", "#topContinueButton.disabled", function (a) {
    a.preventDefault();
    var b = $(this).parents(".cartPath").next(".cartPage").find(".order-error-msg").data("min-price");
    var c = "  " + "<b>" + b + " " + "</b>";
    $(this).parents(".cartPath").next(".cartPage").find(".order-error-msg").html(c);
    $(this).parents(".cartPath").next(".cartPage").find(".order-error-msg").addClass("order-error-shake");
    setTimeout(function () {
        $(".order-error-msg").removeClass("order-error-shake")
    }, 400);
    $(this).parents(".cartPath").next(".cartPage").find(".deliveryInfo.deliveryInfo--warning").addClass("deliveryInfo--warning-active")
});
$("body").on("openCatalogMenu", function () {
    $("body").addClass("catalog-responsive-aside-main-ctn--triggered");
    $("html").addClass("catalog-responsive-aside-main-ctn--triggered")
}).on("closeCatalogMenu", function () {
    $("body").removeClass("catalog-responsive-aside-main-ctn--triggered");
    $("html").removeClass("catalog-responsive-aside-main-ctn--triggered")
}).on("toggleCatalogMenu", function () {
    if ($("body").hasClass("catalog-responsive-aside-main-ctn--triggered")) {
        $("body").trigger("closeCatalogMenu")
    } else {
        $("body").trigger("openCatalogMenu")
    }
}).on("click", ".js-catalog-trigger-tablet, .js-catalog-trigger-mobile", function (a) {
    a.preventDefault();
    $("body").trigger("toggleCatalogMenu")
}).on("click", ".js-catalog-responsive-aside-main-inner-close", function (a) {
    a.preventDefault();
    $("body").trigger("closeCatalogMenu")
}).on("touchmove", function (a) {
    if ($("html").hasClass("catalog-responsive-aside-main-ctn--triggered")) {
        a.preventDefault();
        a.stopPropagation()
    }
}).on("touchstart touchmove", ".catalog-responsive-aside-main-inner", function (a) {
    a.stopPropagation()
});
$(document).on("change", "#mobile-delivery-intervals", function (a) {
    $("#order-form-section-submit").slideDown("fast").find(".ajax-loading-overlay").remove()
});
if ($(".cardLabelFix").length) {
    function fixCartLabel() {
        if ($(window).width() < 1325) {
            var a = $(".cart_cell--cart-fix").find(".cartMenuItem");
            var b = $(window).width() - (a.offset().left + a.outerWidth());
            $(".fixedMenu").find(".cardLabelFix").css({right: b + "px"})
        }
    }

    fixCartLabel();
    $(window).on("resize", function (a) {
        fixCartLabel()
    })
}
var reviewVideo = $(".video-pop-main-ctn").find("video");
if (reviewVideo.length) {
    if ($(window).width() < 520) {
        setTimeout(function () {
            $(".video-pop-main-ctn").find("video").each(function () {
                var a = parseInt($(this).data("mobile-height"), 10);
                $(this).parent(".video-js").addClass("popup-video-fix-mobile-height");
                $(this).parents(".video-popup-ctn").find(".video-js").css("height", a)
            })
        }, 300)
    }
    $(window).on("resize", function (a) {
        if ($(window).width() > 520) {
            $(".video-pop-main-ctn").find("video").each(function () {
                if ($(this).parent(".video-js").hasClass("popup-video-fix-mobile-height")) {
                    var a = $(this).data("height");
                    $(this).parent(".video-js").css("height", a);
                    $(this).parent(".video-js").removeClass("popup-video-fix-mobile-height")
                }
            })
        }
        if ($(window).width() < 520) {
            $(".video-pop-main-ctn").find("video").each(function () {
                if (!$(this).parent(".video-js").hasClass("popup-video-fix-mobile-height")) {
                    var a = parseInt($(this).data("mobile-height"), 10);
                    $(this).parent(".video-js").addClass("popup-video-fix-mobile-height");
                    $(this).parents(".video-popup-ctn").find(".video-js").css("height", a + 1)
                }
            })
        }
    })
}
if ($(".js-cart-one-click-controls-open").length) {
    $(document).on("click", ".js-cart-one-click-controls-open", function (a) {
        a.preventDefault();
        if (!$(".js-cart-one-click__toggle-ctn").hasClass("cart-one-click__toggle-ctn--toggled")) {
            $(".js-cart-one-click__toggle-ctn").addClass("cart-one-click__toggle-ctn--toggled")
        }
        $(".js-cart-one-click__toggle-ctn").find(".js-cart-one-click__content-to-toggle").slideDown("300")
    })
}
if ($(".js-cart-one-click-controls-close").length) {
    $(document).on("click", ".js-cart-one-click-controls-close", function (a) {
        a.preventDefault();
        if ($(".js-cart-one-click__toggle-ctn").hasClass("cart-one-click__toggle-ctn--toggled")) {
            $(".js-cart-one-click__toggle-ctn").removeClass("cart-one-click__toggle-ctn--toggled")
        }
        $(".js-cart-one-click__toggle-ctn").find(".js-cart-one-click__content-to-toggle").slideUp("300")
    })
}
if ($(".js-full-cart-summary--will-fix").length) {
    function fixCartAdditionalForm() {
        var a = $(".js-full-cart-summary--will-fix");
        var b = $(".cart-page-ctn");
        var c = $(document).scrollTop();
        var d = b.offset();
        var e = d.top;
        if (e - c < 0 && !$(a).hasClass("full-cart-summary--fixed")) {
            $(a).addClass("full-cart-summary--fixed")
        }
        if (e - c > 0 && $(a).hasClass("full-cart-summary--fixed")) {
            $(a).removeClass("full-cart-summary--fixed")
        }
    }

    fixCartAdditionalForm();
    $(window).on("scroll", function (a) {
        fixCartAdditionalForm()
    })
}
(function (window, document, undefined) {
    function handleTestDrive(a, b) {
        var c = a.find("[data-testdrive-holder]");
        if (b.testDrive) {
            var d = $(b.testDrive);
            if (c.is(":empty")) {
                d.hide().fadeIn("fast")
            }
            c.replaceWith(d)
        } else {
            c.fadeOut("fast", function () {
                $(this).text("").show()
            })
        }
    }

    var cartHelper = {
        url: {
            add: "/?type=ajax&controller=cart&action=add",
            remove: "/?type=ajax&controller=cart&action=del",
            bonus: "/src/ajax/applyBonus.json",
            promo: "/src/ajax/applyPromo.json"
        },
        topCart: null,
        cartMenuItem: null,
        topCartSummary: null,
        promoForm: null,
        cartList: null,
        ingredientsTable: null,
        saveSnapshot: function () {
            if (window["localStorage"]) {
                try {
                    localStorage.setItem("cartSnapshotId", this.getContentKey());
                    localStorage.setItem("cartSnapshotList", this.topCart.find(".products").html());
                    localStorage.setItem("cartSnapshotSummary", this.topCartSummary.html());
                    localStorage.setItem("cartSnapshotAmount", this.cartMenuItem.filter("#cartMenuItem").find("i").text());
                    return true
                } catch (a) {
                    console.log("Local Storage is not supported")
                }
            } else {
                return false
            }
        },
        getSnapshotId: function () {
            if (window["localStorage"]) {
                return localStorage.getItem("cartSnapshotId")
            } else {
                return false
            }
        },
        getSnapshot: function () {
            if (window["localStorage"]) {
                if (this.getSnapshotId()) {
                    return {
                        id: this.getSnapshotId(),
                        list: localStorage.getItem("cartSnapshotList"),
                        summary: localStorage.getItem("cartSnapshotSummary"),
                        totalQuantity: parseInt(localStorage.getItem("cartSnapshotAmount"))
                    }
                } else {
                    return false
                }
            } else {
                return false
            }
        },
        removeSnapshot: function () {
            if (window["localStorage"]) {
                localStorage.removeItem("cartSnapshotId");
                localStorage.removeItem("cartSnapshotList");
                localStorage.removeItem("cartSnapshotSummary");
                localStorage.removeItem("cartSnapshotAmount");
                return true
            } else {
                return false
            }
        },
        actualize: function () {
            if (window["localStorage"]) {
                var a = this.getSnapshot();
                if (a && this.getSnapshotId() != this.getContentKey()) {
                    if (this.topCart.length) {
                        var b = this.topCart.find(".products");
                        b.html(a.list);
                        b.find(".product.inCart.removing").remove();
                        this.updateSummary(a);
                        if (!b.find("article.product.inCart").length) {
                            b.slideUp("fast");
                            var c = $("div.buyProduct[data-product-id], article.product[data-product-id]");
                            c.trigger("updateQty", [0])
                        } else {
                            if (b.is(":hidden")) {
                                b.slideDown("fast")
                            }
                            var d = [];
                            b.find("article.product.inCart").each(function () {
                                var a = $(this).find("p.count i").text();
                                d.push($('div.buyProduct:not(.inCart)[data-product-id="' + $(this).data("product-id") + '"], article:not(.inCart)[data-product-id="' + $(this).data("product-id") + '"]' + ($(this).data("kit") ? '[data-kit="true"]' : ':not([data-kit="true"])')).addClass("actualized").trigger("updateQty", [a]))
                            });
                            $("div.buyProduct[data-product-id]:not(.actualized,.inCart), article.product[data-product-id]:not(.actualized,.inCart)").trigger("updateQty", [0]);
                            $(d).each(function () {
                                $(this).removeClass("actualized")
                            })
                        }
                    }
                    if (this.cartList.length) {
                        notify("fail", {
                            header: "  !",
                            text: '<a onclick="document.location.href = document.location.href; return false;" href="#" class="button"> </a>',
                            hideAfter: "never"
                        })
                    }
                }
                return true
            } else {
                return false
            }
        },
        getContentKey: function () {
            var a = function (a) {
                var b = "";
                a.each(function () {
                    b += ($(this).data("kit") ? "k" : "") + $(this).data("product-id") + $(this).find("p.count i").text()
                });
                return b ? $.cookie("uid") + b : null
            };
            if (this.topCart.length) {
                return a(this.topCart.find("article.product.inCart"))
            }
            if (this.cartList.length) {
                return a(this.cartList.find("tbody.inCart:not(.removed)"))
            } else {
                return null
            }
        },
        init: function () {
            this.topCart = $("#topCart");
            this.cartMenuItem = $("[data-id='cartMenuItem'], #stickedCartMenuItem");
            this.cartMenuItemMobile = $("#cartMenuItemMobile");
            this.topCartSummary = $("#topCartSummary");
            this.promoForm = $("#promoForm");
            this.cartList = $("#cartList");
            this.goneList = $("#goneItems");
            this.historyOrderLists = $("table.orderList");
            this.subtotal = $("#subtotal");
            this.totalSummary = $("#summaryTotal");
            this.discount = $("#cartDiscount");
            this.ingredientsTable = $("#ingredients");
            this.events.cartHelper = this;
            this.oracle = $("#oracle");
            this.orderBonus = $("#orderBonus");
            this.bonusesPay = $("#bonusesPay");
            this.use = $("#use");
            this.summaryOrderBonus = $(".js-summary-order-bonus-value");
            this.getPossibleBonus = $(".js-cart-get-bonus-ctn");
            this.events.bind();
            this.cartTriggerMenu = this.cartMenuItem.filter("#cartMenuItem");
            this.cartTriggerSticked = this.cartMenuItem.filter("#stickedCartMenuItem");
            $(".cartPage").on("click", "#topContinueButton, #bottomContinueButton", function (a) {
                if ($(this).hasClass("disabled")) {
                    a.preventDefault()
                }
            });
            $("body").on("mouseenter", ".topCart .products", function (a) {
                if (!$(this).parents("body").hasClass("noscroll")) {
                    $(this).parents("body").addClass("noscroll")
                }
                if (!$(this).parents("html").hasClass("noscroll")) {
                    $(this).parents("html").addClass("noscroll")
                }
            }).on("mouseleave", ".topCart .products", function (a) {
                if ($(this).parents("body").hasClass("noscroll")) {
                    $(this).parents("body").removeClass("noscroll")
                }
                if ($(this).parents("html").hasClass("noscroll")) {
                    $(this).parents("html").removeClass("noscroll")
                }
            });
            $(window).on("scroll.fixedMenu", function (a) {
                var b = $("#fixedMenu").parent().parent();
                var c = $(window).scrollLeft();
                if (c > 0 && c <= $(document).width() - $(window).width()) {
                    b.css("left", -c + "px")
                } else if (parseInt(b.css("left")) !== 0 && c === 0) {
                    b.css("left", 0 + "px")
                }
            }).on("resize.stickerPosition", this, function (a) {
                var b = a.data;
                if (b.cartTriggerSticked.is(":visible")) {
                    b.stickerPosition()
                }
            });
            $(window).one("load", function () {
                $(this).trigger("resize.fixedMenu")
            });
            if ($.cookie("isMobile") == "yes") {
                this.stickScroll = $(".mobileHeader").outerHeight();
                $(window).on("scroll", {helper: this}, function (a) {
                    var b = a.data.helper;
                    if ($(window).scrollTop() > b.stickScroll) {
                        b.cartTriggerSticked.parent().show()
                    } else {
                        if (!b.topCart.is(":hidden")) {
                            b.cartTriggerSticked.parent().hide()
                        }
                    }
                })
            }
            if (window["localStorage"]) {
                this.removeSnapshot();
                $(window).on("storage", this, function (a) {
                    var b = a.originalEvent;
                    var c = a.data;
                    if (b.key === "cartSnapshotId") {
                        if (b.oldValue !== b.newValue && b.newValue !== c.getContentKey()) {
                            setTimeout(function () {
                                c.actualize()
                            }, 10)
                        }
                    }
                })
            }
            $("#link-already-bought").on("click", function () {
                $("#login_ret").val("/cart/order");
                $("#login_email").val($("#field-email").val());
                $("#recovery_email").val($("#field-email").val());
                $(document).trigger("login", ["login"]);
                $("#login_email").focus()
            })
        },
        addRequest: function (a, b, c) {
            return cartApi.addToCart(a, b, c)
        },
        removeRequest: function (a, b) {
            var c = {};
            return cartApi.removeFromCart(a, b, c)
        },
        makeProductsSelector: function (a) {
            var b = [];
            $.each(a, function () {
                b.push('[data-product-id="' + this + '"]')
            });
            return b.join(",")
        },
        updateOrderBonus: function (a, b) {
            if (this.orderBonus.length > 0) {
                this.orderBonus.text(a)
            }
            if (this.oracle.length > 0) {
                this.oracle.animate({width: b + "%"}, "fast")
            }
        },
        addById: function (a, b, c) {
            if (c === undefined) {
                c = false
            }
            var d = this.addRequest(a, b, c);
            var e = this;
            d.done(function (a) {
                if (a.status === "ok") {
                    if (!$.isArray(a.ids)) {
                        a.ids = [a.ids]
                    }
                    var b = e.topCart.find(".products");
                    if (e.topCart.length && a.card) {
                        if (!e.topCart.find('article.product[data-product-id="' + a.ids[0] + '"]' + (a.kit ? '[data-kit="true"]' : ':not([data-kit="true"])')).length) {
                            var c = $(a.card);
                            b.find(".topCartWrap").find(".js-topCart-to-insert").after(c);
                            if (c.is(":visible")) {
                                c.hide().fadeIn("fast")
                            }
                            if (!b.is(":visible")) {
                                b.slideDown("fast")
                            }
                        }
                    }
                    $('article.product[data-product-id="' + a.ids[0] + '"]' + (a.kit ? '[data-kit="true"]' : ':not([data-kit="true"]), .buyProduct[data-product-id="' + a.ids[0] + '"]')).trigger("updateQty", [a.quantity]);
                    if (e.cartList.length) {
                        var d = e.cartList.find('tbody[data-product-id="' + a.ids[0] + '"]');
                        if (d.length) {
                            d.trigger("unmarkAsRemoved");
                            $('tbody[data-product-id="' + a.ids[0] + '"]').trigger("updateQty", [a.quantity, {
                                price: a.price,
                                oldPrice: a.price_old,
                                bonus: a.bonus,
                                discount: a.discount,
                                items: a.items
                            }])
                        } else {
                            e.cartList.append($(a.cartCard).hide().slideDown("fast"))
                        }
                        handleTestDrive(e.cartList, a);
                        $("#topContinueButton, #bottomContinueButton").removeAttr("style")
                    }
                    if (e.ingredientsTable.length > 0) {
                        e.ingredientsTable.find('tbody[data-product-id="' + a.ids[0] + '"]').trigger("updateQty", [a.quantity])
                    }
                    e.cartMenuItem.next("a.button").addClass("hilight");
                    e.updateSummary(a);
                    if (a.error) {
                        notify("fail", {header: "", text: a.error ? a.error : "   !"})
                    }
                } else {
                    notify("fail", {header: "", text: a.error ? a.error : "   !"})
                }
            }).done(function () {
                e.saveSnapshot();
                e = null
            });
            return d
        },
        removeById: function (a, b) {
            if (b === undefined) {
                b = false
            }
            var c = this.removeRequest(a, b);
            var d = this;
            var e;
            var f;
            if (d.topCart.length) {
                e = d.topCart.find('article.product[data-product-id="' + a + '"]' + (b ? '[data-kit="true"]' : ':not([data-kit="true"])'));
                if (e.length) {
                    e.addClass("removing")
                }
            }
            if (d.cartList.length) {
                f = d.cartList.find('tbody[data-product-id="' + a + '"]' + (b ? '[data-kit="true"]' : ':not([data-kit="true"])'));
                if (f.length) {
                    f.trigger("markAsRemoved")
                }
            }
            try {
                var g = e || f;
                var h = parseInt(g.find(".price").text().replace(/ /g, ""));
                var i = {
                    pageType: 9,
                    currentProduct: {id: g.data("product-id"), name: g.find(".productHeader").text(), price: h}
                };
                window.APRT_SEND(i)
            } catch (a) {
            }
            c.done(function (a) {
                if (a.status === "ok") {
                    if (!$.isArray(a.ids)) {
                        a.ids = [a.ids]
                    }
                    if (e && !e.siblings("article.product").length) {
                        d.topCart.find(".products").slideUp("fast")
                    }
                    if (d.topCart.length) {
                        if (e.length) {
                            e.fadeOut("fast", function () {
                                $(this).remove()
                            });
                            e = null
                        }
                    }
                    var b = $('div.buyProduct[data-product-id="' + a.ids[0] + '"], article.product[data-product-id="' + a.ids[0] + '"]' + (a.kit ? '[data-kit="true"]' : ':not([data-kit="true"])'));
                    if (b.length) {
                        b.trigger("updateQty", 0)
                    }
                    if (d.ingredientsTable.length > 0 && !a.kit) {
                        d.ingredientsTable.find('tbody[data-product-id="' + a.ids[0] + '"]' + (a.kit ? '[data-kit="true"]' : ':not([data-kit="true"])')).trigger("updateQty", 0)
                    }
                    if (a.discount && a.discount > 0) {
                        d.cartList.find(".discountCell").show();
                        $.each(a.items, function (a, b) {
                            d.cartList.find('tbody[data-product-id="' + a + '"]').find(".discountCell").html(b.discount.value + ' <small class="rubSmall"></small><small class="note">' + (b.discount.pct > 0 ? b.discount.pct + "%" : " ") + "</small>");
                        })
                    } else {
                        d.cartList.find(".discountCell").hide()
                    }
                    if (d.cartList.length) {
                        if (a.totalQuantity == 1 && a.gift_id) {
                            $("#topContinueButton, #bottomContinueButton").css({
                                position: "relative",
                                left: "-9999px",
                                visibility: "hidden"
                            })
                        }
                        handleTestDrive(d.cartList, a)
                    }
                    d.updateSummary(a)
                } else {
                    if (e && e.length) {
                        e.removeClass("removing")
                    }
                    if (f && f.length) {
                        f.trigger("markAsRemoved")
                    }
                }
                d.cartMenuItem.next("a.button").removeClass("hilight")
            }).done(function () {
                d.saveSnapshot();
                d = null
            });
            return c
        },
        updateSummary: function (a) {
            var b = this;
            if (this.topCart.length) {
                var c = this.topCart.find(".products");
                var d = this.topCart.find('[data-product-id="cart-packet"]');
                if (a.packets) {
                    if (!d.length) {
                        c.find(".topCartWrap").append("\n").append(a.packets.top)
                    } else {
                        d.trigger("updateQty", [a.packets.amount])
                    }
                } else {
                    d.fadeOut("fast", function () {
                        $(this).remove()
                    })
                }
            }
            if ($("#readyKitsInvite").length) {
                $.cookie("readyKitsPopupCancel", true);
                $.cookie("readyKitsPopupHide", true);
                $(document).find(".popup-readyKits-invite-ctn").removeClass("popup-readyKits-invite--shown");
                $(document).find(".popup-readyKits-invite--shown").removeClass("popup-readyKits-invite--shown")
            }
            if (this.summaryOrderBonus.length) {
                this.summaryOrderBonus.html(a.bonus.value)
            }
            if (a.bonus.priceDifference > 0) {
                this.getPossibleBonus.show(0);
                this.getPossibleBonus.find(".cart-additional-get-bonus__bonus-sum").html("+" + a.bonus.maxValue + " .");
                this.getPossibleBonus.find(".js-cart-additional-get-bonus__order-sum").html(a.bonus.priceDifference + " .")
            } else {
                this.getPossibleBonus.hide(0)
            }
            if (this.cartList.length) {
                var e = this.cartList.find('[data-product-id="cart-packet"]');
                if (a.packets) {
                    if (!e.length) {
                        this.cartList.append($(a.packets.cart).hide().slideDown("fast"))
                    } else {
                        e.trigger("updateQty", [a.packets.amount, {price: a.packets.total, isPacket: true}])
                    }
                } else {
                    e.fadeOut("fast", function () {
                        $(this).remove()
                    })
                }
                if (a.items && $.isArray(a.items) && a.items.length < 1) {
                    $("#topContinueButton, #bottomContinueButton").addClass("disabled");
                    if (a.totalsumHint.cssClass) {
                        $("#topContinueButton, #bottomContinueButton").addClass("disabled")
                    } else if (a.totalsumHint.cssClass === null) {
                        $("#topContinueButton, #bottomContinueButton").removeClass("disabled")
                    }
                } else {
                    $("#topContinueButton, #bottomContinueButton").removeClass("disabled");
                    if (a.totalsumHint.cssClass) {
                        $("#topContinueButton, #bottomContinueButton").addClass("disabled")
                    } else if (a.totalsumHint.cssClass === null) {
                        $("#topContinueButton, #bottomContinueButton").removeClass("disabled")
                    }
                }
            }
            if (this.topCart.length) {
                $.each(a.items, function (a, c) {
                    if (!c.available) {
                        b.topCart.find('[data-product-id="' + a + '"]').find(".count").text("  ")
                    } else {
                        if (!b.topCart.find('[data-product-id="' + a + '"] .count .minus').length) {
                            b.topCart.find('[data-product-id="' + a + '"]').find(".count").html('<a class="minus" href="javascript://"></a> <span><i>' + c.amount + '</i> .</span> <a class="plus" href="javascript://">+</a>')
                        }
                    }
                })
            }
            if (a.promocodes && (this.topCart.length || this.cartList.length)) {
                this.processPromoCode(a, a.items)
            }
            if (!$.cookie("readyKitsPopupHide")) {
                $.cookie("readyKitsPopupHide", true);
                $(".popup-readyKits-invite-ctn").remove();
                $(document).find(".popup-readyKits-invite--shown").removeClass("popup-readyKits-invite--shown")
            }
            if (this.topCartSummary.length) {
                this.topCartSummary.html(a.totalQuantity === 0 ? " " : a.summary);
                if (a.totalQuantity > 0) {
                    if (a.totalQuantity == 1 && a.gift_id) {
                        this.topCartSummary.next("a.button").hide();
                        $(this.cartMenuItem).filter('[data-id="cartMenuItem"]').parent().find(".button").text(" ").addClass("nobg")
                    } else {
                        this.topCartSummary.next("a.button").show();
                        $(this.cartMenuItem).filter('[data-id="cartMenuItem"]').parent().find(".button").text("");
                        $(this.cartMenuItem).filter('[data-id="cartMenuItem"]').parent().find(".button").removeClass("nobg")
                    }
                } else {
                    this.topCartSummary.next("a.button").hide();
                    $(this.cartMenuItem).filter('[data-id="cartMenuItem"]').parent().find(".button").addClass("nobg");
                    $(this.cartMenuItem).filter('[data-id="cartMenuItem"]').parent().find(".button").text(" ");
                    this.topCart.find(".products").slideUp("fast")
                }
            }
            if (this.cartMenuItem.length) {
                this.cartMenuItem.filter("#cartMenuItem").parent().stop().fadeTo("fast", .3, function () {
                    $(this).fadeTo("slow", 1)
                });
                this.cartMenuItem.find("i").text(a.totalQuantity);
                $('[data-id="topMenuCartPrice"]').text(numeral(a.subTotal).format("0,0"));
                this.cartMenuItemMobile.find("i").text(a.totalQuantity);
                $('[data-id="topMenuCartPrice"]').text(numeral(a.subTotal).format("0,0"));
                if (a.subTotal > a.minAllowablePrice) {
                    if (this.cartMenuItem.parents("#fixedMenu").find(".button").hasClass("disabled")) {
                        this.cartMenuItem.parents("#fixedMenu").find(".button").removeClass("disabled")
                    }
                    if (this.cartMenuItem.parents(".fixedMenu").siblings(".topCartFixer").find(".cartSummary").find(".button").hasClass("disabled")) {
                        this.cartMenuItem.parents(".fixedMenu").siblings(".topCartFixer").find(".cartSummary").find(".button").removeClass("disabled")
                    }
                }
                if (a.subTotal <= a.minAllowablePrice) {
                    if (!this.cartMenuItem.parents("#fixedMenu").find(".button").hasClass("disabled")) {
                        this.cartMenuItem.parents("#fixedMenu").find(".button").addClass("disabled")
                    }
                    if (!this.cartMenuItem.parents(".fixedMenu").siblings(".topCartFixer").find(".cartSummary").find(".button").hasClass("disabled")) {
                        this.cartMenuItem.parents(".fixedMenu").siblings(".topCartFixer").find(".cartSummary").find(".button").addClass("disabled")
                    }
                    if (a.totalQuantity === 0) {
                        this.cartMenuItem.parents("#fixedMenu").find(".button").removeClass("disabled")
                    }
                }
            }
            if (this.subtotal.length && a.subTotal !== undefined) {
                this.subtotal.html('<span class="subtotal-summ">' + numeral(a.subTotal).format("0,0") + "</span>" + ' <small class="rubSmall"></small>');
                $('[data-id="topMenuCartPrice"]').text(numeral(a.subTotal).format("0,0"))
            }
            if (this.discount.length) {
                if (a.discount) {
                    this.discount.show();
                    this.discount.find("b").text(numeral(a.discount).format("0,0") + "%");
                    this.discount.find("span").html("(-" + numeral(a.discountPrice).format("0,0") + ' <small class="rubSmall"></small>)')
                } else {
                    this.discount.hide()
                }
            }
            if (a.promocode) {
                $("#usePromocode").hide();
                notify("fail", {hideAfter: 7500, header: "  ", text: a.promocode});
                this.promoForm.trigger("enable")
            }
            if (this.totalSummary.length && typeof a.total != "undefined") {
                this.totalSummary.text(numeral(a.total).format("0,0"))
            }
            var f = $("#headerQuantity");
            if (f.length > 0 && a.totalQuantity !== undefined) {
                f.text(a.totalQuantity + " " + numForm(a.totalQuantity, "", "", ""))
            }
            this.updateOrderBonus(a.bonus, a.bonusOracle);
            if (a.maraquiaCard !== undefined) {
                if (a.maraquiaCard === null) {
                    this.cartList.find('tbody.inCart[data-product-id="maraquia-tree"]').fadeOut("fast", function () {
                        $(this).remove()
                    })
                } else if (this.cartList.find('tbody.inCart[data-product-id="maraquia-tree"]').length < 1) {
                    var g = $(a.maraquiaCard).hide();
                    this.cartList.append(g.fadeIn("fast"))
                }
            }
            var h = $("#cart-deliveryInfo");
            var i = $("#bottomContinueButton");
            var j = $("#bottomSubmitButton");
            var k = $(".cart-page--side-col").find(".summary ");
            var l = $(".order-error-msg");
            if (a.totalsumHint && a.totalsumHint.text) {
                h.find(".buyMore").html(a.totalsumHint.text);
                h.slideDown("fast");
                i.attr("class", "button " + a.totalsumHint.cssClass);
                j.attr("class", "wider " + a.totalsumHint.cssClass);
                i.next(".order-error-msg").html("");
                j.prop("disabled", false);
                k.addClass(a.totalsumHint.cssClass);
                l.html("");
                l.slideUp("300");
                if (a.totalsumHint.cssClass == null) {
                    h.attr("class", "deliveryInfo");
                    i.attr("class", "button ");
                    j.attr("class", "wider ");
                    k.removeClass(a.totalsumHint.cssClass);
                    if (k.hasClass("deliveryInfo--warning")) {
                        k.removeClass("deliveryInfo--warning")
                    }
                }
                if (a.totalsumHint.cssClass === "deliveryInfo--warning") {
                    j.prop("disabled", true)
                }
            } else {
                h.slideUp("fast")
            }
            if (a.bonus) {
                $("#cart-possible-bonus").fadeIn("fast").find("b").text(a.bonus)
            } else {
                $("#cart-possible-bonus").fadeOut("fast")
            }
        },
        toggleCartState: function () {
            if (this.topCart.length) {
                if (!this.topCart.is(":visible")) {
                    this.cartMenuItem.addClass("active");
                    this.showSticker();
                    this.topCart.parents("body").find(".notifies_container").find(".min-summ__notification").parents(".notifier.fail").hide();
                    this.cartMenuItem.parents("body").find(".js-menu-logout").fadeOut(0);
                    $("body").on("click.cartClose touchstart.cartClose", this, function (a) {
                        a.data.toggleCartState()
                    });
                    return this.topCart.show().css("margin-top", -this.topCart.outerHeight() + "px").animate({marginTop: "0px"}, "fast")
                } else {
                    $("body").off("click.cartClose touchstart.cartClose");
                    this.cartMenuItem.parents("body").find(".js-menu-logout").fadeIn("300");
                    this.cartMenuItem.removeClass("active");
                    this.hideSticker();
                    this.topCart.parents("body").find(".notifies_container").find(".min-summ__notification").parents(".notifier.fail").hide();
                    return this.topCart.animate({marginTop: -this.topCart.outerHeight() + "px"}, "fast", function () {
                        $(this).hide()
                    })
                }
            }
        },
        stickerPosition: function () {
            this.cartTriggerSticked.css("right", $(document).outerWidth() - (this.cartTriggerMenu.offset().left + this.cartTriggerMenu.outerWidth()) + "px")
        },
        showSticker: function () {
            if (this.cartTriggerSticked.is(":hidden")) {
                this.cartTriggerSticked.stop().show();
                this.stickerPosition();
                this.cartTriggerSticked.animate({bottom: -this.cartTriggerSticked.outerHeight() + "px"}, "fast").find("i").text(this.cartTriggerMenu.find("i").text())
            }
        },
        hideSticker: function () {
            this.cartTriggerSticked.fadeOut(100, function () {
                $(this).css("bottom", 0)
            })
        },
        payByBonus: function (a) {
            var b = this;
            cartApi.payByBonus(a).then(function (a) {
                if (a && a.status == "ok") {
                    b.updateSummary(a)
                }
            })
        },
        processPromoCode: function (a, b) {
            var c = this;
            var d = a.promocodes;
            var e = $("#cart-promocodes [data-promocode-id]");
            var f = $("#cart-promocode");
            e.hide();
            var g;
            if (c.topCart.length) {
                g = c.topCart.find(".product[data-promocode-id]");
                g.each(function () {
                    var a = $(this).data("promocode-id");
                    if (!(a in d)) {
                        $(this).fadeOut("fast", function () {
                            $(this).remove()
                        })
                    }
                })
            }
            if (c.cartList.length) {
                g = c.cartList.find("tbody[data-promocode-id]");
                g.each(function () {
                    var a = $(this).data("promocode-id");
                    if (!(a in d)) {
                        $(this).fadeOut("fast", function () {
                            $(this).remove()
                        })
                    }
                })
            }
            var h = false;
            $.each(d, function (d, g) {
                if (g.type === "gift") {
                    k = null;
                    var i;
                    if (c.cartList.length) {
                        i = c.cartList.find('tbody[data-promocode-id="' + g.id + '"]');
                        if (!i.length) {
                            c.cartList.append(g.cartCard)
                        }
                    }
                    if (c.topCart.length) {
                        i = c.topCart.find('.product[data-promocode-id="' + g.id + '"]');
                        if (!i.length) {
                            c.topCart.find(".products .topCartWrap").append($(g.card))
                        }
                    }
                }
                if (g.type == "discount_pct") {
                    k = null;
                    $("#cartDiscount").remove();
                    if (b) {
                        $.each(b, function (a, b) {
                            c.cartList.find('tbody[data-product-id="' + a + '"]').find(".discountCell").show().html(b.discount.value + ' <small class="rubSmall"></small><small class="note">' + (b.discount.pct > 0 ? b.discount.pct + "%" : " ") + "</small>")
                        })
                    }
                }
                if (g.type == "bonus_rub" && a.updBonus) {
                    var j;
                    if (a.updBonus <= a.subTotal) {
                        j = a.updBonus
                    } else {
                        j = a.subTotal
                    }
                    c.bonusesPay.val(j)
                }
                if (g.type != "gift") {
                    var k = e.filter('[data-promocode-id="' + g.id + '"]');
                    if (!k.length) {
                        k = $('<tr data-promocode-id="' + g.id + '"><td class="label"></td><td class="priceCell"></td> </tr>').hide().appendTo("#cart-promocodes")
                    }
                    var l = "";
                    if (g.text) {
                        l = $('<a href="javascript://" class="dashed" data-tooltip="' + g.text + '">' + g.title + "</a>").tooltip()
                    } else {
                        l = g.title
                    }
                    k.find(".label").html(l);
                    if (g.type != "people_status") {
                        k.find(".priceCell").html(g.value ? "<b>" + g.value + (g.type == "discount_pct" ? "%" : ' <small class="rubSmall"></small>') + "</b>" : "<b></b>")
                    }
                    k.show()
                }
                if (g.code == f.val()) {
                    $(".promo-input__ctn").find(".js-promocode-del").show(0);
                    f.data("code-id", g.cart_promocode_id)
                }
                if (g.code) {
                    h = true
                }
            });
            if (!h) {
                c.promoForm.trigger("enable");
                c.promoForm.find(":text").val("")
            } else {
                c.promoForm.trigger("disable")
            }
        },
        applyPromoCode: function () {
            var a = this;
            var b = $("#cart-promocode").val().trim();
            $("#cart-promocode").val(b);
            if (b) {
                cartApi.applyPromoCode(b).then(function (b) {
                    if (b && b.result) {
                        a.updateSummary(b);
                        if (typeof b.updBonus != "undefined") {
                            $("#headerBonusAmount, #summaryBonuses").text(b.updBonus)
                        }
                        notify("success", {
                            hideAfter: 7500,
                            header: " ",
                            text: b && b.message ? b.message : "   !"
                        })
                    } else {
                        notify("fail", {
                            hideAfter: 7500,
                            header: "  ",
                            text: b && b.message ? b.message : " ,     !"
                        })
                    }
                    a = null
                })
            } else {
                notify("fail", {
                    header: " ",
                    text: "    ,     , !"
                })
            }
            return false
        },
        events: {
            addToCart: function (a, b) {
                a.preventDefault();
                if (!b) {
                    b = 0
                }
                if ($(this).data("sendTimer")) {
                    clearTimeout($(this).data("sendTimer"));
                    $(this).data({sendTimer: null})
                }
                var c = $(this);
                var d = a.data.cartHelper;
                var e = $(this).data("product-id");
                var f = $(this).data("kit");
                if ($(this).data("addRequest")) {
                    $(this).data("addRequest").abort()
                }
                $(this).trigger("updateQty", [b]);
                $(this).data({
                    sendTimer: setTimeout(function () {
                        d.addById(e, b, f);
                        clearTimeout(c.data("sendTimer"));
                        c.data({sendTimer: null})
                    }, 400)
                })
            }, removeFromCart: function (a) {
                if (!$(this).hasClass("removing")) {
                    $(this).addClass("removing");
                    var b = a.data.cartHelper;
                    var c = $(this).data("product-id");
                    var d = $(this).data("kit");
                    b.removeById(c, d)
                }
            }, updateQty: function (a, b, c) {
                var d = $(this).find(".count");
                d.find("i").text(b);
                if (!$(this).hasClass("inCart")) {
                    if (b === 0) {
                        d.fadeOut("fast", function () {
                            $(this).removeAttr("style")
                        })
                    } else if (d.is(":hidden")) {
                        var e = d.css("right");
                        d.show().css("right", 0).fadeTo(0, 0).animate({opacity: 1, right: e}, "fast")
                    }
                }
                if (c) {
                    if (c.price) {
                        $(this).find("td.sumCell, span.price b").html(numeral(c.price).format("0,0") + ' <small class="rubSmall"></small>')
                    }
                    if (!c.isPacket) {
                        if (c.discount && c.discount > 0) {
                            a.data.cartHelper.cartList.find(".discountCell").show();
                            $.each(c.items, function (b, c) {
                                a.data.cartHelper.cartList.find('tbody[data-product-id="' + b + '"]').find(".discountCell").html(c.discount.value + ' <small class="rubSmall"></small><small class="note">' + (c.discount.pct > 0 ? c.discount.pct + "%" : " ") + "</small>")
                            })
                        } else {
                            a.data.cartHelper.cartList.find(".discountCell").hide()
                        }
                        $.each(c.items, function (b, c) {
                            var d = a.data.cartHelper.cartList.find('tbody[data-product-id="' + b + '"]');
                            if (c.price_old && c.price_old != c.price) {
                                d.find("span.oldPrice").html(numeral(c.price_old).format("0,0") + ' <small class="rubSmall"></small>' + "<i></i>").show()
                            } else {
                                d.find("span.oldPrice").html("").hide()
                            }
                            d.find("td.sumCell").html(numeral(c.total).format("0,0") + ' <small class="rubSmall"></small>' + '<i></i> <div class="onePrice"><span class="cart-page-qty-to-itemprice"> <span class="mobile-qty">' + c.amount + "</span> *</span>" + numeral(c.price).format("0,0") + ' <small class="rubSmall"></small>' + "<i></i></div>")
                        })
                    }
                }
            }, toggleCartState: function (a) {
                if (document.location.href.indexOf("cart") < 0) {
                    a.stopPropagation();
                    a.preventDefault();
                    var b = a.data.cartHelper;
                    b.toggleCartState()
                }
            }, bindProductEvents: function (a) {
                $(document).on("updateQty", "article.product[data-product-id]:not(.inCart)," + " div.buyProduct[data-product-id], #ingredients tr[data-product-id]", this.updateQty).on("addToCart", "article.product[data-product-id]:not(.inCart)," + " div.buyProduct[data-product-id], #ingredients tr[data-product-id]", {cartHelper: this.cartHelper}, this.addToCart).on("click", "article.product[data-product-id]:not(.inCart) button:not(.subscribeBtn)," + " div.buyProduct[data-product-id] button:not(.subscribeBtn)," + " #ingredients tr[data-product-id] button:not(.subscribeBtn)", function (a) {
                    a.preventDefault();
                    var b = $(this).closest("article.product, div.buyProduct[data-product-id], tr[data-product-id]").trigger("addToCart", (parseInt($(this).find(".count i").text()) || 0) + 1);
                    try {
                        ga("send", "event", " ", "click", b.hasClass("buyProduct") ? " " : " ")
                    } catch (a) {
                    }
                    try {
                        var c;
                        var d;
                        if (b.hasClass("buyProduct")) {
                            c = {pageType: 8, currentProduct: window.APRT_DATA.currentProduct}
                        } else {
                            d = parseInt(b.find(".priceWrap").text().replace(b.find(".priceWrap .oldPrice").text(), "").replace(/ /g, ""));
                            c = {
                                pageType: 8,
                                currentProduct: {
                                    id: b.data("product-id"),
                                    name: b.find(".productHeader").text(),
                                    price: d
                                }
                            }
                        }
                        window.APRT_SEND(c)
                    } catch (a) {
                    }
                }).on("click", "article.product[data-product-id]:not(.inCart) span.count," + " div.buyProduct[data-product-id] span.count," + " #ingredients tr[data-product-id] span.count", function (a) {
                    a.stopPropagation();
                    document.location.href = "/cart"
                })
            }, bind: function () {
                if (this.cartHelper.cartMenuItem.length && !this.cartHelper.cartMenuItem.hasClass("mobile")) {
                    $(this.cartHelper.cartMenuItem).on("click", {cartHelper: this.cartHelper}, this.toggleCartState)
                }
                this.bindProductEvents();
                if (this.cartHelper.topCart.length) {
                    this.cartHelper.topCart.on("updateQty", "article.product[data-product-id]", {cartHelper: this.cartHelper}, this.updateQty).on("addToCart", "article.product[data-product-id]", {cartHelper: this.cartHelper}, this.addToCart).on("removeFromCart", "article.product[data-product-id]", {cartHelper: this.cartHelper}, this.removeFromCart).on("click", "article.product[data-product-id] p.count a", function (a) {
                        a.preventDefault();
                        var b = $(this).closest("article.product");
                        var c = parseInt(b.find(".count i").text());
                        if ($(this).hasClass("minus")) {
                            c--
                        } else {
                            c++
                        }
                        if (c < 1) {
                            c = 0
                        }
                        if (c > 0) {
                            b.trigger("addToCart", c)
                        } else {
                            b.trigger("removeFromCart", c);
                            setTimeout(function () {
                                if ($("body").find(".topCartWrap").children(".product").length > 8) {
                                    setTimeout(function () {
                                        $(".topCart .products").perfectScrollbar("destroy");
                                        $(".topCart .products").perfectScrollbar()
                                    }, 2e3)
                                }
                                if ($("body").find(".topCartWrap").children(".product").length === 8) {
                                    $(this).parents("body").find(".topCart").find(".products").removeClass("products-fake-scroll");
                                    $(this).parents("body").find(".topCart").find(".products").removeClass("ps-active-y");
                                    $(this).parents("body").find(".topCart").find(".ps-scrollbar-y-rail").css({top: "0px"})
                                }
                                if ($("body").find(".topCartWrap").children(".product").length < 8) {
                                    $(".topCart .products").perfectScrollbar("destroy");
                                    setTimeout(function () {
                                        $(".topCart .products").perfectScrollbar()
                                    }, 2e3)
                                }
                            }, 2e3)
                        }
                    }).on("click", "article.product[data-product-id] a.del", function (a) {
                        a.preventDefault();
                        $(this).closest("article.product").trigger("removeFromCart");
                        setTimeout(function () {
                            if ($("body").find(".topCartWrap").children(".product").length > 8) {
                                setTimeout(function () {
                                    $(".topCart .products").perfectScrollbar("destroy");
                                    $(".topCart .products").perfectScrollbar()
                                }, 100)
                            }
                            if ($("body").find(".topCartWrap").children(".product").length === 8) {
                                $(this).parents("body").find(".topCart").find(".products").removeClass("products-fake-scroll");
                                $(this).parents("body").find(".topCart").find(".products").removeClass("ps-active-y");
                                $(this).parents("body").find(".topCart").find(".ps-scrollbar-y-rail").css({top: "0px"})
                            }
                            if ($("body").find(".topCartWrap").children(".product").length < 8) {
                                $(".topCart .products").perfectScrollbar("destroy");
                                setTimeout(function () {
                                    $(".topCart .products").perfectScrollbar()
                                }, 2e3)
                            }
                        }, 2e3)
                    }).on("click touchstart", function (a) {
                        a.stopPropagation()
                    })
                }
                if (this.cartHelper.cartList.length) {
                    this.cartHelper.cartList.on("updateQty", "tbody.inCart[data-product-id]", {cartHelper: this.cartHelper}, this.updateQty).on("addToCart", "tbody.inCart[data-product-id]", {cartHelper: this.cartHelper}, this.addToCart).on("markAsRemoved", "tbody.inCart[data-product-id]", function () {
                        if (!$(this).hasClass("removed")) {
                            showAvailibleDeliveryTime();
                            $(this).addClass("removed").find("p.count a").addClass("disabled")
                        }
                    }).on("unmarkAsRemoved", "tbody.inCart[data-product-id]", function () {
                        if ($(this).hasClass("removed")) {
                            $(this).removeClass("removed").find("p.count a").removeClass("disabled")
                        }
                    }).on("click", "tbody.inCart[data-product-id] p.count a", function (a) {
                        a.preventDefault();
                        if (!$(this).hasClass("disabled")) {
                            var b = $(this).closest("tbody.inCart");
                            var c = parseInt(b.find(".count i").text());
                            if ($(this).hasClass("minus")) {
                                c--
                            } else {
                                c++
                            }
                            if (c < 1) {
                                b.trigger("tmpRemove");
                                clearTimeout(b.data("sendTimer"))
                            } else {
                                var d = b.data("kit");
                                b.trigger("addToCart", [c, d])
                            }
                        }
                    }).on("tmpRemove", "tbody.inCart[data-product-id]", {cartHelper: this.cartHelper}, function (a) {
                        var b = a.data.cartHelper;
                        var c = $(this);
                        if (c.data("cartListXhr")) {
                            c.data("cartListXhr").abort();
                            c.removeData("cartListXhr")
                        }
                        c.trigger("markAsRemoved");
                        c.data({sending: true});
                        var d = b.removeById(c.data("product-id"), c.data("kit")).done(function (a) {
                            c.removeData("cartListXhr");
                            c = null
                        });
                        c.data({cartListXhr: d})
                    }).on("restore", "tbody.inCart[data-product-id]", {cartHelper: this.cartHelper}, function (a) {
                        var b = a.data.cartHelper;
                        var c = $(this);
                        if (c.data("cartListXhr")) {
                            c.data("cartListXhr").abort();
                            c.removeData("cartListXhr")
                        }
                        c.trigger("unmarkAsRemoved");
                        var d = b.addById(c.data("product-id"), $(this).find(".qty i").text(), c.data("kit")).done(function () {
                            c.removeData("cartListXhr");
                            c = null
                        });
                        c.data({cartListXhr: d})
                    }).on("click", "tbody.inCart[data-product-id] a.del", function () {
                        var a = $(this).closest("tbody.inCart");
                        if (!a.hasClass("removed")) {
                            a.trigger("tmpRemove")
                        } else {
                            a.trigger("restore")
                        }
                    });
                    this.cartHelper.cartList.on("click", ".request-test-drive", {cartHelper: this.cartHelper}, function (a) {
                        var b = $(this);
                        a.preventDefault();
                        cartApi.testDriveAdd(b.data("id")).then(function (c) {
                            if (c && c.result) {
                                var d = $(c.product).hide();
                                b.closest("tbody").fadeOut("fast", function () {
                                    $(this).replaceWith(d);
                                    d.fadeIn()
                                });
                                if (c.totalQuantity) {
                                    a.data.cartHelper.updateSummary({totalQuantity: c.totalQuantity})
                                }
                            } else {
                                notify("fail", {text: c.message ? c.message : "   ..."})
                            }
                        })
                    });
                    this.cartHelper.cartList.on("click", ".del-test-drive", {cartHelper: this.cartHelper}, function (a) {
                        var b = $(this);
                        a.preventDefault();
                        cartApi.testDriveRemove(b.data("id")).then(function (b) {
                            if (b && b.result) {
                                $("#test-drive-" + b.id).remove();
                                if (b.totalQuantity) {
                                    a.data.cartHelper.updateSummary({totalQuantity: b.totalQuantity})
                                }
                            } else {
                                notify("fail", {text: b.message ? b.message : "    "})
                            }
                        })
                    });
                    $("#cartList").on("click", ".del-test-drive-fix", function (a) {
                        var b = $(this);
                        a.preventDefault();
                        cartApi.testDriveRemove(b.data("id")).then(function (b) {
                            if (b && b.result) {
                                $("#test-drive-" + b.id).remove();
                                if (b.totalQuantity) {
                                    a.data.cartHelper.updateSummary({totalQuantity: b.totalQuantity})
                                }
                            } else {
                                notify("fail", {text: b.message ? b.message : "    "})
                            }
                        })
                    });
                    if (this.cartHelper.goneList.length) {
                        this.cartHelper.goneList.on("click", ".del", {cartHelper: this.cartHelper}, function (a) {
                            var b = $(this);
                            $(this).closest("tbody").fadeOut("fast", function () {
                                cartHelper.removeById($(this).closest("tbody").data("product-id")).then(function (c) {
                                    if (c.status != "error") {
                                        b.closest("tbody").remove();
                                        if (!a.data.cartHelper.goneList.find("tbody[data-product-id]").length) {
                                            $("#replacement").slideUp("fast", function () {
                                                $(this).remove()
                                            })
                                        }
                                    } else {
                                        notify("fail", {
                                            header: " !",
                                            text: "  ."
                                        });
                                        b.closest("tbody").fadeIn("fast")
                                    }
                                })
                            })
                        }).on("click", ".analogTrigger", function () {
                            if (!$(this).hasClass("active")) {
                                $(this).addClass("active").closest("tbody").find(".analogList").slideDown("fast");
                                $(this).text("  ")
                            } else {
                                $(this).removeClass("active").closest("tbody").find(".analogList").slideUp("fast");
                                $(this).text(" ")
                            }
                        })
                    }
                }
                if (this.cartHelper.historyOrderLists.length > 0) {
                    this.cartHelper.historyOrderLists.on("repeat", "tr", {cartHelper: this.cartHelper}, this.addToCart).on("click", "td.repeat a", {cartHelper: this.cartHelper}, function (a) {
                        a.preventDefault();
                        var b = $(this).closest("tr[data-product-id]");
                        var c = parseInt(b.find("td:first b").text());
                        var d = a.data.cartHelper.topCart.find('article[data-product-id="' + b.data("product-id") + '"]');
                        if (d.length > 0) {
                            c += parseInt(d.find("p.count i").text())
                        }
                        b.trigger("repeat", [c])
                    })
                }
                if (this.cartHelper.bonusesPay.length > 0) {
                    this.cartHelper.bonusesPay.on("keyup", {cartHelper: this.cartHelper}, function (a) {
                        if (a.which == 13) {
                            $(this).trigger("change");
                            return
                        }
                        this.value = this.value.replace(/[^\d]/gim, "");
                        if (parseInt(this.value) > parseInt($("#summaryBonuses").text())) {
                            this.value = parseInt($("#summaryBonuses").text())
                        } else {
                            this.value = this.value ? parseInt(this.value) : 0
                        }
                    }).on("change blur", {cartHelper: this.cartHelper}, function (a) {
                        this.value = this.value.replace(/[^\d]/gim, "");
                        if (parseInt(this.value) > parseInt($("#summaryBonuses").text())) {
                            this.value = parseInt($("#summaryBonuses").text())
                        } else {
                            this.value = this.value ? parseInt(this.value) : 0
                        }
                        a.data.cartHelper.payByBonus(this.value)
                    })
                }
                if (this.cartHelper.use.length > 0) {
                    this.cartHelper.use.on("change", {cartHelper: this.cartHelper}, function (a) {
                        if (this.checked) {
                            a.data.cartHelper.bonusesPay.removeAttr("disabled").trigger("change")
                        } else {
                            a.data.cartHelper.payByBonus(0);
                            a.data.cartHelper.bonusesPay.attr("disabled", "disabled")
                        }
                    })
                }
                if (this.cartHelper.promoForm.size() > 0) {
                    this.cartHelper.promoForm.on("submit", {helper: this}, function (a) {
                        a.preventDefault();
                        cartHelper.applyPromoCode();
                        $("#cart-promocode").addClass("blurred");
                        setTimeout(function () {
                            $("#cart-promocode").removeClass("blurred")
                        }, 1e3)
                    });
                    this.cartHelper.promoForm.on("blur", "#cart-promocode", function (a) {
                        var b = $(this);
                        var c = b.val();
                        if (c) {
                            setTimeout(function () {
                                if (!$("#cart-promocode").hasClass("blurred")) {
                                    $("#promoForm").submit()
                                }
                            }, 400)
                        }
                    });
                    this.cartHelper.promoForm.add($("#oneClickBuyForm")).on("disable", function () {
                        $(this).find("input").attr("disabled", "disabled")
                    }).on("enable", function () {
                        $(this).find("input").removeAttr("disabled")
                    }).on("disableSubmit", function () {
                        $(this).find(":submit").attr("disabled", "disabled")
                    }).on("enableSubmit", function () {
                        $(this).find(":submit").removeAttr("disabled")
                    }).find(":text").on("keyup change", function () {
                        if ($(this).val()) {
                            $(this).closest("form").trigger("enableSubmit")
                        } else {
                            $(this).closest("form").trigger("disableSubmit")
                        }
                    })
                }
                var a = $("#oneClickBuyForm");
                a.on("submit", function (b) {
                    b.preventDefault();
                    var c = $(this).serialize(), d = a.find("input[type='submit']"), e;
                    d.attr("disabled", "disabled");
                    var f = $("#order-form").serializeArray();
                    if (f.length) {
                        for (e in f) {
                            e = f[e];
                            if (e.name.indexOf("data[") === 0) {
                                c += "&" + e.name + "=" + e.value
                            }
                        }
                    } else {
                        f = $.cookie("autosaveData");
                        if (f) {
                            f = f.split("&");
                            for (e in f) {
                                e = f[e].replace(/^field\-/i, "").replace(/\-/i, "_").split("=");
                                if (e[1].length) {
                                    c += "&data[" + e[0] + "]=" + e[1]
                                }
                            }
                        }
                    }
                    cartApi.oneClickForm(c).done(function (a) {
                        if (a.result) {
                            top.window.location.href = "/cart/confirm?order=" + a.id + "&key=" + a.key
                        } else {
                            if (a.error) {
                                top.notify("fail", {header: "  ", text: a.error})
                            } else {
                                top.notify("fail", {
                                    header: "  ",
                                    text: "       .<br />,  ,         .<br /><br />     ."
                                })
                            }
                            top.window.setTimeout(function () {
                                d.removeAttr("disabled")
                            }, 2500)
                        }
                    }).always(function () {
                        top.window.setTimeout(function () {
                            d.removeAttr("disabled")
                        }, 1e4)
                    });
                    return false
                });
                if (!a.find(":text").val()) {
                    a.trigger("disableSubmit")
                }
                a.on("keyup", ":text", function () {
                    if (/\+7 8/.test($(this).val())) {
                        $("#error_oneClickBuy_phone").text("   !     .").show()
                    } else {
                        $("#error_oneClickBuy_phone").text("").hide()
                    }
                })
            }
        },
        ac: {
            active: false, init: function () {
                if ($.cookie("isMobile") == "yes") {
                    $(function () {
                        $("#field-city-id").on("change", function () {
                            cartHelper.getDelivery($(this).val())
                        }).trigger("change")
                    })
                }
                if (!this.active) {
                    if (!$.fn.typeahead) {
                        var a = document.createElement("script");
                        var b = document.getElementsByTagName("script")[0];
                        a.type = "text/javascript";
                        a.async = true;
                        a.src = "//static.delikateska.ru/libs/typeahead.js/typeahead.min.js";
                        b.parentNode.appendChild(a);
                        var c = function () {
                            if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
                                cartHelper.ac.cities();
                                window.setTimeout(function () {
                                    var a = $("#field-city");
                                    if (a.val()) {
                                        a.trigger("change")
                                    }
                                }, 125)
                            }
                        };
                        a.onload = a.onreadystatechange = c
                    }
                    var c = function () {
                        cartHelper.ac.cities();
                        window.setTimeout(function () {
                            var a = $("#field-city");
                            if (a.val()) {
                                a.trigger("change")
                            }
                        }, 125)
                    };
                    c();
                    this.active = true
                }
            }, cities: function () {
                var _ta, cityField = $("#field-city");
                if (!cityField.length) {
                    return false
                }
                if (document.getElementById("field-city-datum")) {
                    _ta = $("#field-city").typeahead({
                        name: "cities",
                        local: eval(document.getElementById("field-city-datum").innerHTML),
                        limit: 10
                    })
                } else {
                    _ta = cityField.typeahead({
                        name: "cities",
                        remote: "/?type=ajax&controller=cities&action=autocomplete&term=%QUERY",
                        limit: 10
                    })
                }
                if ($.cookie("isMobile") == "yes") {
                    $("#field-city-id").on("change", function () {
                        cartHelper.getDelivery($(this).val())
                    })
                }
                _ta.on("change", function () {
                    var a = this, b = $(a).data("verified");
                    if (!a.value || b !== undefined && String(b) != String(a.value)) {
                        $("#field-city-id").val("");
                        $("#field-street").attr("disabled", "disabled");
                        $("#field-flat").attr("disabled", "disabled");
                        cartHelper.getDelivery(false);
                        if (b !== undefined && String(b) != String(a.value)) {
                        }
                    } else {
                        window.setTimeout(function () {
                            if (document.getElementById("field-city-id").value) {
                                var b = $("#field-street"), c = document.getElementById("field-city-id").value;
                                b.removeAttr("disabled");
                                cartHelper.ac.streets(c, a.value);
                                cartHelper.getDelivery(c);
                                $("#error-field-city").fadeOut().html("");
                                if (b.val()) {
                                    b.trigger("change")
                                }
                            } else {
                                $(a).val("")
                            }
                        }, 125)
                    }
                }).on("keyup", function () {
                    if (!this.value) {
                        $(this).trigger("change")
                    }
                }).on("typeahead:selected", function (a, b) {
                    $("#field-city-id").val(b.id);
                    $("#field-city").data("verified", b.value);
                    $("#field-street").removeAttr("disabled");
                    cartHelper.ac.streets(b.id, b.value);
                    cartHelper.getDelivery(b.id);
                    this.blur();
                    $(this).trigger("change.autosave")
                }).on("typeahead:autocompleted", function (a, b) {
                    $("#field-city-id").val(b.id);
                    $("#field-city").data("verified", b.value);
                    $("#field-street").removeAttr("disabled");
                    cartHelper.ac.streets(b.id, b.value);
                    cartHelper.getDelivery(b.id);
                    this.blur();
                    $(this).trigger("change.autosave")
                })
            }, streets: function (a, b) {
                var c = [];
                $.get("https://geocode-maps.yandex.ru/1.x/?callback=?&format=json&geocode=" + encodeURIComponent(["", " ", " " + b].join(", ")), function (a) {
                    if (a && a.response && a.response.GeoObjectCollection && a.response.GeoObjectCollection.featureMember) {
                        a = a.response.GeoObjectCollection.featureMember.shift();
                        a = a.GeoObject;
                        if (a.metaDataProperty && a.metaDataProperty.GeocoderMetaData && a.metaDataProperty.GeocoderMetaData.text) {
                            c = a.metaDataProperty.GeocoderMetaData.text.split(", ")
                        } else if (a.name) {
                            c.push(a.GeoObject.name)
                        }
                    }
                }, "json");
                if (c.length < 1) {
                    c.push("");
                    c.push(" ");
                    c.push(" " + b)
                }
                $("#field-street").typeahead("destroy").typeahead({
                    name: "streets_" + a,
                    remote: {
                        url: "https://geocode-maps.yandex.ru/1.x/?callback=?&format=json&geocode=" + c.join(",+") + ",+%QUERY",
                        filter: function (a) {
                            var d = [];
                            c = [];
                            c.push("");
                            c.push(" ");
                            c.push(b);
                            if (a && a.response && a.response.GeoObjectCollection) {
                                a = a.response.GeoObjectCollection;
                                var e;
                                if (a.featureMember) {
                                    for (var f in a.featureMember) {
                                        e = a.featureMember[f];
                                        if ($.inArray(e.GeoObject.name, c) < 0) {
                                            d.push({value: e.GeoObject.name})
                                        }
                                    }
                                }
                            }
                            if (d.length == 1 && c.join(", ").indexOf(d[0].value) > 1) {
                                d = []
                            }
                            return d
                        }
                    },
                    limit: 10
                }).on("change", function () {
                    $(this).trigger("change.autosave");
                    if (!this.value) {
                        $("#field-flat").attr("disabled", "disabled").val("")
                    } else {
                        $("#field-flat").removeAttr("disabled")
                    }
                }).on("keyup", function () {
                    $(this).trigger("change")
                }).on("typeahead:selected", function (a, b) {
                    if (b.value.indexOf(", ") < 1) {
                        $("#field-street").val(b.value + ", ")
                    } else {
                        $("#field-flat").focus()
                    }
                    $("#field-flat").removeAttr("disabled");
                    $(this).trigger("change.autosave")
                }).on("typeahead:autocompleted", function (a, b) {
                    if (b.value.indexOf(", ") < 1) {
                        $("#field-street").val(b.value + ", ")
                    } else {
                        $("#field-flat").focus()
                    }
                    $("#field-flat").removeAttr("disabled");
                    $(this).trigger("change.autosave")
                })
            }
        },
        getDelivery: function (a, b) {
            $("#order-form").find("span.error").hide().html("");
            $("#error_order-form-error").hide().html("");
            var c = $("#order-form-section-delivery");
            if (a) {
                if (c.css("display") == "none") {
                    c.slideDown("fast")
                }
                if (c.find(".ajax-loading-overlay").size() < 1) {
                    c.prepend('<div class="ajax-loading-overlay"><div></div></div>')
                }
                $("#order-form-section-intervals,#order-form-section-payments,#order-form-section-submit").each(function () {
                    var a = $(this);
                    if (a.css("display") != "none" && a.find(".ajax-loading-overlay").size() < 1) {
                        $(this).prepend('<div class="ajax-loading-overlay"><div></div></div>')
                    }
                });
                $("#order-form-section-intervals, #order-form-section-payments, #order-form-section-submit").hide();
                cartApi.getDelivery(a, b).then(function (d) {
                    if (d && d.count) {
                        c.find(".ajax-loaded").html(d.html);
                        c.find("input:radio").on("click", function () {
                            $.cookie("delivery-option", this.value, {expires: 365});
                            cartHelper.getIntervals(a, this.value, b)
                        });
                        if (d.count > 1) {
                            c.slideDown("fast");
                            $("#order-form-section-intervals").find(".blockNum").find("span").html(3);
                            $("#order-form-section-payments").find(".blockNum").find("span").html(4);
                            if ($.cookie("delivery-option")) {
                                $("#delivery-option-" + $.cookie("delivery-option")).trigger("click")
                            }
                        } else {
                            c.slideUp("fast");
                            $("#order-form-section-intervals").find(".blockNum").find("span").html(2);
                            $("#order-form-section-payments").find(".blockNum").find("span").html(3);
                            c.find("input:radio").trigger("click")
                        }
                        c.find(".ajax-loading-overlay").remove()
                    } else {
                        $("#order-form-section-delivery,#order-form-section-intervals,#order-form-section-payments").each(function () {
                            var a = $(this);
                            a.slideUp("fast").find(".ajax-loaded").html("");
                            a.find(".ajax-loading-overlay").remove()
                        });
                        $("#error_order-form-error").html(d.error ? d.error : " ,       .<br />     .").show();
                        if ($("#order-form-section-intervals").find(":radio:checked").length) {
                            $("#order-form-section-submit").slideDown("fast").find(".ajax-loading-overlay").remove()
                        }
                    }
                })
            } else {
                c.slideUp("fast", function () {
                    $(this).find(".ajax-loaded").html("");
                    c.find(".ajax-loading-overlay").remove()
                });
                this.getIntervals(false, false)
            }
        },
        getIntervals: function (a, b, c) {
            $("#order-form").find("span.error").hide().html("");
            $("#error_order-form-error").hide().html("");
            var d = $("#order-form-section-intervals");
            if (b) {
                if (d.css("display") == "none") {
                    d.slideDown("fast")
                }
                if (d.find(".ajax-loading-overlay").size() < 1) {
                    d.prepend('<div class="ajax-loading-overlay"><div></div></div>')
                }
                $("#order-form-section-payments,#order-form-section-submit").each(function () {
                    var a = $(this);
                    if (a.css("display") != "none" && a.find(".ajax-loading-overlay").size() < 1) {
                        $(this).prepend('<div class="ajax-loading-overlay"><div></div></div>')
                    }
                });
                var e = $("#devtime");
                cartApi.getIntervals(a, b, c, e.data("devtime")).then(function (b) {
                    if (b && b.count) {
                        d.slideDown("fast").find(".ajax-loaded").html(b.html);
                        if (b.interval) {
                            d.find("#period-" + b.interval).attr("checked", "checked")
                        }
                        try {
                            initTimeChooserSlider()
                        } catch (a) {
                        }
                        cartHelper.getPayments(a);
                        d.find(".ajax-loading-overlay").remove();
                        if ($.cookie("delivery-interval")) {
                            $("#period-" + $.cookie("delivery-interval")).trigger("click")
                        }
                        d.find("span[data-tooltip]").tooltip()
                    } else {
                        $("#order-form-section-intervals,#order-form-section-payments").each(function () {
                            var a = $(this);
                            a.slideUp("fast").find(".ajax-loaded").html("");
                            a.find(".ajax-loading-overlay").remove()
                        });
                        $("#error_order-form-error").html(b.error ? b.error : " ,       .<br />     .").show();
                        if ($("#order-form-section-intervals").find(":radio:checked").length) {
                            $("#order-form-section-submit").slideDown("fast").find(".ajax-loading-overlay").remove()
                        }
                    }
                })
            } else {
                d.slideUp("fast", function () {
                    $(this).find(".ajax-loaded").html("");
                    d.find(".ajax-loading-overlay").remove()
                });
                this.getPayments(false)
            }
        },
        getPayments: function (a) {
            $("#order-form").find("span.error").hide().html("");
            $("#error_order-form-error").hide().html("");
            var b = $("#order-form-section-payments");
            if (a) {
                if (b.css("display") == "none") {
                    b.slideDown("fast")
                }
                if (b.find(".ajax-loading-overlay").size() < 1) {
                    b.prepend('<div class="ajax-loading-overlay"><div></div></div>')
                }
                $("#order-form-section-submit").each(function () {
                    var a = $(this);
                    if (a.css("display") != "none" && a.find(".ajax-loading-overlay").size() < 1) {
                        $(this).prepend('<div class="ajax-loading-overlay"><div></div></div>')
                    }
                });
                cartApi.getPayments(a).then(function (a) {
                    if (a && a.count) {
                        b.slideDown("fast").find(".ajax-loaded").html(a.html);
                        if ($("#order-form-section-intervals").find(":radio:checked").length) {
                            $("#order-form-section-submit").slideDown("fast").find(".ajax-loading-overlay").remove()
                        }
                        b.find(".ajax-loading-overlay").remove();
                        b.find("input:radio").on("click", function () {
                            $.cookie("payment-option", this.value, {expires: 365});
                            var a = $("#siteSubmitButton");
                            if ($(this).val() == 1 || $(this).val() == 8) {
                                a.val("")
                            } else {
                                a.val("  ")
                            }
                        });
                        if ($.cookie("payment-option")) {
                            $("#payment-option-" + $.cookie("payment-option")).trigger("click")
                        } else {
                            b.find("input[type='radio']").first().trigger("click")
                        }
                        b.find("[data-tooltip]").tooltip({showEvent: "mouseenter", position: "top"})
                    } else {
                        $("#order-form-section-payments").each(function () {
                            var a = $(this);
                            a.slideUp("fast").find(".ajax-loaded").html("");
                            a.find(".ajax-loading-overlay").remove()
                        });
                        $("#error_order-form-error").html(a.error ? a.error : " ,       .<br />     .").show();
                        if ($("#order-form-section-intervals").find(":radio:checked").length) {
                            $("#order-form-section-submit").slideDown("fast").find(".ajax-loading-overlay").remove()
                        }
                    }
                })
            } else {
                b.slideUp("fast", function () {
                    $(this).find(".ajax-loaded").html("");
                    b.find(".ajax-loading-overlay").remove()
                });
                $("#order-form-section-submit").slideUp("fast", function () {
                    $(this).find(".ajax-loaded").html("");
                    $("#order-form-section-submit").find(".ajax-loading-overlay").remove()
                })
            }
        }
    };
    (function () {
        if (jQuery(".confirmPage").length) {
            var a = jQuery("div.orderProceed"), b = a.data("payment"), c = parseInt(jQuery("[data-order-id]").data("order-id")), d = parseInt(jQuery("[data-order-key]").data("order-key"));
            a.find("a.js-cart-confim-button-pay").on("click.payButton", function (d) {
                var e = $(this);
                $("#topConfirmButton").hide();
                e.find(".error").hide().text("");
                if (b === "sbrf") {
                    a.html("<h3>       !</h3>");
                    a.append('<p> ,    ,  <a href="/cart/confirm">  </a>.</p>');
                    window.setTimeout(function () {
                        top.window.location.href = "/cart/confirm"
                    }, 6e4)
                } else if (b === "assist" || b === "yandex.money" || b === "webmoney") {
                    a.html("<h3>     , , ...</h3>");
                    a.append('<p>       ,   <br />    .<br /><br />    ,    ,      !<!--br />              ,<br /> <a href="/cart/order">   </a>, !--></p>');
                    var f = top.window.setInterval(function () {
                        top.jQuery.post("/api/payment/" + b.replace(".money", ""), {
                            action: "checkStatus",
                            order_id: c
                        }, function (b) {
                            if (b) {
                                if (b.canceled) {
                                    a.append('<h3 style="color: red; margin-bottom: 0;">  !</h3><br />    <a href="/cart/order">  </a>');
                                    top.window.clearInterval(f)
                                } else if (b.result) {
                                    top.window.clearInterval(f);
                                    a.append('<p><strong style="color: green;">  !</strong></p>');
                                    top.window.location.href = "/cart/confirm"
                                }
                            }
                        }, "json")
                    }, 15e3)
                } else {
                    var g = $(this).find('input[name="qiwi"]');
                    if (g.length) {
                        if (!g.val()) {
                            d.preventDefault();
                            g.parent().find(".error").show().text("  !")
                        }
                    }
                    a.html("<h3>   , , ...</h3>")
                }
            })
        }
        $("#topConfirmButton").on("click", function (a) {
            a.preventDefault();
            var b = $("form[data-payment-system]");
            if (b.length) {
                b.trigger("submit")
            }
            var c = $(".confirm-page-result").find("a.button");
            if (c.length) {
                c.trigger("click");
                $("html,body").animate({scrollTop: c.closest(".whiteBlock").offset().top + "px"})
            }
            return false
        })
    })();
    $(function () {
        cartHelper.init()
    });
    window["cartHelper"] = cartHelper
})(window, document, undefined);
$(document).on("keyup", "#confirm-by-sms-code", function (a) {
    var b = $(this).val();
    if (b.match(/[0-9]+/) == null) {
        $(this).val("")
    }
});
$(document).on("click", ".js-confirm-by-sms-request-code", function (a) {
    a.preventDefault();
    var b = $(this), c = {
        controller: "people",
        action: "confirmProfileBySMS",
        type: "ajax",
        userAction: "sms",
        code: ""
    };
    b.hide(0);
    if (b.data("repeat")) {
        c.userAction = "code";
        c.code = "repeat"
    }
    $(".js-confirm-by-sms-waiting-block").text("  SMS  ");
    setTimeout(function (a) {
        $(".js-confirm-by-sms-waiting-block").text("")
    }, 6e3);
    $.ajax({
        type: "POST", data: c, success: function (a) {
            if (a && a.result) {
                var c = $("#popup-confirm-by-sms");
                c.find(".js-confirm-by-sms__request-code-block").slideUp(300);
                c.find(".js-confirm-by-sms-popup__send-code-block").delay(301).slideDown(300);
                $(".js-confirm-by-sms-popup__send-code-block").find("#confirm-by-sms--repeat").html("      <span>60</span> .");
                var d = 59;
                var e = window.setInterval(function () {
                    if (d > 0) {
                        $("#confirm-by-sms--repeat").find("span").html(d);
                        d--
                    } else {
                        $("#confirm-by-sms--repeat").html('<a href="javascript:void(0);" class="confirm-by-sms-popup__action-link js-confirm-by-sms-request-code" data-repeat="true">  </a>');
                        window.clearInterval(e)
                    }
                }, 1e3)
            } else {
                $("#confirm-by-sms-phone--error").html(a && a.error ? a.error : "     SMS").show(0);
                b.show(0)
            }
        }, error: function () {
            $("#confirm-by-sms-phone--error").html(" ").show(0);
            b.show(0)
        }
    })
});
$(document).on("click", ".js-confirm-by-sms-send-code", function (a) {
    a.preventDefault();
    var b = $(this), c = {
        controller: "people",
        action: "confirmProfileBySMS",
        type: "ajax",
        userAction: "code",
        code: $.trim($("#confirm-by-sms-code").val()).replace(/[^\d]/gim, "")
    };
    if (c.code.length != 4) {
        $("#confirm-by-sms-code--error").html("    4.").show(0);
        return false
    }
    $.ajax({
        type: "POST", data: c, success: function (a) {
            if (a && a.result) {
                var b = $("#popup-confirm-by-sms");
                b.find(".js-confirm-by-sms-popup__send-code-block").slideUp(300);
                b.find(".confirm-by-sms__action-block").find(".js-confirm-by-sms-popup__success-block").delay(301).slideDown(300);
                b.find(".confirm-by-sms__action-block").find("#confirm-by-sms-send-code").text("").hide(0);
                setTimeout(function (a) {
                    b.fadeOut("fast");
                    $("#order-form").submit()
                }, 2e3)
            } else {
                $("#confirm-by-sms-code--error").html(a && a.error ? a.error : "    .").show();
                if (a && a.errorCode && a.errorCode == "incorrectLimit") {
                    setTimeout(function (a) {
                        $("#popup-confirm-by-sms").fadeOut("fast");
                        window.location.replace("/cart")
                    }, 2e3)
                }
            }
        }, error: function () {
            $("#confirm-by-sms-code--error").html(error.msg).show(0)
        }
    })
});
$(document).on("click", ".js-confirm-by-sms-cancel-request, #popup-confirm-by-sms .underlay", function (a) {
    a.preventDefault();
    $("#popup-confirm-by-sms").fadeOut("fast");
    $.ajax({type: "POST", data: {controller: "cart", action: "bonus", type: "ajax", value: 0}});
    window.location.replace("/cart")
});
if (!$.cookie("readyKitsPopupHide")) {
    var amount = $("#cartMenuItem").data("amount");
    if (!$.cookie("readyKitsPopupCancel")) {
        setTimeout(function () {
            $(".popup-readyKits-invite-ctn").show(0);
            $(".popup-readyKits-invite-ctn-inner, .popup-readyKits-invite").slideDown(300);
            if ($("#readyKitsInvite").length) {
                $(".CartPosFixer").addClass("popup-readyKits-invite--shown")
            }
        }, 5e3)
    }
    setTimeout(function () {
        $(".popup-readyKits-invite-ctn").show(0);
        $(".popup-readyKits-invite-ctn-inner, .popup-readyKits-invite").slideDown(300);
        if ($("#readyKitsInvite").length) {
            $(".CartPosFixer").addClass("popup-readyKits-invite--shown")
        }
    }, 5e3)
}
if ($("#cartMenuItem").data("amount") > 0) {
    $.cookie("readyKitsPopupHide");
    $.cookie("cartAmountNotNull", true);
    $(".popup-readyKits-invite-ctn").remove();
    $(document).find(".popup-readyKits-invite--shown").removeClass("popup-readyKits-invite--shown")
}
if ($("#cartMenuItem").data("amount") === 0) {
    if (!$.cookie("readyKitsPopupCancel")) {
        setTimeout(function () {
            $(".popup-readyKits-invite-ctn").show(0);
            $(".popup-readyKits-invite-ctn-inner, .popup-readyKits-invite").slideDown(300);
            if ($("#readyKitsInvite").length) {
                $(".CartPosFixer").addClass("popup-readyKits-invite--shown")
            }
        }, 5e3)
    }
    if ($.cookie("cartAmountNotNull") != null) {
        setTimeout(function () {
            $(".popup-readyKits-invite-ctn").show(0);
            $(".popup-readyKits-invite-ctn-inner, .popup-readyKits-invite").slideDown(300);
            if ($("#readyKitsInvite").length) {
                $(".CartPosFixer").addClass("popup-readyKits-invite--shown")
            }
        }, 5e3);
        $.cookie("cartAmountNotNull", null);
        $.cookie("readyKitsPopupCancel", null)
    }
}
if ($("#readyKitsInvite").length === 0) {
    $(document).find(".popup-readyKits-invite--shown").removeClass("popup-readyKits-invite--shown")
}
$(document).on("click", ".js-ready-kits-invite-cancel", function (a) {
    var b = $(this);
    $.cookie("readyKitsPopupCancel", true);
    $.cookie("readyKitsPopupHide", true);
    $(document).find(".popup-readyKits-invite--shown").removeClass("popup-readyKits-invite--shown");
    b.parents("#readyKitsInvite").remove()
});
$(document).on("click", ".popup-readyKits-list a", function (a) {
    $.cookie("readyKitsPopupHide", true)
});
$(document).on("click", ".js-ready-kits-invite-apply", function (a) {
    var b = $(this);
    $.cookie("readyKitsPopupShow", true);
    b.parents(".CartPosFixer").find("#readyKitsPopup").fadeIn(0);
    $(document).find(".popup-readyKits-invite--shown").removeClass("popup-readyKits-invite--shown");
    b.parents("#readyKitsInvite").remove()
});
$(document).on("click", ".js-kit-more-link", function (a) {
    a.preventDefault();
    var b = $(this);
    b.toggleClass("kit-more-link-visible");
    if (b.hasClass("kit-more-link-visible")) {
        b.parents(".inCart").find(".cart-item__kit-products-cell-ctn").slideDown(300);
        b.text("")
    } else {
        b.parents(".inCart").find(".cart-item__kit-products-cell-ctn").slideUp(300);
        b.text("")
    }
});
$(document).on("click", ".js-delivery-time-info-content__close", function (a) {
    a.preventDefault();
    $(this).parents(".delivery-time-info").slideUp(300)
});
function showAvailibleDeliveryTime() {
    $.ajax({
        url: "/?type=ajax&controller=cart&action=getTodayLatestInterval",
        type: "POST",
        data: ""
    }).success(function (a) {
        if (a && a.result && a.data.dayIsOver != true) {
            if (a.data.timeTo) {
                $(".delivery-time-info").show(0);
                $(".js-delivery-time-info-text").html(a.data.timeTo)
            } else {
                $(".delivery-time-info").hide()
            }
        } else {
            $(".delivery-time-info").hide()
        }
    }).error(function () {
        $(".delivery-time-info").hide()
    })
}
$(document).on("click", ".js-cart-share", function (a) {
    a.preventDefault();
    var b = $(this);
    $.ajax({
        type: "GET",
        data: {action: "getShareData", controller: "cart", type: "ajax"},
        url: "/",
        dataType: "json",
        success: function (a) {
            if (a && a.result) {
                var c = $("#cart-share-dropdown");
                c.attr("data-cart-share-url", a.url);
                b.dropdown();
                b.data("dropdown.object").setContent(c);
                b.data("dropdown.object").open()
            } else {
                if (a && a.error) {
                    notify("fail", {header: "", text: a.error, hideAfter: "never"})
                }
            }
        }
    });
    return false
});
if (window.location.pathname === "/cart" && window.location.search.match(/share=([0-9]+)-([A-z0-9]{4,6})/gim)) {
    window.history.pushState({page: "/cart"}, $("head > title").html(), window.location.pathname)
}
$(document).on("click.payButton", "[data-order-pay-by-sberbank]", function (a) {
    a.preventDefault();
    var b = $(this);
    if (b.attr("disabled")) {
        return false
    }
    b.attr("disabled", "disabled").addClass("disabled");
    var c = {
        action: "register.do",
        order_id: b.data("order-id"),
        orderKey: b.data("order-key")
    }, d = "    &nbsp; &nbsp; .<br />   .";
    if (c.order_id && c.orderKey) {
        $.ajax({type: "POST", data: c, url: "/api/payment/sberbank", dataType: "json"}).done(function (a) {
            if (a && a.result) {
                top.window.location.assign(a.formURL)
            } else {
                notify("fail", {header: "", text: a && a.error ? a.error : d, hideAfter: 3e4})
            }
        }).error(function () {
            notify("fail", {header: "", text: d, hideAfter: 3e4})
        }).always(function () {
            b.removeAttr("disabled").removeClass("disabled")
        })
    }
    return false
});
(function () {
    var a = $("#promosSwitcher");
    if (a.size() > 0) {
        var b = a.find(".promosList");
        var c = a.find(".swiper-container").swiper({
            pagination: $("#promosPager"),
            spaceBetween: 0,
            effect: $(window).width() >= 768 ? "fade" : "slide",
            autoplay: 5e3,
            simulateTouch: false,
            autoplayDisableOnInteraction: false,
            onInit: function (a) {
                b.find("a:eq(" + a.activeIndex + ")").addClass("active")
            },
            onSlideChangeStart: function (a) {
                b.find("a.active").removeClass("active");
                b.find("a:eq(" + a.activeIndex + ")").addClass("active")
            },
            paginationClickable: false
        });
        b.on("click", "a", function (a) {
            a.preventDefault();
            c.slideTo($(this).data("index"))
        })
    }
    var d = $("#recomendationsList");
    if (d.size() > 0) {
        d.find("a").on("click", function () {
            var a = $(this);
            $("#recomendationsList-title").text(a.text()).trigger("hideDropdown");
            $.cookie("peopleProfile", a.data("item-id"));
            document.location = document.location
        });
        if ($.cookie("peopleProfile")) {
            $("#recomendationsList-title").text(d.find('a[data-item-id="' + $.cookie("peopleProfile") + '"]').text()).removeClass("dropdown");
            setTimeout(function () {
                $("#recomendationsList-title").addClass("dropdown")
            }, 10)
        }
    }
    if ($("a.reg").hasClass("active")) {
        var e = $(".popupWin").attr("regWidth");
        $(".popupWin").css({width: e + "px"});
        $("#regTab").show()
    } else {
        $(".popupWin").css({width: "530px"});
        $("#loginTab").show();
        $("#regTab").hide()
    }
    $("a.login").click(function () {
        $(".popupWin").css({width: "530px"})
    });
    $("a.reg").click(function () {
        var a = $(".popupWin").attr("regWidth");
        $(".popupWin").css({width: a + "px"})
    });
    $("#loginForm").css({padding: "50px 100px"})
})();
(function () {
    $(function () {
        var a = $("#productGallery");
        if (a.size() > 0) {
            a.productGallery()
        }
        var b = $(".productInfo");
        if (b.size() > 0) {
            b.tabber()
        }
        var c = $(".productInfo #comment-form");
        if (c.length) {
            c.on("submit", function () {
                $(this).find(":submit").attr("disabled", "disabled");
                if ($("#error_review_file_id").length) {
                    $("#error_review_file_id").html("")
                }
            })
        }
    });
    var a = $("#showVideo");
    var b = $(".js-autoplay-video");
    if (a.length) {
        setTimeout(function () {
            if (b.length > 0 && $(window).width() > 767) {
                var c = a.parent(".productPhotoWrap").hide();
                var e = a.parent(".productPhotoWrap").next(".productVideo").css({position: "static"});
                var f = 0;
                var g = setInterval(function () {
                    var a = e.find(".video-js").first().data("player");
                    if (a) {
                        clearInterval(g);
                        d(a, e, c)
                    }
                    if (f > 100) {
                        clearInterval(g)
                    }
                    f++
                }, 100)
            }
        }, 100);
        a.on("click", function (a) {
            a.preventDefault();
            var b = $(this).parent().hide();
            var c = b.next(".productVideo").css({position: "static"});
            var e = 0;
            var f = setInterval(function () {
                var a = c.find(".video-js").first().data("player");
                if (a) {
                    clearInterval(f);
                    d(a, c, b)
                }
                if (e > 100) {
                    clearInterval(f)
                }
                e++
            }, 100)
        })
    }
    var c = $("#is_authorised").val();
    $(document).on("click", ".js-btn_fav", function (a) {
        a.preventDefault();
        var b = $(this), d = b.data("object"), e = b.data("object-id"), f = b.hasClass("btn_fav--active") ? "remove" : "add";
        if (!d || !e) {
            return false
        }
        if (c == 1) {
            $.cookie("favorite", JSON.stringify({object: d, object_id: e}), {expires: 1, path: "/"});
            var g;
            $(".popupWin").css({width: "730px"});
            if (d === "catalog") {
                $(".favoriteBlock").show();
                g = $("#favImg")
            }
            if (d === "recipes") {
                $(".recipe-login-block").show();
                g = $("#recipe-login-img");
                $("#loginPopup").find(".popupWin").addClass("recipe-add-login-popup")
            }
            if (g && g.length && b.data("image")) {
                g.removeAttr("src");
                g.attr("src", b.data("image"))
            }
            $("#loginPopup").fadeIn("fast").find(".loginForm").css({padding: "50px 40px 50px 50%"});
            $(document).trigger("login", ["login"]);
            $(document).trigger("login");
            $(".js-product-preview-popup").fadeOut(300);
            $("body").removeClass("fixed");
            $("html").removeClass("fixed")
        } else {
            $.post("/", {
                type: "ajax",
                controller: "cabinet",
                action: "setFavorite",
                object: d,
                object_id: e,
                param: f
            }, function (a) {
                if (a && a.result) {
                    if (b.parents(".js-list-prod_fav-item").length) {
                        b.parents(".js-list-prod_fav-item").toggleClass("btn_fav--active")
                    }
                    b.toggleClass("btn_fav--active");
                    if (a.total > 0) {
                        $(".cnt_favorites").html(a.total);
                        $(".cnt_favorites_block").css({display: "block"})
                    } else {
                        $(".cnt_favorites_block").hide()
                    }
                    if (b.find(".add-to-favourite-text").length) {
                        b.find(".add-to-favourite-text").text(b.hasClass("btn_fav--active") ? "  " : "  ")
                    }
                    if (d === "catalog") {
                        if (b.hasClass("btn_fav--active")) {
                            notify("success", {useHeader: false, text: "    "})
                        } else {
                            notify("success", {useHeader: false, text: "    "})
                        }
                    }
                    if (b.find(".recipe-add__text").length) {
                        if (b.hasClass("btn_fav--active")) {
                            $(".recipe-add__text").text("  ");
                            $(".font-icon-star-empty").removeClass("font-icon-star-empty").addClass("font-icon-star-fill");
                            notify("fail", {
                                hideAfter: 2e3,
                                useHeader: false,
                                text: "    "
                            });
                            if (!$(".recipe-action-block").find(".btn_fav--active").hasClass("btn_fav--active")) {
                                $(".recipe-action-block").find(".js-recipe-add-to-fav").addClass("btn_fav--active")
                            }
                            if (!$(".recipe-footer-actions").find(".js-recipe-add-to-fav").hasClass("btn_fav--active")) {
                                $(".recipe-footer-actions").find(".js-recipe-add-to-fav").addClass("btn_fav--active")
                            }
                        } else if (!b.hasClass("btn_fav--active")) {
                            notify("success", {
                                hideAfter: 2e3,
                                useHeader: false,
                                text: "    "
                            });
                            $(".recipe-add__text").text("  ");
                            $(".font-icon-star-fill").removeClass("font-icon-star-fill").addClass("font-icon-star-empty");
                            if ($(".recipe-action-block").find(".js-recipe-add-to-fav").hasClass("btn_fav--active")) {
                                $(".recipe-action-block").find(".js-recipe-add-to-fav").removeClass("btn_fav--active")
                            }
                            if ($(".recipe-footer-actions").find(".js-recipe-add-to-fav").hasClass("btn_fav--active")) {
                                $(".recipe-footer-actions").find(".js-recipe-add-to-fav").removeClass("btn_fav--active")
                            }
                        }
                    }
                }
            }, "json")
        }
    });
    var d = function (a, b, c) {
        a.one("ended", function () {
            b.css("position", "absolute");
            c.show();
            a.currentTime(0);
            a.pause()
        }).one("pause", function () {
            b.css("position", "absolute");
            c.show()
        });
        b.css("position", "static");
        a.currentTime(0);
        a.play()
    };
    $.fn.productGallery = function () {
        return this.each(function () {
            if (!$(this).data("productGalleryData")) {
                $(this).data({
                    productGalleryData: {
                        handlers: $(this).find(".thumbs a"),
                        images: $(this).find(".image figure"),
                        current: 0
                    }
                })
            }
            var a = $(this).data("productGalleryData").handlers;
            var b = $(this).data("productGalleryData").images;
            b.not(":first").hide();
            a.on("click.productGalleryChange", $(this).data("productGalleryData"), function (a) {
                a.preventDefault();
                var b = a.data.handlers;
                var c = a.data.images;
                var d = a.data.current;
                if (!$(this).hasClass("active")) {
                    b.filter(".active").removeClass("active");
                    $(this).addClass("active");
                    var e = $(b).index(this);
                    a.data.current = e;
                    c.eq(d).fadeOut("fast", function () {
                        $(this).removeClass("active");
                        c.eq(e).fadeIn("fast", function () {
                            $(this).addClass("active")
                        })
                    })
                }
            })
        })
    };
    var e = $("#productSubscribeForm");
    $(document).on("keyup autosave.insert", "#productSubscribeForm :text, article.product .buyProduct form :text", function () {
        var a = $(this).closest("form").find(":submit"), b = $.trim($(this).val()), c = new RegExp("^(.+)@(.+)[.](.+)$", "img");
        if (b && c.test(b)) {
            a.removeAttr("disabled")
        } else {
            a.attr("disabled", "disabled")
        }
    });
    $(document).on("submit", "#productSubscribeForm, article.product .buyProduct form", function (a) {
        a.stopPropagation();
        a.preventDefault();
        var b = {
            type: "post",
            controller: "subscribers",
            action: "productSubscribe",
            id: $(this).data("product-id"),
            email: ""
        }, c = $(this).find(":submit");
        if (b.id) {
            b.email = $.trim($(this).find('[name="email"]').val())
        }
        if (b.id && b.email) {
            c.attr("disabled", "disabled");
            var d = top.window.setTimeout(function () {
                c.removeAttr("disabled")
            }, 1e4);
            $.ajax("/", {type: "post", dataType: "json", context: this, data: b}).done(function (a) {
                if (a.result) {
                    top.notify("success", {
                        header: "  !",
                        text: "     email,       ."
                    });
                    $(this).find('[name="email"]').attr("disabled", "disabled");
                    top.window.clearTimeout(d);
                    $(".buyProduct").fadeOut("fast")
                } else {
                    if (a.error) {
                        top.notify("fail", {header: "", text: a.error})
                    } else {
                        top.notify("fail", {
                            header: "",
                            text: "          .<br /><br />     ."
                        })
                    }
                    top.window.setTimeout(function () {
                        c.removeAttr("disabled")
                    }, 2500);
                    $(".buyProduct").fadeOut("fast")
                }
            })
        }
        return false
    });
    var f = {
        hash: "", init: function () {
            var a = this;
            a.hash = window.location.hash.replace(/^#/gim, "");
            var b;
            b = new RegExp("test-drive=([0-9]+)", "img");
            var c = b.exec(a.hash);
            if (c && c[1]) {
                window.setTimeout(function () {
                    var a = $("#tabs");
                    a.find("td.tab-comments").find("a").trigger("click.tabChoose");
                    $("html,body").stop().animate({scrollTop: a.offset().top}, "slow");
                    $("#comment-form").prepend('<input type="hidden" name="test_drive_id" value="' + c[1] + '" />');
                    $("#comment-form-text").focus()
                }, 500)
            }
        }
    };
    try {
        f.init()
    } catch (a) {
    }
})();
(function () {
    $(".desktopPage").on("click", ".js-save-payment-option", function (a) {
        var b = $(this).parents(".changePaymentList").data("order-id");
        var c = $(this).parents(".changePaymentList").find(".orderBonus__change-option-list-item.active").find("input").val();
        $.ajax({
            type: "POST",
            data: {controller: "cabinet", action: "changePayment", type: "ajax", order_id: b, payment_id: c},
            url: "/",
            dataType: "json",
            success: function (a) {
                if (a && a.result) {
                    $("#order-" + b).replaceWith(a.html)
                } else {
                    if (a && a.error) {
                        $("#order-" + b + "-paymentList").find(".changePaymentList-error").html(a.error);
                        setTimeout(function () {
                            $("#order-" + b + "-paymentList").find(".changePaymentList-error").html("")
                        }, 4e3)
                    }
                }
            }
        })
    });
    $(document).on("click", ".js-promocode-del", function (a) {
        a.preventDefault();
        var b = $(this);
        var c = b.parents(".promo-input__ctn").find("#cart-promocode");
        var d = b.parents(".promo-input__ctn").find(".js-promocode-submit-input");
        var e = $(".summary").find("#subtotal").find(".subtotal-summ ").text();
        c.val("");
        c.prop("disabled", false);
        d.prop("disabled", false);
        $(this).hide(0);
        $(this).parents(".cartPage").find("#cart-promocodes").html("");
        $.ajax({
            type: "POST",
            data: {
                controller: "cart",
                action: "removePromoCode",
                type: "ajax",
                id: $("#cart-promocode").data("code-id")
            }
        });
        $(".cartPage").find(".discountCell").hide();
        $(".summary").find("#summaryTotal").text(e);
        $("#cartList").find(".inCart[data-promocode-id]").remove()
    });
    window.setInterval(function () {
        $("form input[name=orderNumber]").each(function (a) {
            var b = $(this).val();
            if (!b > 0)return;
            $.ajax({
                type: "POST",
                data: {controller: "cart", action: "getsum", type: "ajax", order_id: b},
                url: "/",
                dataType: "json",
                success: function (a) {
                    if (a && a.sum) {
                        b = a.order_id;
                        $("#payment-" + b + "-form input[name=Sum]").val(a.sum)
                    }
                }
            })
        })
    }, 1e4);
    $(function () {
        if (!$.fn.typeahead) {
            var b = document.createElement("script");
            var c = document.getElementsByTagName("script")[0];
            b.type = "text/javascript";
            b.async = true;
            b.src = "//static.delikateska.ru/libs/typeahead.js/typeahead.min.js";
            c.parentNode.insertBefore(b, c)
        }
        a.init();
        if ($.fn.zclip) {
            $("#cabinet-share-link").zclip({
                path: "/libs/jquery.zclip/ZeroClipboard.swf",
                copy: $("#share-link").text(),
                afterCopy: function () {
                    notify("success", {text: " !"})
                }
            })
        }
        var d = $("#showBonusHistory");
        if (d.length) {
            d.on("click", function (a) {
                a.preventDefault();
                if (!$(this).hasClass("active")) {
                    $(this).addClass("active");
                    $("#bonusHistoryLog").slideDown("fast")
                } else {
                    $(this).removeClass("active");
                    $("#bonusHistoryLog").slideUp("fast")
                }
            });
            $("#hideBonusHistory").on("click", function (a) {
                a.preventDefault();
                d.trigger("click")
            })
        }
        var e = $(".order");
        if (e.length) {
            $(window).on("resize", function () {
                var a = $(this).data("ordersFixTimer");
                if (a) {
                    clearTimeout(a);
                    a = null
                }
                a = setTimeout(function () {
                    e.trigger("fixHeight");
                    a = null
                }, 200);
                $(this).data("ordersFixTimer", a)
            }).trigger("resize")
        }
        if ($.fn.pickadate) {
            $("#field-birthday").pickadate({
                format: "dd.mm.yyyy",
                editable: true,
                selectYears: 70,
                selectMonths: true,
                max: new Date,
                onOpen: function () {
                    this.$node.trigger("focus")
                },
                klass: {picker: "picker picker--birthdate"}
            }).on("focus", function () {
                $(this).pickadate("open")
            })
        }
    });
    var a = {
        addButton: null, addressesList: null, init: function () {
            this.addButton = $("#addAddressTrigger");
            this.addressesList = $("#addressesList");
            if (this.addButton.size() > 0 && this.addressesList.size() > 0) {
                this.addButton.fieldCloner({
                    container: this.addressesList,
                    donorSelector: "fieldset",
                    indexSelector: "span.legend",
                    beforeAppend: function (a) {
                        a.hide()
                    },
                    onClone: function (a) {
                        a.fadeIn("fast").find(".phoneMask").mask("+7 999 999-99-99");
                        a.find("input, textarea").removeAttr("disabled")
                    }
                })
            }
            if (this.addressesList.size() > 0) {
                this.addressesList.on("click", "a.del", this, function (a) {
                    a.preventDefault();
                    var b = $(this).closest("fieldset");
                    if (!b.hasClass("removed")) {
                        cabinet.settings.delAddress(this);
                        $(this).addClass("active");
                        b.addClass("removed");
                        b.find("input,textarea").attr("disabled", "disabled")
                    } else {
                        cabinet.settings.delAddress(this, true);
                        $(this).removeClass("active");
                        b.removeClass("removed");
                        b.find("input,textarea").removeAttr("disabled")
                    }
                })
            }
        }, reindexList: function () {
            this.addressesList.find("fieldset").each(function (a) {
                $(this).find("legend").text(a + 1)
            })
        }
    };
    $(document).on("change", ".set-main-address :checkbox", function (a) {
        if (!$(this).hasClass("active")) {
            cabinet.settings.address(this)
        }
        a.preventDefault()
    })
})();
var cabinet = {
    init: function (a) {
        if ($.fn.typeahead) {
            a = $(a);
            if (!a.hasClass("typeahead-loaded")) {
                a.addClass("typeahead-loaded");
                this.ac.cities(a.find(".ac-city"), a.find(".ac-street"));
                if (a.find(".ac-city").val() !== "") {
                    this.ac.streets(a.find(".ac-city").val(), a.find(".ac-street"))
                }
            }
        } else {
            window.setTimeout(function () {
                cabinet.init(a)
            }, 250)
        }
    }, settings: {
        chng: function (a, b) {
            b = $(b);
            b.attr("disabled", "disabled");
            var c = $.trim(b.val());
            if (c.length) {
                switch (a) {
                    case"FIO":
                        c = c.split(" ");
                        for (var d = 0; d < c.length; d++) {
                            c[d] = c[d].substr(0, 1).toUpperCase() + c[d].substr(1)
                        }
                        c = c.join(" ");
                        b.val(c);
                        break;
                    case"Email":
                        var e = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                        if (!e.test(b.val())) {
                            b.addClass("error").removeAttr("disabled");
                            return false
                        }
                        break;
                    case"Password":
                        b = $("#field-password");
                        if (b.val().length < 1) {
                            b.val("").addClass("error").removeAttr("disabled");
                            return false
                        }
                        break
                }
                $.post("/", {
                    type: "ajax",
                    controller: "cabinet",
                    action: "changeField",
                    func: "set" + a,
                    value: c
                }, function (d) {
                    if (d && d.result) {
                        b.removeClass("error").addClass("success").removeAttr("disabled");
                        window.setTimeout(function () {
                            b.removeClass("success");
                            if (a == "Password") {
                                window.setTimeout(function () {
                                    $("#field-password").val("").siblings("a.button").trigger("click")
                                }, 1e3)
                            }
                        }, 1234);
                        if (a == "Phone") {
                            b.replaceWith('<span class="yourMail">' + (d.phone || c) + "</span>")
                        }
                        if (a == "Email") {
                            b.replaceWith('<span class="yourMail">' + c + "</span>")
                        }
                    } else {
                        b.addClass("error").removeAttr("disabled")
                    }
                }, "json")
            } else {
                b.val("").css({borderColor: "#bb3742"}).removeAttr("disabled")
            }
            return false
        }, subscription: function (a, b) {
            var c = b.checked ? "Y" : "N";
            b = $(b);
            b.attr("disabled", "disabled");
            $.post("/", {
                type: "ajax",
                controller: "cabinet",
                action: "subscription",
                subscription: a,
                value: c
            }, function () {
                b.removeAttr("disabled")
            }, "html");
            return false
        }, profile: function (a) {
            a = $(a);
            a.attr("disabled", "disabled");
            $.post("/", {type: "ajax", controller: "cabinet", action: "profile", value: a.val()}, function () {
                a.removeAttr("disabled")
            }, "html");
            return false
        }, address: function (a) {
            var b = $(a), c = $("#addressesList"), d = b.closest("fieldset"), e = d.find("form.addressField-form"), f = {}, g = ["type=ajax", "controller=cabinet", "action=address"], h = "";
            e.find(":input").each(function () {
                if (this.name) {
                    if (this.type.toLowerCase() === "checkbox") {
                        h = this.checked ? "Y" : "N"
                    } else {
                        h = this.value
                    }
                    f[this.name] = h;
                    g.push("data[" + this.name + "]=" + h)
                }
            });
            if (f.address_id || f.city_id && f.street) {
                if (!f.address_id) {
                    var i = $('<div class="ajax-loading-overlay"><div></div></div>');
                    d.prepend(i)
                } else {
                    b.attr("disabled", "disabled")
                }
                $.post("/", g.join("&"), function (a) {
                    if (typeof i !== "undefined") {
                        i.remove()
                    }
                    if (a && a.result && a.id) {
                        e.find("input[name='address_id']").val(a.id);
                        b.removeClass("error").addClass("success").removeAttr("disabled");
                        if (typeof f.isPrimary !== "undefined" && f.isPrimary === "Y") {
                            console.log("wat?");
                            c.find("form.addressField-form").each(function () {
                                var a = $(this);
                                a.find('input[name="isPrimary"]').each(function () {
                                    if (a[0] === e[0]) {
                                        $(this).prop("checked", true).prop("disabled", true);
                                        $(this).parent().addClass("active").find(".set-main-address__text").text(" ")
                                    } else {
                                        $(this).prop("disabled", false).prop("checked", false);
                                        $(this).parent().removeClass("active").find(".set-main-address__text").text("  ")
                                    }
                                })
                            });
                            $("#addressesList").prepend(d);
                            $("html,body").stop().animate({scrollTop: d.offset().top - 40}, "slow")
                        }
                        window.setTimeout(function () {
                            b.removeClass("success")
                        }, 1234)
                    } else {
                        b.addClass("error").removeAttr("disabled")
                    }
                }, "json")
            }
            return false
        }, delAddress: function (a, b) {
            var c = $(a).closest("fieldset"), d = c.find("input[name='address_id']").val();
            b = typeof b === "undefined" ? false : b;
            if (d) {
                $.post("/", {
                    type: "ajax",
                    controller: "cabinet",
                    action: "address",
                    delete: d,
                    restore: b ? "Y" : "N"
                }, function () {
                }, "json")
            }
        }
    }, history: {
        repeatOrder: function (a) {
            a = $(a);
            $.post("/", {
                type: "ajax",
                controller: "cabinet",
                action: "repeatOrder",
                id: a.data("item-id")
            }, function (a) {
                if (a && a.result) {
                    window.location.href = "/cart"
                } else {
                }
            }, "json");
            return false
        }
    }, ac: {
        cities: function (city, street) {
            city = $(city);
            var cityID = $("#" + city.attr("id").replace("city", "cityID"));
            var _ta;
            if (document.getElementById("field-city-datum")) {
                _ta = city.typeahead("destroy").typeahead({
                    name: "cities",
                    local: eval(document.getElementById("field-city-datum").innerHTML),
                    limit: 10
                })
            } else {
                _ta = city.typeahead("destroy").typeahead({
                    name: "cities",
                    remote: "/?type=ajax&controller=cities&action=autocomplete&term=%QUERY", limit: 10
                })
            }
            _ta.on("change", function () {
                if (!this.value) {
                    cityID.val("")
                }
                if (!cityID.val()) {
                    window.setTimeout(function () {
                        city.val("")
                    }, 25)
                }
            }).on("typeahead:selected", function (a, b) {
                cityID.val(b.id);
                cabinet.ac.streets(b.value, street);
                street.focus()
            }).on("typeahead:autocompleted", function (a, b) {
                cityID.val(b.id);
                cabinet.ac.streets(b.value, street);
                street.focus()
            })
        }, streets: function (a, b) {
            var c = [];
            $.get("https://geocode-maps.yandex.ru/1.x/?callback=?&format=json&geocode=" + encodeURIComponent(["", " ", " " + a].join(", ")), function (a) {
                if (a && a.response && a.response.GeoObjectCollection && a.response.GeoObjectCollection.featureMember) {
                    a = a.response.GeoObjectCollection.featureMember.shift();
                    a = a.GeoObject;
                    if (a.metaDataProperty && a.metaDataProperty.GeocoderMetaData && a.metaDataProperty.GeocoderMetaData.text) {
                        c = a.metaDataProperty.GeocoderMetaData.text.split(", ")
                    } else if (a.name) {
                        c.push(a.GeoObject.name)
                    }
                }
            }, "json");
            if (c.length < 1) {
                c.push("");
                c.push(" ");
                c.push(" " + a)
            }
            b.typeahead("destroy").typeahead({
                name: "streets_",
                remote: {
                    url: "https://geocode-maps.yandex.ru/1.x/?callback=?&format=json&geocode=" + c.join(",+") + ",+%QUERY",
                    filter: function (b) {
                        var d = [];
                        c = [];
                        c.push("");
                        c.push(" ");
                        c.push(a);
                        if (b && b.response && b.response.GeoObjectCollection) {
                            b = b.response.GeoObjectCollection;
                            var e;
                            if (b.featureMember) {
                                for (var f in b.featureMember) {
                                    e = b.featureMember[f];
                                    if ($.inArray(e.GeoObject.name, c) < 0) {
                                        d.push({value: e.GeoObject.name})
                                    }
                                }
                            }
                        }
                        if (d.length == 1 && c.join(", ").indexOf(d[0].value) > 1) {
                            d = []
                        }
                        return d
                    }
                },
                limit: 10
            }).on("typeahead:selected", function (a, b) {
                if (b.value.indexOf(", ") < 1) {
                    $(this).val(b.value + ", ")
                } else {
                    $("#" + this.id.replace("street", "flat")).focus()
                }
            }).on("typeahead:autocompleted", function (a, b) {
                if (b.value.indexOf(", ") < 1) {
                    $(this).val(b.value + ", ")
                } else {
                    $("#" + this.id.replace("street", "flat")).focus()
                }
            })
        }
    }
};
var social = {
    vk: {
        login: function (a) {
            if (a.session) {
                $.post("/", {
                    type: "ajax",
                    controller: "cabinet",
                    action: "social",
                    method: "login_vk",
                    data: a.session
                }, function (a) {
                    if (a && a.result) {
                        if (a.registered) {
                            ga("send", "event", "", "click", "")
                        }
                        if (document.getElementById("login_ret") && document.getElementById("login_ret").value) {
                            top.window.location.href = document.getElementById("login_ret").value
                        } else {
                            top.window.location.href = "/cabinet"
                        }
                    }
                }, "json")
            }
        }, connect: function (a) {
            if (a.session) {
                $.post("/", {
                    type: "ajax",
                    controller: "cabinet",
                    action: "social",
                    method: "connect_vk",
                    data: a.session
                }, function (a) {
                    if (a && a.result) {
                        $("#social-connect-vk-container").replaceWith('<p><label></label><a class="button vk active"><span class="font-icon-vk"></span> </a></p>')
                    }
                }, "json")
            }
        }
    }, fb: {
        login: function (a) {
            if (a.status && a.status == "connected") {
                $.post("/", {
                    type: "ajax",
                    controller: "cabinet",
                    action: "social",
                    method: "login_fb",
                    data: a.authResponse
                }, function (a) {
                    if (a && a.result) {
                        if (a.registered) {
                            ga("send", "event", "", "click", "Facebook")
                        }
                        if (document.getElementById("login_ret") && document.getElementById("login_ret").value) {
                            top.window.location.href = document.getElementById("login_ret").value
                        } else {
                            top.window.location.href = "/cabinet"
                        }
                    }
                }, "json")
            }
        }, connect: function (a) {
            if (a.status && a.status == "connected") {
                $.post("/", {
                    type: "ajax",
                    controller: "cabinet",
                    action: "social",
                    method: "connect_fb",
                    data: a.authResponse
                }, function (a) {
                    if (a && a.result) {
                        if (a && a.result) {
                            $("#social-connect-fb-container").replaceWith('<p><label></label><a class="button fb active"><span class="font-icon-facebook"></span> </a></p>')
                        }
                    }
                }, "json")
            }
        }
    }, ok: {
        login: function (a) {
            if (a) {
                $.post("/", {
                    type: "ajax",
                    controller: "cabinet",
                    action: "social",
                    method: "login_ok",
                    data: a
                }, function (a) {
                    if (a && a.result) {
                        if (a.registered) {
                            ga("send", "event", "", "click", "")
                        }
                        if (document.getElementById("login_ret") && document.getElementById("login_ret").value) {
                            top.window.location.href = document.getElementById("login_ret").value
                        } else {
                            top.window.location.href = "/cabinet"
                        }
                    }
                }, "json")
            }
        }, connect: function (a) {
            if (a) {
                $.post("/", {
                    type: "ajax",
                    controller: "cabinet",
                    action: "social",
                    method: "connect_ok",
                    data: a
                }, function (a) {
                    if (a && a.result) {
                        if (a && a.result) {
                            $("#social-connect-ok-container").replaceWith('<p><label></label><a class="button ok active"><span class="font-icon-odnoklassniki"></span> </a></p>')
                        }
                    }
                }, "json")
            }
        }
    }
};
//# sourceMappingURL=minified.js.map